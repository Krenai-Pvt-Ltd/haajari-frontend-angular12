<form #profileForm="ngForm" ngNativeValidate (ngSubmit)="saveOrganizationProfile()">
    <div class="p-4 mb-10">
        <div class="row">
            <div class="col-md-4">
                <div class="payroll-details-box">
                    <h4 class="font-13 text-black fw-semibold lh-1">Organization Logo</h4>
                    <p class="text-muted font-11 fw-normal lh-base">Update your Company Logo and then choose <br> where you want it to display</p>
                </div>
            </div>
            <div class="col-md-8">
                <div class="organization-detail">
                    <div class="row">
                        <div class="col-md-6" *ngIf="!constant.EMPTY_STRINGS.includes(profile.logo)">
                            <div class="origination-logo d-flex align-items-center justify-content-center position-relative p-0 border-rounded-2 h-100">
                                <img [src]="profile.logo" class="img-130">
                            </div>
                        </div>
                      
                        <div [ngClass]="{'col-md-6':!constant.EMPTY_STRINGS.includes(profile.logo), 'col-md-12': constant.EMPTY_STRINGS.includes(profile.logo)}">
                            <div class=" origination-logo p-2 d-flex align-items-center justify-content-center flex-column add-other-file border-rounded-2 h-100" (click)="fileInput.click()">
                                <input #fileInput type="file" (change)="fileChangeEvent($event)" accept="image/*" hidden ngModel/>
                                <ngx-photo-editor
                                  [imageChangedEvent]="imageChangedEvent"
                                  (imageCropped)="imageCropped($event)"
                                  [aspectRatio]="4/3"
                                  [viewMode]="1"
                                  [resizeToWidth]="800"></ngx-photo-editor>
                                <span>
                                  <img *ngIf="!isUploading" src="assets/images/payrollstep-img/organization-logo.svg" class="img-40">
                                  <img *ngIf="isUploading" src="assets/images/payrollstep-img/tube-spinner.svg" class="img-40 animate-spin" width="40" height="40">
                                </span>
                                <p class="mb-0 font-11 fw-normal mt-11 "><span class="text-primary fw-semibold text-decoration-underline pointer"> Click to upload </span> or drag and drop <span class="text-muted fw-semibold">(SVG, PNG, JPG or JPEG)</span> </p>
                             </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <hr class="mt-5 mb-5">
        <div class="row">
            <div class="col-md-4">
                <div class="payroll-details-box">
                    <h4 class="font-13 text-black fw-semibold lh-1">Organization Detail</h4>
                    <p class="text-muted font-11 fw-normal lh-base">Your registered business name, displayed on<br> all forms and payslips.</p>
                </div>
            </div>
            <div class="col-md-8">
                <div class="organization-detail">
                    <div class="row">
                        <div class="col-md-12 mb-3">
                            <input type="text" placeholder="Company Name" required name="companyName" class="form-control whatsapp-login-input" [value]="profile.companyName" disabled>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="border-rounded-2 attendance-border w-100 d-flex align-items-center justify-content-center">
                                <div class="w-50 currency-types-border">
                                    <p class="mb-0 font-12 fw-light">Currency Types</p><span class="text-danger">*</span>
                                </div>
                                <div class="w-50">
                                    <div class="w-100">
                                        <nz-select 
                                        class="form-control w-100 placeholder-line currency-types"
                                        nzSize="large"
                                        name="currency"
                                        nzPlaceHolder="Select Currency"
                                        [(ngModel)]="profile.currency"
                                        required
                                      >
                                      <nz-option nzLabel="INR" nzValue="INR">INR</nz-option>
                                      </nz-select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="border-rounded-2 attendance-border w-100 d-flex align-items-center justify-content-center">
                                <div class="w-50 currency-types-border">
                                    <p class="mb-0 font-12 fw-light">Business Location</p><span class="text-danger">*</span>
                                </div>
                                <div class="w-50">
                                    <div class="w-100">
                                        <nz-select name="location"
                                            class="form-control w-100 placeholder-line currency-types"
                                            nzSize="large"
                                            nzPlaceHolder="Select Location"
                                            [(ngModel)]="selectedLocation"
                                            required
                                            >
                                            <nz-option nzLabel="India" nzValue="India">India</nz-option>
                                            </nz-select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="border-rounded-2 attendance-border w-100 d-flex align-items-center justify-content-center">
                                <div class="w-50 currency-types-border">
                                    <p class="mb-0 font-12 fw-light">Date Format</p>
                                </div>
                                <div class="w-50">
                                    <nz-select name="dateFormat"
                                        class="form-control w-100 placeholder-line currency-types"
                                        nzSize="large"
                                        nzPlaceHolder="Select date format"
                                        [(ngModel)]="profile.dateFormat"
                                        (ngModelChange)="onDateFormatChange($event)">
                                        <nz-option 
                                        *ngFor="let format of dateFormats" [nzValue]="format.value" [nzLabel]="format.label">
                                        </nz-option>
                                    </nz-select>
                                    
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="border-rounded-2 attendance-border w-100 d-flex align-items-center justify-content-center">
                                <input type="text" placeholder="Formated Date"  name="formatedDate" class="form-control whatsapp-login-input" 
                                [(ngModel)]="formattedDate" disabled>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <input type="text" placeholder="Business Contact"  name="contactNumber" class="form-control whatsapp-login-input" 
                             minlength="10" maxlength="10" pattern="[0-9]*" inputmode="numeric" [(ngModel)]="profile.businessPhone">
                        </div>
                        <div class="col-md-6">
                            <input type="email" placeholder="Business Email" name="businessEmail" class="form-control whatsapp-login-input" 
                            [(ngModel)]="profile.businessEmail">
                        </div> 
                </div>
            </div>
        </div>
        <hr class="mt-5 mb-5">
        <div class="row">
            <div class="col-md-4">
                <div class="payroll-details-box">
                    <h4 class="font-13 text-black fw-semibold lh-1">Filling Address</h4>
                    <p class="text-muted font-11 lh-base fw-normal">This will be considered as the address of your <br> primary work location</p>
                </div>
            </div>
            <div class="col-md-8">
                <div class="Address-box">
                    <div class="empty-file" *ngIf="isWorkLocationFalse()">
                        <nz-empty nzNotFoundImage="assets/images/location-setting-icon.svg" [nzNotFoundContent]="contentTpl">
                          <ng-template #contentTpl>
                            <p class="mb-1 empty-detail font-14">
                              Enter your work space location
                            </p>
                            <div class="add-filtter d-flex align-items-center justify-content-center gap-3 mt-3">
                              <button *ngIf="organizationAddress.length>0" type="button" class="btn fatchLocationBtn font-13 fw-semibold" data-bs-toggle="modal" data-bs-target="#fetchLocation">
                                Fetch location
                              </button>
                              <button type="button" class="btn submitActionBtn text-white font-13 fw-semibold"  (click)="openLocationModal()">
                                Add location
                              </button>
                            </div>
                          </ng-template>
                        </nz-empty>
                    </div>
                   <div class="row" *ngIf="!isWorkLocationFalse()">
                      <div class="address-list" *ngFor="let address of organizationAddress; let i = index;">
                       <div class="mb-3 p-2 payroll-address border-rounded-2 ">
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="d-flex align-items-center gap-3">
                                    <span class="list-down-btn border-rounded-2 bg-white d-flex align-items-center justify-content-center" [attr.aria-expanded]="isDropdownOpen(i)" 
                                    (click)="toggleDropdown(i)" data-bs-toggle="collapse" [attr.data-bs-target]="'#location-data'+i"  role="button" aria-expanded="false" [attr.aria-controls]="'#location-data' + i">
                                        <i class="bi bi-chevron-down transition "></i>
                                    </span>
                                    <p class="mb-0 fw-semibold font-13">{{address.organizationAddress.branch}}</p>
                                </div>
                                <div class="d-flex align-items-center gap-3">
                                    <span class="pointer"  (click)="openLocationEditModal(address.organizationAddress.id,address,'location')">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="22" viewBox="0 0 24 22" fill="none">
                                            <mask id="mask0_9177_4748" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="24" height="22">
                                            <rect x="0.983887" width="22.3492" height="22" fill="#444444"/>
                                            </mask>
                                            <g mask="url(#mask0_9177_4748)">
                                            <path d="M5.64048 17.4173H6.81521L16.3476 8.03386L15.1729 6.87748L5.64048 16.2609V17.4173ZM4.24365 18.7923V15.6899L16.5269 3.60384C16.6676 3.47795 16.8231 3.38071 16.9932 3.31211C17.1634 3.24336 17.3419 3.20898 17.5286 3.20898C17.7153 3.20898 17.8961 3.2416 18.0711 3.30684C18.2461 3.37208 18.4011 3.47581 18.536 3.61805L19.6732 4.75151C19.8177 4.88427 19.9207 5.03705 19.9821 5.20984C20.0436 5.38263 20.0743 5.55542 20.0743 5.72821C20.0743 5.91262 20.0424 6.08854 19.9784 6.25598C19.9145 6.42358 19.8127 6.57666 19.6732 6.71523L7.39536 18.7923H4.24365ZM15.75 7.46575L15.1729 6.87748L16.3476 8.03386L15.75 7.46575Z" fill="#444444"/>
                                            </g>
                                        </svg>
                                    </span>
                                    <span class="pointer" (click)="openLocationEditModal(address.organizationAddress.id,address,'employee')">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="22" viewBox="0 0 24 22" fill="none">
                                            <mask id="mask0_9177_4745" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="24" height="22">
                                            <rect x="0.713867" width="22.3492" height="22" fill="#D9D9D9"/>
                                            </mask>
                                            <g mask="url(#mask0_9177_4745)">
                                            <path d="M2.38818 17.6983V15.6603C2.38818 15.188 2.51204 14.7664 2.75974 14.3956C3.00744 14.0248 3.33826 13.7363 3.75218 13.5302C4.63715 13.1041 5.52701 12.7756 6.42175 12.5446C7.31665 12.3137 8.30009 12.1983 9.37208 12.1983C10.4442 12.1983 11.4277 12.3137 12.3224 12.5446C13.2173 12.7756 14.1072 13.1041 14.9922 13.5302C15.4061 13.7363 15.7369 14.0248 15.9847 14.3956C16.2324 14.7664 16.3562 15.188 16.3562 15.6603V17.6983H2.38818ZM18.2186 17.6983V15.5476C18.2186 14.946 18.069 14.3725 17.7698 13.8272C17.4704 13.2821 17.0458 12.8144 16.4959 12.4241C17.1203 12.5157 17.7131 12.6576 18.2743 12.8496C18.8353 13.0418 19.3708 13.2689 19.8806 13.5309C20.3618 13.7836 20.7333 14.0815 20.9953 14.4244C21.2573 14.7673 21.3883 15.1417 21.3883 15.5476V17.6983H18.2186ZM9.37208 10.7174C8.47578 10.7174 7.70854 10.4033 7.07034 9.77512C6.43215 9.14674 6.11305 8.39141 6.11305 7.50911C6.11305 6.62682 6.43215 5.87157 7.07034 5.24334C7.70854 4.61497 8.47578 4.30078 9.37208 4.30078C10.2684 4.30078 11.0357 4.61497 11.674 5.24334C12.3122 5.87157 12.6313 6.62682 12.6313 7.50911C12.6313 8.39141 12.3122 9.14674 11.674 9.77512C11.0357 10.4033 10.2684 10.7174 9.37208 10.7174ZM17.4127 7.50911C17.4127 8.39141 17.0936 9.14674 16.4554 9.77512C15.8172 10.4033 15.0499 10.7174 14.1536 10.7174C14.0486 10.7174 13.9149 10.7057 13.7525 10.6822C13.59 10.6586 13.4563 10.6328 13.3514 10.6047C13.7186 10.17 14.0008 9.68788 14.1981 9.1582C14.3952 8.62852 14.4938 8.07852 14.4938 7.5082C14.4938 6.93773 14.3932 6.38979 14.1921 5.86439C13.9909 5.33913 13.7107 4.85559 13.3514 4.41376C13.485 4.3667 13.6187 4.33615 13.7525 4.32209C13.8862 4.30789 14.0199 4.30078 14.1536 4.30078C15.0499 4.30078 15.8172 4.61497 16.4554 5.24334C17.0936 5.87157 17.4127 6.62682 17.4127 7.50911ZM3.78478 16.3233H14.9594V15.6603C14.9594 15.4689 14.9107 15.2986 14.8134 15.1493C14.7163 15 14.562 14.8696 14.3506 14.7579C13.5842 14.3689 12.7951 14.0742 11.9832 13.8738C11.1713 13.6735 10.301 13.5733 9.37208 13.5733C8.44334 13.5733 7.57304 13.6735 6.76118 13.8738C5.94931 14.0742 5.16018 14.3689 4.39379 14.7579C4.18241 14.8696 4.02806 15 3.93074 15.1493C3.83343 15.2986 3.78478 15.4689 3.78478 15.6603V16.3233ZM9.37208 9.34245C9.88425 9.34245 10.3227 9.16293 10.6874 8.80391C11.0521 8.44488 11.2345 8.01328 11.2345 7.50911C11.2345 7.00495 11.0521 6.57335 10.6874 6.21432C10.3227 5.8553 9.88425 5.67578 9.37208 5.67578C8.85991 5.67578 8.42146 5.8553 8.05673 6.21432C7.69201 6.57335 7.50964 7.00495 7.50964 7.50911C7.50964 8.01328 7.69201 8.44488 8.05673 8.80391C8.42146 9.16293 8.85991 9.34245 9.37208 9.34245Z" fill="#444444"/>
                                            </g>
                                        </svg>
                                    </span>
                                    <span class="pointer" (click)="deleteLocation(address.organizationAddress.id)">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" viewBox="0 0 23 23" fill="none">
                                            <mask id="mask0_9177_4742" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="23" height="23">
                                            <rect x="0.444336" y="0.164062" width="22.3492" height="22" fill="#D9D9D9"/>
                                            </mask>
                                            <g mask="url(#mask0_9177_4742)">
                                            <path d="M7.24939 18.956C6.78502 18.956 6.38832 18.7941 6.05929 18.4704C5.73042 18.1465 5.56598 17.756 5.56598 17.2989V5.66431H4.63477V4.28931H8.82524V3.47852H14.4125V4.28931H18.603V5.66431H17.6718V17.2989C17.6718 17.7619 17.5088 18.1539 17.1829 18.4747C16.857 18.7956 16.4588 18.956 15.9884 18.956H7.24939ZM16.275 5.66431H6.96281V17.2989C6.96281 17.3812 6.98966 17.4488 7.04336 17.5017C7.09706 17.5545 7.16574 17.581 7.24939 17.581H15.9884C16.0601 17.581 16.1258 17.5516 16.1853 17.4927C16.2451 17.4341 16.275 17.3695 16.275 17.2989V5.66431ZM9.20145 15.7476H10.598V7.49764H9.20145V15.7476ZM12.6397 15.7476H14.0363V7.49764H12.6397V15.7476Z" fill="#FF0000"/>
                                            </g>
                                        </svg>
                                    </span>
                                </div>
                            
                            </div>
                  <div class="collapse mt-3" [id]="'location-data' + i" [class.show]="isDropdownOpen(i)">
                    <div class="card card-body border-rounded-2 border-0 mb-0">
                      <div class="row">
                        <div class="col-md-4">
                            <div class="mb-3">
                                <p class="mb-0 font-12 fw-normal"> Address Line 1 : 
                                  <span class="location-data"> {{!constant.EMPTY_STRINGS.includes(address.organizationAddress.addressLine1)?address.organizationAddress.addressLine1: 'N/A'}}</span>
                                </p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-3">
                                <p class="mb-0 font-12 fw-normal"> Address Line 2 : 
                                  <span class="location-data">{{!constant.EMPTY_STRINGS.includes(address.organizationAddress.addressLine2)?address.organizationAddress.addressLine2: 'N/A'}}</span>
                                </p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-3">
                                <p class="mb-0 font-12 fw-normal"> City : 
                                  <span class="location-data">{{!constant.EMPTY_STRINGS.includes(address.organizationAddress.city)?address.organizationAddress.city: 'N/A'}}</span>
                                </p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-3">
                                <p class="mb-0 font-12 fw-normal"> State : 
                                  <span class="location-data">{{!constant.EMPTY_STRINGS.includes(address.organizationAddress.state)?address.organizationAddress.state: 'N/A'}}</span>
                                </p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="mb-3">
                                <p class="mb-0 font-12 fw-normal"> Pin Code :  
                                  <span class="location-data">{{!constant.EMPTY_STRINGS.includes(address.organizationAddress.pincode)?address.organizationAddress.pincode: 'N/A'}}</span>
                                </p>
                            </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!--  location list toggle view end -->
                    </div> 

                      </div>
                      <div class="d-flex justify-content-end">
                        <button class="btn p-0 font-14 fw-semibold text-primary"  type="button" (click)="openLocationModal()">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="21" viewBox="0 0 20 21" fill="none">
                                <mask id="mask0_9159_3509" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="21">
                                <rect y="0.5" width="20" height="20" fill="#D9D9D9"/>
                                </mask>
                                <g mask="url(#mask0_9159_3509)">
                                <path d="M9.37504 11.1257H4.58337V9.87565H9.37504V5.08398H10.625V9.87565H15.4167V11.1257H10.625V15.9173H9.37504V11.1257Z" fill="#6666F2"/>
                                </g>
                            </svg>
                            New Address
                        </button>
                      </div>
                   </div>
                </div>
            </div>
        </div>
        
        <div class="row" *ngIf="!constant.EMPTY_STRINGS.includes(profile.gstn) || !constant.EMPTY_STRINGS.includes(profile.cin) || 
        !constant.EMPTY_STRINGS.includes(profile.epf) || !constant.EMPTY_STRINGS.includes(profile.esi)">
        <hr class="mt-5 mb-5">
            <div class="col-md-4">
                <div class="payroll-details-box">
                    <h4 class="font-13 text-black fw-semibold lh-1">Company Registration & Compliance</h4>
                    <p class=" mb-0 text-muted font-11 lh-base fw-normal">Subheading: Official Business Identification <br> & Compliance Codes</p>
                </div>
            </div>
            <div class="col-md-8">
                <div class="compliance-list-box">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="mb-3 compliance-list bg-white border-rounded-2 attendance-border d-flex align-items-center justify-content-center" *ngIf="!constant.EMPTY_STRINGS.includes(profile.gstn)">
                                <div class="w-25 currency-types-border">
                                    <p class="mb-0 font-12 fw-light">GST Number</p>
                                </div>
                                <div class="w-75 position-relative">
                                    <input type="text" placeholder="Enter GST Number"  name="gstn" class="form-control borderLess" [value]="profile.gstn" disabled>
                                    <button class="btn p-0 font-13 fw-semibold text-success editBtn" type="button">Verify <svg xmlns="http://www.w3.org/2000/svg" width="18" height="17" viewBox="0 0 18 17" fill="none">
                                        <path d="M7.72809 8.00564C7.44476 7.72231 7.01976 7.72231 6.73643 8.00564C6.45309 8.28897 6.45309 8.71397 6.73643 8.99731L8.86143 11.1223C9.00309 11.264 9.14476 11.3348 9.35726 11.3348C9.56976 11.3348 9.71143 11.264 9.85309 11.1223L14.8114 5.45564C15.0239 5.10147 15.0239 4.67647 14.6698 4.46397C14.3864 4.25147 13.9614 4.25147 13.7489 4.53481L9.35726 9.56397L7.72809 8.00564Z" fill="#22b783"/>
                                        <path d="M15.7323 7.79297C15.3073 7.79297 15.0239 8.0763 15.0239 8.5013C15.0239 11.618 12.4739 14.168 9.35726 14.168C6.24059 14.168 3.69059 11.618 3.69059 8.5013C3.69059 7.0138 4.25726 5.59714 5.31976 4.53464C6.38226 3.4013 7.79893 2.83464 9.35726 2.83464C9.78226 2.83464 10.2781 2.90547 10.7031 2.9763C11.0573 3.11797 11.4823 2.90547 11.6239 2.48047C11.7656 2.05547 11.4823 1.77214 11.1281 1.63047H11.0573C10.4906 1.4888 9.92393 1.41797 9.35726 1.41797C5.46143 1.41797 2.27393 4.60547 2.27393 8.57214C2.27393 10.4138 3.05309 12.2555 4.32809 13.5305C5.67393 14.8763 7.44476 15.5846 9.28643 15.5846C13.1823 15.5846 16.3698 12.3971 16.3698 8.5013C16.4406 8.0763 16.0864 7.79297 15.7323 7.79297Z" fill="#22b783"/>
                                        </svg></button>
                                </div>
                            </div>
                            <div class="mb-3 compliance-list bg-white border-rounded-2 attendance-border d-flex align-items-center justify-content-center" *ngIf="!constant.EMPTY_STRINGS.includes(profile.cin)">
                                <div class="w-25 currency-types-border">
                                    <p class="mb-0 font-12 fw-light">CIN Number</p>
                                </div>
                                <div class="w-75 position-relative">
                                    <input type="text" placeholder="Enter CIN Number" name="cin" class="form-control borderLess" [value]="profile.cin" disabled>
                                    <!-- <button class="btn p-0 font-13 fw-semibold text-black editBtn">View Detail 
                                        <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 17 17" fill="none">
                                            <mask id="mask0_9159_3729" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="17" height="17">
                                            <rect width="17" height="17" fill="#D9D9D9"/>
                                            </mask>
                                            <g mask="url(#mask0_9159_3729)">
                                            <path d="M8.50004 11.334C9.38546 11.334 10.1381 11.0241 10.7579 10.4043C11.3776 9.7845 11.6875 9.0319 11.6875 8.14648C11.6875 7.26107 11.3776 6.50846 10.7579 5.88867C10.1381 5.26888 9.38546 4.95898 8.50004 4.95898C7.61462 4.95898 6.86202 5.26888 6.24223 5.88867C5.62244 6.50846 5.31254 7.26107 5.31254 8.14648C5.31254 9.0319 5.62244 9.7845 6.24223 10.4043C6.86202 11.0241 7.61462 11.334 8.50004 11.334ZM8.50004 10.059C7.96879 10.059 7.51723 9.87305 7.14535 9.50117C6.77348 9.1293 6.58754 8.67773 6.58754 8.14648C6.58754 7.61523 6.77348 7.16367 7.14535 6.7918C7.51723 6.41992 7.96879 6.23398 8.50004 6.23398C9.03129 6.23398 9.48285 6.41992 9.85473 6.7918C10.2266 7.16367 10.4125 7.61523 10.4125 8.14648C10.4125 8.67773 10.2266 9.1293 9.85473 9.50117C9.48285 9.87305 9.03129 10.059 8.50004 10.059ZM8.50004 13.459C6.77643 13.459 5.20629 12.9779 3.78962 12.0158C2.37296 11.0536 1.34587 9.76385 0.708374 8.14648C1.34587 6.52912 2.37296 5.23937 3.78962 4.27721C5.20629 3.31506 6.77643 2.83398 8.50004 2.83398C10.2237 2.83398 11.7938 3.31506 13.2105 4.27721C14.6271 5.23937 15.6542 6.52912 16.2917 8.14648C15.6542 9.76385 14.6271 11.0536 13.2105 12.0158C11.7938 12.9779 10.2237 13.459 8.50004 13.459ZM8.50004 12.0423C9.83407 12.0423 11.0589 11.6911 12.1745 10.9887C13.2901 10.2862 14.1431 9.33885 14.7334 8.14648C14.1431 6.95412 13.2901 6.00673 12.1745 5.3043C11.0589 4.60187 9.83407 4.25065 8.50004 4.25065C7.16601 4.25065 5.94119 4.60187 4.82556 5.3043C3.70994 6.00673 2.85699 6.95412 2.26671 8.14648C2.85699 9.33885 3.70994 10.2862 4.82556 10.9887C5.94119 11.6911 7.16601 12.0423 8.50004 12.0423Z" fill="#000"/>
                                            </g>
                                        </svg>
                                    </button> -->
                                </div>
                            </div>
                            <div class="mb-3 compliance-list bg-white border-rounded-2 attendance-border d-flex align-items-center justify-content-center" *ngIf="!constant.EMPTY_STRINGS.includes(profile.epf)">
                                <div class="w-25 currency-types-border">
                                    <p class="mb-0 font-12 fw-light">EPF Number</p>
                                </div>
                                <div class="w-75 position-relative">
                                    <input type="text" placeholder="EPF Number" name="epf" class="form-control borderLess" [value]="profile.epf" disabled>
                                    <button class="btn p-0 font-13 fw-semibold text-black editBtn" type="button" (click)="routeToStatutory()">
                                        <span>View Detail</span>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 17 17" fill="none">
                                            <mask id="mask0_9159_3729" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="17" height="17">
                                            <rect width="17" height="17" fill="#D9D9D9"/>
                                            </mask>
                                            <g mask="url(#mask0_9159_3729)">
                                            <path d="M8.50004 11.334C9.38546 11.334 10.1381 11.0241 10.7579 10.4043C11.3776 9.7845 11.6875 9.0319 11.6875 8.14648C11.6875 7.26107 11.3776 6.50846 10.7579 5.88867C10.1381 5.26888 9.38546 4.95898 8.50004 4.95898C7.61462 4.95898 6.86202 5.26888 6.24223 5.88867C5.62244 6.50846 5.31254 7.26107 5.31254 8.14648C5.31254 9.0319 5.62244 9.7845 6.24223 10.4043C6.86202 11.0241 7.61462 11.334 8.50004 11.334ZM8.50004 10.059C7.96879 10.059 7.51723 9.87305 7.14535 9.50117C6.77348 9.1293 6.58754 8.67773 6.58754 8.14648C6.58754 7.61523 6.77348 7.16367 7.14535 6.7918C7.51723 6.41992 7.96879 6.23398 8.50004 6.23398C9.03129 6.23398 9.48285 6.41992 9.85473 6.7918C10.2266 7.16367 10.4125 7.61523 10.4125 8.14648C10.4125 8.67773 10.2266 9.1293 9.85473 9.50117C9.48285 9.87305 9.03129 10.059 8.50004 10.059ZM8.50004 13.459C6.77643 13.459 5.20629 12.9779 3.78962 12.0158C2.37296 11.0536 1.34587 9.76385 0.708374 8.14648C1.34587 6.52912 2.37296 5.23937 3.78962 4.27721C5.20629 3.31506 6.77643 2.83398 8.50004 2.83398C10.2237 2.83398 11.7938 3.31506 13.2105 4.27721C14.6271 5.23937 15.6542 6.52912 16.2917 8.14648C15.6542 9.76385 14.6271 11.0536 13.2105 12.0158C11.7938 12.9779 10.2237 13.459 8.50004 13.459ZM8.50004 12.0423C9.83407 12.0423 11.0589 11.6911 12.1745 10.9887C13.2901 10.2862 14.1431 9.33885 14.7334 8.14648C14.1431 6.95412 13.2901 6.00673 12.1745 5.3043C11.0589 4.60187 9.83407 4.25065 8.50004 4.25065C7.16601 4.25065 5.94119 4.60187 4.82556 5.3043C3.70994 6.00673 2.85699 6.95412 2.26671 8.14648C2.85699 9.33885 3.70994 10.2862 4.82556 10.9887C5.94119 11.6911 7.16601 12.0423 8.50004 12.0423Z" fill="#000"/>
                                            </g>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            <div class="mb-3 compliance-list bg-white border-rounded-2 attendance-border d-flex align-items-center justify-content-center" *ngIf="!constant.EMPTY_STRINGS.includes(profile.esi)">
                                <div class="w-25 currency-types-border">
                                    <p class="mb-0 font-12 fw-light">ESI Number</p>
                                </div>
                                <div class="w-75 position-relative ">
                                    <input type="text" placeholder="ESI number"  name="esi" class="form-control borderLess" [value]="profile.esi" disabled>
                                    <button class="btn p-0 font-13 fw-semibold text-black editBtn" type="button" (click)="routeToStatutory()">
                                        <span>View Detail</span>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 17 17" fill="none">
                                            <mask id="mask0_9159_3729" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="17" height="17">
                                            <rect width="17" height="17" fill="#D9D9D9"/>
                                            </mask>
                                            <g mask="url(#mask0_9159_3729)">
                                            <path d="M8.50004 11.334C9.38546 11.334 10.1381 11.0241 10.7579 10.4043C11.3776 9.7845 11.6875 9.0319 11.6875 8.14648C11.6875 7.26107 11.3776 6.50846 10.7579 5.88867C10.1381 5.26888 9.38546 4.95898 8.50004 4.95898C7.61462 4.95898 6.86202 5.26888 6.24223 5.88867C5.62244 6.50846 5.31254 7.26107 5.31254 8.14648C5.31254 9.0319 5.62244 9.7845 6.24223 10.4043C6.86202 11.0241 7.61462 11.334 8.50004 11.334ZM8.50004 10.059C7.96879 10.059 7.51723 9.87305 7.14535 9.50117C6.77348 9.1293 6.58754 8.67773 6.58754 8.14648C6.58754 7.61523 6.77348 7.16367 7.14535 6.7918C7.51723 6.41992 7.96879 6.23398 8.50004 6.23398C9.03129 6.23398 9.48285 6.41992 9.85473 6.7918C10.2266 7.16367 10.4125 7.61523 10.4125 8.14648C10.4125 8.67773 10.2266 9.1293 9.85473 9.50117C9.48285 9.87305 9.03129 10.059 8.50004 10.059ZM8.50004 13.459C6.77643 13.459 5.20629 12.9779 3.78962 12.0158C2.37296 11.0536 1.34587 9.76385 0.708374 8.14648C1.34587 6.52912 2.37296 5.23937 3.78962 4.27721C5.20629 3.31506 6.77643 2.83398 8.50004 2.83398C10.2237 2.83398 11.7938 3.31506 13.2105 4.27721C14.6271 5.23937 15.6542 6.52912 16.2917 8.14648C15.6542 9.76385 14.6271 11.0536 13.2105 12.0158C11.7938 12.9779 10.2237 13.459 8.50004 13.459ZM8.50004 12.0423C9.83407 12.0423 11.0589 11.6911 12.1745 10.9887C13.2901 10.2862 14.1431 9.33885 14.7334 8.14648C14.1431 6.95412 13.2901 6.00673 12.1745 5.3043C11.0589 4.60187 9.83407 4.25065 8.50004 4.25065C7.16601 4.25065 5.94119 4.60187 4.82556 5.3043C3.70994 6.00673 2.85699 6.95412 2.26671 8.14648C2.85699 9.33885 3.70994 10.2862 4.82556 10.9887C5.94119 11.6911 7.16601 12.0423 8.50004 12.0423Z" fill="#000"/>
                                            </g>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="footer position-fixed bg-white d-flex align-items-center  justify-content-end gap-2" *ngIf="!profileForm.pristine">
    <button type="submit" class="btn submitActionBtn font-13 fw-semibold text-white" [ngClass]="{'disabled-lnk':saveLoader}">
        <div *ngIf="saveLoader" class="dot-opacity-loader">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <span *ngIf="!saveLoader"> Save </span>      
    </button>
</div>
</form>

<!----------------------------------- ADDRESS MODAL START -------------------------->
  <button type="button" class="btn btn-primary d-none" data-bs-toggle="modal" data-bs-target="#location" #addLocation></button>
  <div class="modal fade" id="location" tabindex="-1" role="dialog"  aria-hidden="true" data-bs-backdrop="static">
  <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
      <div class="modal-content">
      <div class="modal-header">
          <h5 class="modal-title m-0"> Add New Location </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" #closeAddressModal></button>
      </div>
      <div class="modal-body p-0">
          <form #locationForm="ngForm" ngNativeValidate (ngSubmit)="saveUserWorkLocation()">

          <div class="add-location-modal">
          <div class="row h-100 p-0 m-0">
              <div class="col-md-3 p-0 m-0" >
              <div class="add-location-menu">
                  <div class="nav flex-column nav-pills pt-3" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                  <button class="nav-link active" id="locationSettingTab" data-bs-toggle="pill" data-bs-target="#staffLocation"
                      type="button" role="tab" #locationSettingTab>
                      Add Location
                  </button>
                  <button class="nav-link" id="profile-tab" data-bs-toggle="pill" data-bs-target="#addemployee"
                      type="button" role="tab" #staffSelectionTab [disabled]="!locationForm.valid">
                      Add Employee
                  </button>
                  </div>
              </div>
              </div>
              <div class="col-md-9 bg-white">
                  <div class="tab-content" id="myTabContent">
                      <div class="tab-pane show active" id="staffLocation" role="tabpanel" #staffLocation>
                          <div class="configuration-location p-3 row">
                              <div class="col-md-12 mb-3">
                                  <label for="addressLine1" class="pb-2">Branch Name </label><span class="text-danger">*</span>
                                  <input type="text" placeholder="Branch Name" required name="branchName" 
                                  maxlength="50"
                                  class="form-control whatsapp-login-input" 
                                  [(ngModel)]="organizationUserLocation.branch">
                              </div>
                              <div class="col-md-12 mb-3">
                                  <label for="addressLine1" class="pb-2">Address Line 1 </label><span class="text-danger">*</span>
                                  <input type="text" placeholder="Address Line 1" required name="addressLine1" 
                                  maxlength="50"
                                  class="form-control whatsapp-login-input" 
                                  [(ngModel)]="organizationUserLocation.addressLine1">
                              </div>
                              <div class="col-md-12 mb-3">
                                  <label for="addressLine1" class="pb-2">Address Line 2 </label>
                                  <input type="text" placeholder="Address Line 2"  name="addressLine2"
                                  maxlength="50" 
                                  class="form-control whatsapp-login-input"
                                  [(ngModel)]="organizationUserLocation.addressLine2">
                              </div>
                              <div class="col-md-4 mb-3">
                                  <label for="addressLine1" class="pb-2">Select State </label><span class="text-danger">*</span>
                                  <div class="w-100">
                                      <nz-select
                                      class="form-control w-100 placeholder-line"
                                      nzSize="large"
                                      nzPlaceHolder="Select State"
                                      name="state"
                                      [(ngModel)]="organizationUserLocation.state"
                                      [nzDisabled]="organizationUserLocation.id != 0"
                                      (ngModelChange)="onStateChange($event)"
                                      [nzShowSearch]="true"
                                      (nzSearchChange)="searchState($event)"
                                      required
                                  >
                                      <nz-option
                                          *ngFor="let state of stateList"
                                          [nzValue]="state.name"
                                          [nzLabel]="state.name"
                                      >
                                      </nz-option>
                                  </nz-select>
                                  
                                  </div>
                              </div>
                              <div class="col-md-4 mb-3">
                                  <label for="addressLine1" class="pb-2">Enter City </label><span class="text-danger">*</span>
                                  <input type="text" placeholder="City" required name="city"
                                  [(ngModel)]="organizationUserLocation.city"
                                  class="form-control whatsapp-login-input">
                              </div>
                              <div class="col-md-4 mb-3">
                                  <label for="addressLine1" class="pb-2">Enter PIN Code </label><span class="text-danger">*</span>
                                  <input type="text" placeholder="PIN Code" required name="pincode" 
                                  pattern="[0-9]*"
                                  inputmode="numeric"
                                  maxlength="6"
                                  [(ngModel)]="organizationUserLocation.pincode"
                                  class="form-control whatsapp-login-input">
                              </div>


                          </div>

                          <div class="modal-footer d-flex align-items-center justify-content-end bg-white config-location-footer">
                              <button  class="btn p-0 next-btn nextBtn"  id="profile-tab" data-bs-toggle="pill" data-bs-target="#addemployee"
                              type="button" role="tab" #staffSelectionTab [disabled]="!locationForm.valid" (click)="openStaffSelection()">
                                  <span>
                                      <span class="ng-star-inserted">Next</span>
                                      <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none">
                                          <path d="M1.95801 11.0005C1.95801 10.8131 2.01656 10.6609 2.13366 10.5438C2.25076 10.4267 2.40299 10.3681 2.59035 10.3681H18.1179L13.9725 6.22276C13.832 6.08224 13.7618 5.9183 13.7618 5.73094C13.7618 5.54358 13.832 5.39135 13.9725 5.27424C14.1131 5.15714 14.277 5.09859 14.4644 5.09859C14.6517 5.09859 14.8157 5.14543 14.9562 5.23911L20.2257 10.5086C20.3194 10.6492 20.3662 10.8131 20.3662 11.0005C20.3662 11.1878 20.3194 11.3518 20.2257 11.4923L14.9562 16.7618C14.8157 16.8555 14.6517 16.9023 14.4644 16.9023C14.277 16.9023 14.1131 16.8438 13.9725 16.7267C13.832 16.6096 13.7618 16.4574 13.7618 16.27C13.7618 16.0826 13.832 15.9187 13.9725 15.7782L18.1179 11.6328H2.59035C2.40299 11.6328 2.25076 11.5743 2.13366 11.4572C2.01656 11.3401 1.95801 11.1878 1.95801 11.0005Z" fill="#6666F2"></path>
                                      </svg>
                                  </span>
                              </button>
                          </div>
                      </div>
                      <div class="tab-pane fade" id="addemployee" role="tabpanel" #addemployee>
                          <div class="configuration-location p-3">

                              <div class="col-md-12">
                                  <div class="d-flex align-items-center" style="border: 1px solid #f1f1f1;">
                                      <div>
                                      <form novalidate="" role="search" (submit)="searchUsers()"
                                          class="searching ng-untouched ng-pristine ng-valid">
                                          <div class="form-group position-relative">
                                              <input type="text" id="searchText" placeholder="Search by name"
                                              name="search"
                                              class="form-control me-2 attendance-details-search"
                                              [(ngModel)]="searchText"
                                              [ngModelOptions]="{ standalone: true }" style="padding: 10px 50px 10px 40px" />
                                              <i class="bi bi-x search-icon position-absolute font-20 close-icon text-primary"
                                              *ngIf="searchText != ''" (click)="clearSearchText()"></i>
                                              <i class="bi bi-search search-icon position-absolute" *ngIf="searchText == ''"></i>
                                          </div>
                                      </form>
                                      </div>
                                      <div class="d-flex align-items-center justify-content-end gap-2 w-100 search-list"
                                      *ngIf="selectedStaffsUuids.length > 0">
                                      <span class="text-black font-13 pointer">
                                        <span class="text-primary">{{ selectedStaffsUuids.length }} </span> Selected of
                                        <span class="text-primary"> {{ totalUserCount }} </span>
                                      </span>
                                      <span class="separator"></span>
                                      <span class="text-danger fw-semibold pointer" (click)="unselectAllUsers()">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="19" viewBox="0 0 20 19"
                                          fill="none">
                                          <mask id="mask0_4127_2858" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0"
                                            y="0" width="20" height="19">
                                            <rect x="0.927246" y="0.460938" width="18.1564" height="18.1564" fill="#dc3545" />
                                          </mask>
                                          <g mask="url(#mask0_4127_2858)">
                                            <path
                                              d="M5.7642 14.8373L4.70508 13.7782L8.94157 9.54171L4.70508 5.30522L5.7642 4.24609L10.0007 8.48259L14.2372 4.24609L15.2963 5.30522L11.0598 9.54171L15.2963 13.7782L14.2372 14.8373L10.0007 10.6008L5.7642 14.8373Z"
                                              fill="#dc3545" />
                                          </g>
                                        </svg>
                                        Clear Selection
                                      </span>
                                      <span class="separator"></span>
                                      <label class="checkbox-label">
                                        <input type="checkbox" class="form-check-input pointer"
                                        name="staff"
                                        [(ngModel)]="isAllSelected" (change)="selectAll(isAllSelected)"/>
                                        Select all
                                      </label>
                                    </div>
                                  </div>
                                </div>
                                <ng-container *ngIf="total > 0">
                                  <div class="location-user-table">
                                    <table class="table">
                                      <thead class="thead-light">
                                        <tr>
                                          <th style="width: 0%">
                                            <input type="checkbox" class="form-check-input pointer"
                                            name="staff"
                                            [(ngModel)]="isAllSelected" (change)="selectAll(isAllSelected)"/>
                                          </th>
                                          <th style="width: 25%; padding: 12px 15px">Name</th>
                                          <th style="width: 25%; padding: 12px 15px">Email</th>
                                          <th style="width: 25%; padding: 12px 15px">Phone</th>
                                        </tr>
                                      </thead>
                                      <tbody>
                                        <tr *ngFor="
                                          let staff of staffs;
                                          let i = index;
                                            
                                        " style="border-bottom: 1px solid #dddddd">
                                          <td>
                                              <input  class="form-check-input" 
                                              type="checkbox" 
                                              [id]="'staffChecks' + i"
                                              [name]="'staffChecks'+i"
                                              [(ngModel)]="staff.selected" (change)="checkIndividualSelection()" />
                                            
                                          </td>
                                          <td style="padding: 12px 15px">{{ staff.name }}</td>
                                          <td style="padding: 12px 15px">
                                            {{ staff.email ? staff.email : "N/A" }}
                                          </td>
                                          <td style="padding: 12px 15px">
                                            {{ staff.phoneNumber || "N/A" }}
                                          </td>
                                        </tr>
                                      </tbody>
                                    </table>
                                  </div>
                                </ng-container>  
                                <div class=" config-location-footer">
                                  <div class="pagination justify-content-between p-3" *ngIf="staffs.length > 0">
                                      <p class="mb-0">
                                        Showing {{ 1 + ( databaseHelper.itemPerPage * (databaseHelper.currentPage - 1)) }} - {{
                                        staffs.length + ( databaseHelper.itemPerPage * (databaseHelper.currentPage - 1)) }} of {{ total
                                        }} members
                                      </p>
                                      <div class="row">
                                        <div class="col-md-12">
                                          <ngb-pagination class="pagition-box" [collectionSize]="total" [rotate]="true"
                                            (pageChange)="pageChanged($event)" [pageSize]="databaseHelper.itemPerPage"
                                            [(page)]="databaseHelper.currentPage" [maxSize]="4" [boundaryLinks]="true"></ngb-pagination>
                                        </div>
                                      </div>
                                    </div>

                                    
                                  
                                    
                                <div class="modal-footer d-flex align-items-center justify-content-end bg-white"> 
                                  <button type="submit" class="btn p-0 next-btn nextBtn" [disabled]="saveLoader || this.selectedStaffsUuids.length < 1 ">
                                      <span>    
                                          <span class="ng-star-inserted" *ngIf="!saveLoader">
                                              <span *ngIf="organizationUserLocation.id==0"> create new location </span>
                                              <span *ngIf="organizationUserLocation.id!=0"> update location </span>
                                              </span>
                                          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none">
                                              <path d="M1.95801 11.0005C1.95801 10.8131 2.01656 10.6609 2.13366 10.5438C2.25076 10.4267 2.40299 10.3681 2.59035 10.3681H18.1179L13.9725 6.22276C13.832 6.08224 13.7618 5.9183 13.7618 5.73094C13.7618 5.54358 13.832 5.39135 13.9725 5.27424C14.1131 5.15714 14.277 5.09859 14.4644 5.09859C14.6517 5.09859 14.8157 5.14543 14.9562 5.23911L20.2257 10.5086C20.3194 10.6492 20.3662 10.8131 20.3662 11.0005C20.3662 11.1878 20.3194 11.3518 20.2257 11.4923L14.9562 16.7618C14.8157 16.8555 14.6517 16.9023 14.4644 16.9023C14.277 16.9023 14.1131 16.8438 13.9725 16.7267C13.832 16.6096 13.7618 16.4574 13.7618 16.27C13.7618 16.0826 13.832 15.9187 13.9725 15.7782L18.1179 11.6328H2.59035C2.40299 11.6328 2.25076 11.5743 2.13366 11.4572C2.01656 11.3401 1.95801 11.1878 1.95801 11.0005Z" fill="#6666F2"></path>
                                          </svg>
                                      </span>
                                  </button>
                              </div>
                          
                          </div>
                              
                          </div>
                          
                      </div>
                      
                  </div>
              </div>
          </div>
          </div>
          <div>
          </div>
          </form>
      </div>
      </div>
  </div>
  </div>
<!----------------------------------- ADDRESS MODAL END -------------------------->


<!-----------------------------------FETCH LOCATION  MODAL START -------------------------->
<button type="button" class="btn btn-primary d-none" data-bs-toggle="modal" data-bs-target="#fetchLocation"></button>
  <div class="modal fade" id="fetchLocation" tabindex="-1"  aria-hidden="true" aria-hidden="true" data-bs-backdrop="static">

    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-body text-center p-4">
            <div>
                <img src="assets/images/payrollstep-img/add-location-img.svg">
                <h5 class="mb-0 font-18 fw-600 lh-base">Would you like to continue using the <br> same location as before?</h5>

                <div class="mt-3 p-3 text-start address-box border-rounded-2" *ngIf="organizationAddress.length==1">
                    <p class="lh-base font-13 fw-normal">The address will auto-sync, keeping all linked users <br> updated automatically.</p>
                    <h5 class="font-14 mb-0 fw-semibold lh-base mt-3 text-black" *ngFor="let address of organizationAddress">
                        <span class="text-warning" *ngIf="!constant.EMPTY_STRINGS.includes(address.organizationAddress.addressLine1)">Address: </span>
                        {{address.organizationAddress.addressLine1+", "}}
                        {{!constant.EMPTY_STRINGS.includes(address.organizationAddress.addressLine2)?address.organizationAddress.addressLine2+", ":""}}
                        {{!constant.EMPTY_STRINGS.includes(address.organizationAddress.landmark)?address.organizationAddress.landmark:""}}
                        
                        <br class="paddress">{{address.organizationAddress.city}} - {{address.organizationAddress.pincode}} |
                        {{address.organizationAddress.state}},
                        {{address.organizationAddress.country}}</h5>
                      
                </div>
                <div class="mt-3 p-3 text-start address-box border-rounded-2" *ngIf="organizationAddress.length>1">
                    <p class="lh-base font-13 fw-normal">The address will auto-sync, keeping all linked users updated <br> automatically.</p>
                    <h5 class="font-14 mb-0 fw-semibold lh-base text-warning  mb-2">Address:</h5>

                    <div class="d-flex align-items-center justify-content-between border-bottom pt-2 pb-2 address-list" *ngFor="let address of organizationAddress; let i = index">
                        <p class="lh-base font-13 fw-normal mb-1" *ngIf="!constant.EMPTY_STRINGS.includes(address.organizationAddress.addressLine1)">
                            {{address.organizationAddress.addressLine1+", "}}
                            {{!constant.EMPTY_STRINGS.includes(address.organizationAddress.addressLine2)?address.organizationAddress.addressLine2+", ":""}}
                            {{!constant.EMPTY_STRINGS.includes(address.organizationAddress.landmark)?address.organizationAddress.landmark:""}}
                            {{address.organizationAddress.city}},
                            {{address.organizationAddress.state}} {{address.organizationAddress.pincode}}</p>

                        <div class="form-check">
                            <input class="form-check-input" 
                            type="checkbox" value="" 
                            [id]="'addressCheck' + i"
                            (change)="onAddressSelect(i, $event)">
                        </div>
                    </div>
                   
                </div>
            </div>
          
        </div>
        <div class="border-top p-3">       
                <div class="form-check">
                    <input class="form-check-input" 
                    type="checkbox" value="" 
                    [(ngModel)]="selectUsers"
                    (ngModelChange)="mapUsers($event)">
                    <label class="form-check-lable font-12 fw-normal lh-1 px-1 color-basic ">sdgxfchgvjhbkjnlkmlxgfchgvjhbkj</label>
                </div>

         <div class="d-flex align-items-center justify-content-end gap-3 mt-3">
          <button type="button" class="btn cancel-btn mt-0" data-bs-dismiss="modal" #closeFetchModal>Cancel</button>
          <button type="button" class="btn submitActionBtn text-white" [ngClass]="{'disabled-lnk':saveLoader}"
                 (click)="saveFetchedAddressStaff()">
                <div *ngIf="saveLoader" class="dot-opacity-loader">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <span *ngIf="!saveLoader"> Confirm </span>      
            </button>
        </div>
        </div>
      </div>
    </div>
  </div>
<!---------------------------------- FETCH LOCATION  MODAL END --------------------------> 

   
  
<!----------------------------------- REMOVE DUPLICATE USER MODAL START-------------------------->
<button class="d-none" data-bs-toggle="modal" data-bs-target="#usersAlreadyAssigned"></button>
<div class="modal fade" id="usersAlreadyAssigned" tabindex="-1" role="dialog" aria-hidden="true"
  data-bs-backdrop="static" #usersAlreadyAssigned>
  <div class="modal-dialog modal-dialog-centered" style="max-width: 500px" role="document">
    <div class="modal-content">
      <div class="modal-body manualUpload p-0" style="background-image: url(../assets/images/user-alredy-img.svg)">
        <div class="d-flex align-items-center justify-content-end pt-2 close-icon-btn" style="padding-right: 10px">
          <button type="button" class="close-btn" data-bs-dismiss="modal" aria-label="Close" #closeButton
            (click)="closeModal()" data-bs-toggle="modal" data-bs-target="#shiftTime">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="31" viewBox="0 0 32 31" fill="none">
              <mask id="mask0_3479_11687" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="32"
                height="31">
                <rect x="0.972656" y="0.505066" width="30.0938" height="30.075" fill="#D9D9D9" />
              </mask>
              <g mask="url(#mask0_3479_11687)">
                <path
                  d="M8.99766 24.3144L7.24219 22.5601L14.2641 15.5426L7.24219 8.52507L8.99766 6.77069L16.0195 13.7882L23.0414 6.77069L24.7969 8.52507L17.775 15.5426L24.7969 22.5601L23.0414 24.3144L16.0195 17.2969L8.99766 24.3144Z"
                  fill="#181818" />
              </g>
            </svg>
          </button>
        </div>

        <div class="row p-3 pb-4 pt-4 align-items-center">
          <div class="col-md-8">
            <div class="manualUploadDetail persnol-details p-0 quickGuideHeading">
              <h5 class="alert-heading text-warning font-16 mb-2">
                Users Already Assigned to Another Location
              </h5>
              <p class="mb-0 text-black">
                Do you want to add them to the new location? Doing so will
                remove them from the current location.
              </p>
            </div>
          </div>
          <div class="col-md-4">
            <div class="side-img" style="background-image: url(../assets/images/user-img.svg)"></div>
          </div>
        </div>

        <div class="p-3 employee-list bg-white">
          <h4 class="mb-1">Employee List</h4>
          <div class="manualemployList">
            <div class="d-flex align-items-center justify-content-between persnol-details userList p-0 pt-2 pb-2"
              *ngFor="let list of userNameWithBranchName">
              <div class="d-flex align-items-center gap-3">
                <span class="userName">{{
                  list.name
                  }}</span>

                <div>
                  <div class="d-flex align-items-center gap-2">
                    <p class="mb-0 font-11">{{ list.email || "N/A" }}</p>
                  </div>
                </div>
              </div>
              <div>
                <button  *ngIf="userNameWithBranchName.length>1" class="btn p-0 addUserRemvo" (click)="removeUser(list.uuid)">
                  <svg xmlns="http://www.w3.org/2000/svg" width="22" height="23" viewBox="0 0 22 23" fill="none">
                    <mask id="mask0_3479_11708" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0" y="0"
                      width="22" height="23">
                      <rect x="0.015625" y="0.57843" width="21.8948" height="21.8948" fill="white" />
                    </mask>
                    <g mask="url(#mask0_3479_11708)">
                      <path
                        d="M6.40482 19.7378C5.90306 19.7378 5.47353 19.5592 5.11622 19.2019C4.75891 18.8446 4.58025 18.415 4.58025 17.9133V6.05359H3.66797V4.22903H8.22939V3.31674H13.7031V4.22903H18.2645V6.05359H17.3522V17.9133C17.3522 18.415 17.1736 18.8446 16.8163 19.2019C16.4589 19.5592 16.0294 19.7378 15.5277 19.7378H6.40482ZM15.5277 6.05359H6.40482V17.9133H15.5277V6.05359ZM8.22939 16.0887H10.054V7.87816H8.22939V16.0887ZM11.8785 16.0887H13.7031V7.87816H11.8785V16.0887Z"
                        fill="#FF0404" />
                    </g>
                  </svg>
                  Remove
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="border-top p-3">
        <div class="form-check d-flex align-items-start" style="padding-left: 0px !important">
          <input type="checkbox" id="validationCheck" style="position: relative; top: 2px"
            class="ng-dirty ng-touched" [(ngModel)]="isValidated" (change)="checkValidation()" /><label
            for="validationCheck" class="form-check-label iHaveRead">
            I have validated the information and will proceed to add users to
            the new location.
          </label>
        </div>
        <div class="d-flex align-items-center justify-content-end gap-3 mt-3">
          <!-- <button class="btn submit-add-more">Cancel</button> -->

          <button class="btn submit-add-more d-none" data-bs-dismiss="modal" aria-label="Close" #closeButton2>
            Cancel
          </button>
          <button class="btn mannualSubmit" [ngClass]="{'btn-border': isValidated}" [disabled]="!isValidated"
            (click)="registerAddress()" type="button">
            <span *ngIf="!isRegisterLoad">Add all</span>
            <div class="dot-opacity-loader-new" *ngIf="isRegisterLoad">
              <span></span>
              <span></span>
              <span></span>
            </div>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
<!-----------------------------------  REMOVE DUPLICATE USER MODAL  END-------------------------->



<!----------------------------------- DELETE ADDRESS MODAL START-------------------------->
<button class="d-none" data-bs-toggle="modal" data-bs-target="#delete-address" #deleteLocationButton></button>
<div class="modal fade" id="delete-address" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" style="max-width: 500px" role="document">
    <div class="modal-content">
      <div class="modal-body p-0 delete-text">
        <div class="delete-image d-flex align-items-center justify-content-center pt-4 pb-4">
          <div class="delete-close-btn">
            <button type="button" class="close-btn" data-bs-dismiss="modal" aria-label="Close"
              #deleteLocationCloseButton>
              <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" fill="none">
                <mask id="mask0_2031_1331" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="30"
                  height="30">
                  <rect width="30" height="30" fill="#D9D9D9" />
                </mask>
                <g mask="url(#mask0_2031_1331)">
                  <path
                    d="M8 23.75L6.25 22L13.25 15L6.25 8L8 6.25L15 13.25L22 6.25L23.75 8L16.75 15L23.75 22L22 23.75L15 16.75L8 23.75Z"
                    fill="black" />
                </g>
              </svg>
            </button>
          </div>
          <img src="/assets/images/delete-img.svg" style="width: 70px" />
        </div>
        <div class="bg-white p-4 text-center">

          <div>
            <h5 class="alert-heading font-18 mb-2">
              Are you sure you want to delete <br />
              this address?
            </h5>
            <p class="font-11">You will not be able to recover this</p>
          </div>

          <div class="mt-4 d-flex align-items-center flex-column">
            <button [ngClass]="{'disabled-lnk':deleteToggle}" class="btn continue-btn"
              (click)="deleteAddress()">
              Continue
              <i class="fa fa-spinner fa-spin" *ngIf="deleteToggle"></i>
            </button>
            <button class="btn cancel-btn pt-2" type="button" data-bs-dismiss="modal" aria-label="Close">
              Cancel
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!----------------------------------- Disable notification setting-------------------------->
