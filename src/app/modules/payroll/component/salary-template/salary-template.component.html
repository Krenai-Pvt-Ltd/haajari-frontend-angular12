
<div class="page-wrapper">
    <div class="page-content-tab pb-0">
        <div class="container-fluid">
            <!-- salary template empty notification start -->
            <ng-container *ngIf="!toggle  && !shimmer && holdTotalItems == 0 ">
                <div class="row salary-template-empty-box p-3 mt-3 align-items-center m-0">
                    <div class="col-md-6">
                        <div class="pt-5 pb-5">
                        <h3 class="mb-3 font-32 fw-normal lh-base">
                            Create Your Own Salary <br> Template
                        </h3>
                        <p class="mb-0 font-14 fw-light color-basic">
                            Design a customized salary structure to fit your needs. Get started <br> by creating your template now!"
                        </p>
                        <button type="button" class="btn add-template-btn mt-4 text-white font-14 fw-normal border-rounded-2" (click)="createTemplate(true)">
                            Create Salary Template
                        </button>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="text-end">
                        <img src="assets/images/payrollstep-img/salary-empty-img.svg" style="width: 380px" />
                        </div>
                    </div>
                </div>
            </ng-container>  
             <!-- salary template empty notification end -->

            <!-- template list start  -->
            <ng-container *ngIf="!toggle && holdTotalItems>0">
                 
                <div class="mt-4">
                    <div class="salary-template-search border-rounded-2">
                        <div class="d-flex justify-content-start align-items-center">
                        <div class="search-date d-flex align-items-center justify-content-between position-relative w-100">
                            <div class="form-group w-100 position-relative">
                                <input type="text" id="searchText" placeholder="Search by template name..."
                                class="form-control me-2 w-100"
                                style="padding: 10px 45px;"
                                (keyup)="searchDebounce($event)" (paste)="searchDebounce($event)" [(ngModel)]="search"
                                [ngModelOptions]="{ standalone: true }" style="padding: 10px 40px; padding-right: 20px;flex-grow: 1;" />
                                <i class="bi bi-search search-icon d-flex align-items-center h-100 ng-star-inserted"></i>   
                            </div>
                        </div>
                            <button class="btn p-0 font-14 text-primary fw-semibold add-btn" (click)="createTemplate(true)"><i class="bi bi-plus-lg"></i> Create New</button>
                        </div>
                    </div>
                    <div class="table-responsive vh-80 mt-3">
                        <table class="table">
                            <thead>
                            <tr>
                                <th style="width:40%">Template Name</th>
                                <th style="width:40%">Description</th>
                                <th style="width:15%">Status</th>
                                <th style="width:5%">Action</th>
                            </tr>
                            </thead>
                            <tbody *ngIf="shimmer">
                                <tr *ngFor="let item of [].constructor(7)">
                                <td>
                                    <ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading>
                                </td>
                                <td>
                                    <ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading>
                                </td>
                                <td>
                                    <ngx-shimmer-loading [width]="'70%'" [height]="'10px'"></ngx-shimmer-loading>
                                </td>
                                <td>
                                    <ngx-shimmer-loading [width]="'70%'" [height]="'10px'"></ngx-shimmer-loading>
                                </td>
                                </tr>
                            </tbody>
                            <tbody *ngIf="salaryTemplateList.length ==0 && !shimmer">
                                <tr>
                                <td colspan="8">
                                    <div class="empty-filenew" style="margin-top: 7%; margin-bottom: 7%">
                                    <nz-empty nzNotFoundImage="assets/images/no-data-found-img.svg"
                                        [nzNotFoundContent]="contentTpl">
                                        <ng-template #contentTpl>
                                        <p class="mb-1 empty-filenew">No data for now</p>
                                        </ng-template>
                                    </nz-empty>
                                    </div>
                                </td>
                                </tr>
                            </tbody>
                            <tbody *ngIf="salaryTemplateList.length > 0">
                                <tr *ngFor="let template of salaryTemplateList; let i = index;">
                                    <td>
                                        <span>
                                            <h5 class="mb-2 font-14 fw-semibold text-primary pointer" (click)="createTemplate(false,template)">{{ template.name }}</h5>
                                            <p class="font-12 fw-normal color-basic mb-0">{{ template.updatedAt | date: 'MMM d, y'  }}</p>
                                        </span>
                                    </td>
                                    <td>
                                        <span class="white-space font-13 fw-normal">{{!constant.EMPTY_STRINGS.includes(template.description)?template.description: 'N/A' }}</span>
                                    </td>
                                    <td>
                                        <nz-switch
                                        [nzLoading]="load(template.id)"
                                        (click)="changeStatus(template.id)"
                                        [ngModel]="checkStatus(template.statusId)">
                                        </nz-switch>
                                    </td>
                                    <td>
                                    <div class="dropdown">
                                        <button type="button" data-bs-toggle="dropdown" aria-expanded="true" class="btn btnAction dropdown-toggle d-flex align-items-center justify-content-center">
                                        <i class="bi bi-three-dots-vertical"></i>
                                        </button>
                                            <div class="dropdown-menu actionMenuList">
                                                <ul class="pl-0 mb-0">
                                                    <li><a class="dropdown-item" (click)="createTemplate(false,template)">Edit</a></li>
                                                    <li><a class="dropdown-item">Delete</a></li>
                                                    <li><a class="dropdown-item">Dissociate Employees</a></li>
                                                </ul>
                                            </div>
                                    </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="d-flex align-items-center justify-content-between pagination-box w-100 p-3 bg-white border-top" *ngIf="totalItems > 0">
                            <p class="mb-0"> Showing {{_helperService.startIndex(currentPage,itemPerPage) }} - {{_helperService.lastIndex(currentPage,itemPerPage,totalItems)}} of {{ totalItems }} results</p>
                            <div class="pagition-box">
                                <ngb-pagination [collectionSize]="totalItems" [page]="currentPage" [pageSize]="itemPerPage" [maxSize]="5"
                                [boundaryLinks]="true" [ellipses]="true" (pageChange)="pageChange($event)">
                                </ngb-pagination>
                            </div>
                        </div>
                    </div>
                </div>
            </ng-container>
            <!-- template list end  -->
            <ng-container *ngIf="toggle">
            <div class="row m-0">
               <div class="col-md-3 pl-0 pr-0">
                <div class="payroll-sidebar-menu h-100 bg-white" >
                     <h5 class="font-15 fw-600 p-3 pt-4">Building Your Template</h5>
                     <div class="mt-3" *ngIf="!loader">
                            
                            <div data-bs-toggle="collapse" href="#earningcollapse" role="button" aria-expanded="false" aria-controls="collapseExample">
                            <div class="d-flex align-items-center justify-content-between p-3 active-box">
                                <h5 class="font-14 fw-semibold mb-0">Earnings</h5>
                                <span class="collapse-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="17" viewBox="0 0 16 17" fill="none">
                                        <mask id="mask0_9698_5055" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="16" height="17">
                                        <rect y="0.5" width="16" height="16" fill="#D9D9D9"/>
                                        </mask>
                                        <g mask="url(#mask0_9698_5055)">
                                        <path d="M5.35008 15.1654L4.16675 13.982L9.65008 8.4987L4.16675 3.01536L5.35008 1.83203L12.0167 8.4987L5.35008 15.1654Z" fill="#1C1B1F"/>
                                        </g>
                                    </svg>
                                </span>
                            </div>

                            <div class="collapse" id="earningcollapse">
                                <div class="card card-body p-3 earning-box border-0">
                                    <ng-container *ngIf="templateComponents.earningComponents.length == 0">
                                        <span> All the active earnings have been added to the template.</span>
                                    </ng-container>
                                    <ul class="px-0">
                                        <ng-container *ngFor="let component of  templateComponents.earningComponents;let i = index">
                                        <li  
                                        class="d-flex align-items-center justify-content-between font-13 fw-normal"
                                        (click)="toggleEarningComponent(component)">
                                            {{component.displayName}}<span class="lh-base">
                                                <i class="bi bi-plus font-20" ></i>
                                            </span>
                                        </li>
                                    </ng-container>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div data-bs-toggle="collapse" href="#reibursementcollapse" role="button" aria-expanded="false" aria-controls="collapseExample">
                            <div class="d-flex align-items-center justify-content-between p-3">
                                <h5 class="font-14 fw-semibold mb-0">Reimbursement</h5>
                                <span class="collapse-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="17" viewBox="0 0 16 17" fill="none">
                                        <mask id="mask0_9698_5055" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="16" height="17">
                                        <rect y="0.5" width="16" height="16" fill="#D9D9D9"/>
                                        </mask>
                                        <g mask="url(#mask0_9698_5055)">
                                        <path d="M5.35008 15.1654L4.16675 13.982L9.65008 8.4987L4.16675 3.01536L5.35008 1.83203L12.0167 8.4987L5.35008 15.1654Z" fill="#1C1B1F"/>
                                        </g>
                                    </svg>
                                </span>
                            </div>

                            <div class="collapse" id="reibursementcollapse">
                                <div class="card card-body p-3 earning-box border-0">
                                    <ng-container *ngIf="templateComponents.reimbursementComponents.length == 0">
                                        <span>All the active reimbursement have been added to the template.</span>
                                    </ng-container>
                                    <ul class="px-0">
                                        <ng-container *ngFor="let component of  templateComponents.reimbursementComponents;let i = index">
                                        <li (click)="toggleReimbursementComponent(component)"
                                        class="d-flex align-items-center justify-content-between font-13 fw-normal">
                                            {{component.displayName}}<span class="lh-base">
                                                <i class="bi bi-plus font-20" ></i>
                                            </span>
                                        </li>
                                    </ng-container>

                                    </ul>
                                </div>
                            </div>
                        </div>
                       
                        
                        <!-- <div class="d-flex align-items-center justify-content-between p-3">
                            <h5 class="font-14 fw-semibold mb-0">FBP Components</h5>
                            <span>
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="17" viewBox="0 0 16 17" fill="none">
                                    <mask id="mask0_9698_5055" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="16" height="17">
                                    <rect y="0.5" width="16" height="16" fill="#D9D9D9"/>
                                    </mask>
                                    <g mask="url(#mask0_9698_5055)">
                                    <path d="M5.35008 15.1654L4.16675 13.982L9.65008 8.4987L4.16675 3.01536L5.35008 1.83203L12.0167 8.4987L5.35008 15.1654Z" fill="#1C1B1F"/>
                                    </g>
                                </svg>
                            </span>
                        </div> -->
                        <div data-bs-toggle="collapse" href="#benefitcollapse" role="button" aria-expanded="false" aria-controls="collapseExample">
                            <div class="d-flex align-items-center justify-content-between p-3">
                                <h5 class="font-14 fw-semibold mb-0">Benefits</h5>
                                <span class="collapse-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="17" viewBox="0 0 16 17" fill="none">
                                        <mask id="mask0_9698_5055" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="16" height="17">
                                        <rect y="0.5" width="16" height="16" fill="#D9D9D9"/>
                                        </mask>
                                        <g mask="url(#mask0_9698_5055)">
                                        <path d="M5.35008 15.1654L4.16675 13.982L9.65008 8.4987L4.16675 3.01536L5.35008 1.83203L12.0167 8.4987L5.35008 15.1654Z" fill="#1C1B1F"/>
                                        </g>
                                    </svg>
                                </span>
                            </div>

                            <div class="collapse" id="benefitcollapse">
                                <div class="card card-body p-3 earning-box border-0">
                                    <ng-container *ngIf="templateComponents.deductions.length==0">
                                        <span>All the active benefits have been added to the template.</span>
                                    </ng-container>
                                    <ul class="px-0">
                                        <ng-container *ngFor="let component of templateComponents.deductions">
                                        <li (click)="toggleDeductionComponent(component)"
                                        class="d-flex align-items-center justify-content-between font-13 fw-normal">
                                            {{component.name}}<span class="lh-base">
                                                <i class="bi bi-plus font-20" ></i>
                                            </span>
                                        </li>
                                    </ng-container>

                                    </ul>
                                </div>
                            </div>
                        </div>
                       
                       <!--  <div class="d-flex align-items-center justify-content-between p-3">
                            <h5 class="font-14 fw-semibold mb-0">One Time Earnings</h5>
                            <span>
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="17" viewBox="0 0 16 17" fill="none">
                                    <mask id="mask0_9698_5055" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="16" height="17">
                                    <rect y="0.5" width="16" height="16" fill="#D9D9D9"/>
                                    </mask>
                                    <g mask="url(#mask0_9698_5055)">
                                    <path d="M5.35008 15.1654L4.16675 13.982L9.65008 8.4987L4.16675 3.01536L5.35008 1.83203L12.0167 8.4987L5.35008 15.1654Z" fill="#1C1B1F"/>
                                    </g>
                                </svg>
                            </span>
                        </div> -->
                     </div>
                </div>
               </div>
               <div class="col-md-9 pl-0">
                    <form #templateForm="ngForm" ngNativeValidate (ngSubmit)="saveSalaryTemplate()">

                    <div class="create-template-box p-3 pt-4 h-100 pb-5">
                        <div class="row">
                           <div class="col-md-6 mb-3">
                            <label class="pb-2">Template Name </label>
                            <input type="text" placeholder="Enter template name" name="templateName" class="form-control whatsapp-login-input"
                            maxlength="50" 
                            pattern="^[A-Za-z\s]+$"                       
                            [(ngModel)]="salaryTemplate.name" required>
                           </div>
                           
                           <div class="col-md-6 mb-3 position-relative">
                            <label class="pb-2">Annual CTC (per year)</label>
                            <input type="number" placeholder="Enter annual amount"  name="annualctc" class="form-control whatsapp-login-input" style="padding-left: 65px;" 
                            pattern="^[1-9][0-9]*$" 
                            [(ngModel)]="salaryTemplate.annualCtc" required (ngModelChange)="CalculateMonthlyAmountNew()">
                            <span class="percentage-icon d-flex align-items-center justify-content-center">
                                <i class="bi bi-currency-rupee font-18"></i>
                            </span>
                           </div>
                           <div class="col-md-12 mb-3">
                            <label class="pb-2">Description </label>
                            <textarea class="form-control nots-section" id="exampleFormControlTextarea1" placeholder="Max 250 characters" rows="5" name="templateDescription"
                            maxlength="250" 
                            pattern="^[A-Za-z\s]+$" 
                            [(ngModel)]="salaryTemplate.description"></textarea>
                           </div>
                        </div>
                        <div class="mt-3 template-calculation border-rounded-2 bg-white">
                            <div class="row p-3 border-bottom p-0 m-0 px-4">
                                <div class="col-md-3">
                                    <div class="text-left">
                                        <h5 class="font-13 fw-normal mb-0 color-basic">Salary Components</h5>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="text-left">
                                        <h5 class="font-13 fw-normal mb-0 color-basic">Calculation Type</h5>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="text-left">
                                        <h5 class="font-13 fw-normal mb-0 color-basic">Monthly Amount </h5>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="text-end  px-3">
                                        <h5 class="font-13 fw-normal mb-0 color-basic">Annual Amount </h5>
                                    </div>
                                </div>
                            </div>
    
                            <div class="row mx-4 py-3">
                                <div class="col-md-12">
                                    <h5 class="font-14 fw-semibold text-primary mb-4">Earnings</h5>
                                </div>
    
                                <div class="earing-list p-3 border-rounded-2" >
                                    <div *ngIf="shimmer">
                                        <div *ngFor="let item of [].constructor(3)" class="row border-bottom py-3 align-items-center">
                                            <div class="col-md-3">
                                                <ngx-shimmer-loading [width]="'70%'" [height]="'10px'"></ngx-shimmer-loading>
                                            </div>
                                            <div class="col-md-3">
                                                <ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading>
                                            </div>
                                            <div class="col-md-3">
                                                <ngx-shimmer-loading [width]="'70%'" [height]="'10px'"></ngx-shimmer-loading>
                                            </div>
                                            <div class="col-md-3">
                                                <ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <ng-container *ngFor="let component of  salaryTemplate.earningComponents;let i = index;">
                                    <div class="row border-bottom align-items-center py-3 mb-2"> 
                                        <div class="col-md-3">
                                                <p class="mb-0 font-13 color-basic fw-semibold">{{component.displayName}}</p>
                                                <p class="mb-0 font-12 color-basic" *ngIf="component.displayName=='Fixed Allowance'" >Monthly CTC - Sum of all other components</p>
    
                                        </div>
                                        <!-- Calculation Type start -->
                                        <div class="col-md-3" [ngSwitch]="component.valueTypeId">
                                            <div class="compliance-list bg-white border-rounded-2 attendance-border d-flex align-items-center justify-content-center" *ngSwitchCase="VALUE_TYPE_PERCENTAGE">
                                                <div class="w-50 position-relative" style="border-right: 1px solid #f1f1f1;">
                                                   <input type="number" placeholder="" required name="percentage{{i}}" id="valueType{{i}}"
                                                        class="form-control borderLess" [(ngModel)]="component.value" (ngModelChange)="CalculateMonthlyAmountNew()">             
                                                </div>
                                                <div class="w-50 currency-types-border d-flex align-items-center justify-content-start" *ngSwitchCase="VALUE_TYPE_PERCENTAGE">
                                                    <p class="mb-0 font-13 fw-semibold" *ngIf="component.calculationBasedId == CALCULATION_BASED_CTC">% of CTC</p>
                                                    <p class="mb-0 font-13 fw-semibold" *ngIf="component.calculationBasedId == CALCULATION_BASED_BASIC">% of Basic</p>
                                                </div>    
                                            </div>
                                            <div class="w-50 currency-types-border d-flex align-items-center justify-content-start" *ngSwitchCase="VALUE_TYPE_FLAT">
                                                <p class="mb-0 font-13 fw-semibold">Fixed Amount</p>
                                            </div>
                                        </div>  
                                          <!-- Calculation Type end -->

                                        <!-- Monthly Amount start -->
                
                                        <div class="col-md-3">
                                            <div class="compliance-list bg-white border-rounded-2 attendance-border"  *ngIf="component.amount>=0 && !isSystemCalculated(component)">
                                                <div class="w-100 currency-types-border d-flex align-items-center justify-content-end px-3">
                                                    <div>
                                                        <input type="number"  class="form-control borderLess" name="earningamount{{i}}" id="earningamount{{i}}"  step="0"
                                                        pattern="^[1-9][0-9]*$" 
                                                        [disabled]="component.valueTypeId == VALUE_TYPE_PERCENTAGE || component.name == 'Fixed Allowance'"
                                                        [(ngModel)]="component.amount" (ngModelChange)="CalculateMonthlyAmountNew()">
                                                    </div>
                                                </div>
                                            </div>
                                            <p class="font-13 fw-normal color-basic mb-0" *ngIf="component.amount<0 || isSystemCalculated(component)"> System Calculated</p>
                                        </div>
                                        <!-- Monthly Amount end -->


                                         <!-- Annual Amount start -->

                                        <div class="col-md-3">
                                            <div class="text-end px-3">
                                                <p class="font-14 fw-normal color-basic mb-0"  *ngIf="component.amount>=0 && !isSystemCalculated(component)">{{component.amount * 12}}</p>
                                                <p class="font-13 fw-normal color-basic mb-0" *ngIf="component.amount<0 || isSystemCalculated(component)"> System Calculated</p>
                                            </div>
                                            <button *ngIf="!(component.name == 'Basic' || component.name == 'Fixed Allowance')" 
                                            class="btn p-0 text-danger action-btn font-18" (click)="toggleEarningComponent(component)"><i class="bi bi-x"></i></button>
     
                                        </div>
                                         <!-- Annual Amount end -->

                                    </div>
                                </ng-container>
                                </div>
    
                                 <div class="col-md-12 mt-4" >
                                    <h5 class="font-14 fw-semibold text-primary mb-4" *ngIf="salaryTemplate.reimbursementComponents.length >0">
                                        Reimbursements</h5>
                                </div>
                                <ng-container *ngFor="let component of  salaryTemplate.reimbursementComponents;let i = index;">
                                <div class="earing-list p-3 border-rounded-2  pt-0">
                                    <div class="row align-items-center border-bottom position-relative mb-3 pb-3 pt-3">
                                        <div class="col-md-3">
                                            <div>
                                                <p class="mb-0 font-12 color-basic fw-semibold">{{component.displayName}}<br><span class="fw-normal">Max Amount:</span> ₹{{component.value}}</p>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="w-50 currency-types-border d-flex align-items-center justify-content-start">
                                                <p class="font-13 fw-semibold color-basic mb-0 ">Fixed amount</p>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="compliance-list bg-white border-rounded-2 attendance-border ">
                                                <div class="w-100 currency-types-border d-flex align-items-center justify-content-end px-3">
                                                    <input class="form-control borderLess" type="number" 
                                                    pattern="^[1-9][0-9]*$" placeholder="0" required name="reimbursement-amount{{i}}"
                                                    [attr.max]="component.value"  [(ngModel)]="component.amount" (ngModelChange)="CalculateMonthlyAmountNew()"> 
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="text-end px-3">
                                                <p class="font-13 fw-normal color-basic mb-0">{{component.amount*12}}</p>
                                            </div>
                                        </div>
                                        <button class="btn p-0 text-danger action-btn font-18" (click)="toggleReimbursementComponent(component)"><i class="bi bi-x"></i></button>
                                    </div>
                                    
                                </div> 
                                </ng-container>

                                <ng-container *ngIf="salaryTemplate.deductions.length > 0">
                                <div class="col-md-12 mt-4" >
                                    <h5 class="font-14 fw-semibold text-primary mb-4">Benefits</h5>
                                </div>
                                <div class="earing-list p-3 border-rounded-2 mb-4">
                                    <div class="row align-items-center border-bottom position-relative" 
                                    *ngFor="let component of  salaryTemplate.deductions;let i = index;">
                                      <div class="col-md-3">
                                        <p class="mb-0 font-12 color-basic fw-semibold">{{component.name}}</p>
                                      </div>
                                      <div class="col-md-3" *ngIf="component.name == 'EPF'">
                                        <div class="text-start py-3" [ngSwitch]="component.employerContribution">
                                          <p class="font-13 fw-semibold color-basic mb-0" *ngSwitchCase="EPF_ACTUAL">12.00% of PF Wages</p>
                                          <p class="font-13 fw-semibold color-basic mb-0" *ngSwitchCase="EPF_RESTRICTED">12.00% of Restricted Wages</p>
                                        </div>
                                      </div>
                                      <div class="col-md-3" *ngIf="component.name == 'ESI'">
                                        <div class="text-start py-3">
                                          <p class="font-13 fw-semibold color-basic mb-0">{{component.employerContribution}} of ESI Wages</p>
                                        </div>
                                      </div>
                                      <div class="col-md-3">
                                        <div class="text-start px-4">
                                          <p class="font-13 fw-normal color-basic mb-0" *ngIf="previewCalculations">System Calculated</p>
                                          <p class="font-13 fw-normal color-basic mb-0" *ngIf="!previewCalculations">{{ component.amount }}</p>
                                        </div>
                                      </div>
                                      <div class="col-md-3">
                                        <div class="text-end px-3">
                                            <p class="font-13 fw-normal color-basic mb-0" *ngIf="previewCalculations">System Calculated</p>
                                          <p class="font-13 fw-normal color-basic mb-0" *ngIf="!previewCalculations">{{ component.amount*12 }}</p>
                                        </div>
                                      </div>
                                      <button class="btn p-0 text-danger action-btn font-18" (click)="toggleDeductionComponent(component)"><i class="bi bi-x"></i></button>
                                    </div>
                                  </div>
                                  <div>
                                </div>
                                </ng-container>
                            </div>

                                <div class="earing-list p-3 border-rounded-2  pt-0" *ngIf="negativeMonthlyCTC<0">
                                    <div class="row align-items-center border-bottom position-relative mb-3 pb-3 pt-3">
                                        <div class="col-md-6">
                                            <div>
                                                <p class="mb-0 font-12 color-basic fw-semibold">System Calculated Components' Total</p>
                                                <p class="mb-0 font-12 color-basic fw-semibold">Amount must be greater than zero. Adjust the CTC or any of the component's amount.</p>
                                            </div>
                                        </div>
                                     
                                        <div class="col-md-3">
                                             <span class="negative-amount text-danger me-3">{{negativeMonthlyCTC}}</span>
                                        </div>
                                        <div class="col-md-3">
                                             <span class="negative-amount text-danger">{{negativeMonthlyCTC*12}}</span>   
                                        </div>
                                    </div>
                                </div> 
                            <div class="row total-cost-box p-0 m-0 ">
                                <div class="col-md-3 p-3">
                                    <h5 class="mb-0 font-13 fw-semibold">Cost to Company</h5>
                                </div>
                                <div class="col-md-3"></div>
                                <div class="col-md-3 p-3">
                                    <div class="text-end px-3">
                                        <h5 class="mb-0 font-13 fw-semibold">₹ {{salaryTemplate.annualCtc/12 |  number: '1.0-0' }}</h5>
                                    </div>
                               </div>
                                <div class="col-md-3 p-3">
                                    <div class="text-end px-3">
                                        <h5 class="mb-0 font-13 fw-semibold">₹ {{salaryTemplate.annualCtc}}</h5>
                                    </div>
                                </div>
                            </div> 
                        </div>
                    </div>
                    <div class="footer position-fixed bg-white d-flex align-items-center  justify-content-end gap-2" *ngIf="!templateForm.pristine">
                        <!-- <button type="button" class="btn submitActionBtn font-13 fw-semibold text-white" (click)="backFromTemplate()">
                            <span> Cancel</span>      
                        </button> -->
                        <button type="submit" class="btn submitActionBtn font-13 fw-semibold text-white"  [ngClass]="{'disabled-lnk':saveLoader || negativeMonthlyCTC < 0}">
                            <div *ngIf="saveLoader" class="dot-opacity-loader">
                                <span></span>
                                <span></span>
                                <span></span>
                            </div>
                            <span *ngIf="!saveLoader"> Save</span>      
                        </button>
                    </div>
                </form>
               
               </div>
            </div>
            </ng-container>
        </div>
    </div>



<!----------------------------------- STATUS CHANGE CONFIRMATION MODAL START-------------------------->
<button class="d-none" data-bs-toggle="modal" data-bs-target="#status-change" #statusChange></button>
<div class="modal fade" id="status-change" tabindex="-1" role="dialog" aria-hidden="true"  data-bs-backdrop="static" >
  <div class="modal-dialog modal-dialog-centered" style="max-width: 500px" role="document">
    <div class="modal-content">
      <div class="modal-body p-0 delete-text">
        <div class="delete-image d-flex align-items-center justify-content-center pt-4 pb-4">
          <div class="delete-close-btn">
            <button type="button" class="close-btn" data-bs-dismiss="modal" aria-label="Close" #statusChangeCloseButton (click)="closeModal()">
              <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" fill="none">
                <mask id="mask0_2031_1331" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="30"
                  height="30">
                  <rect width="30" height="30" fill="#D9D9D9" />
                </mask>
                <g mask="url(#mask0_2031_1331)">
                  <path
                    d="M8 23.75L6.25 22L13.25 15L6.25 8L8 6.25L15 13.25L22 6.25L23.75 8L16.75 15L23.75 22L22 23.75L15 16.75L8 23.75Z"
                    fill="black" />
                </g>
              </svg>
            </button>
          </div>
          <img src="/assets/images/delete-img.svg" style="width: 70px" />
        </div>
        <div class="bg-white p-4 text-center">

          <div>
            <h5 class="alert-heading font-18 mb-2">
              Are you sure you want to update status for<br />
              this Template?
            </h5>
            <p class="font-11">You will not be able to recover this</p>
          </div>

          <div class="mt-4 d-flex align-items-center flex-column">
            <button [ngClass]="{'disabled-lnk':statusToggle}" class="btn continue-btn"
            (click)="chnageTemplateStatus()"
              >
              Continue
              <i class="fa fa-spinner fa-spin" *ngIf="statusToggle"></i>
            </button>
            <button class="btn cancel-btn pt-2" type="button" data-bs-dismiss="modal" aria-label="Close" (click)="closeModal()">
              Cancel
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!----------------------------------- STATUS CHANGE CONFIRMATION MODAL END-------------------------->