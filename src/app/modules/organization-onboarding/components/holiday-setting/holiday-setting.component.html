<!-- <app-employee-onboarding-sidebar></app-employee-onboarding-sidebar> -->



<div class="page-wrapper">
    <div class="page-content-tab">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-12">
                    <div class="persnol-details">
                        <div class="d-flex align-items-center" style="gap:15px">
                            <div class="add-filtter" (click)="back()">
                                <a><i class="bi bi-chevron-left"></i></a>
                            </div>
                            <div class="">
                                <h5>Holiday Setting</h5>
                            </div>
                        </div>
                        <form>
                            <div class="form-group">
                                <div class="persnol-info mt-3">
                                    <div class="row">
                                        <div class="col-md-8 mt-3 mb-1">
                                            <div class="form-roe-data">
                                                <h5>Holiday(s)</h5>
                                                <p>A quick snapshot of your company.</p>
                                            </div>
                                        </div>
                                        <div class="col-md-4 mt-3 mb-1">
                                            <a class="" style="font-size: 16px; color: #6666f3;" data-bs-toggle="modal"
                                                data-bs-target="#addholiday"><i class="bi bi-plus"></i> Add more custom
                                                Holiday's
                                            </a>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-12 mt-1 mb-3">

                                            <div class="empty-file" *ngIf="isHolidayErrorPlaceholder">
                                                <div class="errorboxmain">
                                                    <div class="errorboxinner text-center">
                                                        <div class="errorboxplaceholder mb-2">
                                                            <img src="assets/images/signal.svg" style="width: 80px" />
                                                        </div>
                                                        <div class="">
                                                            <h4>Something went wrong</h4>
                                                            <p>
                                                                An error occurred while processing your
                                                                request. Please refresh the page and try
                                                                again.
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="" *ngIf="!isHolidayErrorPlaceholder">

                                                <div class="rule-main-box mt-1">
                                                    <div class="d-flex align-items-center attendance-boxx">
                                                        <div class="late-rule" style="width:70%">
                                                            <h5>Universal Holiday's</h5>
                                                        </div>
                                                    </div>

                                                    <div class="row mt-2 p-2">
                                                        <div class="col-md-3" *ngFor="let uniHol of universalHolidays">
                                                            <div class="shift-deta">
                                                                <p class="mb-0"><span
                                                                        style="color: #009688;">{{uniHol.name}} </span>
                                                                    -
                                                                    <span
                                                                        style="color:black">{{formatDateIn(uniHol.date)}}</span>
                                                                </p>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div class="rule-main-box mt-3">
                                                    <div class="d-flex align-items-center attendance-boxx">
                                                        <div class="late-rule" style="width:70%">
                                                            <h5>Custom Holiday's </h5>
                                                        </div>
                                                    </div>

                                                    <div class="row mt-2 p-2">
                                                        <div class="col-md-3" *ngFor="let customHol of customHolidays">
                                                            <div class="shift-deta">
                                                                <p class="mb-0 d-flex justify-content-between"><span
                                                                        style="color: #009688;">{{customHol.name}}</span>
                                                                    - <span
                                                                        style="color:black">{{formatDateIn(customHol.date)}}</span>
                                                                    <span style="color: #EB5050"
                                                                        (click)="deleteCustomHolidays(customHol.id)"
                                                                        *ngIf="isDateGreaterThanToday(customHol.date)"><i
                                                                            class="bi bi-trash"></i></span>
                                                                </p>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                    <div class="row d-flex justify-content-between">
                                        <div class="col-md-8 mt-3 mb-3">
                                            <div class="form-roe-data">
                                                <h5>Staff Weekly Holidays</h5>
                                                <p>Assign weekly off days of your business to automatically mark
                                                    attendance for those
                                                    days</p>
                                            </div>
                                        </div>
                                        <div class="col-md-4 mt-3 mb-3">
                                            <a class="" style="font-size: 16px; color: #6666f3;" data-bs-toggle="modal"
                                                data-bs-target="#addweeklyholiday"><i class="bi bi-plus"></i>Add Weekly
                                                Holiday's
                                            </a>
                                        </div>
                                    </div>

                                    <div class="row">

                                        <div class="col-md-12 mt-3 mb-3">

                                            <div class="empty-file" *ngIf="isWeeklyHolidayErrorPlaceholder">
                                                <div class="errorboxmain">
                                                    <div class="errorboxinner text-center">
                                                        <div class="errorboxplaceholder mb-2">
                                                            <img src="assets/images/signal.svg" style="width: 80px" />
                                                        </div>
                                                        <div class="">
                                                            <h4>Something went wrong</h4>
                                                            <p>
                                                                An error occurred while processing your
                                                                request. Please refresh the page and try
                                                                again.
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="empty-file" *ngIf="!weeklyHolidaysLoading && weeklyHolidays.length==0">
                                                <div class="errorboxmain">
                                                    <div class="errorboxinner text-center">
                                                        <div class="errorboxplaceholder mb-2">
                                                            <img src="assets/images/empty-box.svg" style="width: 80px" />
                                                        </div>
                                                        <div class="">
                                                            <h4>no weekly holidays available</h4>
                                                           
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="" *ngIf="!isWeeklyHolidayErrorPlaceholder">
                                                


                                                <div class="rule-main-box mt-3" *ngIf="weeklyHolidays.length>0">
                                                    <div class="d-flex align-items-center attendance-boxx">
                                                        <div class="late-rule" style="width:70%">
                                                            <h5>Weekly Holidays</h5>
                                                        </div>
                                                    </div>

                                                    <div class="row mt-2 p-2">


                                                        <div class="col-md-3" *ngFor="let weeklyHol of weeklyHolidays">
                                                            <div class="shift-deta ">
                                                                <p class="mb-0 d-flex justify-content-between"><span
                                                                        style="color: #009688;">{{weeklyHol.name}}</span><span
                                                                        style="color: #EB5050"
                                                                        (click)="deleteWeeklyHolidays(weeklyHol.id)"><i
                                                                            class="bi bi-trash"></i></span></p>

                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>

                                        </div>

                                    </div>

                                    <div class="row" *ngIf="onboardingViaString!='SLACK'">
                                        <div class="col-md-12 d-flex justify-content-between">
                                            <button class="btn skip-btn-new" type="button" (click)="next()"
                                            >Skip for now</button>
                                            <button class="btn btn-primary save-button"
                                            (click)="next()" type="button"  aria-label="Next Step">
                                                    Next <i class="bi bi-arrow-right" style="padding-left: 8px;"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="row" *ngIf="onboardingViaString==='SLACK'">
                                        <div class="col-md-12 d-flex justify-content-end">
                                            <button class="btn btn-primary save-button"
                                            (click)="next()" type="button"  aria-label="Next Step">
                                                    Next <i class="bi bi-arrow-right" style="padding-left: 8px;"></i>
                                            </button>
                                        </div>
                                    </div>
                                    


                                </div>
                            </div>
                        </form>

                    </div>
                </div>
            </div>


        </div>
    </div>
</div>

<div class="modal fade" id="addholiday" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Add Holiday(s)</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" #customHolidayModal
                    aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form #holidayForm="ngForm">
                    <div *ngFor="let holiday of holidayList; let i = index" class="form-group row mb-3">
                        <div class="col-md-5">
                            <input type="text" name="holidayName{{i}}" [(ngModel)]="holiday.name" class="form-control"
                                placeholder="Enter Holiday Name" required>
                        </div>
                        <div class="col-md-5">
                            <nz-date-picker class="nz-overlay-container" name="holidayDate{{i}}"
                                [(ngModel)]="holiday.date" ngModel required nzPlaceHolder="Select Holiday Date">
                            </nz-date-picker>
                        </div>
                        <div class="col-md-2">
                            <button type="button" class="btn btn-outline-danger" (click)="removeHoliday(i)"
                                *ngIf="holidayList.length > 1">
                                Remove
                            </button>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between">
                        <span class="add-more-holiday pointer" (click)="addHoliday()">
                            <i class="bi bi-plus"></i> Add More
                        </span>
                        <button type="submit" class="btn btn-success" (click)="registerCustomHolidays()"
                            [disabled]="holidayForm.invalid" *ngIf="!isCustomHolidayLoader">Submit</button>
                        <div class="dot-opacity-loader" *ngIf="isCustomHolidayLoader">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="addweeklyholiday" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h6 class="modal-title">Weekly Holiday</h6>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                    #closeWeeklyHolidayModal></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <div class="week-checkbox" *ngFor="let day of weekDay; let i = index">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" [(ngModel)]="day.selected"
                                    [id]="'weekDay' + i">
                                <label class="form-check-label" [for]="'weekDay' + i">{{day.name}}</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary btnmarkcancel" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btnmarkdelete" (click)="submitWeeklyHolidays()"
                    *ngIf="!submitWeeklyHolidaysLoader">Submit</button>
                <div class="dot-opacity-loader" *ngIf="submitWeeklyHolidaysLoader">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>

            </div>
        </div>
    </div>
</div>