<div class="mt-3">
    <div class="d-flex align-items-center justify-content-end">
        <button class="btn text-primary font-14 fw-semibold p-0" data-bs-toggle="modal" data-bs-target="#addPolicy" (click)="toggleViewForm()">
          <i class="bi bi-plus font-20 position-relative" style="top: 3px;"></i> Create expense policy </button>
    </div>

    

    <div class="mt-3">
      <ng-container *ngIf="companyExpensePolicyList.length <= 0">
        <tr>
            <td colspan="8">
                <div class="empty-filenew" style="margin-top: 7%; margin-bottom: 7%">
                    <nz-empty nzNotFoundImage="assets/images/no-data-found-img.svg"
                        [nzNotFoundContent]="contentTpl">
                        <ng-template #contentTpl>
                            <p class="mb-1 empty-filenew">No data for now</p>
                        </ng-template>
                    </nz-empty>
                </div>
            </td>
        </tr>
    </ng-container>

        <div class="row mb-3" *ngFor="let expensePolicy of companyExpensePolicyList; let i = index">
          <div class="col-md-4">
            <div class="expanse-policy-hedding">
              <h5 class="card-title mb-1">{{ expensePolicy?.policyName }}</h5>
              <p class="mb-0 text-muted font-12 fw-normal">Define the expense rules for the employee</p>
            </div>
          </div>
          <div class="col-md-8">
            <div class="expanse-policy-list p-3 border-rounded-2">
              <div class="d-flex align-items-center justify-content-between">
                <p class="mb-0 font-13"><i class="bi bi-arrow-right position-relative px-1" style="top: 1px;"></i> Rule 1</p>
                <div class="d-flex align-items-center gap-3">
                  <p class="mb-0 font-13 fw-semibold">Staff - {{ expensePolicy.totalEmployees }}</p>
                  <div class="d-flex align-items-center gap-3">
                    <a href="" data-bs-toggle="modal" data-bs-target="#addPolicy" (click)="getExpenseType()">
                        <i class="bi bi-pencil pointer" style="color: #6666f3"
                          (click)="getExpenseInformationById(expensePolicy)"></i>
                      </a>
                    <a class="delete-rule" data-bs-toggle="modal" data-bs-target="#delete-policy" (click)="getExpensePolicyOrExpensePolicyTypeId(expensePolicy.id, true, 0)">
                        <i class="bi bi-trash pointer text-danger"></i>
                    </a>
                  </div>
                  <!-- Ensure each button targets the correct collapse section using `i` -->
                  <span class="policy-action-btn d-flex align-items-center justify-content-center border-rounded-2 bg-white location-detail"
                        data-bs-toggle="collapse" [attr.href]="'#policydetails-' + i"
                        role="button" aria-expanded="false" [attr.aria-controls]="'policydetails-' + i">
                    <i class="bi bi-chevron-down font-18 position-relative transition" style="top: 2px;"></i>
                  </span>
                </div>
              </div>
      
              <!-- Unique ID for each policy details section -->
              <div class="collapse mt-3" [id]="'policydetails-' + i">
                <div class="row">
                  <div *ngFor="let expensePolicyType of expensePolicy.companyExpensePolicyTypeRes"
                       [ngClass]="{
                         'col-md-4': expensePolicy.companyExpensePolicyTypeRes.length > 2,
                         'col-md-6': expensePolicy.companyExpensePolicyTypeRes.length == 2,
                         'col-md-12': expensePolicy.companyExpensePolicyTypeRes.length == 1
                       }">
                    <div class="expanse-policy">
                      <div class="expanse-policy-heading p-3 d-flex align-items-center justify-content-between">
                        <h4 class="mb-0 font-12 fw-normal color-basic">
                          {{ expensePolicyType?.expenseTypeName || "N/A" }}
                        </h4>
                        <span>
                          <i class="bi bi-trash text-danger font-16"></i>
                        </span>
                      </div>
                      <div class="expanse-policy-detail p-3">
                        <div class="d-flex align-items-center justify-content-between mb-3">
                          <p class="mb-0">Amount</p>
                          <span style="color: #3f988f;">{{ expensePolicyType?.amount || "0" }}</span>
                        </div>
                        <div class="d-flex align-items-center justify-content-between mb-3">
                          <p class="mb-0">Flexible Amount</p>
                          <span style="color: #3f988f;">{{ expensePolicyType?.flexibleAmount || "0" }}</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>  
      
            </div>
          </div>
        </div>
      </div>
      

</div>


 <!-- Add company policy modal start -->
 <div class="modal fade" id="addPolicy" tabindex="-1" role="dialog" aria-labelledby="exampleModalDefaultLabel" aria-hidden="true" data-bs-backdrop="static">
    <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
        <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title m-0"> Create another template </h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
          (click)="clearForm(shiftForm)" #closeExpensePolicyModal></button>
        </div>
        <div class="modal-body p-0">
            <div class="add-location-modal">
            <div class="row h-100 p-0 m-0">
                <div class="col-md-3 p-0 m-0" >
                <div class="add-location-menu">
                    <div class="nav flex-column nav-pills pt-3 border-0" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                    <button class="nav-link active" id="locationSettingTab" data-bs-toggle="pill" data-bs-target="#expensePolicy"
                        type="button" role="tab" #expensePolicy>
                        Expense Policy
                    </button>
                    <button class="nav-link" id="profile-tab" data-bs-toggle="pill" data-bs-target="#staffSelection" #staffActiveTabInShiftTiming
                        type="button" role="tab" (click)="staffActiveTabInShiftTimingMethod()" [disabled]="expensePolicyReqList.length == 0" #staffSelectionTab>
                        Staff selection
                    </button>
                    </div>
                </div>
                </div>
                <div class="col-md-9 bg-white">
                    <div class="tab-content" id="myTabContent">
                        <div class="tab-pane show active" id="expensePolicy" role="tabpanel" #expensePolicy>
                            <div class="expanse-policy p-3 row" *ngIf="!showPolicyList">
                                <form #shiftForm="ngForm" ngNativeValidate (ngSubmit)="submitExpensePolicy()">
                                    <div *ngIf="viewForm" class="row pt-3 pb-3 ">
                                      <!-- Policy Name -->
                                      <div class="col-md-12">
                                        <div class="mb-3">
                                          <label for="policyNameInput" class="pb-2">Policy Name</label>
                                          <input [disabled]="tempPolicyName !== ''" type="text" class="form-control whatapp-login-input"
                                            id="policyNameInput" placeholder="Enter policy name" required [(ngModel)]="policyName"
                                            name="policyNameInput" #policyNameInput="ngModel" />
                                          <div *ngIf="policyNameInput.invalid && policyNameInput.touched" class="text-danger">
                                            Policy name is required.
                                          </div>
                                        </div>
                                      </div>
                    
                                      <div class="col-md-6 mb-3">
                                        <div class="form-field">
                                          <label for="expenseTypeDropdown" class="pb-2">Expense Type</label>
                    
                                          <nz-form-control>
                    
                                            <!-- expenseTypeId -->
                                            <nz-select style="width: 100%" nzSize="large" nzPlaceHolder="Select Expense type"
                                              [(ngModel)]="expensePolicyItem.expenseTypeId" (ngModelChange)="selectExpenseType($event)" required id="seleType"
                                              name="seleExpType" #seleExpType="ngModel" class="form-control">
                                              <nz-option *ngFor=" let expenseType of expenseTypeList" [nzValue]="expenseType.id"
                                                [nzLabel]="expenseType.name" [nzDisabled]="isExpenseTypeDisabled(expenseType.id)">
                                              </nz-option>
                                            </nz-select>
                                          </nz-form-control>
                    
                                        </div>
                    
                                      </div>
                    
                    
                    
                                      <div class="col-md-6 mb-3">
                                        <div class="form-field">
                                          <label for="expenseAmount" class="pb-2">Amount</label>
                                          <input type="number" class="form-control whatapp-login-input" min="1" id="policyAmountInput"
                                            placeholder="Enter amount" required [(ngModel)]="expensePolicyItem.amount" name="policyAmountInput"
                                            #policyAmountInput="ngModel" />
                                          <div *ngIf="isErrorShow && policyAmountInput.invalid && policyAmountInput.touched"
                                            class="text-danger">
                                            Amount is required.
                                          </div>
                                        </div>
                                      </div>
                    
                                      <div class="col-md-12 mb-3 mt-1" *ngIf="isExpenseTypeSelected">
                                        <div class="form-group requesting-half-leave p-2">
                                          <div class="d-flex align-items-center justify-content-between " style="padding-top: 2px;">
                                            <p class="mb-0">Select Your Payment Structure </p>
                                          </div>
                                          <hr>
                    
                                          <div class="row mt-3 mb-2">
                                            <div class="col-md-6">
                                              <label class="form-check assets-req d-flex align-items-center justify-content-start">
                                                <input class="form-check-input" type="radio" name="paymentType" id="flexible"
                                                  value="flexible" required [(ngModel)]="expensePolicyItem.paymentType"
                                                  (change)="onPaymentTypeChange(constant.STRUCTURE_FLEXIBLE)">
                                                <p class="form-check-label mb-0" for="exampleRadios1">
                                                  Flexible
                                                </p>
                                              </label>
                                            </div>
                                            <div class="col-md-6">
                                              <label class="form-check assets-req d-flex align-items-center justify-content-start">
                                                <input class="form-check-input" type="radio" name="paymentType" id="fixed" value="fixed"
                                                  required [(ngModel)]="expensePolicyItem.paymentType" (change)="onPaymentTypeChange(constant.STRUCTURE_FIXED)">
                                                <p class="form-check-label mb-0" for="exampleRadios1">
                                                  Fixed
                                                </p>
                                              </label>
                                            </div>
                                            <div *ngIf="!expensePolicyItem.paymentType && shiftForm.submitted" class="text-danger mt-2">
                                              Payment type is required
                                            </div>
                                          </div>
                    
                                        </div>
                                      </div>
                                      <div class="form-check form-check-inline mb-3" *ngIf="expensePolicyItem.paymentType == constant.STRUCTURE_FIXED"
                                        style="padding-left: 30px;">
                                        <input class="form-check-input" type="checkbox" id="thresholdCheckbox" name="checkThresold"
                                          [(ngModel)]="expensePolicyItem.isThresold" (ngModelChange)="setThresold($event)">
                                        <label class="form-check-label" for="thresholdCheckbox">Do you want to set threshold?</label>
                                      </div>
                    
                                      <div class="row mb-3" *ngIf="expensePolicyItem.amount && expensePolicyItem.paymentType == constant.STRUCTURE_FIXED">
                                        <div class="col-md-4">
                                          <div class="form-field">
                                            <label for="expenseAmount" class="pb-2">Threshold Amount</label>
                                            <input type="number" class="form-control" placeholder="Enter Amount" id="amountFlex"
                                            
                                              name="amountFlex" [(ngModel)]="expensePolicyItem.flexibleAmount" #amountFlex="ngModel" min="1" required />
                                            <div *ngIf="amountFlex.invalid && amountFlex.touched" class="text-danger mt-2">
                                              Flexible amount is required
                                            </div>
                                          </div>
                                        </div>
                                        <div class="col-md-4" *ngIf="expensePolicyItem.isThresold">
                                          <div class="form-field">
                                            <label for="expenseAmount" class="pb-2">Threshold Type</label>
                                            <label class="form-check assets-req d-flex align-items-center justify-content-start"
                                              style="background-color: #ececec36;">
                                              <input class="form-check-input" type="radio" name="thresholdTypeValue" id="valueType"
                                              [checked]=" this.expensePolicyItem.isPercentage==0"
                                                required
                                                (change)="onThresholdTypeChange(constant.AMOUNT)">
                                              <p class="form-check-label mb-0" for="valueType">
                                                Amount
                                              </p>
                                            </label>
                                          </div>
                                        </div>
                                        <div class="col-md-4" *ngIf="expensePolicyItem.isThresold">
                                          <div class="form-field">
                                            <label for="expenseAmount" class="pb-2">Threshold Type</label>
                                            <label class="form-check assets-req d-flex align-items-center justify-content-start"
                                              style="background-color: #ececec36;">
                                              <input class="form-check-input" type="radio" name="thresholdTypePercentage"
                                                id="percentageType"  [checked]=" this.expensePolicyItem.isPercentage==1"
                                                 required
                                                (change)="onThresholdTypeChange(constant.PERCENTAGE)">
                                              <p class="form-check-label mb-0" for="percentageType">
                                                Percentage
                                              </p>
                                            </label>
                                          </div>
                                        </div>
                                      </div>
                    
                                      <div *ngIf="!editIndexPolicyToggle" class="d-flex justify-content-end add-update-btn">
                                        <button type="button" class="btn p-0 mt-2 text-primary" (click)="addExpensePolicy()"
                                          [disabled]="shiftForm.invalid ||  expensePolicyItem.expenseTypeId == 0 "><i class="bi bi-plus-lg"></i> Add </button>
                    
                                      </div>
                                      <div *ngIf="editIndexPolicyToggle" class="d-flex justify-content-end">
                                        <button type="button" class="btn p-0 mt-2 text-primary" (click)="addExpensePolicy()"
                                          [disabled]="shiftForm.invalid ||  expensePolicyItem.expenseTypeId == 0 ">Update </button>
                    
                                      </div>
                    
                                    </div>

                                    <div *ngIf="viewAddBtn" class="d-flex justify-content-end add-update-btn">
                                      <button type="button" class="btn p-0 mt-2 text-primary" (click)="changeViewForm()"><i class="bi bi-plus-lg"></i> Add </button>
                  
                                    </div>
                    
                                    <!-- Table to Show Expense Policy List -->
                                    <div class="table-responsive bg-white mt-2 leave-category-list" *ngIf="expensePolicyReqList.length > 0">
                                      <table class="table empOnnoardtable">
                                        <thead class="thead-light">
                                          <tr>
                                            <th class="text-center" style="width: 5%">Sr. No</th>
                                            <th class="text-center" style="width: 10%">Expense Type</th>
                                            <th class="text-center" style="width: 10%">Payment Type</th>
                                            <th class="text-center" style="width: 10%">Amount</th>
                                            <th class="text-center" style="width: 10%">Flexible Amount</th>
                                            <th *ngIf="!updateToggle" class="text-center" style="width: 10%">Action</th>
                                          </tr>
                                        </thead>
                                        <tbody>
                                          <tr *ngFor="let expensePolicy of expensePolicyReqList; let i = index">
                                            <td class="text-center">{{ i + 1 }}.</td>
                                            <td class="text-center">{{ expensePolicy.expenseTypeName }}</td>
                                            <td class="text-center">
                                              <div class="badge rounded-pill"
                                                [ngClass]="{ 'badge-soft-primary': expensePolicy.isFlexibleAmount === 1, 'badge-soft-warning': expensePolicy.isFlexibleAmount === 0 }">
                                                {{ expensePolicy.isFlexibleAmount === 1 ?   'Flexible' :'Fixed'}}
                                              </div>
                                            </td>
                                            <td class="text-center">{{ expensePolicy.amount }}</td>
                                            <td class="text-center">{{ expensePolicy.flexibleAmount }} <span
                                                *ngIf="expensePolicy.isPercentage == 1 && expensePolicy.flexibleAmount > 0">%</span>
                                            </td>
                    
                                            <!-- {{updateToggle}} -->
                                             <!-- *ngIf="!updateToggle"  -->
                                            <td class="text-center">
                                              <div class="d-flex align-items-center gap-2">
                                                <button (click)="editExpensePolicy(i)" type="button" class="btn btnAction p-0">
                                                  <svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewBox="0 0 19 19"
                                                    fill="none">
                                                    <mask id="mask0_4127_1895" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0"
                                                      y="0" width="19" height="19">
                                                      <rect width="18.8342" height="18.8342" fill="#444444" />
                                                    </mask>
                                                    <g mask="url(#mask0_4127_1895)">
                                                      <path
                                                        d="M3.92372 14.9177H4.91369L12.9469 6.88448L11.9569 5.89451L3.92372 13.9277V14.9177ZM2.74658 16.0948V13.4388L13.0979 3.09194C13.2166 2.98417 13.3476 2.90092 13.4909 2.84219C13.6344 2.78333 13.7848 2.75391 13.9421 2.75391C14.0995 2.75391 14.2519 2.78183 14.3993 2.83768C14.5468 2.89353 14.6774 2.98234 14.791 3.1041L15.7494 4.07446C15.8712 4.18812 15.958 4.31891 16.0098 4.46684C16.0616 4.61476 16.0875 4.76269 16.0875 4.91062C16.0875 5.06848 16.0605 5.21909 16.0066 5.36244C15.9528 5.50592 15.867 5.63698 15.7494 5.75561L5.4026 16.0948H2.74658ZM12.4432 6.39813L11.9569 5.89451L12.9469 6.88448L12.4432 6.39813Z"
                                                        fill="#444444" />
                                                    </g>
                                                  </svg>
                                                </button>
                    
                                                <button (click)="deleteExpensePolicy(i)" type="button" class="btn btnAction p-0">
                                                  <svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewBox="0 0 19 19"
                                                    fill="none">
                                                    <mask id="mask0_4127_1892" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0"
                                                      y="0" width="19" height="19">
                                                      <rect x="0.165527" y="0.140625" width="18.8342" height="18.8342" fill="#D9D9D9" />
                                                    </mask>
                                                    <g mask="url(#mask0_4127_1892)">
                                                      <path
                                                        d="M5.90067 16.2346C5.50934 16.2346 5.17503 16.096 4.89775 15.8189C4.6206 15.5416 4.48202 15.2073 4.48202 14.816V4.85563H3.69727V3.67849H7.22868V2.98438H11.9372V3.67849H15.4686V4.85563H14.6839V14.816C14.6839 15.2124 14.5465 15.548 14.2719 15.8226C13.9972 16.0973 13.6617 16.2346 13.2652 16.2346H5.90067ZM13.5067 4.85563H5.65916V14.816C5.65916 14.8865 5.68179 14.9443 5.72704 14.9896C5.7723 15.0349 5.83017 15.0575 5.90067 15.0575H13.2652C13.3257 15.0575 13.381 15.0323 13.4312 14.982C13.4816 14.9317 13.5067 14.8764 13.5067 14.816V4.85563ZM7.54572 13.488H8.72266V6.42515H7.54572V13.488ZM10.4432 13.488H11.6202V6.42515H10.4432V13.488Z"
                                                        fill="#FF0000" />
                                                    </g>
                                                  </svg>
                                                </button>
                                              </div>
                                            </td>
                    
                                          </tr>
                                        </tbody>
                                      </table>
                                    </div>
                                  </form>
                            </div>

                            
                            <div class="modal-footer d-flex align-items-center justify-content-end bg-white config-location-footer">
                                <button type="submit" [ngClass]="{' btn-border':expensePolicyReqList.length > 0 } " class="btn next-tab-btn" [disabled]="expensePolicyReqList.length == 0"
                                            (click)="staffActiveTabInShiftTimingMethod()">
                                    <span>
                                        <span>Next</span>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none">
                                            <path d="M1.95801 11.0005C1.95801 10.8131 2.01656 10.6609 2.13366 10.5438C2.25076 10.4267 2.40299 10.3681 2.59035 10.3681H18.1179L13.9725 6.22276C13.832 6.08224 13.7618 5.9183 13.7618 5.73094C13.7618 5.54358 13.832 5.39135 13.9725 5.27424C14.1131 5.15714 14.277 5.09859 14.4644 5.09859C14.6517 5.09859 14.8157 5.14543 14.9562 5.23911L20.2257 10.5086C20.3194 10.6492 20.3662 10.8131 20.3662 11.0005C20.3662 11.1878 20.3194 11.3518 20.2257 11.4923L14.9562 16.7618C14.8157 16.8555 14.6517 16.9023 14.4644 16.9023C14.277 16.9023 14.1131 16.8438 13.9725 16.7267C13.832 16.6096 13.7618 16.4574 13.7618 16.27C13.7618 16.0826 13.832 15.9187 13.9725 15.7782L18.1179 11.6328H2.59035C2.40299 11.6328 2.25076 11.5743 2.13366 11.4572C2.01656 11.3401 1.95801 11.1878 1.95801 11.0005Z" fill="#6666F2"></path>
                                        </svg>
                                    </span>
                                </button>
                            </div>
                        </div>
                        
                        <div class="tab-pane fade" id="staffSelection" role="tabpanel" #staffSelection>
                            <div class="configuration-location p-3">
                                <div class="col-md-12">
                                    <div class="d-flex align-items-center" style="border: 1px solid #f1f1f1;">
                                        <div class="" style="width: 70%">
                                            <form novalidate="" role="search" (submit)="searchUsers()"
                                                class="searching ng-untouched ng-pristine ng-valid">
                                                <div class="form-group" style="position: relative">
                                                    <input type="text" id="searchText" placeholder="Search by name and role"
                                                        class="form-control me-2 ng-untouched ng-pristine ng-valid attendance-details-search"
                                                        (keyup)="searchUsers()" [(ngModel)]="searchText" [ngModelOptions]="{ standalone: true }"
                                                        style="padding: 10px 50px 10px 40px" />
                                                    <button *ngIf="searchText.length !== 0" type="button" class="btn close-btn"
                                                        (click)="clearSearchText()">
                                                        <i class="bi bi-x mt-auto mb-auto pl-3"></i>
                                                    </button>
                                                    <i class="bi bi-search search-icon"
                                                        style="position: absolute; top: 33px; transform: translateY(-50%); left: 10px; padding-left: 5px;"></i>
                                                </div>
                                            </form>
                                       </div>
                                       <div class="container">
                                        <div class="content-wrapper">
                                          <div class="d-flex filter-wrapper gap-5 justify-content-end">
                                            <!-- Display this only if there are selected staff -->
                                            <a class="info-button" *ngIf="selectedStaffIdsUser.length > 0">
                                              {{ selectedStaffIdsUser.length }} selected of
                                              {{ totalUserCount }}
                                            </a>
                                            <!-- Clear button shows only if there are selected staff -->
                                            <span class="clear-button text-danger pointer" *ngIf="selectedStaffIdsUser.length > 0"
                                              (click)="clearIds()">
                                              Clear all users <i class="bi bi-x"></i>
                                            </span>
                
                                            <label class="checkbox-label" style="cursor: pointer">
                                              <input type="checkbox" [checked]="isAllSelected"
                                                (change)="selectAllUsers(!isAllSelected)" />
                                              Select all
                                            </label>
                
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                </div>
                                 
                                <div class="mt-3 location-user-table">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th style="width: 5%;">
                                                    <input type="checkbox" class="form-check-input pointer">
                                                </th>
                                                <th style="width: 25%;">Name</th>
                                                <th style="width: 25%;">Email Address</th>
                                                <th style="width: 20%;" >Phone Number</th>
                                            </tr>
                                        </thead>
                                        <tbody *ngIf="staffLoading">
                                            <tr>
                                              <td colspan="9" class="text-center" style="height: 40vh;">
                                                <img src="assets/images/load-8.gif" style="width: 50px;">
                                              </td>
                                            </tr>
                                          </tbody>
                        
                        
                                          <tbody *ngIf="!staffLoading">
                                            <tr *ngFor="let staff of staffs; let i = index">
                                              <td>
                                                <div class="form-check">
                                                  <input type="checkBox" name="checkBox{{ i }}" id="checkBoxid{{ i }}"
                                                    (click)="selectSingle(staff, i)" [checked]="staff.checked" />
                                                </div>
                                              </td>
                        
                                              <td style="padding: 12px 15px">{{ staff.name }}</td>
                                              <td style="padding: 12px 15px">
                                                {{ staff.email ? staff.email : "N/A" }}
                                              </td>
                                              <td style="padding: 12px 15px">
                                                {{ staff.phoneNumber || "N/A" }}
                                              </td>
                                            </tr>
                                          </tbody>
                                    </table>
                                    
                                </div>
                                 <div class=" config-location-footer">
                                    <div class="d-flex align-items-center justify-content-between w-100 p-3 bg-white">
                                        <p class="mb-0" style="padding-left: 15px">
                                            Showing {{ staffs.length }} of {{ total }} members
                                          </p>
                                        
                                            <ngb-pagination [collectionSize]="total" [rotate]="true" (pageChange)="pageChanged($event)"
                                                [pageSize]="databaseHelper.itemPerPage" [(page)]="databaseHelper.currentPage" [maxSize]="4"
                                                [boundaryLinks]="true">
                                            </ngb-pagination>

                                    </div>
                                    <div class="modal-footer d-flex align-items-center justify-content-end bg-white">
                                        
                                        <button  type="button" class="btn btn-outline-primary btn-round"
                                            (click)="getUserMappedWithPolicy(shiftForm)"
                                            [disabled]="selectedStaffIdsUser.length == 0 || userMappedLoading">
                                            <span  *ngIf="!userMappedLoading">Submit</span>
                                        

                                        <div class="dot-opacity-loader" *ngIf="userMappedLoading">
                                            <span></span>
                                            <span></span>
                                            <span></span>
                                        </div>
                                    </button>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                </div>
            </div>
            </div>
            <div>
            </div>
        </div>
        </div>
    </div>
    </div>
<!-- Add company policy modal start -->


<!-- delete policy modal -->
<div class="modal fade" id="delete-policy" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" style="max-width: 500px" role="document">
      <div class="modal-content">
        <div class="modal-body p-0 delete-text">
          <div class="delete-image d-flex align-items-center justify-content-center pt-4 pb-4">
            <div class="delete-close-btn">
              <button type="button" class="close-btn" data-bs-dismiss="modal" aria-label="Close"
                #closeButtonDeleteExpensePolicy>
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" fill="none">
                  <mask id="mask0_2031_1331" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="30"
                    height="30">
                    <rect width="30" height="30" fill="#D9D9D9" />
                  </mask>
                  <g mask="url(#mask0_2031_1331)">
                    <path
                      d="M8 23.75L6.25 22L13.25 15L6.25 8L8 6.25L15 13.25L22 6.25L23.75 8L16.75 15L23.75 22L22 23.75L15 16.75L8 23.75Z"
                      fill="black" />
                  </g>
                </svg>
              </button>
            </div>
            <img src="/assets/images/delete-img.svg" style="width: 70px" />
          </div>
          <div class="bg-white p-4 text-center">
  
            <div *ngIf="expenseAppliedCount == 0">
              <h5 class="alert-heading font-18 mb-2">
                Are you sure you want to delete <br />
                {{ expensePolicyId > 0 ? "Expense Policy ?" : "Expense Policy Type ?" }}
              </h5>
              <p class="font-11">You will not be able to recover this</p>
            </div>
  
            <div *ngIf="expenseAppliedCount > 0">
              <h5 class="alert-heading font-18 mb-2">
                Are you sure ?
              </h5>
              <p class="font-11">There are <b class="font-13">{{expenseAppliedCount}}</b> users who have submitted expense
                associated with this policy.
                Deleting this policy will permanently remove all related data and cannot be recovered</p>
            </div>
  
            <div class="mt-4 d-flex align-items-center flex-column">
              <button [disabled]="deletePolicyToggle" class="btn continue-btn" *ngIf="expensePolicyId > 0"
                (click)="deleteExpensePolicyById()">
                Continue
                <i class="fa fa-spinner fa-spin" *ngIf="deletePolicyToggle"></i>
              </button>
  
              <button [disabled]="deletePolicyToggle" class="btn continue-btn" *ngIf="expensePolicyId == 0"
                (click)="deleteExpensePolicyTypeById()">
                Continue
                <i class="fa fa-spinner fa-spin" *ngIf="deletePolicyToggle"></i>
              </button>
              <button class="btn cancel-btn pt-2" type="button" data-bs-dismiss="modal" aria-label="Close">
                Cancel
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- delete policy modal end-->