<div class="page-wrapper">
  <!-- Page Content-->
  <div class="page-content-tab">
    <div class="container-fluid mb-4">
      <div class="row">
        <div class="col-md-12 mt-3">

          <ul id="pills-tab" role="tablist" class="nav nav-pills position-relative attendance-tab">
            <li class="nav-item">
              <a id="pills-announcement-tab" role="tab" (click)="changeTab(ATTENDANCE_TAB)"
                [ngClass]="{ 'active-tab': ACTIVE_TAB == ATTENDANCE_TAB }" aria-controls="pills-announcement"
                aria-selected="false" class="nav-link ">Attendance</a>
            </li>
            <li class="nav-item d-none d-flex align-items-center">
              <a id="pills-notification-tab" role="tab" (click)="changeTab(OVERTIME_TAB)" class="position-relative"
                [ngClass]="{ 'active-tab': ACTIVE_TAB == OVERTIME_TAB }" aria-controls="pills-notification"
                aria-selected="false" class="nav-link">Overtime</a>
              <span class="request-count d-flex align-items-center justify-content-center" *ngIf="overtimeCount > 0">{{
                overtimeCount }}</span>
            </li>
            <li class="nav-item d-flex align-items-center">
              <a id="pills-notification-tab" role="tab" (click)="changeTab(ATTENDANCE_UPDATE_REQUEST_TAB_NEW); resetFilters();"
                class="position-relative" [ngClass]="{
                    'active-tab': ACTIVE_TAB == ATTENDANCE_UPDATE_REQUEST_TAB_NEW}" aria-controls="pills-notification" aria-selected="false" class="nav-link">Request Records</a>
              <span class="request-count d-flex align-items-center justify-content-center"
                *ngIf="totalPendingRequests > 0">{{ totalPendingRequests }}</span>
            </li>
          </ul>
          <!-- ; else attendanceSectionOtherTabCondition -->
          <!-- <ng-container *ngIf="ACTIVE_TAB == ATTENDANCE_TAB">
            <div class="d-flex align-items-center attendance-date position-relative attendance-date-picker">
              <span class="d-flex align-items-center justify-content-center pointer calendar-back-btn"
                (click)="selectPreviousDay()">
                <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 21 21" fill="none">
                  <mask id="mask0_4719_1625" maskUnits="userSpaceOnUse" x="0" y="0" width="21" height="21">
                    <rect x="0.5" y="0.5" width="20" height="20" fill="#D9D9D9"></rect>
                  </mask>
                  <g mask="url(#mask0_4719_1625)">
                    <path
                      d="M8.83203 15.5L3.83203 10.5L8.83203 5.5L9.9987 6.70833L7.04036 9.66667H17.1654V11.3333H7.04036L9.9987 14.2917L8.83203 15.5Z"
                      fill="#060606"></path>
                  </g>
                </svg>
              </span>
              <span class="calendar-separator"></span>
              <div class="dropdown">
                <nz-date-picker class="attendance-date" nzMode="date" [nzSize]="size" [(ngModel)]="selectedDate"
                  (ngModelChange)="onDateChange($event)" [nzDisabledDate]="disableDates"></nz-date-picker>
              </div>
              <span class="calendar-separator"></span>
              <span class="d-flex align-items-center justify-content-center pointer calendar-back-btn"
                (click)="selectNextDay()">
                <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 21 21" fill="none">
                  <mask id="mask0_4719_1639" maskUnits="userSpaceOnUse" x="0" y="0" width="21" height="21">
                    <rect width="20" height="20" transform="matrix(-1 0 0 1 20.5 0.5)" fill="#D9D9D9"></rect>
                  </mask>
                  <g mask="url(#mask0_4719_1639)">
                    <path
                      d="M12.168 15.5L17.168 10.5L12.168 5.5L11.0013 6.70833L13.9596 9.66667H3.83464V11.3333H13.9596L11.0013 14.2917L12.168 15.5Z"
                      fill="#060606"></path>
                  </g>
                </svg>
              </span>
            </div>
          </ng-container> -->
          <!-- <ng-template #attendanceSectionOtherTabCondition>
            <div class="d-flex align-items-center attendance-date position-relative attendance-date-picker">
              <span class="d-flex align-items-center justify-content-center pointer calendar-back-btn"
                (click)="selectPreviousMonth()">
                <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 21 21" fill="none">
                  <mask id="mask0_4719_1625" maskUnits="userSpaceOnUse" x="0" y="0" width="21" height="21">
                    <rect x="0.5" y="0.5" width="20" height="20" fill="#D9D9D9"></rect>
                  </mask>
                  <g mask="url(#mask0_4719_1625)">
                    <path
                      d="M8.83203 15.5L3.83203 10.5L8.83203 5.5L9.9987 6.70833L7.04036 9.66667H17.1654V11.3333H7.04036L9.9987 14.2917L8.83203 15.5Z"
                      fill="#060606"></path>
                  </g>
                </svg>
              </span>
              <span class="calendar-separator"></span>
              <div class="dropdown">
                <nz-date-picker class="attendance-date" nzMode="date" [nzSize]="size" [(ngModel)]="selectedDate"
                  (ngModelChange)="onDateChange($event)" [nzDisabledDate]="disableDates"></nz-date-picker>
              </div>
              <span class="calendar-separator"></span>
              <span class="d-flex align-items-center justify-content-center pointer calendar-back-btn"
                (click)="selectNextMonth()">
                <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 21 21" fill="none">
                  <mask id="mask0_4719_1639" maskUnits="userSpaceOnUse" x="0" y="0" width="21" height="21">
                    <rect width="20" height="20" transform="matrix(-1 0 0 1 20.5 0.5)" fill="#D9D9D9"></rect>
                  </mask>
                  <g mask="url(#mask0_4719_1639)">
                    <path
                      d="M12.168 15.5L17.168 10.5L12.168 5.5L11.0013 6.70833L13.9596 9.66667H3.83464V11.3333H13.9596L11.0013 14.2917L12.168 15.5Z"
                      fill="#060606"></path>
                  </g>
                </svg>
              </span>
            </div>
          </ng-template> -->
        </div>
      </div>

      <div id="pills-tabContent" class="tab-content">
        <div *ngIf="ACTIVE_TAB == ATTENDANCE_TAB">
          <div class="attendance-list p-3 bg-white mt-3 border-rounded-2">

            <div class="attendance-deta mb-2 mt-3">
              <div class="d-flex align-items-center justify-content-between">
                <div class="staff text-center">
                  <p class="mb-0 font-13">Total Staff</p>
                  <h5 class="font-14 fw-bold mb-2 mt-2">{{ attendanceDetailsCountResponse?.totalUsers }}</h5>
                </div>
                <div class="staff-separator"></div>
                <div class="staff text-center">
                  <p class="mb-0 font-13">Present</p>
                  <h5 class="font-14 fw-bold mb-2 mt-2">{{ attendanceDetailsCountResponse?.presentUsers }}</h5>
                </div>
                <div class="staff-separator"></div>
                <div class="staff text-center">
                  <p class="mb-0 font-13">Absent</p>
                  <h5 class="font-14 fw-bold mb-2 mt-2"> {{ attendanceDetailsCountResponse?.absentUsers }}</h5>
                </div>
                <div class="staff-separator"></div>
                <div class="staff text-center">
                  <p class="mb-0 font-13">Not Marked</p>
                  <h5 class="font-14 fw-bold mb-2 mt-2">{{ attendanceDetailsCountResponse?.unmarkedUsers }}</h5>
                </div>
                <div class="staff-separator"></div>
                <div class="staff text-center">
                  <p class="mb-0 font-13">Half Day</p>
                  <h5 class="font-14 fw-bold mb-2 mt-2">{{ attendanceDetailsCountResponse?.halfDayUsers }}</h5>
                </div>
                <div class="staff-separator"></div>
                <div class="staff text-center">
                  <p class="mb-0 font-13">OverTime</p>
                  <h5 class="font-14 fw-bold mb-2 mt-2">{{ attendanceDetailsCountResponse?.overTimeUsers }}</h5>
                </div>
                <div class="staff-separator"></div>
                <div class="staff text-center">
                  <p class="mb-0 font-13">On Leave</p>
                  <h5 class="font-14 fw-bold mb-2 mt-2">{{ attendanceDetailsCountResponse?.usersOnLeave }}</h5>
                </div>
              </div>
            </div>
          </div>
          <ng-container *ngIf="!showPlaceholder; else notShowPlaceholder">

            <div class="asset-assigned-search mt-3">
              <div class="d-flex justify-content-start align-items-center">
                  <div class="search-filter ">
                      <button type="button" id="statusDropdown" class="btn btn-secondary new-dropdown d-flex align-items-center justify-content-between" (click)="changeShowFilter(true)" >
                          Filters
                          <svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" viewBox="0 0 23 23" fill="none">
                              <mask id="mask0_7808_40" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="23" height="23">
                              <rect x="0.262695" y="0.283112" width="22.4338" height="22.4338" fill="#1C1B1F"/>
                              </mask>
                              <g mask="url(#mask0_7808_40)">
                              <path d="M9.61057 17.1084V15.239H13.3495V17.1084H9.61057ZM5.87161 12.4347V10.5653H17.0885V12.4347H5.87161ZM3.06738 7.76104V5.89156H19.8927V7.76104H3.06738Z" fill="#1C1B1F"/>
                              </g>
                          </svg>
                      </button>

                  </div>
                  <div class="search-date d-flex align-items-center justify-content-between position-relative w-100">
                          <div class="form-group w-100 position-relative">

                              <input type="text" id="searchText" placeholder="Search by name and role"
                              class="form-control me-2 attendance-details-search font-13 w-100 bg-white border-0"
                              (keyup)="searchUsers($event)" [(ngModel)]="searchText" [ngModelOptions]="{ standalone: true }" />
                              <i class="bi bi-x pl-3 pointer font-20 search-icon d-flex align-items-center h-100" *ngIf="searchText.length > 0" (click)="clearSearchText()"></i>
                              <i class="bi bi-search search-icon d-flex align-items-center h-100" *ngIf="searchText.length == 0"></i>
                          </div>
                  </div>
                  <div *ngIf="rbacService.hasWriteAccess(Routes.TIMETABLE)">
                      <button type="button" class="btn primaryBtnLink filter-btn d-block text-cennter" data-bs-toggle="modal"
                      data-bs-target="#sampleFileModal">
                        <i class="bi bi-upload"></i> Upload Attendance
                      </button>
                  </div>
              </div>

              <div class="actionMenuList filter-box p-0 p-0 border position-absolute bg-white border-rounded-2" [ngClass]="{'d-none': !showFilter}">
                <div class="d-flex align-items-center justify-content-between border-bottom p-3">
                  <h5 class="mb-0 font-14 fw-semibold"> Filter</h5>
                  <span class="pointer lh-1" (click)="changeShowFilter(false)">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" fill="none">
                      <g opacity="0.8">
                        <mask id="mask0_7729_258" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="18" height="19">
                          <rect y="0.5" width="18" height="18" fill="#D9D9D9"/>
                        </mask>
                        <g mask="url(#mask0_7729_258)">
                          <path d="M4.8 14.75L3.75 13.7L7.95 9.5L3.75 5.3L4.8 4.25L9 8.45L13.2 4.25L14.25 5.3L10.05 9.5L14.25 13.7L13.2 14.75L9 10.55L4.8 14.75Z" fill="#1C1B1F"/>
                        </g>
                      </g>
                    </svg>
                  </span>
                </div>
                <div class="row p-3">
                  <div class="mt-2">
                    <div class="col-md-12 mb-3">
                      <label for="type" class="pb-2">Status Filter</label>
                      <nz-select nzPlaceHolder="Select Status" class="w-100 form-control placeholder-lines" [(ngModel)]="filterCriteria">
                        <nz-option nzValue="ALL" nzLabel="All"></nz-option>
                        <nz-option nzValue="PRESENT" nzLabel="Present"></nz-option>
                        <nz-option nzValue="ABSENT" nzLabel="Absent"></nz-option>
                        <nz-option nzValue="HALFDAY" nzLabel="Halfday"></nz-option>
                        <nz-option nzValue="LEAVE" nzLabel="Leave"></nz-option>
                      </nz-select>
                    </div>
                    <div class="col-md-12 mb-3">
                      <label for="type" class="pb-2">Attendance Date</label>
                      <nz-date-picker class="ant-picker ant-picker-borderless"
                        nzMode="date" [nzSize]="size" [(ngModel)]="selectedDate"
                        (ngModelChange)="onDateChange($event)" [nzDisabledDate]="disableDates">
                      </nz-date-picker>
                    </div>
                  </div>
                </div>
                <div class="p-3 border-top d-flex gap-2 align-items-center justify-content-end">
                  <button class="btn cancel-btn mt-0" (click)="resetFilterCriteria('ALL')">Reset it</button>
                  <button class="btn submitActionBtn" (click)="applyFilterCriteria(); changeShowFilter(false)">Apply</button>
                </div>
              </div>
          </div>

          <div class="filter-bdg d-flex align-items-center gap-2 mt-3" >
            <p (click)="changeShowFilter(true)" class="filter-pills d-flex align-items-centar gap-2 pointer font-12 fw-semibold">{{appliedDate | date : "dd/MM/yyyy"}}
            </p>
            <p *ngIf="filterCriteria!='ALL' && filterCriteria!=''" class="filter-pills d-flex align-items-centar gap-2 pointer font-12 fw-semibold"> Status: {{filterCriteria}}
              <i class="bi bi-x-lg pointer" (click)="resetFilterCriteria('ALL')"></i>
            </p>
          </div>


            <div>
              <ng-container *ngIf="
                  isShimmerForAttendanceDetailsResponse &&
                    !dataNotFoundForAttendanceDetailsResponse &&
                    !networkConnectionErrorForAttendanceDetailsResponse;
                  else attendanceDetailsResponseData
                ">
                <div class="monthly-section attendance-list mb-2 bg-white p-3 mt-3 border-rounded-2" *ngFor="let item of [].constructor(6)">
                  <div class="row">
                    <div class="col-md-6">
                      <div class="m">
                        <ngx-shimmer-loading [width]="'30%'" [height]="'15px'"></ngx-shimmer-loading>
                      </div>
                      <div class="mt-1">
                        <ngx-shimmer-loading [width]="'40%'" [height]="'15px'"></ngx-shimmer-loading>
                      </div>
                      <div class="mt-1">
                        <ngx-shimmer-loading [width]="'35%'" [height]="'15px'"></ngx-shimmer-loading>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="row">
                        <div class="col-md-4" *ngFor="let item of [].constructor(6)">
                          <div class="">
                            <ngx-shimmer-loading [width]="'100%'" [height]="'30px'"></ngx-shimmer-loading>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-container>

              <ng-template #attendanceDetailsResponseData>
                <ng-container *ngIf="
                    attendanceDetailsResponseList !== null &&
                      attendanceDetailsResponseList !== undefined &&
                      attendanceDetailsResponseList.length !== 0 &&
                      !dataNotFoundForAttendanceDetailsResponse &&
                      !networkConnectionErrorForAttendanceDetailsResponse;
                    else errorInFetchingAttendanceDetailsResponseData
                  ">
                  <div class="monthly-section mb-2 mt-3 bg-white p-3 mt-3 border-rounded-2 attendance-list" *ngFor="
                      let attendanceDetailsResponse of attendanceDetailsResponseList
                        | paginate
                          : {
                              itemsPerPage: itemPerPage,
                              currentPage: pageNumber,
                              totalItems: total
                            }
                    ">
                    <div class="row">
                      <div class="col-md-5">
                        <div class="regular-data">
                          <h5 class="route-to-user-profile font-16 pointer" (click)="
                              routeToUserProfile(attendanceDetailsResponse.uuid)
                            ">
                            {{ attendanceDetailsResponse.name }}
                          </h5>
                          <p [ngClass]="{
                              'text-success':
                                attendanceDetailsResponse.currentStatus ==
                                'Working',
                              'text-warning':
                                attendanceDetailsResponse.currentStatus ==
                                  'On Break' ||
                                attendanceDetailsResponse.currentStatus ==
                                  'On Leave',
                              'text-danger':
                                attendanceDetailsResponse.currentStatus ==
                                  'Checked Out' ||
                                attendanceDetailsResponse.currentStatus ==
                                  'Absent' ||
                                attendanceDetailsResponse.currentStatus ==
                                  'Not Marked'
                            }">
                            {{ attendanceDetailsResponse.currentStatus }}
                          </p>
                          <div class="add-note d-flex gap-2">
                            <ng-container *ngIf="rbacService.hasWriteAccess(Routes.TIMETABLE)">
                            <a class="font-14 text-primary fw-semibold pointer" data-bs-toggle="modal" data-bs-target="#addnotes" (click)="
                                addNotesModel(attendanceDetailsResponse.uuid)
                              ">
                              Add Note</a>
                            <a>|</a>
                          </ng-container>
                            <a class="font-14 text-primary fw-semibold pointer" data-bs-toggle="modal" data-bs-target="#viewlog"
                              (click)="viewLogs(attendanceDetailsResponse.uuid)">
                              View Logs</a>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-7">
                        <div class="row position-relative">
                          <div class="col-md-4">
                            <div class="in-time d-flex align-items-center gap-2 pointer border-rounded-2 p-2 mb-2">
                              <span class="font-12 fw-semibold">In </span><span>|</span>
                              <p class="mb-0 text-success font-13 fw-semibold lh-base">
                                {{
                                attendanceDetailsResponse.checkInTime
                                | timeFormat
                                }}
                              </p>
                            </div>
                          </div>
                          <div class="col-md-4">
                            <div class="in-time d-flex align-items-center gap-2 pointer border-rounded-2 p-2 mb-2">
                              <span class="font-12 fw-semibold">Out </span> <span>|</span>
                              <p class="mb-0 text-success font-13 fw-semibold lh-base">
                                {{
                                attendanceDetailsResponse.checkOutTime
                                | timeFormat
                                }}
                              </p>
                            </div>
                          </div>
                          <div class="col-md-4">
                            <div class="in-time d-flex align-items-center gap-2 pointer border-rounded-2 p-2 mb-2">
                              <span class="font-12 fw-semibold">Total Hours </span><span>|</span>
                              <p class="mb-0 text-success font-13 fw-semibold lh-base">
                                {{
                                attendanceDetailsResponse.totalWorkingHours
                                | durationFormat
                                }}
                              </p>
                            </div>
                          </div>
                          <div class="col-md-4">
                            <div class="in-time d-flex align-items-center gap-2 pointer border-rounded-2 p-2 mb-2">
                              <span class="font-12 fw-semibold">Total Break</span> <span>|</span>
                              <p class="mb-0 text-success font-13 fw-semibold lh-base">
                                ({{ attendanceDetailsResponse.breakCount }})
                              </p>
                            </div>
                          </div>

                          <div class="col-md-4" *ngIf="attendanceDetailsResponse.breakCount !== 0">
                            <div class="in-time total-break-time-box position-relative d-flex align-items-center gap-2 pointer border-rounded-2 p-2 mb-2" (mouseover)="
                                getAttendanceDetailsBreakTimingsReportByDateByUserMethodCall(
                                  attendanceDetailsResponse
                                )
                              ">
                              <span class="font-12 fw-semibold">Break Timings</span> <span>|</span>
                              <p class="mb-0 ">
                                &nbsp; &nbsp;<i id="dropdownMenuButton"
                                  class="bi bi-chevron-down text-black"></i>
                              </p>

                              <div class="total-braek-time bg-white position-absolute">
                                <div *ngIf="
                                    attendanceDetailsResponse.breakTimingsList !==
                                      null &&
                                      attendanceDetailsResponse.breakTimingsList !==
                                        undefined &&
                                      attendanceDetailsResponse.breakTimingsList
                                        .length !== 0;
                                    else errorInFetchingBreakTimings
                                  ">
                                  <table class="table">
                                    <thead>
                                      <tr>
                                        <th class="text-left">Break</th>
                                        <th class="text-left">Back</th>
                                      </tr>
                                    </thead>
                                    <tbody>
                                      <tr *ngFor="
                                          let breakTimings of attendanceDetailsResponse.breakTimingsList
                                        ">
                                        <td class="text-left">
                                          {{
                                          breakTimings.breakTime | timeFormat
                                          }}
                                        </td>
                                        <td class="text-left">
                                          {{
                                          breakTimings.backTime | timeFormat
                                          }}
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </div>
                                <ng-template #errorInFetchingBreakTimings>
                                </ng-template>
                              </div>
                            </div>
                          </div>

                          <div class="col-md-4" *ngIf="attendanceDetailsResponse.breakCount === 0">
                            <div class="in-time d-flex align-items-center gap-2 pointer border-rounded-2 p-2 mb-2">
                              <span class="font-12 fw-semibold text-success">No breaks taken! üòê</span>
                              <!-- <p class="mb-0">({{attendanceDetailsResponse.breakCount}}) </p> -->
                            </div>
                          </div>

                          <div class="col-md-4">
                            <div class="in-time d-flex align-items-center gap-2 pointer border-rounded-2 p-2 mb-2">
                              <span class="font-12 fw-semibold">Total Hours </span><span>|</span>
                              <p class="mb-0 text-success font-13 fw-semibold lh-base">
                                {{
                                attendanceDetailsResponse.totalBreakHours
                                | durationFormat
                                }}
                              </p>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </ng-container>
              </ng-template>

              <ng-template #errorInFetchingAttendanceDetailsResponseData>

                <div class="empty-file mt-20p" *ngIf="networkConnectionErrorForAttendanceDetailsResponse">
                  <nz-empty nzNotFoundImage="assets/images/signal.svg"
                    [nzNotFoundContent]="contentTpl">
                    <ng-template #contentTpl>
                      <p class="mb-3 empty-detail font-16">Something went wrong</p>
                      <p class="mb-0 font-13">
                        An error occurred while processing your request. Please
                        refresh the page and try again.
                      </p>
                    </ng-template>
                  </nz-empty>
                </div>


                <div class="empty-file mt-6p" *ngIf="dataNotFoundForAttendanceDetailsResponse">
                  <nz-empty nzNotFoundImage="assets/images/report-img.svg" [nzNotFoundContent]="contentTpl">
                    <ng-template #contentTpl>
                      <p class="mb-1 empty-detail font-16">No data for now</p>
                    </ng-template>
                  </nz-empty>
                </div>
              </ng-template>

              <div class="modal fade bs-example-modal-center" id="addnotes" tabindex="-1" role="dialog"
                aria-labelledby="mySmallModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered mx-auto">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h6 class="modal-title m-0" id="exampleModalCenterTitle">
                        Add Notes
                      </h6>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                      <div class="roww">
                        <div class="col-md-12 mb-3">
                          <label for="username" class="pb-2">Notes Title</label>
                          <input type="text" id="username" placeholder="Enter title ..." name="username" required=""
                            class="form-control fw-normal input-zorro font-13 border-rounded-2"
                            [(ngModel)]="additionalNotes.title" />
                        </div>
                        <div class="col-md-12 mb-3">
                          <label for="message" class="pb-2">Message</label>
                          <textarea class="form-control nots-section w-100" placeholder="Write the message" rows="5"
                            id="message" style="height: 100px !important"
                            [(ngModel)]="additionalNotes.message"></textarea>
                        </div>
                      </div>
                    </div>
                    <div class="modal-footer d-flex gap-2">
                      <button type="button" class="btn cancel-btn mt-0" data-bs-dismiss="modal" #addNotesModalClose>
                        Cancel
                      </button>
                      <button type="button" class="btn submitActionBtn" (click)="addAdditionalNotesMethodCall()">
                        Submit
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <div class="modal fade" id="viewlog" tabindex="-1" role="dialog"
                aria-labelledby="exampleModalDefaultLabel" aria-hidden="true" #viewlog>
                <div class="modal-dialog modal-dialog-centered mx-auto" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h6 class="modal-title m-0" id="exampleModalDefaultLabel">
                        Attendance Log
                      </h6>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <!-- modal-header -->
                    <div class="modal-body">
                      <div class="scroll-box-logs">
                        <ng-container *ngIf="
                                isShimmer &&
                                  attendanceLogResponseList.length === 0 &&
                                  !dataNotFoundPlaceholder &&
                                  !networkConnectionErrorPlaceHolder;
                                else attendanceLogResponseData
                              ">
                          <div class="loges-lading" *ngFor="let item of [].constructor(5)">

                              <h6>
                                <ngx-shimmer-loading [width]="'90%'" [height]="'15px'"></ngx-shimmer-loading>
                              </h6>
                              <h6 class="mt-1">
                                <ngx-shimmer-loading [width]="'40%'" [height]="'10px'"></ngx-shimmer-loading>
                              </h6>
                              <h6 class="mt-1">
                                <ngx-shimmer-loading [width]="'60%'" [height]="'10px'"></ngx-shimmer-loading>
                              </h6>

                          </div>
                        </ng-container>

                        <ng-template #attendanceLogResponseData>
                          <ng-container *ngIf="
                                  attendanceLogResponseList.length !== 0 &&
                                    !dataNotFoundPlaceholder &&
                                    !networkConnectionErrorPlaceHolder;
                                  else errorInFetchingAttendanceLogData
                                ">
                            <ul class="activity-timeline-2 list-unstyled mb-0 position-relative" *ngFor="
                                    let attendanceLogResponse of attendanceLogResponseList
                                  ">
                              <li>
                                <h6 class="fs-md mt-0 text-capitalize" *ngIf="
                                        attendanceLogResponse.operationPerformedBy !==
                                        null
                                      ">
                                  {{ attendanceLogResponse.operationType
                                  }}<span class="added-by px-2 text-info lh-base">(Added By -
                                    {{
                                    attendanceLogResponse.operationPerformedBy
                                    }})</span>
                                </h6>
                                <div class="d-flex align-items-center justify-content-between acitivity-box">
                                  <h6 class="mb-0 attendance-log text-capitalize " *ngIf="
                                        attendanceLogResponse.operationPerformedBy ===
                                        null
                                      " [ngClass]="{
                                        'text-success':
                                          attendanceLogResponse.operationType ==
                                          'in',
                                        'text-danger':
                                          attendanceLogResponse.operationType ==
                                          'out',
                                        'text-warning':
                                          attendanceLogResponse.operationType ==
                                          'break',
                                        'text-primary':
                                          attendanceLogResponse.operationType ==
                                          'back'
                                      }">
                                    <span>
                                      {{
                                      attendanceLogResponse.operationType
                                      }}
                                      |
                                      {{
                                      attendanceLogResponse.operationTime
                                      | timeFormat
                                      }}
                                    </span>
                                  </h6>
                                  <div>
                                    <span class="fonnt-13 fw-bold" style="
                                          vertical-align: middle;
                                        ">
                                      <i class="bi bi-calendar3 my-2"></i>
                                      {{
                                      attendanceLogResponse.operationTime
                                      | dateFormat
                                      }}
                                      |
                                      {{
                                      attendanceLogResponse.operationTime
                                      | timeFormat
                                      }}
                                    </span>
                                  </div>
                                </div>
                                <div class="d-flex align-items-center mb-2 mt-2 gap-3">
                                  <p class="mb-0" style="font-size: 14px">
                                    <span><b>Notes</b></span><span> : </span>
                                    {{
                                    attendanceLogResponse.additionalNotes
                                    }}
                                  </p>
                                </div>


                                <div class="card d-flex align-items-start justify-content-between flex-row-reverse" *ngIf="
                                        attendanceLogResponse.latString !=
                                          null &&
                                        attendanceLogResponse.longString != null
                                      ">
                                  <div class="card-content d-flex align-items-center flex-row-reverse w-100 justify-content-start">
                                    <div class="image-section text-center pl-3" *ngIf="
                                            attendanceLogResponse.imageUrlString !=
                                            null
                                          ">
                                      <img [src]="
                                              attendanceLogResponse.imageUrlString
                                            " alt="User Image" class="user-image" />
                                    </div>
                                    <div class="info-section">
                                      <div>
                                        <p class="mb-0 mt-0 location-text font-14 m-0">
                                          <span><b>Location:</b></span>
                                          <span class="location-address"
                                            *ngIf="Constant.EMPTY_STRINGS.includes( attendanceLogResponse.currentAddress)">{{
                                            attendanceLogResponse.currentAddress

                                            }}</span>
                                          <span class="location-address"
                                            *ngIf="Constant.EMPTY_STRINGS.includes( attendanceLogResponse.currentAddress)">{{

                                            getAddressFromCoords(
                                            attendanceLogResponse.latString,attendanceLogResponse.longString)
                                            }}</span>
                                        </p>
                                      </div>
                                      <div class="d-flex align-items-center justify-content-end gap-2 mt-3">
                                        <button *ngIf="
                                                attendanceLogResponse.imageUrlString !=
                                                null
                                              " (click)="
                                                openSelfieModal(
                                                  attendanceLogResponse.imageUrlString
                                                )
                                              " class="btn submitActionBtn">
                                          View Selfie
                                        </button>
                                        <button *ngIf="
                                                attendanceLogResponse.latString !=
                                                  null &&
                                                attendanceLogResponse.longString !=
                                                  null
                                              " (click)="
                                                openAddressModal(
                                                  attendanceLogResponse.latString,
                                                  attendanceLogResponse.longString
                                                )
                                              " class="btn submitActionBtn">
                                          View Location
                                        </button>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </li>
                            </ul>
                          </ng-container>
                        </ng-template>
                        <ng-template #errorInFetchingAttendanceLogData>


                          <div class="empty-file mt-20p" *ngIf="dataNotFoundPlaceholder">
                            <nz-empty nzNotFoundImage="assets/images/no-data-found-img.svg"
                              [nzNotFoundContent]="contentTpl">
                              <ng-template #contentTpl>
                                <p class="mb-1 empty-detail font-16">No data for now</p>
                              </ng-template>
                            </nz-empty>
                          </div>



                          <div class="empty-file mt-20p" *ngIf="networkConnectionErrorPlaceHolder">
                            <nz-empty nzNotFoundImage="assets/images/signal.svg"
                              [nzNotFoundContent]="contentTpl">
                              <ng-template #contentTpl>
                                <p class="mb-3 empty-detail font-16">Something went wrong</p>
                                <p class="mb-0 font-13">
                                  An error occurred while processing your request. Please
                                  refresh the page and try again.
                                </p>
                              </ng-template>
                            </nz-empty>
                          </div>
                        </ng-template>
                      </div>
                    </div>

                    <!-- modal-footer -->
                  </div>
                  <!-- modal-content -->
                </div>
                <!-- modal-dialog -->
              </div>
              <!-- modal -->

              <!-- Pagination -->
              <div
                class="d-flex align-items-center justify-content-between pagination-box w-100 p-3 bg-white border-top"
                *ngIf="
                  (total > 7 && attendanceDetailsResponseList.length > 7) ||
                  (pageNumber === lastPageNumber && lastPageNumber !== 1)
                ">
                <p class="mb-0">
                  Showing {{ getStartIndex() }} - {{ getEndIndex() }} of
                  {{ total }} items
                </p>



                <div class="pagition-box">
                  <ngb-pagination [collectionSize]="total" [(page)]="pageNumber" [pageSize]="itemPerPage" [maxSize]="5"
                    [boundaryLinks]="true" [ellipses]="true" (pageChange)="changePage($event)">
                  </ngb-pagination>
                </div>



              </div>
            </div>
          </ng-container>
          <ng-template #notShowPlaceholder>

            <div class="empty-file mt-6p">
              <nz-empty nzNotFoundImage="assets/images/report-img.svg" [nzNotFoundContent]="contentTpl">
                <ng-template #contentTpl>
                  <p class="mb-1 empty-detail font-16">No data for now</p>
                </ng-template>
              </nz-empty>
            </div>
          </ng-template>
        </div>

        <div class="row" *ngIf="ACTIVE_TAB == OVERTIME_TAB">
          <div class="row p-2 mt-3">
            <div class="col-md-6">
              <div class="my-leave-log p-3 border-rounded-2">
                <div class="my-leave-log-heading">
                  <h4 class="font-14 mb-0 fw-semibold">Requests</h4>
                </div>
                <hr class="mb-2"/>
                <ul class="nav nav-tabs bg-white" role="tablist">
                  <li class="nav-item d-flex align-items-center" (click)="
                      changeLogTabInOvertimeTab(OVERTIME_PENDING_REQUEST_TAB);
                      getOvertimePendingRequestResponseByOrganizationUuidAndStartDateAndEndDateMethodCall()
                    ">
                    <a class="nav-link" [ngClass]="{
                        active:
                          ACTIVE_TAB_IN_OVERTIME_TAB ==
                          OVERTIME_PENDING_REQUEST_TAB
                      }" data-bs-toggle="tab" href="#overtime-pending-request" role="tab" aria-selected="true">Pending
                      requests</a>
                    <span class="request-count d-flex align-items-center justify-content-center"
                      *ngIf="pendingRequestCount > 0">{{ pendingRequestCount }}</span>
                  </li>
                  <li class="nav-item" (click)="
                      changeLogTabInOvertimeTab(OVERTIME_HISTORY_TAB);
                      getOvertimeRequestResponseByOrganizationUuidAndStartDateAndEndDateMethodCall()
                    ">
                    <a class="nav-link" [ngClass]="{
                        active:
                          ACTIVE_TAB_IN_OVERTIME_TAB == OVERTIME_HISTORY_TAB
                      }" data-bs-toggle="tab" href="#overtime-history" role="tab" aria-selected="false">Overtime
                      History</a>
                  </li>
                </ul>
                <div class="tab-content">
                  <div class="pt-3 pb-3" id="overtime-pending-request" role="" *ngIf="
                      ACTIVE_TAB_IN_OVERTIME_TAB == OVERTIME_PENDING_REQUEST_TAB
                    ">
                    <ng-container *ngIf="
                        isShimmerForOvertimePendingRequestResponse &&
                          overtimePendingRequestResponseList.length == 0 &&
                          !dataNotFoundForOvertimePendingRequestResponse &&
                          !networkConnectionErrorForOvertimePendingRequestResponse;
                        else overtimePendingRequestResponseListCondition
                      ">
                    </ng-container>

                    <ng-template #overtimePendingRequestResponseListCondition>
                      <ng-container *ngIf="
                          !isShimmerForOvertimePendingRequestResponse &&
                            overtimePendingRequestResponseList.length != 0 &&
                            !dataNotFoundForOvertimePendingRequestResponse &&
                            !networkConnectionErrorForOvertimePendingRequestResponse;
                          else errorWhileFetchingOvertimePendingRequestResponseListCondition
                        ">
                        <div class="leave-history-box">
                          <div class="row mt-2" *ngFor="
                              let overtimePendingRequestResponse of overtimePendingRequestResponseList
                            ">
                            <div class="col-auto">
                              <img *ngIf="overtimePendingRequestResponse.userImage" src="{{
                                  overtimePendingRequestResponse.userImage
                                }}" alt="" class="thumb-md rounded-circle img img-32" />
                              <img *ngIf="
                                  !overtimePendingRequestResponse.userImage
                                " src="assets/images/user.png" alt="" class="thumb-md rounded-circle img-32" />
                            </div>
                            <!--end col-->
                            <div class="col">
                              <div class="comment-body ms-n2 bg-light-alt p-3">
                                <div class="activity-info-text">
                                  <div class="float-end">
                                    <div class="dropdown d-inline-block">
                                      <div class="align-self-center">
                                        <h6 class="fw-semibold">
                                          <span class="badge badge-outline-primary">
                                            Duration |
                                            {{
                                            this.helperService.formatHHmmssToHHmm(
                                            overtimePendingRequestResponse.workingHour
                                            )
                                            }}
                                            hrs.</span>
                                        </h6>
                                        <small>{{
                                          overtimePendingRequestResponse.createdDate
                                          | date : "medium" || "N/A"
                                          }}</small>
                                      </div>
                                    </div>
                                  </div>
                                  <div class="media align-items-center">
                                    <div class="media-body ms-2 align-self-center">
                                      <h5 class="m-0 font-16" (click)="
                                          routeToUserProfile(
                                            overtimePendingRequestResponse.userUuid
                                          )
                                        ">
                                        {{
                                        overtimePendingRequestResponse.userName
                                        }}
                                      </h5>
                                      <p>
                                        Time:
                                        <u>{{
                                          overtimePendingRequestResponse.startTime
                                          | date : "d MMM, h:mm a"
                                          }}
                                          -
                                          {{
                                          overtimePendingRequestResponse.endTime
                                          | date : "d MMM, h:mm a"
                                          }}</u>
                                      </p>
                                    </div>
                                  </div>
                                </div>
                                <a href="#" class="text-primary" (click)="
                                    getOvertimeRequestActionResponseMethodCall(
                                      overtimePendingRequestResponse
                                    )
                                  " data-bs-toggle="modal" data-bs-target="#overtime-request-action">
                                  <i class="fas fa-external-link-square-alt me-1"></i>View
                                </a>
                              </div>
                            </div>
                            <!--end col-->
                          </div>
                        </div>

                      </ng-container>
                    </ng-template>

                    <ng-template #errorWhileFetchingOvertimePendingRequestResponseListCondition>

                      <div class="empty-file mt-25p" *ngIf="
                          dataNotFoundForOvertimePendingRequestResponse &&
                          !networkConnectionErrorForOvertimePendingRequestResponse
                        ">
                        <nz-empty nzNotFoundImage="assets/images/report-img.svg" [nzNotFoundContent]="contentTpl">
                          <ng-template #contentTpl>
                            <p class="mb-1 empty-detail font-16">
                              No data for now
                            </p>
                          </ng-template>
                        </nz-empty>
                      </div>
                    </ng-template>
                  </div>

                  <div class="pt-3 pb-3" id="overtime-history" role=""
                    *ngIf="ACTIVE_TAB_IN_OVERTIME_TAB == OVERTIME_HISTORY_TAB">
                    <ng-container *ngIf="
                        isShimmerForOvertimeRequestResponse &&
                          overtimeRequestResponseList.length == 0 &&
                          !dataNotFoundForOvertimeRequestResponse &&
                          !networkConnectionErrorForOvertimeRequestResponse;
                        else overtimeRequestResponseListCondition
                      ">
                    </ng-container>
                    <ng-template #overtimeRequestResponseListCondition>
                      <ng-container *ngIf="
                          !isShimmerForOvertimeRequestResponse &&
                            overtimeRequestResponseList.length != 0 &&
                            !dataNotFoundForOvertimeRequestResponse &&
                            !networkConnectionErrorForOvertimeRequestResponse;
                          else errorWhileFetchingOvertimeRequestResponseListCondition
                        ">
                        <div class="leave-history-box-if-pending-null">
                          <div class="row mt-2" *ngFor="
                              let overtimeRequestResponse of overtimeRequestResponseList
                            ">
                            <div class="col-auto">
                              <img *ngIf="overtimeRequestResponse.userImage"
                                src="{{ overtimeRequestResponse.userImage }}" alt="" class="thumb-md rounded-circle img-32" />
                              <img *ngIf="!overtimeRequestResponse.userImage" src="assets/images/user.png" alt=""
                                class="thumb-md rounded-circle img-32" />
                            </div>
                            <!--end col-->
                            <div class="col">
                              <div class="comment-body ms-n2 p-3" [ngClass]="{
                                  'bg-soft-success':
                                    overtimeRequestResponse.requestStatusId ==
                                    key.APPROVED,
                                  'bg-soft-danger':
                                    overtimeRequestResponse.requestStatusId ==
                                    key.REJECTED
                                }">
                                <div class="activity-info-text">
                                  <div class="float-end">
                                    <div class="dropdown d-inline-block">
                                      <div class="align-self-center">
                                        <h6 class="fw-semibold">
                                          <span class="badge badge-outline-primary">
                                            Duration |
                                            {{
                                            this.helperService.formatHHmmssToHHmm(
                                            overtimeRequestResponse.workingHour
                                            )
                                            }}
                                            hrs.</span>
                                        </h6>
                                        <small>{{
                                          overtimeRequestResponse.createdDate
                                          | date : "medium" || "N/A"
                                          }}
                                          <!-- &nbsp;
                                          <span>{{
                                            arl.leaveDate | date:'medium' || "N/A"
                                          }}</span> -->
                                        </small>
                                      </div>
                                    </div>
                                  </div>
                                  <div class="media align-items-center">
                                    <div class="media-body ms-2 align-self-center">
                                      <h5 class="m-0 font-16" (click)="
                                          routeToUserProfile(
                                            overtimeRequestResponse.userUuid
                                          )
                                        ">
                                        {{ overtimeRequestResponse.userName }}
                                        <i class="ti ti-checks bg-soft-success" *ngIf="
                                            overtimeRequestResponse.requestStatusId ==
                                            key.APPROVED
                                          "></i>
                                        <i class="ti ti-x bg-soft-danger" *ngIf="
                                            overtimeRequestResponse.requestStatusId ==
                                            key.REJECTED
                                          "></i>
                                      </h5>
                                      <p>
                                        Time:
                                        <u>{{
                                          overtimeRequestResponse.startTime
                                          | date : "d MMM, h:mm a"
                                          }}
                                          -
                                          {{
                                          overtimeRequestResponse.endTime
                                          | date : "d MMM, h:mm a"
                                          }}</u>
                                      </p>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <!--end col-->
                          </div>
                        </div>
                      </ng-container>
                    </ng-template>
                    <ng-template #errorWhileFetchingOvertimeRequestResponseListCondition>

                      <div class="empty-fil mt-25p" *ngIf="
                          dataNotFoundForOvertimeRequestResponse &&
                          !networkConnectionErrorForOvertimeRequestResponse
                        ">
                        <nz-empty nzNotFoundImage="assets/images/no-data-found-img.svg"
                          [nzNotFoundContent]="contentTpl">
                          <ng-template #contentTpl>
                            <p class="mb-1 empty-detail font-16">
                              No data for now
                            </p>
                          </ng-template>
                        </nz-empty>
                      </div>
                    </ng-template>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="my-leave-log p-3 border-rounded-2">
                <div class="my-leave-log-heading">
                  <h4  class="font-14 mb-0 fw-semibold">Logs</h4>
                </div>
                <hr class="mb-2" />
                <div class="mb-3 d-flex align-items-center border-rounded-2">

                </div>


                <ng-container *ngIf="
                    isShimmerForOvertimeRequestLogResponse &&
                      overtimeRequestLogResponseList.length == 0 &&
                      !dataNotFoundForOvertimeRequestLogResponse &&
                      !networkConnectionErrorForOvertimeRequestLogResponse;
                    else overtimeRequestLogResponseListCondition
                  ">
                </ng-container>

                <ng-template #overtimeRequestLogResponseListCondition>
                  <ng-container *ngIf="
                      !isShimmerForOvertimeRequestLogResponse &&
                        overtimeRequestLogResponseList.length != 0 &&
                        !dataNotFoundForOvertimeRequestLogResponse &&
                        !networkConnectionErrorForOvertimeRequestLogResponse;
                      else errorWhileFetchingOvertimeRequestLogResponseListCondition
                    ">
                    <!-- #logContainer (scroll)="scrollDownRecentActivity($event)" -->
                    <div class="leave-logs">
                      <div class="activity" *ngFor="
                          let overtimeRequestLogResponse of overtimeRequestLogResponseList
                        ">
                        <div class="activity-info">
                          <div class="icon-info-activity">
                            <i class="ti ti-clock bg-soft-warning" *ngIf="
                                overtimeRequestLogResponse.requestStatusId ==
                                key.PENDING
                              "></i>
                            <!-- <i class="ti ti-clock bg-soft-warning" *ngIf="fullLogList.status == 'requested'"></i> -->
                            <i class="ti ti-checks bg-soft-success" *ngIf="
                                overtimeRequestLogResponse.requestStatusId ==
                                key.APPROVED
                              "></i>
                            <i class="ti ti-x bg-soft-danger" *ngIf="
                                overtimeRequestLogResponse.requestStatusId ==
                                key.REJECTED
                              "></i>
                          </div>
                          <div class="activity-info-text">
                            <div>
                              <div class="float-end">
                                <div class="dropdown d-inline-block">
                                  <div class="align-self-center">
                                    <div class="btn btn-xs btn-light btn-round">
                                      {{
                                      overtimeRequestLogResponse.createdDate
                                      | date : "medium" || "N/A"
                                      }}
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="media align-items-center">
                                <div class="media-body ms-2 align-self-center">
                                  <h5 class="m-0 font-16" (click)="
                                      routeToUserProfile(
                                        overtimeRequestLogResponse.userUuid
                                      )
                                    ">
                                    {{ overtimeRequestLogResponse.userName }}
                                  </h5>
                                  <p class="text-muted font-12 mb-0 fw-normal">
                                    <span class="text-wraning" *ngIf="
                                        overtimeRequestLogResponse.requestStatusId ==
                                        key.PENDING
                                      ">Applied <span> To </span>
                                    </span>
                                    <span class="text-success" *ngIf="
                                        overtimeRequestLogResponse.requestStatusId ==
                                        key.APPROVED
                                      ">Approved <span> By </span>
                                    </span>
                                    <span class="text-dannger" *ngIf="
                                        overtimeRequestLogResponse.requestStatusId ==
                                        key.REJECTED
                                      ">Rejected <span> By </span>
                                    </span>
                                    {{ overtimeRequestLogResponse.managerName }}
                                  </p>
                                </div>
                              </div>
                              <hr class="hr-dashed" />
                              <div class="d-flex justify-content-between">
                                <p class="text-muted font-12 mb-0 fw-normal">
                                  Time:
                                  <u>{{
                                    overtimeRequestLogResponse.startTime
                                    | date : "d MMM, h:mm a"
                                    }}
                                    -
                                    {{
                                    overtimeRequestLogResponse.endTime
                                    | date : "d MMM, h:mm a"
                                    }}</u>
                                </p>
                                <h6 class="fw-semibold">
                                  <span class="badge badge-outline-primary">Duration |
                                    {{
                                    this.helperService.formatHHmmssToHHmm(
                                    overtimeRequestLogResponse.workingHour
                                    )
                                    }}
                                    hrs.</span>
                                </h6>
                              </div>
                              <p class="text-muted font-12 mb-0 fw-normal">
                                {{ overtimeRequestLogResponse.note }}
                              </p>
                            </div>
                            <hr class="hr-dashed" />
                          </div>
                        </div>
                      </div>
                      <!--end activity-->
                    </div>
                  </ng-container>
                </ng-template>
                <ng-template #errorWhileFetchingOvertimeRequestLogResponseListCondition>

                  <div class="empty-file mt-25p" *ngIf="
                      dataNotFoundForOvertimeRequestLogResponse &&
                      !networkConnectionErrorForOvertimeRequestLogResponse
                    ">
                    <nz-empty nzNotFoundImage="assets/images/no-data-found-img.svg" [nzNotFoundContent]="contentTpl">
                      <ng-template #contentTpl>
                        <p class="mb-1 empty-detail font-16">No data for now</p>
                      </ng-template>
                    </nz-empty>
                  </div>
                </ng-template>
              </div>
            </div>
          </div>
        </div>



        <div class="row" *ngIf="ACTIVE_TAB == ATTENDANCE_UPDATE_REQUEST_TAB_NEW">
          <div class="col-md-12 mt-3 mb-3">
            <ul id="pills-tab" role="tablist" class="nav nav-pills nav-pills-punch">
              <li class="nav-item">
                <a id="pills-announcement-tab" data-bs-toggle="pill" href="#missedPunch" role="tab" (click)="currentTab='missedPunch';this.resetFilters()"
                  aria-controls="pills-announcement" aria-selected="true" class="nav-link-punch active">Missed Punch</a>
              </li>
              <li class="nav-item d-flex align-items-center">
                <a id="pills-notification-tab" data-bs-toggle="pill" href="#systemOutage" role="tab" (click)="currentTab='systemOutage'; this.resetFilters()"
                  aria-controls="pills-notification" aria-selected="false" class="nav-link-punch">System Outage</a>
              </li>
            </ul>
            <div id="pills-tabContent" class="tab-content">
              <!-- Missed Punch Tab -->
              <div class="tab-pane active show" id="missedPunch" role="tabpanel" aria-labelledby="employee-tab">
                <div class="mt-3">
                    <div class="asset-assigned-search">
                      <div class="d-flex justify-content-start align-items-center">
                        <div class="search-filter">
                          <button type="button" id="statusDropdownMissedPunch"
                            class="btn btn-secondary new-dropdown d-flex align-items-center justify-content-between"
                            (click)="changeShowFilter1(true, 'missedPunch')">
                            Filters
                            <svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" viewBox="0 0 23 23" fill="none">
                              <mask id="mask0_7808_40" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="23" height="23">
                                <rect x="0.262695" y="0.283112" width="22.4338" height="22.4338" fill="#1C1B1F"/>
                              </mask>
                              <g mask="url(#mask0_7808_40)">
                                <path d="M9.61057 17.1084V15.239H13.3495V17.1084H9.61057ZM5.87161 12.4347V10.5653H17.0885V12.4347H5.87161ZM3.06738 7.76104V5.89156H19.8927V7.76104H3.06738Z" fill="#1C1B1F"/>
                              </g>
                            </svg>
                          </button>
                        </div>
                        <div class="search-date d-flex align-items-center justify-content-between position-relative w-100">
                          <div class="form-group w-100 position-relative">
                            <input type="text" id="searchTextMissedPunch" [(ngModel)]="searchTextMissedPunch"
                              (ngModelChange)="onSearchTextMissedPunchChange($event)" placeholder="Search by name, requested reason.."
                              class="form-control me-2 w-100 search-padding border-0" />
                            <i *ngIf="searchTextMissedPunch==''" class="bi bi-search search-icon d-flex align-items-center h-100"></i>
                            <i class="bi bi-x-lg search-icon d-flex align-items-center h-100 text-primary"
                                    *ngIf="searchTextMissedPunch!=''" (click)="searchTextMissedPunch='';applyFilters()"></i>
                          </div>
                        </div>
                      </div>
                    </div>
                  <!-- Filter Dropdown (Shared) -->
                  <div class="actionMenuList filter-box p-0 position-absolute bg-white border" [ngClass]="{'d-none': !showFilter}">
                    <div class="d-flex align-items-center justify-content-between border-bottom p-3">
                      <h5 class="mb-0 font-14 fw-semibold">Filter</h5>
                      <span class="pointer lh-1" (click)="changeShowFilter1(false, 'missedPunch')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" fill="none">
                          <g opacity="0.8">
                            <mask id="mask0_7729_258" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="18" height="19">
                              <rect y="0.5" width="18" height="18" fill="#D9D9D9"/>
                            </mask>
                            <g mask="url(#mask0_7729_258)">
                              <path d="M4.8 14.75L3.75 13.7L7.95 9.5L3.75 5.3L4.8 4.25L9 8.45L13.2 4.25L14.25 5.3L10.05 9.5L14.25 13.7L13.2 14.75L9 10.55L4.8 14.75Z" fill="#1C1B1F"/>
                            </g>
                          </g>
                        </svg>
                      </span>
                    </div>
                    <div class="row p-3">
                      <div class="col-md-12 mb-3">
                        <label for="employeeName" class="pb-2">Employee Name</label>
                        <nz-select [(ngModel)]="selectedUserIds" [nzMode]="'multiple'" nzPlaceHolder="Employee Name"
                          class="w-100 border placeholder-line">
                          <nz-option *ngFor="let user of allUsers" [nzValue]="user.id" [nzLabel]="user.userName"></nz-option>
                        </nz-select>
                      </div>

                      <div class="col-md-12 mb-3">
                        <label for="date" class="pb-2">Start Date</label>
                        <nz-date-picker [(ngModel)]="startDate1" nzBorderless nzPlaceHolder="dd/mm/yyyy"></nz-date-picker>
                      </div>
                      <div class="col-md-12 mb-3">
                        <label for="date" class="pb-2">End Date</label>
                        <nz-date-picker [(ngModel)]="endDate1" nzBorderless nzPlaceHolder="dd/mm/yyyy"></nz-date-picker>
                      </div>
                      <div class="col-md-12 mb-3">
                        <label for="status" class="pb-2">Status</label>
                        <nz-select [(ngModel)]="selectedStatuses" [nzMode]="'multiple'" nzPlaceHolder="Status"
                          class="w-100 border placeholder-line">
                          <nz-option nzValue="Pending" nzLabel="Pending"></nz-option>
                          <nz-option nzValue="Approved" nzLabel="Approved"></nz-option>
                          <nz-option nzValue="Rejected" nzLabel="Rejected"></nz-option>
                        </nz-select>
                      </div>
                    </div>
                    <div class="p-3 border-top d-flex gap-2 align-items-center justify-content-end">
                      <button class="btn cancel-btn mt-0" (click)="resetFilters()">Reset it</button>
                      <button class="btn submitActionBtn" (click)="currentPageMissedPunch=1;applyFilters()">Apply</button>
                    </div>
                  </div>
                  <div class="filter-bdg d-flex align-items-center gap-2 mt-3" *ngIf="activeMissedPunchFilters.length > 0" >
                    <ng-container *ngFor="let filter of activeMissedPunchFilters">
                      <p class="filter-pills d-flex align-items-center gap-2 pointer font-12 fw-semibold">
                        {{ filter.label }}: {{ filter.value }}
                        <i class="bi bi-x-lg pointer" (click)="removeFilter(filter, 'missedPunch')"></i>
                      </p>
                    </ng-container>
                  </div>
                  <div class="mt-3">
                    <table class="table mb-0">
                      <thead>
                        <tr>
                          <th class="text-left">Employee Name</th>
                          <th class="text-left">Date</th>
                          <th class="text-left">Requested On</th>
                          <th class="text-left">Requested To</th>
                          <th class="text-left">In Time</th>
                          <th class="text-left">Out Time</th>
                          <th class="text-left">Note</th>
                          <th class="text-left">Status</th>
                          <th class="text-left">Action</th>
                        </tr>
                      </thead>
                      <tbody *ngIf="isLoading">
                        <tr *ngFor="let item of [].constructor(10)">
                          <td><ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading></td>
                          <td><ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading></td>
                          <td><ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading></td>
                          <td><ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading></td>
                          <td><ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading></td>
                          <td><ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading></td>
                          <td><ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading></td>
                          <td><ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading></td>
                          <td><ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading></td>
                        </tr>
                      </tbody>
                      <tbody *ngIf="!isLoading && missedPunchRequests.length === 0">
                        <tr>
                          <td colspan="10">
                            <div class="empty-file" style="margin-top: 5%; margin-bottom: 5%">
                              <nz-empty nzNotFoundImage="assets/images/no-data-found-img.svg" [nzNotFoundContent]="contentTpl">
                                <ng-template #contentTpl>
                                  <p class="mb-1 empty-detail font-16">No data for now</p>
                                </ng-template>
                              </nz-empty>
                            </div>
                          </td>
                        </tr>
                      </tbody>
                      <tbody *ngIf="!isLoading && missedPunchRequests.length > 0">
                        <tr *ngFor="let request of missedPunchRequests ">
                          <td (click)="routeToUserDetails(request.userUuid)" class="fw-normal pointer">{{request.userName}}</td>
                          <td>
                            <span>
                              <h5 class="mb-1 font-13 fw-semibold">{{request.inRequestTime | date: 'dd MMM, yyyy'}}</h5>
                              <p class="mb-0 font-12 fw-normal">{{request.inRequestTime | date: 'EEEE'}}</p>
                            </span>
                          </td>
                          <td>
                            <span>
                              <h5 class="mb-1 font-13 fw-semibold">{{request.createdDate | date: 'dd MMM, yyyy'}}</h5>
                              <p class="mb-0 font-12 fw-normal">{{request.createdDate | date: 'EEEE'}}</p>
                            </span>
                          </td>
                          <td class="fw-semibold">{{request.managerName}}</td>
                          <td class="font-13 fw-normal">{{(request.inRequestTime | date:'h:mm a') || '--'}}</td>
                          <td class="font-13 fw-normal">{{(request.outRequestTime | date:'h:mm a') || '--'}}</td>
                          <td class="fw-normal">
                            <span class="fw-normal font-13 white-space" nz-popover nzPopoverTitle="Note" [nzPopoverContent]="request.requestReason"
                              [nzPopoverOverlayStyle]="{'width':'300px'}" nzPopoverPlacement="top">{{request.requestReason}}</span>
                          </td>

                          <td>
                            <span class="fw-semibold font-13" [ngClass]="{'text-success': request?.status?.id === 50, 'text-danger': request?.status?.id === 51, 'text-primary': request?.status?.id === 52}">
                              {{request?.status?.response | uppercase}}
                            </span>
                            <p class="mb-0 font-12 fw-light" *ngIf="request.approvedByName">By: {{request.approvedByName}}</p>
                          </td>
                          <td>
                            <div class="dropdown" *ngIf="!request.isProcessing; else processingSpinner">
                              <button type="button" data-bs-toggle="dropdown" aria-expanded="false"
                                class="btn btnAction dropdown-toggle d-flex align-items-center justify-content-center">
                                <i class="bi bi-three-dots-vertical"></i>
                              </button>
                              <div class="dropdown-menu actionMenuList">

                                <ng-container *ngIf="rbacService.showAttendanceUpdateActionButton(request,logInUserUuid,StatusKeys.ATTENDANCE_UPDATE_REQUEST_PENDING,Routes.TIMETABLE)">
                                <li>
                                  <a class="dropdown-item" (click)="approveOrReject(request.id, 'APPROVED'); request.isProcessing=true">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 25 25" fill="none">
                                      <mask id="mask0_8226_22308" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="25" height="25">
                                        <rect x="0.374023" y="0.5" width="24" height="24" fill="#D9D9D9"/>
                                      </mask>
                                      <g mask="url(#mask0_8226_22308)">
                                        <path d="M9.92386 18.1534L4.58936 12.8189L5.65836 11.7496L9.92386 16.0151L19.0894 6.84961L20.1584 7.91886L9.92386 18.1534Z" fill="#1C1B1F"/>
                                      </g>
                                    </svg>
                                    Approve
                                  </a>
                                </li>
                                <li >
                                  <a class="dropdown-item" (click)="approveOrReject(request.id, 'REJECTED'); request.isProcessing=true">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 25 25" fill="none">
                                      <mask id="mask0_8226_22314" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="25" height="25">
                                        <rect y="0.5" width="25" height="24" fill="#D9D9D9"/>
                                      </mask>
                                      <g mask="url(#mask0_8226_22314)">
                                        <path d="M6.6665 19.1542L5.56885 18.1004L11.4022 12.5004L5.56885 6.90043L6.6665 5.84668L12.4998 11.4467L18.3332 5.84668L19.4308 6.90043L13.5975 12.5004L19.4308 18.1004L18.3332 19.1542L12.4998 13.5542L6.6665 19.1542Z" fill="#1C1B1F"/>
                                      </g>
                                    </svg>
                                    Reject
                                  </a>
                                </li>
                              </ng-container>
                                <li>
                                  <a class="dropdown-item" data-bs-target="#attendanceRequest" data-bs-toggle="modal" (click)="viewRequest(request)">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="25" viewBox="0 0 24 25" fill="none">
                                      <mask id="mask0_8226_22319" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="24" height="25">
                                        <rect y="0.5" width="24" height="24" fill="#D9D9D9"/>
                                      </mask>
                                      <g mask="url(#mask0_8226_22319)">
                                        <path d="M12.0023 16.077C13.1355 16.077 14.0979 15.6804 14.8896 14.8872C15.6812 14.0941 16.0771 13.1309 16.0771 11.9978C16.0771 10.8646 15.6805 9.90217 14.8873 9.1105C14.0942 8.31883 13.131 7.923 11.9978 7.923C10.8647 7.923 9.90224 8.31958 9.11058 9.11275C8.31891 9.90592 7.92307 10.8691 7.92307 12.0023C7.92307 13.1354 8.31966 14.0978 9.11282 14.8895C9.90599 15.6812 10.8692 16.077 12.0023 16.077ZM12.0001 14.7C11.2501 14.7 10.6126 14.4375 10.0876 13.9125C9.56258 13.3875 9.30007 12.75 9.30007 12C9.30007 11.25 9.56258 10.6125 10.0876 10.0875C10.6126 9.5625 11.2501 9.3 12.0001 9.3C12.7501 9.3 13.3876 9.5625 13.9126 10.0875C14.4376 10.6125 14.7001 11.25 14.7001 12C14.7001 12.75 14.4376 13.3875 13.9126 13.9125C13.3876 14.4375 12.7501 14.7 12.0001 14.7ZM12.0013 19C9.70182 19 7.60657 18.3657 5.71557 17.097C3.82457 15.8285 2.43224 14.1295 1.53857 12C2.43224 9.8705 3.82407 8.1715 5.71407 6.903C7.60424 5.63433 9.69916 5 11.9988 5C14.2983 5 16.3936 5.63433 18.2846 6.903C20.1756 8.1715 21.5679 9.8705 22.4616 12C21.5679 14.1295 20.1761 15.8285 18.2861 17.097C16.3959 18.3657 14.301 19 12.0013 19ZM12.0001 17.5C13.8834 17.5 15.6126 17.0042 17.1876 16.0125C18.7626 15.0208 19.9667 13.6833 20.8001 12C19.9667 10.3167 18.7626 8.97917 17.1876 7.9875C15.6126 6.99583 13.8834 6.5 12.0001 6.5C10.1167 6.5 8.38757 6.99583 6.81257 7.9875C5.23757 8.97917 4.03341 10.3167 3.20007 12C4.03341 13.6833 5.23757 15.0208 6.81257 16.0125C8.38757 17.0042 10.1167 17.5 12.0001 17.5Z" fill="#1C1B1F"/>
                                      </g>
                                    </svg>
                                    View request
                                  </a>
                                </li>
                              </div>
                            </div>
                            <ng-template #processingSpinner>
                              <div class="spinner-border spinner-border-sm text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                              </div>
                            </ng-template>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                    <div *ngIf="totalRecordsMissedPunch > pageSizeMissedPunch" class="d-flex align-items-center justify-content-between w-100 pagination-box p-3 bg-white border-top">
                      <p class="mb-0">Showing items {{(currentPageMissedPunch - 1) * pageSizeMissedPunch + 1}} - {{currentPageMissedPunch * pageSizeMissedPunch > totalRecordsMissedPunch ? totalRecordsMissedPunch : currentPageMissedPunch * pageSizeMissedPunch}} of {{totalRecordsMissedPunch}} records</p>
                      <ngb-pagination [collectionSize]="totalRecordsMissedPunch" [(page)]="currentPageMissedPunch" [pageSize]="pageSizeMissedPunch"
                        (pageChange)="fetchMissedPunchRequests()" class="pagition-box"></ngb-pagination>
                    </div>
                  </div>
                </div>
              </div>
              <!-- System Outage Tab -->
              <div class="tab-pane fade mt-3" id="systemOutage" role="tabpanel" aria-labelledby="employee-tab">
                <div class="mt-3">
                    <div class="asset-assigned-search">
                      <div class="d-flex justify-content-start align-items-center">
                        <div class="search-filter">
                          <button type="button" id="statusDropdownSystemOutage"
                            class="btn btn-secondary new-dropdown d-flex align-items-center justify-content-between"
                            (click)="changeShowFilter1(true, 'systemOutage')">
                            Filters
                            <svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" viewBox="0 0 23 23" fill="none">
                              <mask id="mask0_7808_40" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="23" height="23">
                                <rect x="0.262695" y="0.283112" width="22.4338" height="22.4338" fill="#1C1B1F"/>
                              </mask>
                              <g mask="url(#mask0_7808_40)">
                                <path d="M9.61057 17.1084V15.239H13.3495V17.1084H9.61057ZM5.87161 12.4347V10.5653H17.0885V12.4347H5.87161ZM3.06738 7.76104V5.89156H19.8927V7.76104H3.06738Z" fill="#1C1B1F"/>
                              </g>
                            </svg>
                          </button>
                        </div>
                        <div class="search-date d-flex align-items-center justify-content-between position-relative w-100">
                          <div class="form-group w-100 position-relative">
                            <input type="text" id="searchTextSystemOutage" [(ngModel)]="searchTextSystemOutage"
                            (ngModelChange)="onSearchTextSystemOutageChange($event)" placeholder="Search by name, requested reason.."
                              class="form-control me-2 w-100 search-padding border-0" />
                            <i *ngIf="searchTextSystemOutage==''" class="bi bi-search search-icon d-flex align-items-center h-100"></i>
                            <i class="bi bi-x-lg search-icon d-flex align-items-center h-100 text-primary"
                                    *ngIf="searchTextSystemOutage!=''" (click)="searchTextSystemOutage='';applyFilters()"></i>
                          </div>
                        </div>
                      </div>
                    </div>
                  <div class="actionMenuList filter-box p-0 position-absolute bg-white border" [ngClass]="{'d-none': !showFilter}">
                    <div class="d-flex align-items-center justify-content-between border-bottom p-3">
                      <h5 class="mb-0 font-14 fw-semibold">Filter</h5>
                      <span class="pointer lh-1" (click)="changeShowFilter1(false, 'systemOutage')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" fill="none">
                          <g opacity="0.8">
                            <mask id="mask0_7729_258" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="18" height="19">
                              <rect y="0.5" width="18" height="18" fill="#D9D9D9"/>
                            </mask>
                            <g mask="url(#mask0_7729_258)">
                              <path d="M4.8 14.75L3.75 13.7L7.95 9.5L3.75 5.3L4.8 4.25L9 8.45L13.2 4.25L14.25 5.3L10.05 9.5L14.25 13.7L13.2 14.75L9 10.55L4.8 14.75Z" fill="#1C1B1F"/>
                            </g>
                          </g>
                        </svg>
                      </span>
                    </div>
                    <div class="row p-3">
                      <div class="col-md-12 mb-3">
                        <label for="employeeName" class="pb-2">Employee Name</label>
                        <nz-select [(ngModel)]="selectedUserIds" [nzMode]="'multiple'" nzPlaceHolder="Employee Name"
                          class="w-100 border placeholder-line">
                          <nz-option *ngFor="let user of allUsers" [nzValue]="user.id" [nzLabel]="user.userName"></nz-option>
                        </nz-select>
                      </div>
                      <div class="col-md-12 mb-3" *ngIf="currentTab === 'missedPunch'">
                        <label for="requestType" class="pb-2">Request Type</label>
                        <nz-select [(ngModel)]="selectedPunchType" nzPlaceHolder="Request Type" class="w-100 form-control placeholder-lines">
                          <nz-option nzValue="Check-In" nzLabel="Check-In"></nz-option>
                          <nz-option nzValue="Check-Out" nzLabel="Check-Out"></nz-option>
                          <nz-option nzValue="Both" nzLabel="Both"></nz-option>
                        </nz-select>
                      </div>
                      <div class="col-md-12 mb-3">
                        <label for="date" class="pb-2">Start Date</label>
                        <nz-date-picker [(ngModel)]="startDate1" nzBorderless nzPlaceHolder="dd/mm/yyyy"></nz-date-picker>
                      </div>
                      <div class="col-md-12 mb-3">
                        <label for="date" class="pb-2">End Date</label>
                        <nz-date-picker [(ngModel)]="endDate1" nzBorderless nzPlaceHolder="dd/mm/yyyy"></nz-date-picker>
                      </div>
                      <div class="col-md-12 mb-3">
                        <label for="status" class="pb-2">Status</label>
                        <nz-select [(ngModel)]="selectedStatuses" [nzMode]="'multiple'" nzPlaceHolder="Status"
                          class="w-100 border placeholder-line">
                          <nz-option nzValue="Pending" nzLabel="Pending"></nz-option>
                          <nz-option nzValue="Approved" nzLabel="Approved"></nz-option>
                          <nz-option nzValue="Rejected" nzLabel="Rejected"></nz-option>
                        </nz-select>
                      </div>
                      <div class="col-md-12 mb-3">
                        <label for="status" class="pb-2">Attendance Type</label>
                        <nz-select [(ngModel)]="selectedAttendanceStatus" [nzMode]="'multiple'" nzPlaceHolder="Status"
                          class="w-100 border placeholder-line">
                          <nz-option nzValue="in" nzLabel="in"></nz-option>
                          <nz-option nzValue="out" nzLabel="out"></nz-option>
                          <nz-option nzValue="break" nzLabel="break"></nz-option>
                          <nz-option nzValue="back" nzLabel="back"></nz-option>
                        </nz-select>
                      </div>
                    </div>
                    <div class="p-3 border-top d-flex gap-2 align-items-center justify-content-end">
                      <button class="btn cancel-btn mt-0" (click)="resetFilters()">Reset it</button>
                      <button class="btn submitActionBtn" (click)="currentPageSystemOutage=1;applyFilters()">Apply</button>
                    </div>
                  </div>
                  <div class="filter-bdg d-flex align-items-center gap-2 mt-3" *ngIf="activeSystemOutageFilters.length > 0">
                    <ng-container *ngFor="let filter of activeSystemOutageFilters">
                      <p class="filter-pills d-flex align-items-center gap-2 pointer font-12 fw-semibold">
                        {{ filter.label }}: {{ filter.value }}
                        <i class="bi bi-x-lg pointer" (click)="removeFilter(filter, 'systemOutage')"></i>
                      </p>
                    </ng-container>
                  </div>
                  <div class="mt-3">
                    <table class="table mb-0">
                      <thead>
                        <tr>
                          <th class="text-left">Employee Name</th>
                          <th class="text-left">Requested On</th>
                          <th class="text-left">Type</th>
                          <th class="text-left">Requested To</th>
                          <th class="text-left">Actual Time</th>
                          <th class="text-left">Expected Time</th>
                          <th class="text-left">Note</th>
                          <th class="text-left">Status</th>
                          <th class="text-left">Action</th>
                        </tr>
                      </thead>
                      <tbody *ngIf="isLoading">
                        <tr *ngFor="let item of [].constructor(9)">
                          <td><ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading></td>
                          <td><ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading></td>
                          <td><ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading></td>
                          <td><ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading></td>
                          <td><ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading></td>
                          <td><ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading></td>
                          <td><ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading></td>
                          <td><ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading></td>
                          <td><ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading></td>
                        </tr>
                      </tbody>
                      <tbody *ngIf="!isLoading && systemOutageRequests.length === 0">
                        <tr>
                          <td colspan="9">
                            <div class="empty-file" style="margin-top: 5%; margin-bottom: 5%">
                              <nz-empty nzNotFoundImage="assets/images/no-data-found-img.svg" [nzNotFoundContent]="contentTpl">
                                <ng-template #contentTpl>
                                  <p class="mb-1 empty-detail font-16">No data for now</p>
                                </ng-template>
                              </nz-empty>
                            </div>
                          </td>
                        </tr>
                      </tbody>
                      <tbody *ngIf="!isLoading && systemOutageRequests.length > 0">
                        <tr *ngFor="let request of systemOutageRequests">
                          <td (click)="routeToUserDetails(request.userUuid)" class="fw-normal pointer">{{request.userName}}</td>
                          <td>
                            <span>
                              <h5 class="mb-1 font-13 fw-semibold">{{request.createdDate | date: 'yyyy-MM-dd'}}</h5>
                              <p class="mb-0 font-12 fw-normal">{{request.createdDate | date: 'EEEE'}}</p>
                            </span>
                          </td>
                          <td>
                            <span>
                              <h5 class="mb-1 font-14 fw-semibold text-primary">{{request.attendanceStatus}}</h5>
                              <p class="mb-0 font-12 fw-light">On {{request.oldTime | date: 'dd MMM, yyyy'}}</p>
                            </span>
                          </td>
                          <td class="fw-semibold">{{request.managerName}}</td>
                          <td class="font-13 fw-normal">{{request.updatedTime | date:'h:mm a' || '--'}}</td>
                          <td class="font-13 fw-normal">{{request.oldTime | date:'h:mm a' || '--'}}</td>
                          <td class="fw-normal">
                            <span class="fw-normal font-13 white-space" nz-popover nzPopoverTitle="Note" [nzPopoverContent]="request.requestReason"
                              [nzPopoverOverlayStyle]="{'width':'300px'}" nzPopoverPlacement="top">{{request.requestReason}}</span>
                          </td>
                          <td>
                            <span class="fw-semibold font-13" [ngClass]="{'text-success': request?.status?.id === 50, 'text-danger': request?.status?.id === 51, 'text-primary': request?.status?.id === 52}">
                              {{request?.status?.response | uppercase}}
                            </span>
                            <p class="mb-0 font-12 fw-light" *ngIf="request.approvedByName">By: {{request.approvedByName}}</p>
                          </td>
                          <td>
                            <div class="dropdown" *ngIf="!request.isProcessing; else processingSpinner">
                              <button type="button" data-bs-toggle="dropdown" aria-expanded="false"
                                class="btn btnAction dropdown-toggle d-flex align-items-center justify-content-center">
                                <i class="bi bi-three-dots-vertical"></i>
                              </button>
                              <div class="dropdown-menu actionMenuList">
                                <!-- <li *ngIf="request?.status?.id==52 && (request?.managerUuid==userUuid || role=='ADMIN')"> -->

                                  <li *ngIf="rbacService.hasWriteAccess(Routes.TIMETABLE) && request.status.id === StatusKeys.ATTENDANCE_UPDATE_REQUEST_PENDING  && (role=='ADMIN' || request.managerUuid == userUuid)">
                                  <a class="dropdown-item" (click)="approveOrReject(request.id, 'APPROVED'); request.isProcessing=true">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 25 25" fill="none">
                                      <mask id="mask0_8226_22308" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="25" height="25">
                                        <rect x="0.374023" y="0.5" width="24" height="24" fill="#D9D9D9"/>
                                      </mask>
                                      <g mask="url(#mask0_8226_22308)">
                                        <path d="M9.92386 18.1534L4.58936 12.8189L5.65836 11.7496L9.92386 16.0151L19.0894 6.84961L20.1584 7.91886L9.92386 18.1534Z" fill="#1C1B1F"/>
                                      </g>
                                    </svg>
                                    Approve
                                  </a>
                                </li>
                                <!-- <li *ngIf="request?.status?.id==52 && (request?.managerUuid==userUuid || role=='ADMIN')" > -->
                                  <li *ngIf="rbacService.hasWriteAccess(Routes.TIMETABLE) && request.status.id === StatusKeys.ATTENDANCE_UPDATE_REQUEST_PENDING  && (role=='ADMIN' || request.managerUuid == userUuid)">
                                  <a class="dropdown-item" (click)="approveOrReject(request.id, 'REJECTED'); request.isProcessing=true">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 25 25" fill="none">
                                      <mask id="mask0_8226_22314" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="25" height="25">
                                        <rect y="0.5" width="25" height="24" fill="#D9D9D9"/>
                                      </mask>
                                      <g mask="url(#mask0_8226_22314)">
                                        <path d="M6.6665 19.1542L5.56885 18.1004L11.4022 12.5004L5.56885 6.90043L6.6665 5.84668L12.4998 11.4467L18.3332 5.84668L19.4308 6.90043L13.5975 12.5004L19.4308 18.1004L18.3332 19.1542L12.4998 13.5542L6.6665 19.1542Z" fill="#1C1B1F"/>
                                      </g>
                                    </svg>
                                    Reject
                                  </a>
                                </li>
                                <li>
                                  <a class="dropdown-item" data-bs-target="#attendanceRequest" data-bs-toggle="modal" (click)="viewRequest(request)">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="25" viewBox="0 0 24 25" fill="none">
                                      <mask id="mask0_8226_22319" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="24" height="25">
                                        <rect y="0.5" width="24" height="24" fill="#D9D9D9"/>
                                      </mask>
                                      <g mask="url(#mask0_8226_22319)">
                                        <path d="M12.0023 16.077C13.1355 16.077 14.0979 15.6804 14.8896 14.8872C15.6812 14.0941 16.0771 13.1309 16.0771 11.9978C16.0771 10.8646 15.6805 9.90217 14.8873 9.1105C14.0942 8.31883 13.131 7.923 11.9978 7.923C10.8647 7.923 9.90224 8.31958 9.11058 9.11275C8.31891 9.90592 7.92307 10.8691 7.92307 12.0023C7.92307 13.1354 8.31966 14.0978 9.11282 14.8895C9.90599 15.6812 10.8692 16.077 12.0023 16.077ZM12.0001 14.7C11.2501 14.7 10.6126 14.4375 10.0876 13.9125C9.56258 13.3875 9.30007 12.75 9.30007 12C9.30007 11.25 9.56258 10.6125 10.0876 10.0875C10.6126 9.5625 11.2501 9.3 12.0001 9.3C12.7501 9.3 13.3876 9.5625 13.9126 10.0875C14.4376 10.6125 14.7001 11.25 14.7001 12C14.7001 12.75 14.4376 13.3875 13.9126 13.9125C13.3876 14.4375 12.7501 14.7 12.0001 14.7ZM12.0013 19C9.70182 19 7.60657 18.3657 5.71557 17.097C3.82457 15.8285 2.43224 14.1295 1.53857 12C2.43224 9.8705 3.82407 8.1715 5.71407 6.903C7.60424 5.63433 9.69916 5 11.9988 5C14.2983 5 16.3936 5.63433 18.2846 6.903C20.1756 8.1715 21.5679 9.8705 22.4616 12C21.5679 14.1295 20.1761 15.8285 18.2861 17.097C16.3959 18.3657 14.301 19 12.0013 19ZM12.0001 17.5C13.8834 17.5 15.6126 17.0042 17.1876 16.0125C18.7626 15.0208 19.9667 13.6833 20.8001 12C19.9667 10.3167 18.7626 8.97917 17.1876 7.9875C15.6126 6.99583 13.8834 6.5 12.0001 6.5C10.1167 6.5 8.38757 6.99583 6.81257 7.9875C5.23757 8.97917 4.03341 10.3167 3.20007 12C4.03341 13.6833 5.23757 15.0208 6.81257 16.0125C8.38757 17.0042 10.1167 17.5 12.0001 17.5Z" fill="#1C1B1F"/>
                                      </g>
                                    </svg>
                                    View request
                                  </a>
                                </li>
                              </div>
                            </div>
                            <ng-template #processingSpinner>
                              <div class="spinner-border spinner-border-sm text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                              </div>
                            </ng-template>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                    <div *ngIf="totalRecordsSystemOutage > pageSizeSystemOutage" class="d-flex align-items-center justify-content-between w-100 pagination-box p-3 bg-white border-top">
                      <p class="mb-0">Showing items {{(currentPageSystemOutage - 1) * pageSizeSystemOutage + 1}} - {{currentPageSystemOutage * pageSizeSystemOutage > totalRecordsSystemOutage ? totalRecordsSystemOutage : currentPageSystemOutage * pageSizeSystemOutage}} of {{totalRecordsSystemOutage}} records</p>
                      <ngb-pagination [collectionSize]="totalRecordsSystemOutage" [(page)]="currentPageSystemOutage" [pageSize]="pageSizeSystemOutage"
                        (pageChange)="fetchSystemOutageRequests()" class="pagition-box"></ngb-pagination>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
    </div>
  </div>
</div>



<!-- attendance location modal start -->
    <button type="button" class="d-none" data-bs-toggle="modal" data-bs-target="#attendancewithlocationss"
      #attendancewithlocationssButton id="attendancewithlocationssButton"></button>
    <div class="modal fade" id="attendancewithlocationss" tabindex="-1" role="dialog"
      aria-labelledby="attendancewithlocation" aria-hidden="true">
      <div class="modal-dialog modal-md" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h6 class="modal-title m-0" id="exampleModalDefaultLabel"> Staff Attendance Location  </h6>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" data-bs-toggle="modal" data-bs-target="#viewlog"></button>
            </div>
            <div class="modal-body">
              <div class="mb-10">
                  <div class="el-card-item">
                    <div class="el-card-avatar el-overlay-1">
                      <div class="map">
                        <agm-map class="map-height" [latitude]="lat" [longitude]="lng" [zoom]="zoom" [maxZoom]="20"
                          [zoomControl]="true" [disableDefaultUI]="true" [keyboardShortcuts]="false">
                          <agm-marker *ngIf="lat && lng" [latitude]="lat" [longitude]="lng" draggable="true"
                            [agmFitBounds]="true"></agm-marker>
                        </agm-map>
                      </div>
                    </div>
                  </div>
              </div>
            </div>
          </div>
      </div>
    </div>
<!-- attendance location modal ed -->

<!-- attendance selfie modal start -->
    <button type="button" class="btn btn-primary d-none" data-bs-toggle="modal" data-bs-target="#showDocModal"
      #openDocModalButton id="openDocModalButton"></button>
    <div class="modal blur-bg-2" id="showDocModal" tabindex="-1" data-bs-keyboard="false"
      aria-labelledby="showDocModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-md">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="showDocModalLabel">Attendance Selfie</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" data-bs-toggle="modal"
              data-bs-target="#viewlog"></button>
          </div>
          <div class="modal-body text-center attendance-selfie-modal">
            <img *ngIf="isImage" [src]="previewString" alt="Attendance Selfie" class="img-100" />
          </div>
          <div class="modal-footer d-flex align-items-center justify-content-end gap-3">
            <button class="btn btn-primary btn-sm" *ngIf="imageDownUrl" (click)="downloadFile(imageDownUrl)">
              <span><i class="bi bi-download"></i> Download</span>
            </button>
          </div>
        </div>
      </div>
    </div>
<!-- attendance selfie modal end -->

<!-- unprocessed logs modal start -->
    <div class="modal fade" id="unprocessedLogsModal" tabindex="-1" aria-labelledby="unprocessedLogsModalLabel"
      aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="unprocessedLogsModalLabel">
              Unprocessed Logs
              <span *ngIf="attendanceRequestCount > 0" class="badge bg-danger rounded-circle">
                {{ attendanceRequestCount }}
              </span>
            </h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>

          <div class="modal-body">
            <!-- Nav Tabs -->
            <ul class="nav nav-tabs" id="unprocessedLogsTabs" role="tablist">
              <li class="nav-item" role="presentation">
                <button class="nav-link active" id="requests-tab" data-bs-toggle="tab" data-bs-target="#requests"
                  type="button" role="tab" aria-controls="requests" aria-selected="true">
                  Requests
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link" id="logs-tab" data-bs-toggle="tab" data-bs-target="#logs" type="button" role="tab"
                  aria-controls="logs" aria-selected="false" (click)="openLogs()">
                  Logs
                </button>
              </li>
            </ul>
            <!-- Tab Content -->
            <div class="tab-content" id="unprocessedLogsTabsContent">
              <div class="tab-pane fade show active" id="requests" role="tabpanel" aria-labelledby="requests-tab">
                <!-- <div #logContainer
                (scroll)="scrollDownRecentActivity($event)"> -->
                <!-- Requests Content -->
                <div class="search-bar mb-1 mt-2 form-group position-relative">
                  <input type="text" class="form-control search-padding-40" placeholder="Search by user name..."
                    [(ngModel)]="attendanceRequestSearchString" (ngModelChange)="onSearchChange($event)" />
                  <i class="bi bi-search search-icon" style="margin: auto; margin-left: 10px"
                    *ngIf="attendanceRequestSearchString == ''"></i>
                  <i class="bi bi-x search-icon" style="margin: auto; margin-left: 10px"
                    *ngIf="attendanceRequestSearchString != ''" (click)="clearSearchUsersOfRequestLogs()"></i>
                </div>


                <div class="empty-file" *ngIf="fullAttendanceRequestCount == 0">
                  <nz-empty nzNotFoundImage="assets/images/no-data-found-img.svg" [nzNotFoundContent]="contentTpl">
                    <ng-template #contentTpl>
                      <p class="mb-1 empty-detail font-16">No pending requests!</p>
                    </ng-template>
                  </nz-empty>
                </div>
                <div class="logs-container" *ngIf="fullAttendanceRequestCount > 0" #logContainer
                  (scroll)="scrollDownRecentActivity($event)">
                  <div class="log-entry p-3 mb-2 border-rounded-2" *ngFor="let log of attendanceRequests">
                    <!-- <h6>Attendance Update Request</h6> -->
                    <div class="log-header d-flex align-items-center justify-content-between" *ngIf="log.requestType === 'UPDATE'">
                      <h6 class="m-0">
                        Request Type:
                        <span class="badge bg-soft-primary">Update ({{ log.attendanceStatus }})</span>
                      </h6>
                      <span class="badge bg-soft-warning" *ngIf="log.status == 'PENDING'">Pending</span>
                      <span class="badge bg-soft-success" *ngIf="log.status == 'APPROVED'">Approved</span>
                      <span class="badge bg-soft-danger" *ngIf="log.status == 'REJECTED'">Rejected</span>
                    </div>
                    <div class="log-header d-flex align-items-center justify-content-between" *ngIf="log.requestType === 'CREATE'">
                      <h6 class="m-0">
                        Request Type:
                        <span class="badge bg-soft-primary">Create</span>
                      </h6>
                      <span class="badge bg-soft-warning" *ngIf="log.status == 'PENDING'">Pending</span>
                      <span class="badge bg-soft-success" *ngIf="log.status == 'APPROVED'">Approved</span>
                      <span class="badge bg-soft-danger" *ngIf="log.status == 'REJECTED'">Rejected</span>
                    </div>
                    <span *ngIf="log.requestType == 'UPDATE'">
                      <p>
                        <strong>Date:</strong>
                        {{ log.createdDate | date : "MMM dd, yyyy 'at' hh:mm a" }}
                      </p>
                      <p>
                        <strong>Original Date:</strong>
                        {{ log.oldDate | date : "MMM dd, yyyy 'at' hh:mm a" }}
                      </p>
                      <p>
                        <strong>Updated Date:</strong>
                        {{ log.updatedDate | date : "MMM dd, yyyy 'at' hh:mm a" }}
                      </p>
                    </span>
                    <span *ngIf="log.requestType == 'CREATE'">
                      <p>
                        <strong>In Request Date:</strong>
                        {{ log.inRequestTime | date : "MMM dd, yyyy 'at' hh:mm a" }}
                      </p>
                      <p>
                        <strong>Out Request Date:</strong>
                        {{
                        log.outRequestTime | date : "MMM dd, yyyy 'at' hh:mm a"
                        }}
                      </p>
                    </span>
                    <p><strong>User:</strong> {{ log.userName }}</p>
                    <p><strong>Manager:</strong> {{ log.managerName }}</p>
                    <p><strong>Reason:</strong> {{ log.requestReason }}</p>
                    <div class="action-buttons d-flex align-items-center justify-contant-end" *ngIf="log.managerUuid === logInUserUuid || role == 'ADMIN'">
                      <button class="btn btn-soft-success mx-2" (click)="approveOrReject(log.id, 'APPROVED')">
                        Approve
                      </button>
                      <button class="btn btn-soft-danger mx-2" (click)="approveOrReject(log.id, 'REJECTED')">
                        Reject
                      </button>
                    </div>
                  </div>
                  <!-- Load More Button -->
                  <div class="align-self-center text-center mt-2" *ngIf="
                      fullAttendanceRequestCount > itemPerPageAttendanceRequest &&
                      !isFullRequestLoader &&
                      !initialLoadDone
                    ">
                    <button type="button" class="btn btn-xs btn-light btn-round" (click)="loadMoreAttendanceRequestLogs()">
                      Load More <i class="bi bi-chevron-down"></i>
                    </button>
                  </div>
                  <div class="text-center load-more-btn" *ngIf="isFullRequestLoader && !initialLoadDone">
                    <div class="spinner-border spinner-border-custom-1 text-primary" role="status"></div>
                    <div><small>Loading...</small></div>
                  </div>
                </div>
              </div>
              <div class="tab-pane fade" id="logs" role="tabpanel" aria-labelledby="logs-tab">
                <!-- Logs Content -->
                <div class="modal-body">
                  <!-- <div #logContainerforFullLogs
                  (scroll)="scrollDownRecentActivityforFullLogs($event)" > -->
                  <div class="search-bar mb-1 mt-2 form-group position-relative">
                    <input type="text" class="form-control search-padding-40" placeholder="Search by user name..."
                      [(ngModel)]="fullAttendanceRequestSearchString" (input)="
                        onSearchChangeOfFullAttendanceLogs( fullAttendanceRequestSearchString ) " />
                    <i class="bi bi-search search-icon" style="margin: auto; margin-left: 10px"
                      *ngIf="fullAttendanceRequestSearchString == ''"></i>
                    <i class="bi bi-x search-icon" style="margin: auto; margin-left: 10px"
                      *ngIf="fullAttendanceRequestSearchString != ''" (click)="clearSearchUsersOfFullLogs()"></i>
                  </div>



                  <div class="empty-file" *ngIf="totalAttendanceRequestCount == 0">
                    <nz-empty nzNotFoundImage="assets/images/no-data-found-img.svg" [nzNotFoundContent]="contentTpl">
                      <ng-template #contentTpl>
                        <p class="mb-1 empty-detail font-16">No data for now</p>
                      </ng-template>
                    </nz-empty>
                  </div>
                  <div class="logs-container" *ngIf="totalAttendanceRequestCount > 0" #logContainerforFullLogs
                    (scroll)="scrollDownRecentActivityforFullLogs($event)">
                    <div class="activity" *ngFor="let log of attendanceFullRequestLog">
                      <div class="activity-info">
                        <div class="icon-info-activity">
                          <i class="ti ti-clock bg-soft-warning" *ngIf="log.status == 'PENDING'"></i>
                          <i class="ti ti-checks bg-soft-success" *ngIf="log.status == 'APPROVED'"></i>
                          <i class="ti ti-x bg-soft-danger" *ngIf="log.status == 'REJECTED'"></i>
                        </div>
                        <div class="activity-info-text">
                          <div>
                            <div class="float-end">
                              <div class="btn btn-xs btn-light btn-round">
                                {{ log.createdDate | date : "medium" || "N/A" }}
                              </div>
                            </div>
                            <div class="media align-items-center">
                              <div class="media-body ms-2 align-self-center">
                                <h5 class="m-0 font-16">
                                  {{ log.userName }}
                                </h5>
                                <p class="text-muted font-12 mb-0">
                                  <span class="text-warning" *ngIf="log.status == 'PENDING'">Requested To</span>
                                  <span class="text-success" *ngIf="log.status == 'APPROVED'">Approved By</span>
                                  <span class="text-danger" *ngIf="log.status == 'REJECTED'">Rejected By</span>
                                  {{ log.managerName }}
                                </p>
                              </div>
                            </div>
                            <hr class="hr-dashed" />
                            <div class="d-flex justify-content-between flex-column" *ngIf="log.requestType == 'UPDATE'">
                              <h6>
                                Request Type:
                                <span class="badge bg-soft-primary">{{
                                  log.attendanceStatus
                                  }}</span>
                              </h6>
                              <p>
                                Original Date:
                                <u>{{
                                  log.oldDate | date : "MMM dd, yyyy 'at' hh:mm a"
                                  }}</u>
                              </p>
                              <p>
                                Updated Date:
                                <u>{{
                                  log.updatedDate
                                  | date : "MMM dd, yyyy 'at' hh:mm a"
                                  }}</u>
                              </p>
                            </div>
                            <div class="d-flex justify-content-between flex-column" *ngIf="log.requestType == 'CREATE'">
                              <p>
                                In Time Date:
                                <u>{{
                                  log.inRequestTime
                                  | date : "MMM dd, yyyy 'at' hh:mm a"
                                  }}</u>
                              </p>
                              <p>
                                Out Time Date:
                                <u>{{
                                  log.outRequestTime
                                  | date : "MMM dd, yyyy 'at' hh:mm a"
                                  }}</u>
                              </p>
                            </div>
                            <h6>Reason:</h6>
                            <p class="text-muted mb-0">
                              {{ log.requestReason }}
                            </p>
                          </div>
                          <hr class="hr-dashed" />
                        </div>
                      </div>
                    </div>
                    <div class="align-self-center text-center mt-2" *ngIf="
                        totalAttendanceRequestCount >
                          itemPerPageFullAttendanceRequest &&
                        !isRequestLoader &&
                        !initialLoadDoneforFullLogs
                      ">
                      <button type="button" class="btn btn-xs btn-light btn-round" (click)="loadMoreLogs()">
                        Load More <i class="bi bi-chevron-down"></i>
                      </button>
                    </div>
                    <div class="text-center load-more-btn" *ngIf="isRequestLoader && !initialLoadDoneforFullLogs">
                      <div class="spinner-border spinner-border-custom-1 text-primary" role="status"></div>
                      <div><small>Loading...</small></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
<!-- unprocessed logs modal end -->

<!-- overtime request modal start -->
    <div class="modal fade" id="overtime-request-action" tabindex="-1" role="dialog"
      aria-labelledby="exampleModalDefaultLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
      <div class="modal-dialog modal-dialog-centered overtime-request-modal" role="document">
        <div class="modal-content">
          <div class="modal-body p-5">
            <button type="button" class="overtime-request-action-close-btn position-absolute bg-white d-flex align-items-center justify-content-center" data-bs-dismiss="modal" aria-label="Close"
              #closeOvertimeRequestActionModal>
              <i class="bi bi-x lh-sm"></i>
            </button>
            <div class="text-center overtime-request-action-modal">
              <div class="d-flex align-items-start justify-content-between">
                <div class="d-flex align-items-center profile-details gap-3">
                  <div class="profile-user-img">
                    <img [src]="
                        overtimeRequestActionResponse.userImage ||
                        'assets/images/user.png'
                      "/>
                  </div>
                  <div>
                    <h4 class="font-18 text-black fw-semibold pointer pb-1 mb-0" (click)="
                        this.helperService.routeToUserProfile(
                          overtimeRequestActionResponse.userUuid
                        )
                      ">
                      {{ overtimeRequestActionResponse.userName }}
                    </h4>
                    <p class="font-13 fw-normal pb-0 text-left lh-base mb-0">{{ overtimeRequestActionResponse.userEmail }}</p>
                  </div>
                </div>
                <div class="total-holidey-live">
                  <h5 class="fw-normal mb-3 pb-0 fw-semibold">
                    <p class="font-13 fw-normal pb-0 text-right lh-base mb-0">
                      {{
                      overtimeRequestActionResponse.createdDate
                      | date : "dd MMM yyyy hh:mm a"
                      }}
                    </p>
                  </h5>
                </div>
              </div>
              <div class="mt-4">
                <div class="overtime-request-action-field">
                  <p  class="font-13 fw-normal pb-0 text-left lh-base">
                    <span>Time: </span><u>{{
                      overtimeRequestActionResponse.startTime
                      | date : "d MMM, h:mm a"
                      }}
                      -
                      {{
                      overtimeRequestActionResponse.endTime
                      | date : "d MMM, h:mm a"
                      }}</u>
                  </p>
                  <p class="font-13 fw-normal pb-0 text-left lh-base">
                    <span>Duration: </span>{{
                    this.helperService.formatHHmmssToHHmm(
                    overtimeRequestActionResponse.workingHour
                    )
                    }}
                    hrs.
                  </p>
                  <p class="font-13 fw-normal pb-0 text-left lh-base">
                    <span>Applied To: </span>{{ overtimeRequestActionResponse.managerName }}
                  </p>
                  <p class="font-13 fw-normal pb-0 text-left lh-base"><span>Note: </span>{{ overtimeRequestActionResponse.note }}</p>
                </div>
                <!-- *ngIf="
                specificLeaveRequest.managerUuid === logInUserUuid ||
                ROLE == 'ADMIN'" -->
                <div class="d-flex align-items-center justify-content-end gap-2">
                  <!-- Reject Button -->
                  <button class="btn reject-btn" type="button" (click)="
                      approveOrRejectOvertimeRequestMethodCall(
                        overtimeRequestActionResponse.overtimeRequestId,
                        this.key.REJECTED
                      )
                    ">
                    <div *ngIf="rejectLoader; else rejectLabel">
                      <div class="dot-opacity-loader-reject">
                        <span></span>
                        <span></span>
                        <span></span>
                      </div>
                    </div>
                    <ng-template #rejectLabel>Reject</ng-template>
                  </button>
                  <!-- Approve Button -->
                  <button class="btn approve-btn" type="button" (click)="
                      approveOrRejectOvertimeRequestMethodCall(
                        overtimeRequestActionResponse.overtimeRequestId,
                        this.key.APPROVED
                      )
                    ">
                    <div *ngIf="approveLoader; else approveLabel">
                      <div class="dot-opacity-loader-approve">
                        <span></span>
                        <span></span>
                        <span></span>
                      </div>
                    </div>
                    <ng-template #approveLabel>Approve</ng-template>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
<!-- overtime request modal end -->

<!-- attendance update request modal start -->
    <div class="modal fade" id="attendance-update-request-action" tabindex="-1" role="dialog"
      aria-labelledby="exampleModalDefaultLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
      <div class="modal-dialog modal-dialog-centered overtime-request-modal" role="document">
        <div class="modal-content">
          <div class="modal-body p-5">
            <button type="button" class="overtime-request-action-close-btn position-absolute bg-white d-flex align-items-center justify-content-center" data-bs-dismiss="modal" aria-label="Close"
              #closeAttendanceUpdateRequestActionModal>
              <i class="bi bi-x lh-sm"></i>
            </button>
            <div class="text-center overtime-request-action-modal">
              <div class="d-flex align-items-start justify-content-between">
                <div class="d-flex align-items-center profile-details gap-3">
                  <div class="profile-user-img">
                    <img [src]="
                        attendanceUpdateRequestActionResponse.userImage ||
                        'assets/images/user.png'
                      " />
                  </div>
                  <div>
                    <h4 class="font-18 text-black fw-semibold pointer pb-1 mb-0" (click)="
                        this.helperService.routeToUserProfile(
                          attendanceUpdateRequestActionResponse.userUuid
                        )
                      ">
                      {{ attendanceUpdateRequestActionResponse.userName }}
                    </h4>
                    <p class="font-13 fw-normal pb-0 text-left lh-base mb-0">{{ attendanceUpdateRequestActionResponse.userEmail }}</p>
                  </div>
                </div>
                <div class="total-holidey-live text-end">
                  <h5 class="font-14 fw-normal mb-3 pb-0 fw-semibold">
                    <p class="font-13 fw-normal pb-0 text-right lh-base  mb-0">
                      {{
                      attendanceUpdateRequestActionResponse.createdDate
                      | date : "dd MMM yyyy hh:mm a"
                      }}
                    </p>
                    <span class="badge badge-outline-primary" *ngIf="
                        attendanceUpdateRequestActionResponse.requestType ===
                        'UPDATE'
                      ">Request Type |
                      {{
                      attendanceUpdateRequestActionResponse.attendanceStatus
                      | uppercase
                      }}</span>
                    <span class="badge badge-outline-primary" *ngIf="
                        attendanceUpdateRequestActionResponse.requestType ===
                        'CREATE'
                      ">New Request !</span>
                  </h5>
                  <!-- <h5>{{ formatDateIn(formatDate(specificLeaveRequest.startDate)) }} - {{ formatDateIn(formatDate(specificLeaveRequest.endDate)) }}</h5> -->
                </div>
              </div>
              <div class="mt-4">
                <div class="overtime-request-action-field">
                  <ng-container *ngIf="
                      attendanceUpdateRequestActionResponse.requestType === 'UPDATE'
                    ">
                    <p class="font-13 fw-normal pb-0 text-left lh-base">
                      <span>Previous Time: </span><u>{{
                        attendanceUpdateRequestActionResponse.oldDate
                        | date : "d MMM, h:mm a"
                        }}</u>
                    </p>
                    <p class="font-13 fw-normal pb-0 text-left lh-base">
                      <span>Requested Time: </span><u>{{
                        attendanceUpdateRequestActionResponse.updatedDate
                        | date : "d MMM, h:mm a"
                        }}</u>
                    </p>
                  </ng-container>
                  <ng-container *ngIf="
                      attendanceUpdateRequestActionResponse.requestType === 'CREATE'
                    ">
                    <p class="font-13 fw-normal pb-0 text-left lh-base">
                      <span>In Time: </span><u>{{
                        attendanceUpdateRequestActionResponse.inRequestTime
                        | date : "d MMM, h:mm a"
                        }}</u>
                    </p>
                    <p class="font-13 fw-normal pb-0 text-left lh-base">
                      <span>Out Time: </span><u>{{
                        attendanceUpdateRequestActionResponse.outRequestTime
                        | date : "d MMM, h:mm a"
                        }}</u>
                    </p>
                  </ng-container>
                  <p class="font-13 fw-normal pb-0 text-left lh-base">
                    <span>Applied To: </span>{{ attendanceUpdateRequestActionResponse.managerName }}
                  </p>
                  <p class="font-13 fw-normal pb-0 text-left lh-base">
                    <span>Note: </span>{{ attendanceUpdateRequestActionResponse.requestReason }}
                  </p>
                </div>
                <!-- *ngIf="
                specificLeaveRequest.managerUuid === logInUserUuid ||
                ROLE == 'ADMIN'" -->
                <div class="d-flex align-items-center justify-content-end gap-2">
                  <!-- Reject Button -->
                  <button class="btn reject-btn" type="button" (click)="
                      approveOrReject(
                        attendanceUpdateRequestActionResponse.id,
                        'REJECTED'
                      )
                    ">
                    <div *ngIf="attendanceUpdateRequestRejectLoader; else rejectLabel">
                      <div class="dot-opacity-loader-reject">
                        <span></span>
                        <span></span>
                        <span></span>
                      </div>
                    </div>
                    <ng-template #rejectLabel>Reject</ng-template>
                  </button>
                  <!-- Approve Button -->
                  <button class="btn approve-btn" type="button" (click)="
                      approveOrReject(
                        attendanceUpdateRequestActionResponse.id,
                        'APPROVED'
                      )
                    ">
                    <div *ngIf="
                        attendanceUpdateRequestApproveLoader;
                        else approveLabel
                      ">
                      <div class="dot-opacity-loader-approve">
                        <span></span>
                        <span></span>
                        <span></span>
                      </div>
                    </div>
                    <ng-template #approveLabel>Approve</ng-template>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
<!-- attendance update request modal end -->

<!-- attenbdance bulk upload modal  -->
    <button type="button" class="btn btn-primary d-none" data-bs-toggle="modal" data-bs-target="#sampleFileModal"
      id="uploadMembersModal" #sampleFileModalButton>
      Open Sample File Modal
    </button>

    <div class="modal fade" id="sampleFileModal" tabindex="-1" aria-labelledby="sampleFileModalLabel" aria-hidden="true"
      #sampleFileModal>
      <div class="modal-dialog modal-xl modal-dialog-centered bulk-upload-modal">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="sampleFileModalLabel">Sample Excel File</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" (click)="resetModal()"
              #closeSampleFileModal></button>
          </div>
          <div class="modal-body">
            <ng-container *ngIf="
            !isShimmerModal &&
            attendanceUploadCountForUser == 0 &&
            !networkConnectionErrorPlaceholderModal
          ">
              <div class="col-md-12">
                <div class="card-body mt-0 p-0">
                  <div class="alert alert-light mb-0" role="alert">
                    <h4 class="alert-heading font-18">
                      Download the Sample Excel File!
                    </h4>
                    <p class="font-14 fw-light">
                      Look for the sample file titled "Sample_Data.xlsx" and click
                      on the download button to save it to your computer.
                    </p>
                    <p class="font-14 fw-light">
                      Take a moment to review the existing data in the Excel file.
                      This will help you understand the structure and content of the
                      data before making any updates.
                    </p>
                    <p class="font-14 fw-light">
                      <span class="text-primary">
                        <u><a class="text-primary" href="{{ sampleFileUrl }}">Download a sample Excel file</a></u>
                      </span>
                      , update its data, and upload it back with the updated content
                      on our platform
                    </p>
                  </div>
                </div>
                <div class="card-body mt-3 p-0">
                  <div class="alert alert-light mb-0 excel-upload-file-box text-center">
                    <input id="fileSelect" type="file" accept=".xlsx,application/vnd.ms-excel" name="img[]" class="input"
                      (change)="selectFile($event)" />
                    <img src="assets/images/excel.svg" class="pb-3 img-50 " />
                    <p class="font-14 fw-light">
                      Drag file here to upload or,
                      <u><a class="text-primary" href="#!">Choose file</a></u>
                    </p>
                    <div *ngIf="isProgressToggle" class="spinner-border text-success" role="status"></div>
                  </div>
                </div>
              </div>
              <div #attention class="create-password-warning waring-box p-3 mb-0 mt-4 ng-star-inserted text-start" *ngIf="
                  phoneNumberNotFoundArray.length > 0 ||
                  emailNotFoundArray.length > 0 ||
                  this.mismatches.length > 0 ||
                  isErrorToggle">
                <h4 class="alert-heading font-18 text-danger">Attention!!</h4>
                <ul  class="pl-3">
                  <li class="mb-1" *ngIf="this.mismatches.length > 0">

                    {{ this.mismatches }}
                  </li>
                  <li class="mb-1" *ngIf="phoneNumberNotFoundArray.length > 0">
                    Phone Numbers:
                    {{ formatAsCommaSeparated(phoneNumberNotFoundArray) }}
                  </li>
                  <li class="mb-1" *ngIf="emailNotFoundArray.length > 0">
                    Emails: {{ formatAsCommaSeparated(emailNotFoundArray) }}
                  </li>
                  <li class="mb-1" *ngIf="isErrorToggle">Error: {{ errorMessage }}
                    <a href="{{uploadedExcelLink}}" class="button" download="CreateAttendance_1733998263065.xlsx"
                      *ngIf="uploadedExcelLink">
                      Download Attendance Excel
                    </a>
                  </li>


                </ul>
              </div>

            </ng-container>
            <ng-container *ngIf="
                isShimmerModal &&
                attendanceUploadCountForUser == 0 &&
                  !networkConnectionErrorPlaceholderModal
                else onboardUserListCondition
              ">
              <div class="">
                <div class="text-end">
                  <ngx-shimmer-loading [width]="'30%'" [height]="'40px'" class="radius-50" ></ngx-shimmer-loading>
                </div>
              </div>
              <div class="mt-3 mb-2 border-rounded-2 p-2 attendance-border" *ngFor="let number of [1, 2, 3, 4, 5]">
                <div class="row mt-3">
                  <div class="col-md-2">
                    <div class="">
                      <ngx-shimmer-loading [width]="'100%'" [height]="'30px'"
                      class="radius-50" ></ngx-shimmer-loading>
                    </div>
                  </div>
                  <div class="col-md-2">
                    <div class="">
                      <ngx-shimmer-loading [width]="'100%'" [height]="'30px'"
                      class="radius-50"></ngx-shimmer-loading>
                    </div>
                  </div>
                  <div class="col-md-3">
                    <div class="">
                      <ngx-shimmer-loading [width]="'100%'" [height]="'30px'"
                      class="radius-50"></ngx-shimmer-loading>
                    </div>
                  </div>
                  <div class="col-md-3">
                    <div class="">
                      <ngx-shimmer-loading [width]="'100%'" [height]="'30px'"
                      class="radius-50" ></ngx-shimmer-loading>
                    </div>
                  </div>
                  <div class="col-md-2">
                    <div class="">
                      <ngx-shimmer-loading [width]="'100%'" [height]="'30px'"
                      class="radius-50" ></ngx-shimmer-loading>
                    </div>
                  </div>
                </div>
              </div>
            </ng-container>

            <ng-template #onboardUserListCondition>
              <ng-container *ngIf="
                  !isShimmerModal &&
                  attendanceUploadCountForUser != 0 &&
                    !networkConnectionErrorPlaceholderModal;
                  else errorInOnboardUserListCondition
                ">
                <div>
                  <div class="d-flex align-items-start justify-content-between">
                    <h5>Attendance Upload : <span class="font-14"> {{attendanceUploadCountForUser}} Users Attendance
                        Uploaded Successfully. </span></h5>
                    <a href="{{uploadedExcelLink}}" class="text-primary font-13 fw-semibold"
                      download="CreateAttendance_1733998263065.xlsx" *ngIf="uploadedExcelLink"><i
                        class="bi bi-download"></i> Download Attendance Excel
                    </a>
                  </div>



                  <p class="mb-1" *ngIf="phoneNumberNotFoundArray.length > 0">

                    <span class="fw-semibold"> 1. Phone Numbers: </span> {{ formatAsCommaSeparated(phoneNumberNotFoundArray)
                    }} Not Found.
                  </p>
                  <p class="mb-1" *ngIf="emailNotFoundArray.length > 0">
                    <span class="fw-semibold"> 2. Emails: </span> {{ formatAsCommaSeparated(emailNotFoundArray) }} Not
                    Found.
                  </p>
                </div>
                <div class="alert alert-light mb-0 mt-3 bg-soft-success" role="alert">
                  <h4 class="alert-heading font-18">
                    Note:
                  </h4>
                  <p class="mb-0 fot-14 fw-light">
                    Attendance for {{attendanceUploadCountForUser}} users has been uploaded successfully.
                    Please close this modal and select the date range from attendance date selector to check attendance for
                    the uploaded users.
                  </p>
                </div>
              </ng-container>
            </ng-template>

            <ng-template #errorInOnboardUserListCondition>

              <div class="empty-file mt-20p" *ngIf="networkConnectionErrorPlaceholderModal">
                <nz-empty nzNotFoundImage="assets/images/signal.svg"
                  [nzNotFoundContent]="contentTpl">
                  <ng-template #contentTpl>
                    <p class="mb-3 empty-detail font-16">Something went wrong</p>
                    <p class="mb-0 font-13"> An error occurred while processing your request! </p>
                  </ng-template>
                </nz-empty>
              </div>
            </ng-template>
          </div>
        </div>
      </div>
    </div>
<!-- attenbdance bulk upload modal end -->

<!--attendance request modal start -->
    <div class="modal fade" id="attendanceRequest" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
      <div class="modal-dialog modal-dialog-centered">
        <app-attendance-update *ngIf="showAttendanceUpdate" [isCreate]="false" [data]="attendanceUpdateData" (closeModal)="onAttendanceUpdateClose()"></app-attendance-update>
        <button class="d-none" #closeBtn data-bs-dismiss="modal"></button>
        <div *ngIf="!showAttendanceUpdate" class="modal-body p-0">
          <div class="d-flex align-items-center justify-content-center">
            <div class="spinner-border spinner-border-custom-1 text-primary" role="status"></div>
          </div>
        </div>
      </div>
    </div>
<!--attendance request modal end -->
