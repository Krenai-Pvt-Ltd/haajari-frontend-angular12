<div class="page-wrapper">
    <div class="page-content-tab">
        <div class="container-fluid">
            <div class="pt-3 pb-3">
                <div class="">
                    <ul id="myTab" role="tablist" class="nav nav-tabs">
                        <li role="presentation" class="nav-item">
                            <button id="profile-tab" data-bs-toggle="tab" data-bs-target="#user-controls" type="button"
                                role="tab" aria-controls="profile" aria-selected="false" class="nav-link active"
                                (click)="getUserAndControlRolesByFilterMethodCall()">
                                Users And Controls
                            </button>
                        </li>
                        <li role="presentation" class="nav-item">
                            <button id="home-tab" data-bs-toggle="tab" data-bs-target="#role-security" type="button"
                                role="tab" aria-controls="home" aria-selected="true" class="nav-link"
                                (click)="getAllRolesMethodCall()">
                                Roles And Security
                            </button>
                        </li>
                    </ul>

                    <div class="tab-content" id="myTabContent">
                        <div class="tab-pane fade show active mt-3" id="user-controls" role="tabpanel">
                            <div class="">
                                <div class="row align-items-center border-bottom pb-3">
                                    <div class="col-md-6">
                                        <div class="">
                                            <form novalidate="" role="search" (submit)="searchUsers()"
                                                class="searching ng-untouched ng-pristine ng-valid">
                                                <div class="form-group" style="width: 350px; position: relative">
                                                    <input type="text" id="searchText"
                                                        placeholder="Search by name and role"
                                                        class="form-control me-2 ng-untouched ng-pristine ng-valid attendance-details-search"
                                                        (keyup)="searchUsers()" [(ngModel)]="searchText"
                                                        [ngModelOptions]="{ standalone: true }"
                                                        style="padding: 10px 30px" />
                                                    <button type="button" class="btn close-btn" (click)="clearSearchUsers()" *ngIf="crossFlag">
                                                        <i class="bi bi-x mt-auto mb-auto pl-3"></i>
                                                    </button>
                                                    <i class="bi bi-search search-icon"
                                                        style="margin: auto; margin-left: 10px"></i>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                    <!-- <div class="col-md-6">
                                        <div class="text-end add-filtter">
                                            <a data-bs-toggle="modal" data-bs-target="#assignrole" type="btn"
                                                (click)="getUsersByFilterMethodCall()">
                                                <i class="bi bi-plus-circle"></i> Assign Role to User</a>
                                        </div>
                                    </div> -->
                                </div>

                                <div *ngIf="
                                userAndControlRoles === null ||
                                userAndControlRoles === undefined ||
                                userAndControlRoles.length === 0
                              ">
                                                <div class="mt-3 dashnodata">
                                                    <div class="errorboxmain">
                                                        <div class="errorboxinner text-center">
                                                            <div class="errorboxplaceholder mb-2">
                                                                <img src="assets/images/addnewproduct.svg"
                                                                    style="width: 80px" />
                                                            </div>

                                                            <h4>No Data Found</h4>
                                                           
                                                            <p>
                                                                We're unable to locate a record associated with the information you entered.
                                                            </p>
                                                            <div class="placeholder-add" style="margin-top: 14px;">
                                                                <a data-bs-toggle="modal" data-bs-target="#assignrole" type="btn"
                                                                    (click)="getUsersByFilterMethodCall()">
                                                                    <i class="bi bi-plus" style="font-size: 16px;"></i> Assign role to user</a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                </div>

                                <div class="row mt-3">
                                    <div class="col-md-4" *ngFor="
                                    let userAndControl of userAndControlRoles
                                      | paginate
                                        : {
                                            itemsPerPage: itemPerPage,
                                            currentPage: pageNumber,
                                            totalItems: total
                                          }
                                  ">
                                        <div class="roldefine-box" >
                                         
                                            <div class="float-end">
                                                <div class="dropdown d-inline-block">
                                                    <a id="dLabel1" data-bs-toggle="dropdown" href="#" role="button"
                                                        aria-haspopup="false" aria-expanded="false" class="dropdown-toggle">
                                                        <i class="las la-ellipsis-v font-24 text-muted"
                                                            style="color: #000444 !important;"></i>
                                                    </a>
                                                    <div aria-labelledby="dLabel1" class="dropdown-menu dropdown-menu-end">
                                                        <a class="dropdown-item" data-bs-toggle="modal"
                                                            data-bs-target="#assignrole" (click)="selectUserAndControl(userAndControl)">Edit</a>
                                                        <a class="dropdown-item" data-bs-toggle="modal"
                                                            data-bs-target="#information" (click)="
                                                            userAndControlDetailMethod(userAndControl)">View</a>
                                                        <span >
                                                            <a class="dropdown-item" (click)="deleteUser(userAndControl.id)">Delete</a>
                                                         </span>
                                                         


                                                    </div>
                                                </div>
                                            </div>
                                            <div class="d-flex align-items-center" style="gap:10px;">
                                                <div class="">

                                                    <div class="img-group">
                                                        <a class="user-avatar me-1" >
                                                            <span *ngIf="userAndControl.user.image!==null">
                                                                <img
                                                          src="{{userAndControl.user.image}}"
                                                          alt="u"
                                                          class="thumb-xs rounded-circle"
                                                        /></span>

                                                            <span class="members-icon" *ngIf="userAndControl.user.image==null">{{userAndControl.user.name[0]}}</span>
                                                        </a>
                                                    </div>
                                                </div>
                                                <div class="shrivastwa">
                                                    <h5>{{ userAndControl.user.name }} ({{userAndControl.role.name }})</h5>
                                                    <p class="mb-0">{{ userAndControl.user.email }}</p>
                                                </div>
                                            </div>
    
                                            <div class="role-detaile mt-3">
                                                <p>{{userAndControl.description}}</p>
                                            </div>
    
                                            <!-- <div class="mt-3 total-mamber ">
                                                <p>2 People</p>
                                            </div> -->
                                            
                                        </div>
                                    </div>
                                    <div class="col-md-4" *ngIf="pageNumber === totalPages && userAndControlRoles.length >0">
                                        <div class="roldefine-box add-role-box">
                                            <div class="d-flex align-items-center" style="gap:10px;">
                                                <div class="">
                                                    <div class="img-group">
                                                        <a href="#" class="user-avatar me-1">
                                                            <span class="members-icon">A</span>
                                                        </a>
                                                    </div>
                                                </div>
                                                <div class="shrivastwa">
                                                    <h5>Assign Role To User</h5>
                                                    <p>Customized role</p>
    
                                                </div>
                                            </div>
    
                                            <div class="role-detaile mt-3">
                                                <p>Lorem Ipsum is simply dummy text of the printing and typesetting
                                                    industry. Lorem Ipsum has been the industry's standard dummy text ever
                                                    since the 1500s,</p>
                                            </div>

                                            <div class="total-mamber add-filtter" style="margin-top: 14px;">
                                                <a data-bs-toggle="modal" data-bs-target="#assignrole" type="btn"
                                                    (click)="getUsersByFilterMethodCall(); emptyAssignRoleToUserInUserAndControlMethodCall()">
                                                    <i class="bi bi-plus-circle" style="font-size: 16px;"></i> Assign Role to User</a>
                                            </div>
<!--     
                                            <div class="total-mamber add-filtter" style="margin-top: 14px;">
                                                <a class="" routerLink="/add-role"> <i class="bi bi-plus"
                                                        style="font-size: 16px;"></i> Add new role</a>
                                                
                                            </div> -->
                                        </div>
                                    </div>
    
                                 
                                </div>

                                <!-- <div class="mt-3">
                                    <div class="table-responsive bg-white">
                                        <table class="table mb-0">
                                            <thead class="thead-light">
                                                <tr>
                                                    <th>Name</th>
                                                    <th>Email</th>
                                                    <th>Role</th>
                                                    <th style="text-align: right">Manage</th>
                                                </tr>
                                            </thead>

                                            <tbody>
                                                <tr *ngIf="
                            userAndControlRoles === null ||
                            userAndControlRoles === undefined ||
                            userAndControlRoles.length === 0
                          ">
                                                    <td colspan="9">
                                                        <div class="mt-3 dashnodata">
                                                            <div class="errorboxmain">
                                                                <div class="errorboxinner text-center">
                                                                    <div class="errorboxplaceholder mb-2">
                                                                        <img src="assets/images/addnewproduct.svg"
                                                                            style="width: 80px" />
                                                                    </div>

                                                                    <h4>No Data Found</h4>
                                                                    <p>
                                                                        Lorem Ipsum is simply dummy text of the
                                                                        printing and typesetting industry.
                                                                    </p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>

                                            <tbody>
                                                <tr *ngFor="
                            let userAndControl of userAndControlRoles
                              | paginate
                                : {
                                    itemsPerPage: itemPerPage,
                                    currentPage: pageNumber,
                                    totalItems: total
                                  }
                          ">
                                                    <td scope="row">{{ userAndControl.user.name }}</td>
                                                    <td>
                                                        {{ userAndControl.user.email }}
                                                    </td>
                                                    <td>{{ userAndControl.role.name }}</td>
                                                    
                                                    <td>
                                                        <div class="hstack gap-3 justify-content-end">
                                                            <a href="javascript:void(0);"
                                                                class="link-primary text-decoration-underline"
                                                                data-bs-toggle="modal" data-bs-target="#information"
                                                                (click)="
                                  userAndControlDetailMethod(userAndControl)
                                ">View</a>
                                                            <a href="javascript:void(0);" data-bs-toggle="modal"
                                                                data-bs-target="#assignrole"
                                                                class="link-success text-decoration-underline"
                                                                (click)="selectUserAndControl(userAndControl)">Edit</a>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div> -->
                            </div>

                            <div class="pagination pl-3" *ngIf="total> 5">
                                <p class="mb-0" style="padding-left: 15px">
                                    Showing {{ getStartIndex() }} - {{ getEndIndex() }} of
                                    {{ total }} roles
                                </p>
                                <div class="row">
                                    <div class="col-md-12">
                                        <nav aria-label="Page navigation example">
                                            <ul class="pagination justify-content-end">
                                                <li class="page-item" [class.disabled]="pageNumber == 1">
                                                    <a class="page-link" href="javascript:void(0);"
                                                        aria-label="Previous" (click)="changePage('prev')">
                                                        <span aria-hidden="true">&laquo;</span>
                                                    </a>
                                                </li>
                                                <li class="page-item" *ngFor="let page of getPages()"
                                                    [class.active]="pageNumber == page">
                                                    <a class="page-link" href="javascript:void(0);"
                                                        (click)="changePage(page)">{{ page }}</a>
                                                </li>
                                                <li class="page-item" [class.disabled]="pageNumber == totalPages">
                                                    <a class="page-link" href="javascript:void(0);" aria-label="Next"
                                                        (click)="changePage('next')">
                                                        <span aria-hidden="true">&raquo;</span>
                                                    </a>
                                                </li>
                                            </ul>
                                        </nav>
                                    </div>
                                </div>
                            </div>





                            
                        </div>

                        <!-- role-security modal -->
                        <div class="tab-pane fade mt-3" id="role-security" role="tabpanel">
                            <div class="">
                                <div class="row align-items-center">
                                    <div class="col-md-6">
                                        <div class="">
                                            <form novalidate="" role="search"
                                                class="searching ng-untouched ng-pristine ng-valid">
                                                <!-- <div class="form-group" style="width: 350px; position: relative">
                                                    <input type="text" id="searchText"
                                                        placeholder="Search by name and role"
                                                        class="form-control me-2 ng-untouched ng-pristine ng-valid"
                                                        style="padding: 10px 30px" />
                                                    <button type="button" class="btn close-btn">
                                                        <i class="bi bi-x mt-auto mb-auto pl-3"></i>
                                                    </button>
                                                    <i class="bi bi-search search-icon"
                                                        style="margin: auto; margin-left: 10px"></i>
                                                </div> -->
                                            </form>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="text-end add-filtter">
                                            <!-- <button type="button" class="btn btn-primary" >Create New User</button> -->

                                            <a data-bs-toggle="modal" data-bs-target="#newuser" type="btn">
                                                <i class="bi bi-plus"></i> Create New Role</a>
                                        </div>
                                    </div>
                                </div>

                                <div class="mt-3">
                                    <div class="table-responsive bg-white">
                                        <div *ngIf="roles.length == 0">
                                                <td colspan="4">
                                                    <div class="mt-3 dashnodata">
                                                        <div class="errorboxmain">
                                                            <div class="errorboxinner text-center">
                                                                <div class="errorboxplaceholder mb-2">
                                                                    <img src="assets/images/addnewproduct.svg"
                                                                        style="width: 80px" />
                                                                </div>

                                                                <h4>No Data Found</h4>
                                                                <div class="total-mamber add-filtter" style="margin-top: 14px;">
                                                                    <a class="" routerLink="/add-role"> <i class="bi bi-plus"
                                                                            style="font-size: 16px;"></i> Add new role</a>
                                                                </div>
                                                                <p>
                                                                    We're unable to locate a record associated with the information you entered.
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                        </div>

                                        <div class="row">
                               
                                            <div class="row">
                                                <div class="col-md-4" *ngFor="let role of roles | paginate: {itemsPerPage: itemPerPage, currentPage: pageNumber, totalItems: total}">
                                                    <div class="roldefine-box">
                
                                                        <div class="float-end">
                                                            <div class="dropdown d-inline-block">
                                                                <a id="dLabel1" data-bs-toggle="dropdown" href="#" role="button"
                                                                    aria-haspopup="false" aria-expanded="false" class="dropdown-toggle">
                                                                    <i class="las la-ellipsis-v font-24 text-muted"
                                                                        style="color: #000444 !important;"></i>
                                                                </a>
                                                                <div aria-labelledby="dLabel1" class="dropdown-menu dropdown-menu-end"
                                                                >
                                                                    <a href="#" class="dropdown-item" data-bs-toggle="modal"
                                                                        data-bs-target="#role-details">View</a>
                                                                    <a href="#" class="dropdown-item" data-bs-toggle="modal"
                                                                        data-bs-target="#update-role" (click)="showDataToModal(role)">Manage</a>
                                                                    <span *ngIf="(role.name!='ADMIN') && (role.name!='USER') && (role.name!='MANAGER')" >
                                                                    <a class="dropdown-item" (click)="deleteRolesWithUsers(role.id)"
                                                                        >Delete</a>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="d-flex align-items-center" style="gap:10px;">
                                                            <div class="">
                                                                <div class="img-group">
                                                                    <a href="#" class="user-avatar me-1">
                                                                        <span class="members-icon" *ngIf="role.name">{{role.name[0]}}</span>
                                                                    </a>
                                                                </div>
                                                            </div>
                                                            <div class="shrivastwa">
                                                                <h5>{{ role.name }}</h5>
                                                                <div class="mt-2 mb-2">
                                                                    <span class="badge-grey ">{{
                                                                        role.updatedDate | dateFormat
                                                                        }}</span>
                                                                </div>
                
                                                            </div>
                                                        </div>
                
                                                        <div class="role-detaile mt-2">
                                                            <p> {{ role.description }}</p>
                                                        </div>
                
                                                        <div class="mt-3 total-mamber ">
                                                            <p>{{role.count}} People</p>
                                                        </div>
                                                       
                                                    </div>
                                                </div>
                                                <div class="col-md-4" *ngIf="pageNumberUser === totalPagesUser && roles.length > 0">
                                                    <div class="roldefine-box add-role-box">
                
                                                        <!-- <div class="float-end">
                                                            <div class="dropdown d-inline-block">
                                                                <a id="dLabel1" data-bs-toggle="dropdown" href="#" role="button"
                                                                    aria-haspopup="false" aria-expanded="false" class="dropdown-toggle">
                                                                    <i class="las la-ellipsis-v font-24 text-muted"
                                                                        style="color: #000444 !important;"></i>
                                                                </a>
                                                                <div aria-labelledby="dLabel1" class="dropdown-menu dropdown-menu-end"
                                                                 >
                                                                    <a href="#" class="dropdown-item" data-bs-toggle="modal"
                                                                        data-bs-target="#role-details">View</a>
                                                                    <a href="#" class="dropdown-item" data-bs-toggle="modal"
                                                                        data-bs-target="#update-role">Manage</a>
                                                                </div>
                                                            </div>
                                                        </div> -->
                                                        <div class="d-flex align-items-center" style="gap:10px;">
                                                            <div class="">
                                                                <div class="img-group">
                                                                    <a href="#" class="user-avatar me-1">
                                                                        <span class="members-icon">A</span>
                                                                    </a>
                                                                </div>
                                                            </div>
                                                            <div class="shrivastwa">
                                                                <h5>Add new role</h5>
                                                                <p>Customized role</p>
                
                                                            </div>
                                                        </div>
                
                                                        <div class="role-detaile mt-3">
                                                            <p>Lorem Ipsum is simply dummy text of the printing and typesetting
                                                                industry. Lorem Ipsum has been the industry's standard dummy text ever
                                                                since the 1500s,</p>
                                                        </div>
                
                                                        <div class="total-mamber add-filtter" style="margin-top: 14px;">
                                                            <a class="" routerLink="/add-role"> <i class="bi bi-plus"
                                                                    style="font-size: 16px;"></i> Add new role</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
            
                                            
                                        </div>

                                        <!-- <table class="table mb-0" *ngIf="roles.length > 0">
                                            <thead class="thead-light">
                                                <tr>
                                                    <th>Role Name</th>
                                                    <th>Role Description</th>
                                                    <th>Created Date</th>
                                                    <th class="text-end">Action</th>
                                                </tr>
                                            </thead>

                                            <tbody>
                                                <tr
                                                    *ngFor="let role of roles | paginate: {itemsPerPage: itemPerPage, currentPage: pageNumber, totalItems: total}">
                                                    <td scope="row">{{ role.name }}</td>
                                                    <td>
                                                        {{ role.description }}
                                                    </td>
                                                    <td>
                                                        <span class="badge-grey">{{
                                                            role.updatedDate | dateFormat
                                                            }}</span>
                                                    </td>
                                                    <td>
                                                        <div class="hstack gap-3 justify-content-end">
                                                            <a href="javascript:void(0);"
                                                                class="link-primary text-decoration-underline"
                                                                data-bs-toggle="modal"
                                                                data-bs-target="#role-details">View</a>
                                                            <a href="javascript:void(0);" data-bs-toggle="modal"
                                                                data-bs-target="#update-role"
                                                                class="link-success text-decoration-underline"
                                                                (click)="showDataToModal(role)">Manage</a>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table> -->
                                    </div>
                                </div>
                            </div>
                            <div class="pagination pl-3" *ngIf="totalUser > 5">
                                <p class="mb-0" style="padding-left: 15px">
                                    Showing {{ getStartIndexUser() }} - {{ getEndIndexUser() }} of
                                    {{ totalUser }} teams
                                </p>
                                <div class="row">
                                    <div class="col-md-12">
                                        <nav aria-label="Page navigation example">
                                            <ul class="pagination justify-content-end">
                                                <li class="page-item" [class.disabled]="pageNumberUser == 1">
                                                    <a class="page-link" href="javascript:void(0);"
                                                        aria-label="Previous" (click)="changePageUser('prev')">
                                                        <span aria-hidden="true">&laquo;</span>
                                                    </a>
                                                </li>
                                                <li class="page-item" *ngFor="let page of getPagesUser()"
                                                    [class.active]="pageNumberUser == page">
                                                    <a class="page-link" href="javascript:void(0);"
                                                        (click)="changePageUser(page)">{{ page }}</a>
                                                </li>
                                                <li class="page-item" [class.disabled]="pageNumberUser == totalPages">
                                                    <a class="page-link" href="javascript:void(0);" aria-label="Next"
                                                        (click)="changePageUser('next')">
                                                        <span aria-hidden="true">&raquo;</span>
                                                    </a>
                                                </li>
                                            </ul>
                                        </nav>
                                    </div>
                                </div>
                            </div>


                            
                        </div>
                    </div>
                </div>
            </div>

            <!-- <div class="pagination-container">
                <div>
                    <p class="mb-0 " style="padding-left: 15px;">Showing {{ getStartIndex() }} - {{ getEndIndex() }} of {{ total }} teams</p>
                </div>
                <div class = "pagination-controls">
                    <pagination-controls 
                        perviousLabel="Prev"
                        nextLabel="Next"
                        (pageChange)="onTableDataChange($event)">
                    </pagination-controls>
                </div>
            </div> -->
        </div>
    </div>
</div>

<div class="modal fade" id="update-role" tabindex="-1" role="dialog" aria-labelledby="exampleModalDefaultLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h6 class="modal-title m-0" id="exampleModalDefaultLabel">
                    Update Role
                </h6>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <!--end modal-header-->
            <div class="modal-body">
                <div class="row">
                    <div class="">
                        <div class="mb-3">
                            <label for="exampleInputEmail1" class="pb-2">Name</label>
                            <input type="email" class="form-control" id="exampleInputEmail1"
                                aria-describedby="emailHelp" placeholder="Role Name" [(ngModel)]="roleRequest.name" />
                        </div>

                        <div class="mb-3">
                            <label for="exampleInputEmail1" class="pb-2">Description</label>
                            <input type="email" class="form-control" id="exampleInputEmail1"
                                aria-describedby="emailHelp" placeholder="Description"
                                [(ngModel)]="roleRequest.description" />
                        </div>
                    </div>

                    <div class="rolemodalinner border-top-0">
                        <h5>Access Control</h5>

                        <div class="accordion" id="accordionExample">
                            <div class="accordion-item" *ngFor="let module of moduleResponse; let i = index">
                                <h2 class="accordion-header" id="headingOne">
                                    <div class="accordion-button" type="button">
                                        <div clss="accesstitle">
                                            <p class="mb-0">{{ module.name }}</p>
                                        </div>

                                        <div class="accesspermission">
                                            <div class="accesspermissioninner d-flex">
                                                <div class="custom-radiocheck">
                                                    <input type="radio" class="form-check-input d-none"
                                                        [checked]="module.privilegeId == 1" name="viewModule{{ i }}"
                                                        id="viewModule{{ i }}"
                                                        (click)="handleRadioClickForModule(1, module)" />
                                                    <label class="form-check-label d-flex align-items-center gap-2"
                                                        for="viewModule{{ i }}">
                                                        <span><i class="bi bi-check2"></i></span>View
                                                    </label>
                                                </div>
                                                <div class="custom-radiocheck">
                                                    <input type="radio" class="form-check-input d-none"
                                                        [checked]="module.privilegeId == 2" name="manageModule{{ i }}"
                                                        id="manageModule{{ i }}"
                                                        (click)="handleRadioClickForModule(2, module)" />
                                                    <label class="form-check-label d-flex align-items-center gap-2"
                                                        for="manageModule{{ i }}">
                                                        <span><i class="bi bi-check2"></i></span>Manage
                                                    </label>
                                                </div>

                                                <div class="expand-accord">
                                                    <i data-bs-toggle="collapse" aria-expanded="true"
                                                        class="bi bi-chevron-down collapsed"
                                                        [attr.href]="'#collapse' + i"
                                                        [attr.aria-controls]="'collapse' + i"></i>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </h2>

                                <div [attr.id]="'collapse' + i" class="accordion-collapse collapse"
                                    aria-labelledby="headingOne" data-bs-parent="#accordionExample"
                                    *ngFor="let submodule of module.subModules; let j = index">
                                    <div class="accordion-button p-3" type="button" data-bs-toggle="collapse"
                                        data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                        <div class="accesstitle">
                                            <p class="mb-0">{{ submodule.name }}</p>
                                        </div>

                                        <div class="accesspermission">
                                            <div class="accesspermissioninner d-flex">
                                                <div class="custom-radiocheck">
                                                    <input type="radio" class="form-check-input d-none"
                                                        [checked]="submodule.privilegeId == 1"
                                                        name="viewSubModule{{ i }}{{ j }}"
                                                        id="viewSubModule{{ i }}{{ j }}"
                                                        (click)="handleRadioClickForSubModule(1, submodule)" />
                                                    <label class="form-check-label d-flex align-items-center gap-2"
                                                        for="viewSubModule{{ i }}{{ j }}">
                                                        <span><i class="bi bi-check2"></i></span>View
                                                    </label>
                                                </div>
                                                <div class="custom-radiocheck">
                                                    <input type="radio" class="form-check-input d-none"
                                                        [checked]="submodule.privilegeId == 2"
                                                        name="manageSubModule{{ i }}{{ j }}"
                                                        id="manageSubModule{{ i }}{{ j }}"
                                                        (click)="handleRadioClickForSubModule(2, submodule)" />
                                                    <label class="form-check-label d-flex align-items-center gap-2"
                                                        for="manageSubModule{{ i }}{{ j }}">
                                                        <span><i class="bi bi-check2"></i></span>Manage
                                                    </label>
                                                </div>

                                                <div class="expand-accord"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--end row-->
            </div>
            <!--end modal-body-->
            <div class="modal-footer d-flex align-items-center justify-content-end">
                <button type="button" class="btn btn-de-secondary" data-bs-dismiss="modal" aria-label="Close">
                    Cancel
                </button>
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal" aria-label="Close"
                    (click)="updateRoleWithPermissionsMethodCall()">
                    Update
                </button>
            </div>
            <!--end modal-footer-->
        </div>
        <!--end modal-content-->
    </div>
    <!--end modal-dialog-->
</div>
<!--end modal-->

<div class="modal fade" id="role-details" tabindex="-1" role="dialog" aria-labelledby="exampleModalDefaultLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h6 class="modal-title m-0" id="exampleModalDefaultLabel">
                    Role Details
                </h6>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <!--end modal-header-->
            <div class="modal-body">
                <div class="row">
                    <div class="">
                        <div class="table-responsive bg-white">
                            <table class="table mb-0">
                                <thead class="thead-light">
                                    <tr>
                                        <th>Role Name</th>
                                        <th>Role Description</th>
                                        <th>Created Date</th>
                                        <th>Created By</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td scope="row">Corporate Manager</td>
                                        <td>this is a corporate manager profile</td>
                                        <td>
                                            <span class="badge-grey">20-Nov-23 09:10 PM (EST)</span>
                                        </td>
                                        <td></td>
                                    </tr>
                                </tbody>
                            </table>
                            <!--end /table-->
                        </div>

                        <div class="table-responsive bg-white mt-3">
                            <table class="table mb-0">
                                <thead class="thead-light">
                                    <tr>
                                        <th>Modules</th>
                                        <th>Status</th>
                                        <th>Default Access</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td scope="row">Corporate</td>
                                        <td>
                                            <span _ngcontent-len-c58="" class="statusactive">Active</span>
                                        </td>
                                        <td>View</td>
                                    </tr>
                                </tbody>
                            </table>
                            <!--end /table-->
                        </div>
                    </div>
                </div>
                <!--end row-->
            </div>
            <!--end modal-body-->
            <div class="modal-footer d-flex align-items-center justify-content-end">
                <button type="button" class="btn btn-de-secondary" data-bs-dismiss="modal" aria-label="Close">
                    Cancel
                </button>
            </div>
            <!--end modal-footer-->
        </div>
        <!--end modal-content-->
    </div>
    <!--end modal-dialog-->
</div>
<!--end modal-->

<div class="modal fade" id="assignrole" tabindex="-1" role="dialog" aria-labelledby="exampleModalDefaultLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h6 class="modal-title m-0" id="exampleModalDefaultLabel">
                    Select user and role
                </h6>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                    #assignroleModalClose></button>
            </div>
            <!--end modal-header-->
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <div class="mb-3">
                            <label for="exampleInputEmail1" class="pb-2">User</label>
                            <div class="dropdown" style="width: 100%" >
                                <button class="btn btn-secondary dropdown-toggle new-dropdown" type="button"
                                    id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false" style="
                    background-color: white;
                    color: black;
                    border-color: #ced4da;
                    width: 100%;">
                                    {{ selectedUser ? selectedUser.name : "Select a user" }}
                                    <i class="bi bi-chevron-down"></i>
                                </button>
                                <ul class="dropdown-menu user-menu-height nationality-dropdown" aria-labelledby="dropdownMenuButton1" style="width: 100%">
                                    <li *ngFor="let user of users">
                                        <a class="dropdown-item" (click)="selectUser(user)">{{
                                            user.name
                                            }}</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- <div class="col-md-12">
                        <div class="mb-3">
                            <label for="exampleInputEmail1" class="pb-2">Role</label>
                            <div class="dropdown" style="width: 100%;">
                                <button class="btn btn-secondary dropdown-toggle new-dropdown" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false" style="background-color: white; color: black; border-color: #ced4da; width: 100%;">
                                    {{ selectedRole ? selectedRole.name : 'Select a role' }} <i class="bi bi-chevron-down"></i>
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1" style="width: 100%;">
                                    <li *ngFor="let role of roles">
                                        <a class="dropdown-item" (click)="selectRole(role)">{{ role.name }}</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div> -->

                    <div class="col-md-12">
                        <div class="mb-3">
                            <label for="exampleInputEmail1" class="pb-2">Role</label>
                            <div class="dropdown" style="width: 100%">
                                <button class="btn btn-secondary dropdown-toggle new-dropdown" type="button"
                                    id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false" style="
                    background-color: white;
                    color: black;
                    border-color: #ced4da;
                    width: 100%;
                    text-align: left;
                  ">
                                    {{ selectedRole ? selectedRole.name : "Select a role" }}
                                    <i class="bi bi-chevron-down" text-align="right"></i>
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1" style="width: 100%">
                                    <li *ngFor="let role of roles">
                                        
                                        <a class="dropdown-item" (click)="selectRole(role)" *ngIf="role.name!='USER'">{{
                                            role.name
                                            }}</a>
                                       
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12">
                        <div class="mb-3">
                            <label for="exampleInputEmail1" class="pb-2">Role Description</label>
                            <input [(ngModel)]="descriptionUserRole" type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Enter role description">
                        </div>
                    </div>

                    <!-- <div class="col-md-12">
                        <div class="mb-3">
                            <label for="exampleInputEmail1" class="pb-2">Role</label>
                            <input type="ematextil" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Enter role description">
                        </div>
                    </div> -->

                </div>
                <!--end row-->
            </div>
            <!--end modal-body-->
            <div class="modal-footer d-flex align-items-center justify-content-end">
                <button type="button" class="btn btn-de-secondary" data-bs-dismiss="modal">
                    Cancel
                </button>

                <button type="button" class="btn btn-primary" (click)="assignRoleToUserInUserAndControlMethodCall()">
                    Assign
                </button>
            </div>
            <!--end modal-footer-->
        </div>
        <!--end modal-content-->
    </div>
    <!--end modal-dialog-->
</div>
<!--end modal-->

<div class="modal fade" id="newuser" tabindex="-1" role="dialog" aria-labelledby="exampleModalDefaultLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h6 class="modal-title m-0" id="exampleModalDefaultLabel">
                    Create a New User
                </h6>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <!--end modal-header-->
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="exampleInputEmail1" class="pb-2">Role Name</label>
                            <input type="email" class="form-control" id="exampleInputEmail1"
                                aria-describedby="emailHelp" placeholder="First name" [(ngModel)]="roleRequest.name" />
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="exampleInputEmail1" class="pb-2">Description</label>
                            <input type="email" class="form-control" id="exampleInputEmail1"
                                aria-describedby="emailHelp" placeholder="Description"
                                [(ngModel)]="roleRequest.description" />
                        </div>
                    </div>
                </div>
                <!--end row-->
            </div>
            <!--end modal-body-->
            <div class="modal-footer d-flex align-items-center justify-content-end">
                <button type="button" class="btn btn-de-secondary" data-bs-dismiss="modal" aria-label="Close"
                    #createRoleModalClose>
                    Cancel
                </button>

                <button type="button" class="btn btn-primary" (click)="createRoleMethodCall()">
                    Create
                </button>
            </div>
            <!--end modal-footer-->
        </div>
        <!--end modal-content-->
    </div>
    <!--end modal-dialog-->
</div>
<!--end modal-->

<div class="modal fade" id="information" tabindex="-1" role="dialog" aria-labelledby="exampleModalDefaultLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h6 class="modal-title m-0" id="exampleModalDefaultLabel">
                    {{ userAndControlDetailVariable?.user?.name }}
                </h6>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <!--end modal-header-->
            <div class="modal-body">
                <div class="userdetails">
                    <div class="d-flex align-items-center">
                        <p class="text-end">First Name :</p>
                        <p class="text-start">
                            <span>{{ userAndControlDetailVariable?.user?.name }}</span>
                        </p>
                    </div>
                </div>
                <div class="userdetails">
                    <div class="d-flex align-items-center">
                        <p class="text-end">Email :</p>
                        <p class="text-start">
                            <span>{{ userAndControlDetailVariable?.user?.email }}</span>
                        </p>
                    </div>
                </div>
                <div class="userdetails">
                    <div class="d-flex align-items-center">
                        <p class="text-end">Role :</p>
                        <p class="text-start">
                            <span>{{ userAndControlDetailVariable?.role?.name }}</span>
                        </p>
                    </div>
                </div>
                <div class="userdetails">
                    <div class="d-flex align-items-center">
                        <p class="text-end">Status :</p>
                        <p class="text-start">
                            <span>{{
                                userAndControlDetailVariable?.presenceStatus
                                ? "Active"
                                : "Inactive"
                                }}</span>
                        </p>
                    </div>
                </div>

                <div class="userdetails">
                    <div class="d-flex align-items-center">
                        <p class="text-end">Updated Date :</p>
                        <p class="text-start">
                            <span>{{
                                userAndControlDetailVariable.updatedDate | dateFormat
                                }}</span>
                        </p>
                    </div>
                </div>
            </div>
            <!--end modal-body-->
            <div class="modal-footer d-flex align-items-center justify-content-end">
                <button type="button" class="btn btn-de-secondary" data-bs-dismiss="modal" aria-label="Close">
                    Cancel
                </button>
            </div>
            <!--end modal-footer-->
        </div>
        <!--end modal-content-->
    </div>
    <!--end modal-dialog-->
</div>
<!--end modal-->