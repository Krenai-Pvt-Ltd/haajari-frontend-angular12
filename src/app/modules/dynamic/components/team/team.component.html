
<app-header></app-header>

<app-topbar></app-topbar>
 

<div class="page-wrapper">

    <!-- Page Content-->
    <div class="page-content-tab">

        <div class="container-fluid">
            <!-- Page-Title -->
            <!-- Page-Title -->
            <div class="row">
                <div class="col-sm-12">
                    <div class="page-title-box">
                        <div class="float-end">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a routerLink="/dynamic/dashboard">Dashboard</a>
                                </li><!--end nav-item-->
                                <li class="breadcrumb-items active">/</li>
                                <li class="breadcrumb-items active">Team</li>
                            </ol>
                        </div>
                        <h4 class="page-title">Team</h4>
                    </div>
                </div><!--end col-->
            </div>
            
            <!-- end page title end breadcrumb -->
            <div class="row mt-3">
                <div class="col-lg-6">
                    <h5 class="m-0 font-14">Here the list of all available teams. <span class="badge badge-soft-pink">{{teams.length}}</span></h5>
                </div><!--end col-->

                <div class="col-lg-6 text-end">
                    <button type="button" class="btn btn-primary btn-sm mb-3" data-bs-toggle="modal" data-bs-target="#createteam">Create Team</button>                      
                </div><!--end col-->
            </div><!--end row-->
            <div class="row">
                <div class="col-lg-4" *ngFor="let team of teams">
                    <div class="card team-card" >
                        <div class="card-body">
                            <div class="float-end">                                        
                                <div class="dropdown d-inline-block">
                                    <a class="dropdown-toggle" id="dLabel1" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
                                        <i class="las la-ellipsis-v font-24 text-muted"></i>
                                    </a>
                                    <div class="dropdown-menu dropdown-menu-end" aria-labelledby="dLabel1">
                                        <a class="dropdown-item" href="#">Open Project</a>
                                        <a class="dropdown-item" href="#">Edit Card</a> 
                                        <a class="dropdown-item" href="#">Delete</a>
                                    </div>
                                </div>
                            </div>                                                 
                            <div class="media align-items-center" >                                                
                                <div class="img-group">
                                    <a class="user-avatar me-1" href="#" >
                                        <img src="assets/images/user.png" alt="" class="rounded-circle thumb-md">
                                       
                                        <span class="avatar-badge online"></span>

                                    </a>
                                    <!-- <div *ngIf="team.manager.image!==null">
                                        <a class="user-avatar me-1" href="#" >
                                            <img src={{team.manager.image}} alt="user" class="rounded-circle thumb-md">
                                            <span class="avatar-badge online"></span>
                                        </a>
                                    </div> -->
                                    <!-- <div>
                                        <a class="user-avatar me-1" href="#" >
                                            <img src="assets/images/user.png" alt="" class="rounded-circle thumb-md">
                                            
                                            <span class="avatar-badge online"></span>

                                        </a>
                                    </div> -->
                                   
                                </div>                                                                           
                                <div class="media-body ms-2 align-self-center">
                                    <h5 class="m-0">{{ capitalizeFirstLetter(team.name) }}</h5>
                                    <p class="text-muted font-12 mb-0">Team Name</p>                                            
                                </div>                                                                           
                            </div> 
                            <h4 class="m-0 mt-3 font-13 mb-0 fw-bold">{{capitalizeFirstLetter(team.manager.name)}}</h4>
                            <p class="text-muted font-12 mb-0">Team Manager</p> 
                            <p class="text-muted mb-0 fw-semibold">{{team.description}}</p>
                            <div class="mt-3 d-flex justify-content-between">
                                <div class="img-group">
                                    <ng-container *ngFor="let ul of team.userList; let i = index; last as isLast">
                                      <a class="user-avatar" href="" [ngClass]="i === 0 ? '' : 'ms-n3'" *ngIf="i<3">
                                        <span *ngIf="ul.image !== null">
                                          <img src="{{ ul.image }}" alt="u" class="thumb-xs rounded-circle">
                                        </span>
                                        <span class="members-name" *ngIf="ul.image == null">{{ ul.name[0] }}</span>
                                      </a>
                                      <a class="user-avatar" [routerLink]="'/dynamic/team-detail'" [queryParams]="{ teamId: team.id }" (click)="openTeamModal(team.id)">
                                        <span class="thumb-xs justify-content-center d-flex align-items-center bg-soft-info rounded-circle fw-semibold" *ngIf="isLast && i<3">+</span>
                                      </a>
                                    </ng-container>
                                   
                                        <a class="user-avatar" (click)="openTeamModal(team.id)" *ngIf="team.userList.length >=3 && team.userList.length >3">
                                          <span class="thumb-xs justify-content-center d-flex align-items-center bg-soft-info rounded-circle fw-semibold">+{{ team.userList.length - 3 }}</span>
                                        </a>
                                
                                  </div>
                                  
                                <div class="align-self-center">
                                    <button type="button" class="btn btn-xs btn-light btn-round" routerLink="/dynamic/team-detail" (click)="routeToTeamDetails(team.id)">View Details <i class="mdi mdi-arrow-right"></i></button>
                                </div> 
                            </div>                                     
                           <hr class="hr-dashed my-3">
                            <div class="media align-items-center">                                                
                                <img src="assets/images/small/project-2.jpg" alt="" class="rounded-circle thumb-sm">
                                <div class="media-body ms-3 align-self-center">
                                    <h6 class="m-0 font-15">Banking</h6>
                                    <div class="d-flex justify-content-between">
                                        <span>
                                            <a class="" href="#">
                                                <i class="mdi mdi-format-list-bulleted text-success"></i>
                                                <span class="text-muted">50/100</span>
                                            </a>
                                        </span>
                                        <span class="text-muted">55% Complete</span>
                                    </div>
                                    <div class="progress mt-0" style="height:3px;">
                                        <div class="progress-bar bg-warning" role="progressbar" style="width: 55%;" aria-valuenow="55" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>                                           
                                </div>                                                                           
                            </div>     
                        </div><!--end card-body-->
                    </div><!--end card-->
                </div><!--end col-->
        </div><!-- container -->

        <!--Start Rightbar-->
        <!--Start Rightbar/offcanvas-->
        <div class="offcanvas offcanvas-end" tabindex="-1" id="Appearance" aria-labelledby="AppearanceLabel">
            <div class="offcanvas-header border-bottom">
              <h5 class="m-0 font-14" id="AppearanceLabel">Appearance</h5>
              <button type="button" class="btn-close text-reset p-0 m-0 align-self-center" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">  
                <h6>Account Settings</h6>
                <div class="p-2 text-start mt-3">
                    <div class="form-check form-switch mb-2">
                        <input class="form-check-input" type="checkbox" id="settings-switch1">
                        <label class="form-check-label" for="settings-switch1">Auto updates</label>
                    </div><!--end form-switch-->
                    <div class="form-check form-switch mb-2">
                        <input class="form-check-input" type="checkbox" id="settings-switch2" checked>
                        <label class="form-check-label" for="settings-switch2">Location Permission</label>
                    </div><!--end form-switch-->
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="settings-switch3">
                        <label class="form-check-label" for="settings-switch3">Show offline Contacts</label>
                    </div><!--end form-switch-->
                </div><!--end /div-->
                <h6>General Settings</h6>
                <div class="p-2 text-start mt-3">
                    <div class="form-check form-switch mb-2">
                        <input class="form-check-input" type="checkbox" id="settings-switch4">
                        <label class="form-check-label" for="settings-switch4">Show me Online</label>
                    </div><!--end form-switch-->
                    <div class="form-check form-switch mb-2">
                        <input class="form-check-input" type="checkbox" id="settings-switch5" checked>
                        <label class="form-check-label" for="settings-switch5">Status visible to all</label>
                    </div><!--end form-switch-->
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="settings-switch6">
                        <label class="form-check-label" for="settings-switch6">Notifications Popup</label>
                    </div><!--end form-switch-->
                </div><!--end /div-->               
            </div><!--end offcanvas-body-->
        </div>
        <!--end Rightbar/offcanvas-->
         <!--end Rightbar-->
         
      
    </div>
    <!-- end page content -->
</div>



<div class="modal fade" id="createteam" tabindex="-1" aria-labelledby="exampleModalFullscreenLabel" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen" role="document">
        <div class="modal-content">
          


            <div class="modal-header" style="background-color: #fff;">
                <h5 class="modal-title m-0" style="color:#111; font-size: 18px;" id="exampleModalDefaultLabel">Create Team</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div><!--end modal-header-->
            <div class="modal-body p-0">
                <div class="containerhh">
                   <div class="row">
                       <div class="col-md-6">
                        <div class="createteam-form pt-4">


                            <div class="create-new mt-3">
                                <h4>Create a new team</h4>
                            </div>

                            <div class="mt-3">

                            <div class="form-group">
                                <label for="username" class="mb-2" style="font-size: 13px;">Team Name</label>
                                <div class="input-group mb-3">                                                                                         
                                    <input type="text" class="form-control" name="teamname" id="teamname" placeholder="For example: &quot;Marketing&quot; or &quot;Design&quot;" [(ngModel)]="teamName" >
                                </div>                                    
                            </div>
        
                            <div class="form-group">
                                <label for="username" class="mb-2" style="font-size: 13px;"> Members </label>
                                <div class="input-group mb-3">                                                                                         
                                    <input type="text" class="form-control" name="members" id="members" placeholder="Add team members by name or email…" [(ngModel)]="searchQuery" (input)="searchUsers()">
                                    <div class="user-dropdown" *ngIf="userList.length > 0">
                                        <div id="user-item" class="user-item" *ngFor="let user of userList" (click)="toggleUserSelection(user)">
                                            <div *ngIf="user.image===null">
                                               
                                            <span id="user-list-details">
                                                <span class="members-name"  id="user-first-name-logo">{{user.name[0]}}</span>&nbsp;&nbsp;
                                                <span class="user-name-email"><b>{{ user.name }}</b> &nbsp; {{ user.email }}</span>
                                            </span>

                                            </div>

                                            <div *ngIf="user.image!==null">
                                                <span id="user-list-details">
                                                    <img [src]="user.image" alt="User Logo"> &nbsp;&nbsp; <b>{{ user.name }}</b> &nbsp; {{ user.email }}
                                                </span> 
                                            </div>
                                          
                                        </div>
                                      </div>
                                      <div class="selected-users">
                                        <div class="selected-user" *ngFor="let selectedUser of selectedUsers">
                                           {{ selectedUser.name }} - {{ selectedUser.email }}
                                          <span class="remove-icon" (click)="removeSelectedUser(selectedUser)">✖</span>
                                        </div>
                                      </div>
                                </div>                                    
                            </div>
                            <div class="form-group">
                                <label for="username" class="mb-2" style="font-size: 13px;"> Team status </label>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        Endorsed <span class="endorsed"><a href="">Upgrade to Hajari Enterprise</a></span><br>
                                        <p class="endorsed-para">Endorsed teams are recommended by admins in your organization.</p>
                                    </label>
                                </div>                                   
                            </div>

                            <div class="form-group">
                                <label for="username" class="mb-2" style="font-size: 13px;"> Team privacy </label>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        <i class="bi bi-envelope"></i> Membership by request<br>
                                        <p class="endorsed-para">A member has to request to join this team</p>
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        <i class="bi bi-envelope"></i>  Private<br>
                                        <p class="endorsed-para">A member must be invited to join this team</p>
                                    </label>
                                </div>
                                                                 
                            </div>
                            <div class="" >
                                <button style="width:100%;" type="button" (click)="registerTeamSubmitButton()" class="btn btn-de-primary">Create new team</button>
                            </div>
                            
                        </div>

                        </div>
                       </div>
                       <div class="col-md-6 pt-4">
                        <div class="createteam-box" style="box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);">
                             <div class="team-user-main">
                                <div class="team-user">
                                    <i class="bi bi-people-fill"></i>
                                </div>
                             </div>
                             <div class="members-box p-3">
                                <div class="border-bottom">
                                   <h5>Members</h5>
                                </div>

                                <div class="row mt-3">
                                    <div class="col-md-6">
                                        <div class="members-list d-flex align-items-center" style="gap:10px;">
                                            <span class="members-name ">YK</span>
                                            <p class="mb-0">Yogesh Kumar</p>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="members-list d-flex align-items-center" style="gap:10px;">
                                            <span class="members-name dummy-nmae"></span>
                                            <p class="mb-0 dummy-member-nmae"></p>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="members-list d-flex align-items-center" style="gap:10px;">
                                            <span class="members-name dummy-nmae"></span>
                                            <p class="mb-0 dummy-member-nmae"></p>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="members-list d-flex align-items-center" style="gap:10px;">
                                            <span class="members-name dummy-nmae"></span>
                                            <p class="mb-0 dummy-member-nmae"></p>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="members-list d-flex align-items-center" style="gap:10px;">
                                            <span class="members-name dummy-nmae"></span>
                                            <p class="mb-0 dummy-member-nmae"></p>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="members-list d-flex align-items-center" style="gap:10px;">
                                            <span class="members-name dummy-nmae"></span>
                                            <p class="mb-0 dummy-member-nmae"></p>
                                        </div>
                                    </div>
                                    
                                </div>

                             </div>

                             <div class="members-box p-3">
                                <div class="border-bottom">
                                   <h5>Projects</h5>
                                </div>

                                <div class="row mt-3">
                                    <div class="col-md-8">
                                        <div class="members-list d-flex align-items-center" style="gap:10px;">
                                            <div class="">
                                                <span class="new-project"></span>
                                            </div>
                                            <div class="" style="width:60%;">
                                                <p class="mb-0 dummy-member-new"></p>
                                                <p class="mb-0 dummy-member-new dummy-member-newe"></p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-8">
                                        <div class="members-list d-flex align-items-center" style="gap:10px;">
                                            <div class="">
                                            <span class="new-project"></span>
                                            </div>
                                            <div class="" style="width:60%;">
                                               <p class="mb-0 dummy-member-new"></p>
                                               <p class="mb-0 dummy-member-new dummy-member-newe "></p>
                                            </div>
                                        </div>
                                    </div>
                                  
                                    
                                </div>

                             </div>
                        </div>
                       </div>
                   </div>
                </div>
                                                                    
            </div>

            <!-- <div class="modal-footer">
                <button type="button" class="btn btn-primary btn-sm">Submit</button>
            </div> -->
            <!--end modal-footer-->
        </div><!--end modal-content-->
    </div><!--end modal-dialog-->
</div><!--end modal-->


