<div class="page-wrapper">

    <!-- Page Content-->
    <div class="page-content-tab">

        <div class="container-fluid">
            <!-- Page-Title -->
            <!-- Page-Title -->
            <!-- <div class="row">
                <div class="col-sm-12">
                    <div class="page-title-box">
                        <div class="float-end">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a routerLink="/dynamic/dashboard">Dashboard</a>
                                </li>
                                <li class="breadcrumb-items active">/</li>
                                <li class="breadcrumb-items active">Team</li>
                            </ol>
                        </div>
                        <h4 class="page-title">Team</h4>
                    </div>
                </div>
            </div> -->
            
            <!-- end page title end breadcrumb -->
            <div class="row"  *ngIf="teams.length>0">
                <div class="col-lg-6">
                   
                </div>

                <div class="col-lg-6 text-end">
                    <button type="button" class="btn btn-primary mb-3" data-bs-toggle="modal" data-bs-target="#createteam">Create Team</button>                      
                </div>
            </div>


                <!-- <div class="row">
                    <div class="col-md-12">
                        <div class="errorboxmain text-center mb-3">
                            <div class="errorboxinner">
                                <div class="errorboxplaceholder mb-2">
                                    <img  width="70px" height="70px" src="assets/images/addnewproduct.svg" class="emptyImage change-image" alt="No Data Found">
                                </div>
                                <h4>What is Lorem Ipsum?</h4>
                                <p>Lorem Ipsum is simply dummy text of the printing</p>
                                <button type="button" class="btn create-team">Add new hire</button>
                            </div>

                        </div>
                    </div>
                    
                </div> -->

                <div class="row app-emptiy-notifaction" *ngIf="teams.length==0">
                    <div class="col-md-6 d-flex align-items-center justify-content-center" style="flex-direction: column;">
                         <div class="">
                            <h4>Add a new hire to Hajiri</h4>
                            <p>New team members appear here when they<br> finish their onboarding.</p>

                            <div class="mb-3">
                                <a href="" class="addinh-hiar">Learn about adding hire <i class="bi bi-arrow-up-right" style="padding-left: 8px; font-size: 12px; color: #557ef8; font-weight: bold;"></i></a>
                            </div>

                            

                            <button type="button" class="btn create-team" data-bs-toggle="modal" data-bs-target="#createteam">Create Team</button>
                         </div>
                    </div>
                    <div class="col-md-6">

                        <div class="">
                            <img src="assets/images/empty-2.png" style="width:100%;">
                        </div>
                    </div>
                </div>

            <div class="row" *ngIf="teams.length>0">
                <div class="col-lg-4" *ngFor="let team of teams">
                    <div class="card team-card" style="    height: 285px;" >
                        <div class="card-body">
                            <div class="float-end">                                        
                                <div class="dropdown d-inline-block">
                                    <a class="dropdown-toggle" id="dLabel1" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
                                        <i class="las la-ellipsis-v font-24 text-muted"></i>
                                    </a>
                                    <div class="dropdown-menu dropdown-menu-end" aria-labelledby="dLabel1">
                                        <a class="dropdown-item" href="#">Open Project</a>
                                        <a class="dropdown-item" href="#">Edit Card</a> 
                                        <a class="dropdown-item" (click)=" deleteTeamByTeamId(team.id)">Delete</a>
                                    </div>
                                </div>
                            </div>                                                 
                            <div class="media align-items-center" >                                                
                                <div class="img-group">
                                    <a class="user-avatar me-1" href="#" >
                                        <!-- <img src="assets/images/user.png" alt="" class="rounded-circle thumb-md"> -->


                                        <span class="members-icon">{{ capitalizeFirstLetter(team.name[0]) }}</span>

                                       
                                        <span class="avatar-badge online"></span>

                                    </a>
                                    <!-- <div *ngIf="team.manager.image!==null">
                                        <a class="user-avatar me-1" href="#" >
                                            <img src={{team.manager.image}} alt="user" class="rounded-circle thumb-md">
                                            <span class="avatar-badge online"></span>
                                        </a>
                                    </div> -->
                                    <!-- <div>
                                        <a class="user-avatar me-1" href="#" >
                                            <img src="assets/images/user.png" alt="" class="rounded-circle thumb-md">
                                            
                                            <span class="avatar-badge online"></span>

                                        </a>
                                    </div> -->
                                   
                                </div>                                                                           
                                <div class="media-body ms-2 align-self-center">
                                    <h5 class="m-0 team-name">{{ capitalizeFirstLetter(team.name) }}</h5>
                                    <!-- <p class="text-muted font-12 mb-0">Team Name</p>  -->
                                    <p class="text-muted mb-0 fw-semibold team-description" style="font-size: 12px; padding-top: 2px; font-weight: 400 !important;">{{team.description}}</p>
                                           
                                </div>                                                                           
                            </div> 
                           



                        <div class="d-flex align-items-center justify-content-between">
                            <div class="" *ngIf="team.manager !== null">
                                <!-- <div *ngIf="team.manager === null">
                                    <p class="m-0 mt-3 font-12 mb-0" style="color: red;">Manager isn't assigned yet!</p>
                                </div> -->
                            <div>
                                <h4 class="m-0 mt-3 font-13 mb-0 fw-bold">{{capitalizeFirstLetter(team.manager.name)}}</h4>
                            </div>
                            
                            <p class="text-muted font-12 mb-0">Team Manager</p> 
                           </div>
                        </div>

                        <div class="d-flex align-items-center justify-content-between" style="gap: 10px; margin-top: 15px;" data-bs-toggle="modal" data-bs-target="#addteam" *ngIf="localStorageRoleAdminFlag==true && team.manager==null">
                            <div class="">
                                <button class="btn add-team" type="button" (click)="toGetTeamId(team.id)">Assign Manager</button>
                            </div>
                        </div>


                        




                            <div class="mt-3 d-flex justify-content-between">
                                <div class="img-group d-flex">
                                    <ng-container *ngFor="let ul of team.userList; let i = index; last as isLast">
                                      <a class="user-avatar" href="" [ngClass]="i === 0 ? '' : 'ms-n3'" *ngIf="i<3">
                                        <span *ngIf="ul.image !== null">
                                          <img src="{{ ul.image }}" alt="u" class="thumb-xs rounded-circle">
                                        </span>
                                        <span class="members-name" *ngIf="ul.image == null">{{ ul.name[0] }}</span>
                                      </a>
                                      <!-- <a class="user-avatar" [routerLink]="'/dynamic/team-detail'" [queryParams]="{ teamId: team.id }" (click)="openTeamModal(team.id)">
                                        <span class="thumb-xs justify-content-center d-flex align-items-center bg-soft-info rounded-circle fw-semibold" *ngIf="isLast && i<3">+</span>
                                      </a> -->
                                    </ng-container>
                                    <!-- (click)="openTeamModal(team.id)" -->
                                        <a class="user-avatar" *ngIf="team.userList.length >=3 && team.userList.length >3">
                                          <span class="thumb-xs justify-content-center d-flex align-items-center bg-soft-info rounded-circle fw-semibold">+{{ team.userList.length - 3 }}</span>
                                        </a>
                                
                                  </div>
                                  
                                <div class="align-self-center">
                                    <button type="button" class="btn btn-xs btn-light btn-round" (click)="routeToTeamDetails(team.id)">View Details <i class="mdi mdi-arrow-right"></i></button>
                                </div> 
                            </div>                                     
                           <hr class="hr-dashed my-3">
                            <div class="media align-items-center">                                                
                                <img src="assets/images/small/project-2.jpg" alt="" class="rounded-circle thumb-sm">
                                <div class="media-body ms-3 align-self-center">
                                    <h6 class="m-0 font-15">Banking</h6>
                                    <div class="d-flex justify-content-between">
                                        <span>
                                            <a class="" href="#">
                                                <i class="mdi mdi-format-list-bulleted text-success"></i>
                                                <span class="text-muted">50/100</span>
                                            </a>
                                        </span>
                                        <span class="text-muted">55% Complete</span>
                                    </div>
                                    <div class="progress mt-0" style="height:3px;">
                                        <div class="progress-bar bg-warning" role="progressbar" style="width: 55%;" aria-valuenow="55" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>                                           
                                </div>                                                                           
                            </div>     
                        </div><!--end card-body-->
                    </div><!--end card-->
                </div><!--end col-->
        </div><!-- container -->

        <!--Start Rightbar-->
        <!--Start Rightbar/offcanvas-->
        <div class="offcanvas offcanvas-end" tabindex="-1" id="Appearance" aria-labelledby="AppearanceLabel">
            <div class="offcanvas-header border-bottom">
              <h5 class="m-0 font-14" id="AppearanceLabel">Appearance</h5>
              <button type="button" class="btn-close text-reset p-0 m-0 align-self-center" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">  
                <h6>Account Settings</h6>
                <div class="p-2 text-start mt-3">
                    <div class="form-check form-switch mb-2">
                        <input class="form-check-input" type="checkbox" id="settings-switch1">
                        <label class="form-check-label" for="settings-switch1">Auto updates</label>
                    </div><!--end form-switch-->
                    <div class="form-check form-switch mb-2">
                        <input class="form-check-input" type="checkbox" id="settings-switch2" checked>
                        <label class="form-check-label" for="settings-switch2">Location Permission</label>
                    </div><!--end form-switch-->
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="settings-switch3">
                        <label class="form-check-label" for="settings-switch3">Show offline Contacts</label>
                    </div><!--end form-switch-->
                </div><!--end /div-->
                <h6>General Settings</h6>
                <div class="p-2 text-start mt-3">
                    <div class="form-check form-switch mb-2">
                        <input class="form-check-input" type="checkbox" id="settings-switch4">
                        <label class="form-check-label" for="settings-switch4">Show me Online</label>
                    </div><!--end form-switch-->
                    <div class="form-check form-switch mb-2">
                        <input class="form-check-input" type="checkbox" id="settings-switch5" checked>
                        <label class="form-check-label" for="settings-switch5">Status visible to all</label>
                    </div><!--end form-switch-->
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="settings-switch6">
                        <label class="form-check-label" for="settings-switch6">Notifications Popup</label>
                    </div><!--end form-switch-->
                </div><!--end /div-->               
            </div><!--end offcanvas-body-->
        </div>
        <!--end Rightbar/offcanvas-->
         <!--end Rightbar-->
         
      
    </div>
    <!-- end page content -->
</div>



<div class="modal fade" id="createteam" tabindex="-1" aria-labelledby="exampleModalFullscreenLabel" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen" role="document">
        <div class="modal-content">
          


            <div class="modal-header" style="background-color: #fff;">
                <h5 class="modal-title m-0" style="color:#111; font-size: 18px;" id="exampleModalDefaultLabel">Create Team</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div><!--end modal-header-->
            <div class="modal-body p-0">
                <div class="containerhh">
                   <div class="row">
                       <div class="col-md-6">
                        <div class="createteam-form pt-4">


                            <div class="create-new mt-3">
                                <h4>Create a new team</h4>
                            </div>

                            <div class="mt-3">

                            <div class="form-group">
                                <label for="username" class="mb-2" style="font-size: 13px;">Team Name</label>
                                <div class="input-group mb-3">                                                                                         
                                    <input type="text" class="form-control" name="teamname" id="teamname" placeholder="For example: &quot;Marketing&quot; or &quot;Design&quot;" [(ngModel)]="teamName" >
                                </div>                                    
                            </div>
                            <div class="form-group">
                                <label for="username" class="mb-2" style="font-size: 13px;">Team Description</label>
                                <div class="input-group mb-3">                                                                                         
                                    <input type="text" class="form-control" name="teamdesc" id="teamdesc" placeholder="For example: &quot;Marketing&quot; or &quot;Design&quot;" [(ngModel)]="teamDescription" >
                                </div>                                    
                            </div>
        
                            <div class="form-group">
                                <label for="username" class="mb-2" style="font-size: 13px;"> Members </label>
                                <div class="input-group mb-3">                                                                                         
                                    <input type="text" class="form-control" name="members" id="members" placeholder="Add team members by name or email…" [(ngModel)]="searchQuery" (input)="searchUsers()">
                                    <div class="user-dropdown new-membear-list" *ngIf="userList.length > 0">
                                        <div id="user-item" class="user-item" *ngFor="let user of userList" (click)="toggleUserSelection(user)">
                                            <div *ngIf="user.image===null">
                                               
                                            <span id="user-list-details">
                                                <span class="members-name"  id="user-first-name-logo">{{user.name[0]}}</span>&nbsp;&nbsp;
                                                <span class="user-name-email"><b>{{ user.name }}</b> &nbsp; {{ user.email }}</span>
                                            </span>

                                            </div>

                                            <div *ngIf="user.image!==null">
                                                <span id="user-list-details">
                                                    <img [src]="user.image" alt="User Logo"> &nbsp;&nbsp; <b>{{ user.name }}</b> &nbsp; {{ user.email }}
                                                </span> 
                                            </div>
                                          
                                        </div>
                                      </div>
                                      <div class="selected-users">
                                        <div class="d-flex selected-userss align-items-center" *ngFor="let selectedUser of selectedUsers">
                                            <span class="members-namess">YK</span>
                                          <p class="mb-0"> {{ selectedUser.name }} </p> 
                                          <span class="remove-icon" style="line-height: 0px;" (click)="removeSelectedUser(selectedUser)"><i class="bi bi-x" style="color:#fff; font-size: 20px;"></i></span>
                                        </div>
                                      </div>
                                </div>                                    
                            </div>
                            <div class="form-group">
                                <label for="username" class="mb-2" style="font-size: 13px;"> Team status </label>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        Endorsed <span class="endorsed"><a href="">Upgrade to Hajari Enterprise</a></span><br>
                                        <p class="endorsed-para">Endorsed teams are recommended by admins in your organization.</p>
                                    </label>
                                </div>                                   
                            </div>

                            <div class="form-group">
                                <label for="username" class="mb-2" style="font-size: 13px;"> Team privacy </label>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        <i class="bi bi-envelope"></i> Membership by request<br>
                                        <p class="endorsed-para">A member has to request to join this team</p>
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                    <label class="form-check-label" for="flexCheckDefault">
                                        <i class="bi bi-lock"></i>  Private<br>
                                        <p class="endorsed-para">A member must be invited to join this team</p>
                                    </label>
                                </div>
                                                                 
                            </div>
                            <div class="" >
                                <button style="width:100%;" type="button" (click)="registerTeamSubmitButton()" class="btn btn-de-primary">Create new team</button>
                            </div>
                            
                        </div>

                        </div>
                       </div>
                       <div class="col-md-6 pt-4">
                        <div class="createteam-box" style="box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);">
                             <div class="team-user-main">
                                <div class="team-user">
                                    <i class="bi bi-people-fill"></i>
                                </div>
                             </div>
                             <div class="members-box p-3">
                                <div class="border-bottom">
                                   <h5>Members</h5>
                                </div>

                                <div class="row mt-3">
                                    <div class="col-md-6">
                                        <div class="members-list d-flex align-items-center" style="gap:10px;">
                                            <span class="members-name ">YK</span>
                                            <p class="mb-0">Yogesh Kumar</p>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="members-list d-flex align-items-center" style="gap:10px;">
                                            <span class="members-name dummy-nmae"></span>
                                            <p class="mb-0 dummy-member-nmae"></p>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="members-list d-flex align-items-center" style="gap:10px;">
                                            <span class="members-name dummy-nmae"></span>
                                            <p class="mb-0 dummy-member-nmae"></p>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="members-list d-flex align-items-center" style="gap:10px;">
                                            <span class="members-name dummy-nmae"></span>
                                            <p class="mb-0 dummy-member-nmae"></p>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="members-list d-flex align-items-center" style="gap:10px;">
                                            <span class="members-name dummy-nmae"></span>
                                            <p class="mb-0 dummy-member-nmae"></p>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="members-list d-flex align-items-center" style="gap:10px;">
                                            <span class="members-name dummy-nmae"></span>
                                            <p class="mb-0 dummy-member-nmae"></p>
                                        </div>
                                    </div>
                                    
                                </div>

                             </div>

                             <div class="members-box p-3">
                                <div class="border-bottom">
                                   <h5>Projects</h5>
                                </div>

                                <div class="row mt-3">
                                    <div class="col-md-8">
                                        <div class="members-list d-flex align-items-center" style="gap:10px;">
                                            <div class="">
                                                <span class="new-project"></span>
                                            </div>
                                            <div class="" style="width:60%;">
                                                <p class="mb-0 dummy-member-new"></p>
                                                <p class="mb-0 dummy-member-new dummy-member-newe"></p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-8">
                                        <div class="members-list d-flex align-items-center" style="gap:10px;">
                                            <div class="">
                                            <span class="new-project"></span>
                                            </div>
                                            <div class="" style="width:60%;">
                                               <p class="mb-0 dummy-member-new"></p>
                                               <p class="mb-0 dummy-member-new dummy-member-newe "></p>
                                            </div>
                                        </div>
                                    </div>
                                  
                                    
                                </div>

                             </div>
                        </div>
                       </div>
                   </div>
                </div>
                                                                    
            </div>

            <!-- <div class="modal-footer">
                <button type="button" class="btn btn-primary btn-sm">Submit</button>
            </div> -->
            <!--end modal-footer-->
        </div><!--end modal-content-->
    </div><!--end modal-dialog-->
</div><!--end modal-->



<!--  ########################33  Modal ##################################33333 -->

<div class="modal fade" id="addteam" tabindex="-1" aria-labelledby="exampleModalFullscreenLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" style="max-width: 600px;" role="document">
        <div class="modal-content">
          


            <div class="modal-header" style="background-color: #fff;">
                <h5 class="modal-title m-0" style="color:#111; font-size: 18px;" id="exampleModalDefaultLabel">{{team.name}}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div><!--end modal-header-->
            <div class="modal-body p-0">

                <div class="card-body p-0">    
                    <!-- Nav tabs -->
                    <ul class="nav nav-tabs" role="tablist">
                        <!-- <li class="nav-item">
                            <a class="nav-link active" data-bs-toggle="tab" href="#general" role="tab" aria-selected="true">General</a>
                        </li> -->
                        <li class="nav-item">
                            <a class="nav-link active" data-bs-toggle="tab" href="#members-add" role="tab" aria-selected="false">Members</a>
                        </li>                                                
                        <!-- <li class="nav-item">
                            <a class="nav-link" data-bs-toggle="tab" href="#advanced" role="tab" aria-selected="false">Advanced</a>
                        </li> -->
                        
                    </ul>

                    <!-- Tab panes -->
                    <div class="tab-content">
                        <!-- <div class="tab-pane  p-3 active" id="general" role="tabpanel">
                         <p>General</p>
                            
                          
                        </div> -->
                        <div class="tab-pane p-3 active" id="members-add" role="tabpanel">
                            <div class="">

                               

                                <div class="">
                                    <div class="">
                                        <h5>Members</h5>
                                    </div>
                                    
                                    <div class="Members-list-box d-flex align-items-center justify-content-between"  *ngFor="let ul of team.userList let i = index" >
                                        <div class="d-flex align-items-center" style="gap:10px;">
                                            <div>
                                                <span  *ngIf="ul.image !==null">
                                                    <img src="{{ ul.image }}" alt="u" class="thumb-xs rounded-circle">
                                                   </span>
                                                <span class="members-name" *ngIf="ul.image==null">{{ul.name[0]}}</span>
                                               <!-- <span class="mamber-list-ui" *ngIf="ul.image==null">{{ul.name[0]}}</span> -->
                                            </div>
                                            <div>
                                                <h6 class="mb-0 mt-0">{{ capitalizeFirstLetter(ul.name) }}</h6>
                                                <p class="mb-0">{{ul.email}}</p>
                                             </div>
                                        </div>
                                        <div class="manegir-dropdown">

                                            <div class="dropdown d-inline-block" >
                                                <!-- <a class="dropdown-toggle" *ngIf="i==0" id="dLabel1" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
                                                    Team admin <i class="bi bi-chevron-down font-14 text-muted"></i>
                                                </a> -->
                                                <!-- *ngIf="i>0" -->
                                                <a class="dropdown-toggle"  id="dLabel1" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
                                                    {{ capitalizeFirstLetterAndSmallOtherLetters(ul.role) }} <i class="bi bi-chevron-down font-14 text-muted"></i>

                                                </a>
                                                <div class="dropdown-menu dropdown-menu-end manager-list" aria-labelledby="dLabel1">


                                                    <div class="manager-list">
                                                        <a class="dropdown-item" class="dropdown-item" *ngIf="ul.role=='MEMBER'" (click)="assignManagerRoleToMemberMethodCall(team.id,ul.id)">Make Manager </a>
                                                     </div>
                                                     <div class="manager-list">
                                                        <a class="dropdown-item" class="dropdown-item" *ngIf="ul.role=='MANAGER'" (click)="assignMemberRoleToManagerMethodCall(team.id,ul.id)">Remove Manager </a>
                                                     </div>

                                                     <div class="manager-list remove-team">
                                                        <a class="dropdown-item StaticMenuItemBase-button" (click)="removeUserFromTeam(team.id,ul.id)">Remove </a>
                                                     </div>
                                                    <!-- <a class="dropdown-item" *ngIf="ul.role=='MEMBER'" (click)="assignManagerRoleToMemberMethodCall(team.id,ul.id)">Make Manager </a>
                                                    <a class="dropdown-item" *ngIf="ul.role=='MANAGER'" (click)="assignMemberRoleToManagerMethodCall(team.id,ul.id)">Remove Manager</a>
                                                    <a class="dropdown-item" (click)="removeUserFromTeam(team.id,ul.id)">Delete</a> -->
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                        </div>                                                
                        <div class="tab-pane p-3" id="advanced" role="tabpanel">
                            <p class="text-muted mb-0">
                                Trust fund seitan letterpress, keytar raw denim keffiyeh etsy.
                            </p>
                        </div>
                       
                    </div>        
                </div><!--end card-body-->
              
                                                                    
            </div>

            <!-- <div class="modal-footer">
                <button type="button" class="btn btn-primary btn-sm">Submit</button>
            </div> -->
            <!--end modal-footer-->
        </div><!--end modal-content-->
    </div><!--end modal-dialog-->
</div><!--end modal-->
