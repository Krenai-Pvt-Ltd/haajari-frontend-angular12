<div class="page-wrapper">
    <div class="page-content-tab">
      <div class="container-fluid ">
        <div class="row">
           <div class="col-md-12 mt-3">
            <ul id="pills-tab" role="tablist" class="nav nav-pills ">
                <li class="nav-item">
                  <a id="pills-announcement-tab" data-bs-toggle="pill" href="#dashboard" role="tab" (click)="dashboard()"
                    aria-controls="pills-dashboard" aria-selected="false"
                    class="nav-link active">Dashboard</a>
                </li>
                <li class="nav-item d-flex align-items-center">
                  <a id="pills-notification-tab" data-bs-toggle="pill" href="#request" role="tab" (click)="requests()"
                     aria-controls="pills-request" aria-selected="false"
                    class="nav-link">Leave Request </a>
                    <!-- {{pendingLeaveCount}} -->
                    <!-- {{pendingLeaveCount}} -- {{isPendingChange}} -- {{isFirstLoad}} -- {{this.filters.status}} -->
                    <span class="request-count d-flex align-items-center justify-content-center" *ngIf="pendingLeaveCount > 0">{{ pendingLeaveCount }}</span>
                </li>
              </ul>
              <div id="pills-tabContent" class="tab-content">
                <div class="tab-pane active show" id="dashboard" role="tabpanel" aria-labelledby="employee-tab">
                    <div class="row mt-3">
                        <div class="col-md-4 mb-3">
                            <div class="dashboard-report">
                                <div class="date-range d-flex align-items-center justify-content-between p-3 pt-2 pb-2">
                                    <h5 class="mb-0 font-14 fw-normal">Date Range</h5>
                                    <div class="d-flex align-items-center attendance-date">
                                        <span class="d-flex align-items-center justify-content-center pointer calendar-back-btn" [class.disabled]="isPreviousDisabled()" (click)="goToPreviousMonth()">
                                           <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 21 21" fill="none">
                                              <mask id="mask0_4719_1625" maskUnits="userSpaceOnUse" x="0" y="0" width="21" height="21" style="mask-type: alpha;">
                                                 <rect x="0.5" y="0.5" width="20" height="20" fill="#D9D9D9"></rect>
                                              </mask>
                                              <g mask="url(#mask0_4719_1625)">
                                                 <path d="M8.83203 15.5L3.83203 10.5L8.83203 5.5L9.9987 6.70833L7.04036 9.66667H17.1654V11.3333H7.04036L9.9987 14.2917L8.83203 15.5Z" fill="#060606"></path>
                                              </g>
                                           </svg>
                                        </span>
                                        <span class="calendar-separator"></span>
                                        <div class="dropdown ">
                                            <nz-date-picker nzMode="month" [nzSize]="size" nzFormat="MMM, yyyy"
                                                [(ngModel)]="selectedDate"  (ngModelChange)="onMonthChange($event)"
                                                [nzDisabledDate]="disableMonths"></nz-date-picker>

                                            <!-- <nz-date-picker nzMode="month" nzFormat="MMM, yyyy"></nz-date-picker> -->
                                        </div>

                                        <span class="calendar-separator"></span>
                                        <span class="d-flex align-items-center justify-content-center pointer calendar-back-btn" [class.disabled]="isNextDisabled()" (click)="goToNextMonth()">
                                           <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 21 21" fill="none">
                                              <mask id="mask0_4719_1639" maskUnits="userSpaceOnUse" x="0" y="0" width="21" height="21" style="mask-type: alpha;">
                                                 <rect width="20" height="20" transform="matrix(-1 0 0 1 20.5 0.5)" fill="#D9D9D9"></rect>
                                              </mask>
                                              <g mask="url(#mask0_4719_1639)">
                                                 <path d="M12.168 15.5L17.168 10.5L12.168 5.5L11.0013 6.70833L13.9596 9.66667H3.83464V11.3333H13.9596L11.0013 14.2917L12.168 15.5Z" fill="#060606"></path>
                                              </g>
                                           </svg>
                                        </span>
                                     </div>
                                </div>
                                <div class="mt-3 report-chart" style="height: 431px;">
                                    <div class="report-header p-3 d-flex align-items-center justify-content-between">
                                        <h5 class="mb-0 font-14 fw-semibold">Report</h5>
                                        <div>
                                            <nz-select class="week-filter" [(ngModel)]="selectedTab" style="width: 120px;" (ngModelChange)="onTabChange($event)">
                                                <nz-option *ngFor="let week of weekLabels" [nzValue]="week" [nzLabel]="week"></nz-option>
                                              </nz-select>
                                        </div>
                                    </div>
                                    <div class="p-3">
                                        <h5 class="font-18 mb-4 fw-bold">{{ getTotalCount() }}
                                          <span class="font-12 fw-semibold" style="color: #444;">leaves utilised.</span></h5>
                                        <div *ngIf="isChartInitialized; else loading" class="p-3">
                                            <apx-chart
                                              [series]="series"
                                              [chart]="chart"
                                              [xaxis]="xaxis"
                                              [yaxis]="yaxis"
                                              [dataLabels]="dataLabels"
                                              [tooltip]="tooltip"
                                              [grid]="grid"
                                              [fill]="fill"
                                              [stroke]="{width:1.5}"
                                              [colors]="colors"
                                            ></apx-chart>
                                          </div>

                                          <ng-template #loading>
                                            <p class="text-center">Loading chart...</p>
                                          </ng-template>

                                        <div class="mt-3 mb-2 d-flex align-items-center gap-5 justify-content-between">
                                            <div class="approved position-relative">
                                                <h5 class="font-12 mb-2">Approved</h5>
                                                <h5 class="font-18 mb-1 fw-semibold">{{leaveReportResponse?.reportGraphUserLeave?.totalApproved}} <span class="font-13 fw-semibold" style="color: #444;">requests</span></h5>
                                                <!-- <p class="mb-0 font-13 fw-light">Since least week</p> -->
                                            </div>
                                            <div class="pending position-relative">
                                                <h5 class="font-12 mb-2">Pending </h5>
                                                <h5 class="font-18 mb-1 fw-semibold">{{leaveReportResponse?.reportGraphUserLeave?.totalPending}} <span class="font-13 fw-semibold" style="color: #444;">requests</span></h5>
                                                <!-- <p class="mb-0 font-13 fw-light">Since least week</p> -->
                                            </div>
                                            <div class="rejected position-relative">
                                                <h5 class="font-12 mb-2">Rejected</h5>
                                                <h5 class="font-18 mb-1 fw-semibold">{{leaveReportResponse?.reportGraphUserLeave?.totalRejected}} <span class="font-13 fw-semibold" style="color: #444;">requests</span></h5>
                                                <!-- <p class="mb-0 font-13 fw-light">Since least week</p> -->
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="dashboard-report">
                                <div class="report-chart" style="    height: 505px;">
                                    <div class="report-header p-3 d-flex align-items-center justify-content-between">
                                        <h5 class="mb-0 font-13 fw-semibold">Months Pattern</h5>
                                        <!-- <button class="btn p-0 font-11 text-black fw-semibold">Summary</button> -->
                                    </div>
                                    <div class="p-3">
                                        <div class="d-flex align-items-center justify-content-between mt-2 border-bottom pb-4">

                                            <div *ngIf = "topTwoLeaveDaysFormatted">
                                            <h5 class="mb-1 font-14 fw-normal"> {{ topTwoLeaveDaysFormatted }}</h5>
                                              <p class="mb-0 font-12">On these Days Employees Were Absent the Most</p>
                                            </div>
                                            <div *ngIf = "!topTwoLeaveDaysFormatted">
                                                <h5 class="mb-1 font-14 fw-normal"> {{ topTwoLeaveDaysFormatted }}</h5>
                                              </div>
                                            <h5 class="font-11 mb-0 fw-semibold"> {{selectedDate | date:"MMMM, yyyy" }}</h5>
                                        </div>
                                        <!-- <img src="assets/images/months-report.png" class="w-100 text-center"> -->
                                        <apx-chart
                                        *ngIf="chartOptions?.series?.length"
                                        [series]="chartOptions.series!"
                                        [chart]="chartOptions.chart!"
                                        [plotOptions]="chartOptions.plotOptions!"
                                        [dataLabels]="chartOptions.dataLabels!"
                                        [xaxis]="chartOptions.xaxis!"
                                        [yaxis]="chartOptions.yaxis!"
                                        [tooltip]="chartOptions.tooltip!"
                                        [theme]="chartOptions.theme!"
                                        [stroke]="chartOptions.stroke!"
                                        [grid]="chartOptions.grid!"
                                        [legend]="chartOptions.legend!">
                                        </apx-chart>

                                  </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="dashboard-report">
                                <div class="report-chart" style="height: 505px;">
                                    <div class="report-header p-3 d-flex align-items-center justify-content-between">
                                        <h5 class="mb-0 font-14 fw-semibold">Categories</h5>

                                    </div>
                                    <div class="p-3">
                                        <div class="d-flex align-items-center justify-content-between mt-2 mb-2">
                                            <div>
                                                <h5 class="font-18 mb-1 fw-semibold">{{leaveCategoryDetails?.length || 0}} <span class="font-13 fw-semibold" style="color: #444;">Leave Types</span></h5>
                                            <p class="mb-0 font-11">Defined By Your organization</p>
                                            </div>

                                        </div>
                                        <div class="leave-count mt-3" *ngIf="leaveCategoryDetails?.length > 0 && !leaveCategoryDetailsLoader">
                                            <div class="d-flex align-items-center justify-content-between leave-count-list p-2 mb-3" *ngFor ="let deets of leaveCategoryDetails">
                                                <div class="d-flex align-items-center gap-2">
                                                    <span [ngClass]="getLeaveClass(deets.leaveCategoryName)"></span>
                                                   <p class="mb-0 text-black fw-semibold font-12">{{deets?.leaveCategoryName}} </p>
                                                </div>
                                                <div class="d-flex align-items-center gap-2">
                                                    <p class="mb-0 text-optional font-12"><span class="fw-semibold text-black">{{deets?.totalApprovedleaves}}</span> Approved Leaves</p>

                                                </div>

                                            </div>

                                        </div>
                                        <div class="empty-file" style="margin-top: 5%; margin-bottom: 5%" *ngIf="leaveCategoryDetails?.length == 0 && !leaveCategoryDetailsLoader">
                                            <nz-empty nzNotFoundImage="assets/images/no-data-found-img.svg"
                                              [nzNotFoundContent]="contentTpl">
                                              <ng-template #contentTpl>
                                                <p class="mb-1 empty-detail font-16">
                                                  No data for now
                                                </p>
                                              </ng-template>
                                            </nz-empty>
                                        </div>
                                        <div class="empty-file" style="margin-top: 7%; margin-bottom: 7%"
                                                *ngIf="leaveCategoryDetailsLoader">
                                                <div class="text-center load-more-btn">
                                                <div class="spinner-border spinner-border-custom-1 text-primary" role="status"></div>
                                                <div>
                                                    <small>Loading...</small>
                                                </div>
                                                </div>

                                            </div>


                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-8">
                                <div class="report-chart">
                                    <div class="report-header p-3 d-flex align-items-center justify-content-between">
                                        <h5 class="mb-0 font-14 fw-semibold">Team Overview</h5>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-3">
                                            <div class="overview-sidebar-menu">
                                                <div id="v-pills-tab" role="tablist" aria-orientation="vertical" class="nav flex-column nav-pills pt-3 pb-5">
                                                    <button id="v-pills-absent-tab" data-bs-toggle="pill" data-bs-target="#v-pills-absent-today"
                                                    type="button" role="tab" aria-controls="v-pills-home" aria-selected="true" class="nav-link active"
                                                    (click)="switchTab('absent')">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="13" viewBox="0 0 18 13" fill="none">
                                                        <path *ngIf="tab != 'absent'" d="M13.5 7.0448L12.6219 6.16668L14.359 4.41668L12.6219 2.68751L13.5 1.79647L15.25 3.54647L16.9792 1.79647L17.8702 2.68751L16.1281 4.41668L17.8702 6.16668L16.9792 7.0448L15.25 5.31563L13.5 7.0448ZM6.5 6.24355C5.69792 6.24355 5.01132 5.95799 4.44021 5.38688C3.86896 4.81563 3.58333 4.12897 3.58333 3.32688C3.58333 2.5248 3.86896 1.8382 4.44021 1.26709C5.01132 0.695842 5.69792 0.410217 6.5 0.410217C7.30208 0.410217 7.98868 0.695842 8.55979 1.26709C9.13104 1.8382 9.41667 2.5248 9.41667 3.32688C9.41667 4.12897 9.13104 4.81563 8.55979 5.38688C7.98868 5.95799 7.30208 6.24355 6.5 6.24355ZM0.25 12.5898V10.7371C0.25 10.329 0.360833 9.95112 0.5825 9.60334C0.804167 9.25556 1.10042 8.9882 1.47125 8.80126C2.29486 8.39751 3.12576 8.09466 3.96396 7.89272C4.80215 7.69077 5.6475 7.5898 6.5 7.5898C7.3525 7.5898 8.19785 7.69077 9.03604 7.89272C9.87424 8.09466 10.7051 8.39751 11.5287 8.80126C11.8996 8.9882 12.1958 9.25556 12.4175 9.60334C12.6392 9.95112 12.75 10.329 12.75 10.7371V12.5898H0.25ZM1.5 11.3398H11.5V10.7371C11.5 10.5683 11.4511 10.4121 11.3533 10.2683C11.2556 10.1247 11.1228 10.0075 10.9552 9.91668C10.2372 9.56306 9.50507 9.29515 8.75896 9.11293C8.01271 8.93084 7.25972 8.8398 6.5 8.8398C5.74028 8.8398 4.98729 8.93084 4.24104 9.11293C3.49493 9.29515 2.76285 9.56306 2.04479 9.91668C1.87715 10.0075 1.74444 10.1247 1.64667 10.2683C1.54889 10.4121 1.5 10.5683 1.5 10.7371V11.3398ZM6.5 4.99355C6.95833 4.99355 7.35069 4.83036 7.67708 4.50397C8.00347 4.17758 8.16667 3.78522 8.16667 3.32688C8.16667 2.86855 8.00347 2.47619 7.67708 2.1498C7.35069 1.82341 6.95833 1.66022 6.5 1.66022C6.04167 1.66022 5.64931 1.82341 5.32292 2.1498C4.99653 2.47619 4.83333 2.86855 4.83333 3.32688C4.83333 3.78522 4.99653 4.17758 5.32292 4.50397C5.64931 4.83036 6.04167 4.99355 6.5 4.99355Z" fill="#1C1B1F"/>
                                                        <path *ngIf="tab == 'absent'" d="M13.5 7.0448L12.6219 6.16668L14.359 4.41668L12.6219 2.68751L13.5 1.79647L15.25 3.54647L16.9792 1.79647L17.8702 2.68751L16.1281 4.41668L17.8702 6.16668L16.9792 7.0448L15.25 5.31563L13.5 7.0448ZM6.5 6.24355C5.69792 6.24355 5.01132 5.95799 4.44021 5.38688C3.86896 4.81563 3.58333 4.12897 3.58333 3.32688C3.58333 2.5248 3.86896 1.8382 4.44021 1.26709C5.01132 0.695842 5.69792 0.410217 6.5 0.410217C7.30208 0.410217 7.98868 0.695842 8.55979 1.26709C9.13104 1.8382 9.41667 2.5248 9.41667 3.32688C9.41667 4.12897 9.13104 4.81563 8.55979 5.38688C7.98868 5.95799 7.30208 6.24355 6.5 6.24355ZM0.25 12.5898V10.7371C0.25 10.329 0.360833 9.95112 0.5825 9.60334C0.804167 9.25556 1.10042 8.9882 1.47125 8.80126C2.29486 8.39751 3.12576 8.09466 3.96396 7.89272C4.80215 7.69077 5.6475 7.5898 6.5 7.5898C7.3525 7.5898 8.19785 7.69077 9.03604 7.89272C9.87424 8.09466 10.7051 8.39751 11.5287 8.80126C11.8996 8.9882 12.1958 9.25556 12.4175 9.60334C12.6392 9.95112 12.75 10.329 12.75 10.7371V12.5898H0.25ZM1.5 11.3398H11.5V10.7371C11.5 10.5683 11.4511 10.4121 11.3533 10.2683C11.2556 10.1247 11.1228 10.0075 10.9552 9.91668C10.2372 9.56306 9.50507 9.29515 8.75896 9.11293C8.01271 8.93084 7.25972 8.8398 6.5 8.8398C5.74028 8.8398 4.98729 8.93084 4.24104 9.11293C3.49493 9.29515 2.76285 9.56306 2.04479 9.91668C1.87715 10.0075 1.74444 10.1247 1.64667 10.2683C1.54889 10.4121 1.5 10.5683 1.5 10.7371V11.3398ZM6.5 4.99355C6.95833 4.99355 7.35069 4.83036 7.67708 4.50397C8.00347 4.17758 8.16667 3.78522 8.16667 3.32688C8.16667 2.86855 8.00347 2.47619 7.67708 2.1498C7.35069 1.82341 6.95833 1.66022 6.5 1.66022C6.04167 1.66022 5.64931 1.82341 5.32292 2.1498C4.99653 2.47619 4.83333 2.86855 4.83333 3.32688C4.83333 3.78522 4.99653 4.17758 5.32292 4.50397C5.64931 4.83036 6.04167 4.99355 6.5 4.99355Z" fill="#6666F2"/>
                                                    </svg>
                                                    Absent </button>
                                                    <button id="leave-tab" data-bs-toggle="pill" data-bs-target="#v-pills-on-leave"
                                                    type="button" role="tab" aria-controls="v-pills-profile" aria-selected="false" class="nav-link"
                                                    (click)="switchTab('leave')">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="19" height="13" viewBox="0 0 19 13" fill="none">
                                                        <path *ngIf="tab != 'leave'" d="M13.625 6.20355L10.9631 3.54168L11.8542 2.67147L13.625 4.4423L17.1667 0.900634L18.0448 1.79168L13.625 6.20355ZM6.5 6.24355C5.69792 6.24355 5.01132 5.95799 4.44021 5.38688C3.86896 4.81563 3.58333 4.12897 3.58333 3.32688C3.58333 2.5248 3.86896 1.8382 4.44021 1.26709C5.01132 0.695842 5.69792 0.410217 6.5 0.410217C7.30208 0.410217 7.98868 0.695842 8.55979 1.26709C9.13104 1.8382 9.41667 2.5248 9.41667 3.32688C9.41667 4.12897 9.13104 4.81563 8.55979 5.38688C7.98868 5.95799 7.30208 6.24355 6.5 6.24355ZM0.25 12.5898V10.7371C0.25 10.329 0.360833 9.95112 0.5825 9.60334C0.804167 9.25556 1.10042 8.9882 1.47125 8.80126C2.29486 8.39751 3.12576 8.09466 3.96396 7.89272C4.80215 7.69077 5.6475 7.5898 6.5 7.5898C7.3525 7.5898 8.19785 7.69077 9.03604 7.89272C9.87424 8.09466 10.7051 8.39751 11.5288 8.80126C11.8996 8.9882 12.1958 9.25556 12.4175 9.60334C12.6392 9.95112 12.75 10.329 12.75 10.7371V12.5898H0.25ZM1.5 11.3398H11.5V10.7371C11.5 10.5683 11.4511 10.4121 11.3533 10.2683C11.2556 10.1247 11.1228 10.0075 10.9552 9.91668C10.2372 9.56306 9.50507 9.29515 8.75896 9.11293C8.01271 8.93084 7.25972 8.8398 6.5 8.8398C5.74028 8.8398 4.98729 8.93084 4.24104 9.11293C3.49493 9.29515 2.76285 9.56306 2.04479 9.91668C1.87715 10.0075 1.74444 10.1247 1.64667 10.2683C1.54889 10.4121 1.5 10.5683 1.5 10.7371V11.3398ZM6.5 4.99355C6.95833 4.99355 7.3507 4.83036 7.67708 4.50397C8.00347 4.17758 8.16667 3.78522 8.16667 3.32688C8.16667 2.86855 8.00347 2.47619 7.67708 2.1498C7.3507 1.82341 6.95833 1.66022 6.5 1.66022C6.04167 1.66022 5.64931 1.82341 5.32292 2.1498C4.99653 2.47619 4.83333 2.86855 4.83333 3.32688C4.83333 3.78522 4.99653 4.17758 5.32292 4.50397C5.64931 4.83036 6.04167 4.99355 6.5 4.99355Z" fill="#1C1B1F"/>
                                                        <path *ngIf="tab == 'leave'" d="M13.625 6.20355L10.9631 3.54168L11.8542 2.67147L13.625 4.4423L17.1667 0.900634L18.0448 1.79168L13.625 6.20355ZM6.5 6.24355C5.69792 6.24355 5.01132 5.95799 4.44021 5.38688C3.86896 4.81563 3.58333 4.12897 3.58333 3.32688C3.58333 2.5248 3.86896 1.8382 4.44021 1.26709C5.01132 0.695842 5.69792 0.410217 6.5 0.410217C7.30208 0.410217 7.98868 0.695842 8.55979 1.26709C9.13104 1.8382 9.41667 2.5248 9.41667 3.32688C9.41667 4.12897 9.13104 4.81563 8.55979 5.38688C7.98868 5.95799 7.30208 6.24355 6.5 6.24355ZM0.25 12.5898V10.7371C0.25 10.329 0.360833 9.95112 0.5825 9.60334C0.804167 9.25556 1.10042 8.9882 1.47125 8.80126C2.29486 8.39751 3.12576 8.09466 3.96396 7.89272C4.80215 7.69077 5.6475 7.5898 6.5 7.5898C7.3525 7.5898 8.19785 7.69077 9.03604 7.89272C9.87424 8.09466 10.7051 8.39751 11.5288 8.80126C11.8996 8.9882 12.1958 9.25556 12.4175 9.60334C12.6392 9.95112 12.75 10.329 12.75 10.7371V12.5898H0.25ZM1.5 11.3398H11.5V10.7371C11.5 10.5683 11.4511 10.4121 11.3533 10.2683C11.2556 10.1247 11.1228 10.0075 10.9552 9.91668C10.2372 9.56306 9.50507 9.29515 8.75896 9.11293C8.01271 8.93084 7.25972 8.8398 6.5 8.8398C5.74028 8.8398 4.98729 8.93084 4.24104 9.11293C3.49493 9.29515 2.76285 9.56306 2.04479 9.91668C1.87715 10.0075 1.74444 10.1247 1.64667 10.2683C1.54889 10.4121 1.5 10.5683 1.5 10.7371V11.3398ZM6.5 4.99355C6.95833 4.99355 7.3507 4.83036 7.67708 4.50397C8.00347 4.17758 8.16667 3.78522 8.16667 3.32688C8.16667 2.86855 8.00347 2.47619 7.67708 2.1498C7.3507 1.82341 6.95833 1.66022 6.5 1.66022C6.04167 1.66022 5.64931 1.82341 5.32292 2.1498C4.99653 2.47619 4.83333 2.86855 4.83333 3.32688C4.83333 3.78522 4.99653 4.17758 5.32292 4.50397C5.64931 4.83036 6.04167 4.99355 6.5 4.99355Z" fill="#6666F2"/>
                                                    </svg>
                                                    On leave  </button>
                                                    <button id="leave-tab" data-bs-toggle="pill" data-bs-target="#v-pills-defaulter"
                                                    type="button" role="tab" aria-controls="v-pills-profile" aria-selected="false" class="nav-link"
                                                    (click)="switchTab('defaulter')">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16" fill="none">
                                                        <path *ngIf="tab != 'defaulter'" d="M15.5031 15.7852L13.3077 13.5898H2.74999V11.7371C2.74999 11.329 2.86082 10.9511 3.08249 10.6033C3.30416 10.2556 3.60041 9.9882 3.97124 9.80125C4.64957 9.46583 5.33305 9.20354 6.02166 9.01438C6.71027 8.82535 7.40395 8.7009 8.1027 8.64104H8.23478C8.2802 8.64104 8.3243 8.64368 8.36707 8.64896L0.714783 0.996876L1.60582 0.105835L16.3942 14.8942L15.5031 15.7852ZM3.99999 12.3398H12.0577L9.5977 9.87979C9.48978 9.8691 9.3902 9.85972 9.29895 9.85167C9.20756 9.84375 9.10791 9.83979 8.99999 9.83979C8.23819 9.83979 7.48471 9.93084 6.73957 10.1129C5.99444 10.2951 5.26284 10.5631 4.54478 10.9167C4.37714 11.0075 4.24444 11.1247 4.14666 11.2683C4.04888 11.4121 3.99999 11.5683 3.99999 11.7371V12.3398ZM14.2052 9.88938C14.453 10.0091 14.6495 10.1908 14.7948 10.4344C14.9401 10.6778 15.017 10.9406 15.0256 11.2227L13.3077 9.50479C13.4616 9.56466 13.6133 9.62452 13.7629 9.68438C13.9124 9.74424 14.0598 9.81257 14.2052 9.88938ZM10.6169 6.75792L9.70041 5.84146C9.99305 5.70577 10.2273 5.5009 10.4031 5.22688C10.5788 4.95271 10.6667 4.65271 10.6667 4.32688C10.6667 3.86854 10.5035 3.47618 10.1771 3.14979C9.85069 2.8234 9.45833 2.66021 8.99999 2.66021C8.67416 2.66021 8.37423 2.74813 8.1002 2.92396C7.82617 3.09965 7.62131 3.33389 7.48562 3.62667L6.56895 2.71C6.84562 2.29653 7.19631 1.97653 7.62103 1.75C8.04576 1.52347 8.50541 1.41021 8.99999 1.41021C9.80444 1.41021 10.4917 1.69521 11.0617 2.26521C11.6317 2.83521 11.9167 3.52243 11.9167 4.32688C11.9167 4.8216 11.8034 5.28125 11.5769 5.70583C11.3503 6.13056 11.0303 6.48125 10.6169 6.75792Z" fill="#1C1B1F"/>
                                                        <path *ngIf="tab == 'defaulter'" d="M15.5031 15.7852L13.3077 13.5898H2.74999V11.7371C2.74999 11.329 2.86082 10.9511 3.08249 10.6033C3.30416 10.2556 3.60041 9.9882 3.97124 9.80125C4.64957 9.46583 5.33305 9.20354 6.02166 9.01438C6.71027 8.82535 7.40395 8.7009 8.1027 8.64104H8.23478C8.2802 8.64104 8.3243 8.64368 8.36707 8.64896L0.714783 0.996876L1.60582 0.105835L16.3942 14.8942L15.5031 15.7852ZM3.99999 12.3398H12.0577L9.5977 9.87979C9.48978 9.8691 9.3902 9.85972 9.29895 9.85167C9.20756 9.84375 9.10791 9.83979 8.99999 9.83979C8.23819 9.83979 7.48471 9.93084 6.73957 10.1129C5.99444 10.2951 5.26284 10.5631 4.54478 10.9167C4.37714 11.0075 4.24444 11.1247 4.14666 11.2683C4.04888 11.4121 3.99999 11.5683 3.99999 11.7371V12.3398ZM14.2052 9.88938C14.453 10.0091 14.6495 10.1908 14.7948 10.4344C14.9401 10.6778 15.017 10.9406 15.0256 11.2227L13.3077 9.50479C13.4616 9.56466 13.6133 9.62452 13.7629 9.68438C13.9124 9.74424 14.0598 9.81257 14.2052 9.88938ZM10.6169 6.75792L9.70041 5.84146C9.99305 5.70577 10.2273 5.5009 10.4031 5.22688C10.5788 4.95271 10.6667 4.65271 10.6667 4.32688C10.6667 3.86854 10.5035 3.47618 10.1771 3.14979C9.85069 2.8234 9.45833 2.66021 8.99999 2.66021C8.67416 2.66021 8.37423 2.74813 8.1002 2.92396C7.82617 3.09965 7.62131 3.33389 7.48562 3.62667L6.56895 2.71C6.84562 2.29653 7.19631 1.97653 7.62103 1.75C8.04576 1.52347 8.50541 1.41021 8.99999 1.41021C9.80444 1.41021 10.4917 1.69521 11.0617 2.26521C11.6317 2.83521 11.9167 3.52243 11.9167 4.32688C11.9167 4.8216 11.8034 5.28125 11.5769 5.70583C11.3503 6.13056 11.0303 6.48125 10.6169 6.75792Z" fill="#6666F2"/>
                                                    </svg>
                                                    Defaulter Employee  </button>
                                                    <button id="v-pills-consistent-tab" data-bs-toggle="pill" data-bs-target="#v-pills-consistent-employee"
                                                    type="button" role="tab" aria-controls="v-pills-messages" aria-selected="false" class="nav-link"
                                                    (click)="switchTab('consistent')">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="13" viewBox="0 0 18 13" fill="none">
                                                        <path *ngIf="tab != 'consistent'" d="M13.1185 8.42313C12.5994 8.42313 12.1571 8.24043 11.7917 7.87501C11.4263 7.50959 11.2435 7.0673 11.2435 6.54813C11.2435 6.02883 11.4263 5.58647 11.7917 5.22105C12.1571 4.85577 12.5994 4.67313 13.1185 4.67313C13.6378 4.67313 14.0801 4.85577 14.4454 5.22105C14.8108 5.58647 14.9935 6.02883 14.9935 6.54813C14.9935 7.0673 14.8108 7.50959 14.4454 7.87501C14.0801 8.24043 13.6378 8.42313 13.1185 8.42313ZM9.16021 12.5898V11.6315C9.16021 11.3355 9.2359 11.0638 9.38729 10.8163C9.53868 10.5688 9.75361 10.3907 10.0321 10.2821C10.5168 10.079 11.0183 9.92674 11.5367 9.82522C12.055 9.72383 12.5823 9.67313 13.1185 9.67313C13.6441 9.67313 14.1663 9.72383 14.685 9.82522C15.2038 9.92674 15.7105 10.079 16.2052 10.2821C16.4837 10.3907 16.6985 10.5688 16.8498 10.8163C17.0012 11.0638 17.0769 11.3355 17.0769 11.6315V12.5898H9.16021ZM7.17313 6.24355C6.37104 6.24355 5.68438 5.95799 5.11313 5.38688C4.54202 4.81563 4.25646 4.12897 4.25646 3.32688C4.25646 2.5248 4.54202 1.8382 5.11313 1.26709C5.68438 0.695842 6.37104 0.410217 7.17313 0.410217C7.97521 0.410217 8.66181 0.695842 9.23292 1.26709C9.80417 1.8382 10.0898 2.5248 10.0898 3.32688C10.0898 4.12897 9.80417 4.81563 9.23292 5.38688C8.66181 5.95799 7.97521 6.24355 7.17313 6.24355ZM0.923126 12.5898V10.7371C0.923126 10.3208 1.03181 9.9382 1.24917 9.58918C1.46667 9.24015 1.765 8.97751 2.14417 8.80126C2.92945 8.40598 3.74452 8.10522 4.58938 7.89897C5.43424 7.69286 6.29549 7.5898 7.17313 7.5898C7.58438 7.5898 7.9957 7.61945 8.40708 7.67876C8.81834 7.73806 9.22965 7.80987 9.64104 7.89418C9.46368 8.07418 9.28632 8.25425 9.10896 8.43438L8.57688 8.97438C8.34299 8.91827 8.10903 8.88181 7.875 8.86501C7.64097 8.8482 7.40702 8.8398 7.17313 8.8398C6.39424 8.8398 5.62875 8.92897 4.87667 9.1073C4.12445 9.28577 3.40486 9.55556 2.71792 9.91668C2.55764 10.0021 2.42674 10.114 2.32521 10.2523C2.22382 10.3908 2.17313 10.5524 2.17313 10.7371V11.3398H7.17313V12.5898H0.923126ZM7.17313 4.99355C7.63146 4.99355 8.02382 4.83036 8.35021 4.50397C8.6766 4.17758 8.83979 3.78522 8.83979 3.32688C8.83979 2.86855 8.6766 2.47619 8.35021 2.1498C8.02382 1.82341 7.63146 1.66022 7.17313 1.66022C6.71479 1.66022 6.32243 1.82341 5.99604 2.1498C5.66965 2.47619 5.50646 2.86855 5.50646 3.32688C5.50646 3.78522 5.66965 4.17758 5.99604 4.50397C6.32243 4.83036 6.71479 4.99355 7.17313 4.99355Z" fill="#1C1B1F"/>
                                                        <path *ngIf="tab == 'consistent'" d="M13.1185 8.42313C12.5994 8.42313 12.1571 8.24043 11.7917 7.87501C11.4263 7.50959 11.2435 7.0673 11.2435 6.54813C11.2435 6.02883 11.4263 5.58647 11.7917 5.22105C12.1571 4.85577 12.5994 4.67313 13.1185 4.67313C13.6378 4.67313 14.0801 4.85577 14.4454 5.22105C14.8108 5.58647 14.9935 6.02883 14.9935 6.54813C14.9935 7.0673 14.8108 7.50959 14.4454 7.87501C14.0801 8.24043 13.6378 8.42313 13.1185 8.42313ZM9.16021 12.5898V11.6315C9.16021 11.3355 9.2359 11.0638 9.38729 10.8163C9.53868 10.5688 9.75361 10.3907 10.0321 10.2821C10.5168 10.079 11.0183 9.92674 11.5367 9.82522C12.055 9.72383 12.5823 9.67313 13.1185 9.67313C13.6441 9.67313 14.1663 9.72383 14.685 9.82522C15.2038 9.92674 15.7105 10.079 16.2052 10.2821C16.4837 10.3907 16.6985 10.5688 16.8498 10.8163C17.0012 11.0638 17.0769 11.3355 17.0769 11.6315V12.5898H9.16021ZM7.17313 6.24355C6.37104 6.24355 5.68438 5.95799 5.11313 5.38688C4.54202 4.81563 4.25646 4.12897 4.25646 3.32688C4.25646 2.5248 4.54202 1.8382 5.11313 1.26709C5.68438 0.695842 6.37104 0.410217 7.17313 0.410217C7.97521 0.410217 8.66181 0.695842 9.23292 1.26709C9.80417 1.8382 10.0898 2.5248 10.0898 3.32688C10.0898 4.12897 9.80417 4.81563 9.23292 5.38688C8.66181 5.95799 7.97521 6.24355 7.17313 6.24355ZM0.923126 12.5898V10.7371C0.923126 10.3208 1.03181 9.9382 1.24917 9.58918C1.46667 9.24015 1.765 8.97751 2.14417 8.80126C2.92945 8.40598 3.74452 8.10522 4.58938 7.89897C5.43424 7.69286 6.29549 7.5898 7.17313 7.5898C7.58438 7.5898 7.9957 7.61945 8.40708 7.67876C8.81834 7.73806 9.22965 7.80987 9.64104 7.89418C9.46368 8.07418 9.28632 8.25425 9.10896 8.43438L8.57688 8.97438C8.34299 8.91827 8.10903 8.88181 7.875 8.86501C7.64097 8.8482 7.40702 8.8398 7.17313 8.8398C6.39424 8.8398 5.62875 8.92897 4.87667 9.1073C4.12445 9.28577 3.40486 9.55556 2.71792 9.91668C2.55764 10.0021 2.42674 10.114 2.32521 10.2523C2.22382 10.3908 2.17313 10.5524 2.17313 10.7371V11.3398H7.17313V12.5898H0.923126ZM7.17313 4.99355C7.63146 4.99355 8.02382 4.83036 8.35021 4.50397C8.6766 4.17758 8.83979 3.78522 8.83979 3.32688C8.83979 2.86855 8.6766 2.47619 8.35021 2.1498C8.02382 1.82341 7.63146 1.66022 7.17313 1.66022C6.71479 1.66022 6.32243 1.82341 5.99604 2.1498C5.66965 2.47619 5.50646 2.86855 5.50646 3.32688C5.50646 3.78522 5.66965 4.17758 5.99604 4.50397C6.32243 4.83036 6.71479 4.99355 7.17313 4.99355Z" fill="#6666F2"/>
                                                    </svg>
                                                    Consistent Employee </button>
                                                    <button id="v-pills-department-tab" data-bs-toggle="pill" data-bs-target="#v-pills-department-leave"
                                                    type="button" role="tab" aria-controls="v-pills-messages" aria-selected="false" class="nav-link"
                                                    (click)="switchTab('department')">

                                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="21" viewBox="0 0 20 21" fill="none">
                                                        <mask id="mask0_7639_9768" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="21">
                                                        <rect y="0.5" width="20" height="20" fill="#D9D9D9"/>
                                                        </mask>
                                                        <g mask="url(#mask0_7639_9768)">
                                                        <path *ngIf="tab != 'department'" d="M2.0835 17.5833V8.2083L8.3335 3.50476L12.2358 6.44705C11.9847 6.49414 11.7491 6.56469 11.5289 6.65872C11.3089 6.75261 11.0974 6.87275 10.8943 7.01914L8.3335 5.06726L3.3335 8.8333V16.3333H6.71495V17.5833H2.0835ZM8.54183 17.5833V16.2385C8.54183 15.9907 8.60676 15.7598 8.73662 15.5456C8.86634 15.3314 9.03752 15.1587 9.25016 15.0273C9.87308 14.6575 10.5272 14.3795 11.2125 14.1931C11.8979 14.0067 12.6049 13.9135 13.3335 13.9135C14.0621 13.9135 14.7691 14.0067 15.4545 14.1931C16.1398 14.3795 16.7939 14.6575 17.4168 15.0273C17.6295 15.1587 17.8006 15.3314 17.9304 15.5456C18.0602 15.7598 18.1252 15.9907 18.1252 16.2385V17.5833H8.54183ZM9.8687 16.3333H16.7983V16.1089C16.2694 15.8045 15.7141 15.5708 15.1325 15.4079C14.5506 15.2448 13.951 15.1633 13.3335 15.1633C12.716 15.1633 12.1163 15.2448 11.5345 15.4079C10.9529 15.5708 10.3976 15.8045 9.8687 16.1089V16.3333ZM13.3345 12.6233C12.6981 12.6233 12.157 12.4006 11.711 11.9552C11.2649 11.5098 11.0418 10.9689 11.0418 10.3327C11.0418 9.69629 11.2645 9.15511 11.71 8.70914C12.1554 8.26302 12.6962 8.03997 13.3325 8.03997C13.9688 8.03997 14.51 8.26268 14.956 8.70809C15.4021 9.15351 15.6252 9.69441 15.6252 10.3308C15.6252 10.9671 15.4025 11.5082 14.957 11.9543C14.5116 12.4003 13.9708 12.6233 13.3345 12.6233ZM13.3335 11.3733C13.6231 11.3733 13.8691 11.2721 14.0714 11.0698C14.2739 10.8673 14.3752 10.6212 14.3752 10.3316C14.3752 10.0422 14.2739 9.79622 14.0714 9.59372C13.8691 9.39122 13.6231 9.28997 13.3335 9.28997C13.0439 9.28997 12.7979 9.39122 12.5956 9.59372C12.3931 9.79622 12.2918 10.0422 12.2918 10.3316C12.2918 10.6212 12.3931 10.8673 12.5956 11.0698C12.7979 11.2721 13.0439 11.3733 13.3335 11.3733Z" fill="#1C1B1F"/>
                                                        <path *ngIf="tab == 'department'" d="M2.0835 17.5833V8.2083L8.3335 3.50476L12.2358 6.44705C11.9847 6.49414 11.7491 6.56469 11.5289 6.65872C11.3089 6.75261 11.0974 6.87275 10.8943 7.01914L8.3335 5.06726L3.3335 8.8333V16.3333H6.71495V17.5833H2.0835ZM8.54183 17.5833V16.2385C8.54183 15.9907 8.60676 15.7598 8.73662 15.5456C8.86634 15.3314 9.03752 15.1587 9.25016 15.0273C9.87308 14.6575 10.5272 14.3795 11.2125 14.1931C11.8979 14.0067 12.6049 13.9135 13.3335 13.9135C14.0621 13.9135 14.7691 14.0067 15.4545 14.1931C16.1398 14.3795 16.7939 14.6575 17.4168 15.0273C17.6295 15.1587 17.8006 15.3314 17.9304 15.5456C18.0602 15.7598 18.1252 15.9907 18.1252 16.2385V17.5833H8.54183ZM9.8687 16.3333H16.7983V16.1089C16.2694 15.8045 15.7141 15.5708 15.1325 15.4079C14.5506 15.2448 13.951 15.1633 13.3335 15.1633C12.716 15.1633 12.1163 15.2448 11.5345 15.4079C10.9529 15.5708 10.3976 15.8045 9.8687 16.1089V16.3333ZM13.3345 12.6233C12.6981 12.6233 12.157 12.4006 11.711 11.9552C11.2649 11.5098 11.0418 10.9689 11.0418 10.3327C11.0418 9.69629 11.2645 9.15511 11.71 8.70914C12.1554 8.26302 12.6962 8.03997 13.3325 8.03997C13.9688 8.03997 14.51 8.26268 14.956 8.70809C15.4021 9.15351 15.6252 9.69441 15.6252 10.3308C15.6252 10.9671 15.4025 11.5082 14.957 11.9543C14.5116 12.4003 13.9708 12.6233 13.3345 12.6233ZM13.3335 11.3733C13.6231 11.3733 13.8691 11.2721 14.0714 11.0698C14.2739 10.8673 14.3752 10.6212 14.3752 10.3316C14.3752 10.0422 14.2739 9.79622 14.0714 9.59372C13.8691 9.39122 13.6231 9.28997 13.3335 9.28997C13.0439 9.28997 12.7979 9.39122 12.5956 9.59372C12.3931 9.79622 12.2918 10.0422 12.2918 10.3316C12.2918 10.6212 12.3931 10.8673 12.5956 11.0698C12.7979 11.2721 13.0439 11.3733 13.3335 11.3733Z" fill="#6666F2"/>
                                                        </g>
                                                        </svg>
                                                    Leave by Department </button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-9">
                                          <div class="leave-templete p-3">
                                            <div class="tab-content" id="v-pills-tabContent">
                                              <!-- Absent Tab -->
                                              <div class="tab-pane fade" [class.active]="tabName === ABSENT_TAB" [class.show]="tabName === ABSENT_TAB" id="v-pills-absent-today" role="tabpanel">
                                                <div class="absent-data mt-3" *ngIf="tabName === ABSENT_TAB">
                                                  <div class="absent-logs scrollable-container" (scroll)="onScroll($event)">
                                                    <div *ngIf="leaveTeamOverviewResponse.length > 0 ">
                                                      <div class="d-flex align-items-center justify-content-between mb-3" *ngFor="let log of leaveTeamOverviewResponse">
                                                        <div class="d-flex align-items-center gap-2">
                                                          <img onerror="this.src='./assets/images/broken-image-icon.jpg';" [src]="log?.image || 'assets/images/user.png'" class="thumb-md rounded-circle" />
                                                          <div>
                                                            <h5 class="mb-1 font-13 fw-semibold regular-data pointer" (click)="routeToUserProfile(log?.userUuid)">
                                                              {{ log?.name }} - <span class="mb-1 font-12"> {{ log?.date | date: 'd MMMM, y' || "N/A" }}</span>
                                                            </h5>
                                                            <p class="mb-0 fw-light font-12">{{ log?.email || 'N/A' }} | <span class="text-primary fw-normal">{{ log?.position }}</span></p>
                                                          </div>
                                                        </div>
                                                        <span class="badge rounded-pill badge-soft-danger font-13">Absent</span>
                                                      </div>
                                                    </div>
                                                    <div class="empty-file" style="margin-top: 7%; margin-bottom: 7%" *ngIf="isLoaderLoading">
                                                      <div class="text-center load-more-btn">
                                                        <div class="spinner-border spinner-border-custom-1 text-primary" role="status"></div>
                                                        <div><small>Loading...</small></div>
                                                      </div>
                                                    </div>
                                                    <div class="empty-file" style="margin-top: 5%; margin-bottom: 5%" *ngIf="leaveTeamOverviewResponse.length == 0 && !isLoaderLoading">
                                                      <nz-empty nzNotFoundImage="assets/images/no-data-found-img.svg" [nzNotFoundContent]="contentTpl">
                                                        <ng-template #contentTpl>
                                                          <p class="mb-1 empty-detail font-16">No data for now</p>
                                                        </ng-template>
                                                      </nz-empty>
                                                    </div>
                                                  </div>
                                                </div>
                                              </div>

                                              <!-- On Leave Tab -->
                                              <div class="tab-pane fade" [class.active]="tabName === ON_LEAVE_TAB" [class.show]="tabName === ON_LEAVE_TAB" id="v-pills-on-leave" role="tabpanel">
                                                <div class="absent-data mt-3" *ngIf="tabName === ON_LEAVE_TAB">
                                                  <div class="absent-logs scrollable-container" (scroll)="onScroll($event)">
                                                    <div *ngIf="usersOnLeave.length > 0 ">
                                                      <div class="d-flex align-items-center justify-content-between mb-4">
                                                        <h5 class="mb-0 font-20 fw-semibold">
                                                          {{ totalUsersOnLeave || 0 }} <span class="font-13 fw-normal">On leave this month.</span>
                                                        </h5>
                                                      </div>
                                                      <div class="d-flex align-items-center justify-content-between mb-3 border-bottom pb-3" *ngFor="let log of usersOnLeave">
                                                        <div class="d-flex align-items-center gap-2">
                                                          <img onerror="this.src='./assets/images/broken-image-icon.jpg';" [src]="log.image || 'assets/images/user.png'" class="thumb-md rounded-circle" />
                                                          <div>
                                                            <h5 class="mb-1 font-14 fw-semibold regular-data" (click)="routeToUserProfile(log?.uuid)">{{ log?.name }}</h5>
                                                            <p class="mb-0 fw-light">{{ log?.position || 'N/A' }} | <span class="text-danger fw-normal">On Leave</span></p>
                                                          </div>
                                                        </div>
                                                        <span class="badge rounded-pill badge-soft-secondary">{{ log?.totalLeaveTaken }} Days</span>
                                                      </div>
                                                    </div>
                                                    <div class="text-center mt-3" *ngIf="isLoaderLoading">
                                                      <div class="spinner-border spinner-border-custom-1 text-primary" role="status"></div>
                                                      <div><small>Loading...</small></div>
                                                    </div>
                                                    <div class="empty-file" style="margin-top: 5%; margin-bottom: 5%" *ngIf="usersOnLeave.length == 0 && !isLoaderLoading">
                                                      <nz-empty nzNotFoundImage="assets/images/no-data-found-img.svg" [nzNotFoundContent]="contentTpl">
                                                        <ng-template #contentTpl>
                                                          <p class="mb-1 empty-detail font-16">No data for now</p>
                                                        </ng-template>
                                                      </nz-empty>
                                                    </div>
                                                  </div>
                                                </div>
                                              </div>

                                              <!-- Defaulter Tab -->
                                              <div class="tab-pane fade" [class.active]="tabName === DEFAULTER_TAB" [class.show]="tabName === DEFAULTER_TAB" id="v-pills-defaulter" role="tabpanel">
                                                <div class="absent-data mt-3" *ngIf="tabName === DEFAULTER_TAB">
                                                  <div class="absent-logs scrollable-container" (scroll)="onScroll($event)">
                                                    <div *ngIf="maxLeavesUsers.length > 0">
                                                      <div class="d-flex align-items-center justify-content-between mb-4">
                                                        <h5 class="mb-0 font-20 fw-semibold">
                                                          {{ totalMaxLeaves || 0 }} <span class="font-13 fw-normal">Defaulter Employee</span>
                                                        </h5>
                                                      </div>
                                                      <div class="d-flex align-items-center justify-content-between mb-3 border-bottom pb-3" *ngFor="let log of maxLeavesUsers">
                                                        <div class="d-flex align-items-center gap-2">
                                                          <img onerror="this.src='./assets/images/broken-image-icon.jpg';"  [src]="log.image || 'assets/images/user.png'" class="thumb-md rounded-circle" />
                                                          <div>
                                                            <h5 class="mb-1 font-14 fw-semibold regular-data" (click)="routeToUserProfile(log?.uuid)">{{ log?.name }}</h5>
                                                            <p class="mb-0 fw-light font-13">{{ log?.position || 'N/A' }}</p>
                                                          </div>
                                                        </div>
                                                        <div class="text-end">
                                                          <p class="mb-0 text-black">Total Taken Leave</p>
                                                          <p class="mb-1 text-black">
                                                            <span class="text-danger fw-semibold font-15">{{ log?.totalLeaveTaken }}</span>
                                                          </p>
                                                        </div>
                                                      </div>
                                                    </div>
                                                    <div class="text-center mt-3" *ngIf="isLoaderLoading">
                                                      <div class="spinner-border spinner-border-custom-1 text-primary" role="status"></div>
                                                      <div><small>Loading...</small></div>
                                                    </div>
                                                    <div class="empty-file" style="margin-top: 5%; margin-bottom: 5%" *ngIf="maxLeavesUsers.length == 0 && !isLoaderLoading">
                                                      <nz-empty nzNotFoundImage="assets/images/no-data-found-img.svg" [nzNotFoundContent]="contentTpl">
                                                        <ng-template #contentTpl>
                                                          <p class="mb-1 empty-detail font-16">No data for now</p>
                                                        </ng-template>
                                                      </nz-empty>
                                                    </div>
                                                  </div>
                                                </div>
                                              </div>

                                              <!-- Consistent Tab -->
                                              <div class="tab-pane fade" [class.active]="tabName === CONSISTENT_TAB" [class.show]="tabName === CONSISTENT_TAB" id="v-pills-consistent-employee" role="tabpanel">
                                                <div class="absent-data mt-3" *ngIf="tabName === CONSISTENT_TAB">
                                                  <div class="absent-logs scrollable-container" (scroll)="onScroll($event)">
                                                    <div *ngIf="minLeavesUsers.length > 0 ">
                                                      <div class="d-flex align-items-center justify-content-between mb-4">
                                                        <h5 class="mb-0 font-20 fw-semibold">
                                                          {{ totalMinLeaves || 0 }} <span class="font-13 fw-normal">Outstanding Employee</span>
                                                        </h5>
                                                      </div>
                                                      <div class="d-flex align-items-center justify-content-between mb-3 border-bottom pb-3" *ngFor="let log of minLeavesUsers">
                                                        <div class="d-flex align-items-center gap-2">
                                                          <img  onerror="this.src='./assets/images/broken-image-icon.jpg';" [src]="log.image || 'assets/images/user.png'" class="thumb-md rounded-circle" />
                                                          <div>
                                                            <h5 class="mb-1 font-14 fw-semibold regular-data" (click)="routeToUserProfile(log?.uuid)">{{ log?.name }}</h5>
                                                            <p class="mb-0 fw-light font-13">{{ log?.position || 'N/A' }}</p>
                                                          </div>
                                                        </div>
                                                        <div class="text-end">
                                                          <p class="mb-0 text-black">Total Taken Leave</p>
                                                          <p class="mb-1 text-black">
                                                            <span class="text-danger fw-semibold font-15">{{ log?.totalLeaveTaken }}</span>
                                                          </p>
                                                        </div>
                                                      </div>
                                                    </div>
                                                    <div class="text-center mt-3" *ngIf="isLoaderLoading">
                                                      <div class="spinner-border spinner-border-custom-1 text-primary" role="status"></div>
                                                      <div><small>Loading...</small></div>
                                                    </div>
                                                    <div class="empty-file" style="margin-top: 5%; margin-bottom: 5%" *ngIf="minLeavesUsers.length == 0 && !isLoaderLoading">
                                                      <nz-empty nzNotFoundImage="assets/images/no-data-found-img.svg" [nzNotFoundContent]="contentTpl">
                                                        <ng-template #contentTpl>
                                                          <p class="mb-1 empty-detail font-16">No data for now</p>
                                                        </ng-template>
                                                      </nz-empty>
                                                    </div>
                                                  </div>
                                                </div>
                                              </div>

                                              <!-- Department Leave Tab (unchanged as it uses a chart) -->
                                              <div class="tab-pane fade" [class.active]="tabName === LEAVE_BY_DEPARTMENT_TAB" [class.show]="tabName === LEAVE_BY_DEPARTMENT_TAB" id="v-pills-department-leave" role="tabpanel">
                                                <div class="absent-data mt-3" *ngIf="tabName === LEAVE_BY_DEPARTMENT_TAB">
                                                  <div class="absent-logs">
                                                    <div class="pb-0" *ngIf="leaveTeamOverviewResponse.length > 0 && !isLoaderLoading">
                                                      <div class="d-flex align-items-center justify-content-between mb-4">
                                                        <h5 class="mb-0 font-20 fw-semibold">Team Performance</h5>
                                                      </div>
                                                      <div class="d-flex align-items-center gap-5">
                                                        <div>
                                                          <p class="mb-1 font-13">Best Performance</p>
                                                          <div class="d-flex align-items-center gap-1">
                                                            <h5 class="mb-0 font-15">{{ slowestTeam }}</h5>
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="17" viewBox="0 0 12 17" fill="none">
                                                              <path fill-rule="evenodd" clip-rule="evenodd" d="M7.68524 16.3589H4.23756V9.05117H0L5.9614 0.641113L11.9228 9.05117H7.68524V16.3589Z" fill="#388E3C"/>
                                                            </svg>
                                                          </div>
                                                        </div>
                                                        <div>
                                                          <p class="mb-1 font-13">Going Slow</p>
                                                          <div class="d-flex align-items-center gap-1">
                                                            <h5 class="mb-0 font-15">{{ bestTeam }}</h5>
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="13" height="17" viewBox="0 0 13 17" fill="none">
                                                              <path fill-rule="evenodd" clip-rule="evenodd" d="M8.60809 0.641113H5.16041V7.94883H0.922852L6.88425 16.3589L12.8456 7.94883H8.60809V0.641113Z" fill="#FF3014"/>
                                                            </svg>
                                                          </div>
                                                        </div>
                                                      </div>
                                                      <apx-chart *ngIf="chartOptions1?.series?.length" [series]="chartOptions1.series!" [chart]="chartOptions1.chart!" [xaxis]="chartOptions1.xaxis!" [yaxis]="chartOptions1.yaxis!" [plotOptions]="chartOptions1.plotOptions!" [dataLabels]="chartOptions1.dataLabels!" [tooltip]="chartOptions1.tooltip!" [fill]="chartOptions1.fill!" [title]="chartOptions1.title!" [grid]="chartOptions1.grid!" class="w-100" style="min-height: 500px;"></apx-chart>
                                                    </div>
                                                    <div class="empty-file" style="margin-top: 5%; margin-bottom: 5%" *ngIf="leaveTeamOverviewResponse.length == 0 && !isLoaderLoading">
                                                      <nz-empty nzNotFoundImage="assets/images/no-data-found-img.svg" [nzNotFoundContent]="contentTpl">
                                                        <ng-template #contentTpl>
                                                          <p class="mb-1 empty-detail font-16">No data for now</p>
                                                        </ng-template>
                                                      </nz-empty>
                                                    </div>
                                                    <div class="empty-file" style="margin-top: 7%; margin-bottom: 7%" *ngIf="leaveTeamOverviewResponse.length == 0 && isLoaderLoading">
                                                      <div class="text-center load-more-btn">
                                                        <div class="spinner-border spinner-border-custom-1 text-primary" role="status"></div>
                                                        <div><small>Loading...</small></div>
                                                      </div>
                                                    </div>
                                                  </div>
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                    </div>
                            </div>
                        </div>
                        <div class="col-md-4">

                            <div class="report-chart">
                                <div class="report-header p-3">
                                    <h5 class="mb-0 font-14 fw-semibold">Defaulter Employee </h5>
                                </div>
                                <div class="p-3 defaulter-employee" *ngIf="!Constants.EMPTY_STRINGS.includes(mostDefaulter) && mostDefaulter!={}">
                                    <div class="d-flex align-items-center justify-content-between mb-3">
                                        <div class="d-flex align-items-center gap-2">
                                            <img onerror="this.src='./assets/images/broken-image-icon.jpg';"  src="{{mostDefaulter.image}}" class="thumb-md rounded-circle img-cover" *ngIf="mostDefaulter.image!=null">
                                            <img onerror="this.src='./assets/images/broken-image-icon.jpg';" src="assets/images/user.png" alt="" class="thumb-md rounded-circle img-cover" *ngIf="mostDefaulter.image==null">
                                           <div>
                                              <h5 class="mb-1 font-14 fw-semibold regular-data" (click)="routeToUserProfile(mostDefaulter.uuid)">{{mostDefaulter?.name}}</h5>
                                              <p class="mb-0 fw-light font-13">{{mostDefaulter.position}} </p>
                                           </div>
                                        </div>
                                        <p class="mb-0 text-black"> <span class="font-20 fw-semibold text-danger">{{mostDefaulter.totalLeaveTaken}}</span> Leaves</p>
                                     </div>
                                     <!-- TODO: integrate in this section -->
                                     <div class="row mt-3">
                                        <!-- <div class="col-md-4" *ngFor = "let list of topDefaulterUser?.categoryWiseLeaveData">
                                            <div class="defaulter">
                                                <h5 class="font-13 mb-3">{{list?.leaveCategoryName}}</h5>
                                                <h5 class="font-22 mb-1 fw-semibold"> {{list?.totalApprovedLeave}} <span class="font-13 fw-semibold" style="color: #444;">Approved</span></h5>
                                                <p class="mb-0 font-13 fw-light"><span class="font-14 text-danger fw-semibold">2 </span> in a month</p>
                                             </div>
                                        </div> -->
                                        <!-- <div class="col-md-4">
                                            <div class="defaulter">
                                                <h5 class="font-13 mb-3">Earned Leave </h5>
                                                <h5 class="font-22 mb-1 fw-semibold">5 <span class="font-13 fw-semibold" style="color: #444;">Times</span></h5>
                                                <p class="mb-0 font-13 fw-light"><span class="font-14 text-danger fw-semibold">2 </span> in a month</p>
                                             </div>
                                        </div> -->
                                        <!-- <div class="col-md-4">
                                            <div class="defaulter">
                                                <h5 class="font-13 mb-3">Casual Leave</h5>
                                                <h5 class="font-22 mb-1 fw-semibold">5 <span class="font-13 fw-semibold" style="color: #444;">Times</span></h5>
                                                <p class="mb-0 font-13 fw-light"><span class="font-14 text-danger fw-semibold">2 </span> in a month</p>
                                             </div>
                                        </div> -->
                                     </div>

                                </div>
                                <div class="empty-file" style="margin-top: 5%; margin-bottom: 5%" *ngIf="Constants.EMPTY_STRINGS.includes(mostDefaulter) && !isLoaderLoading">
                                    <nz-empty nzNotFoundImage="assets/images/no-data-found-img.svg"
                                      [nzNotFoundContent]="contentTpl">
                                      <ng-template #contentTpl>
                                        <p class="mb-1 empty-detail font-16">
                                          No data for now
                                        </p>
                                      </ng-template>
                                    </nz-empty>
                                </div>
                                <div class="empty-file" style="margin-top: 7%; margin-bottom: 7%"
                                *ngIf="isDefaulterLoading && Constants.EMPTY_STRINGS.includes(mostDefaulter) ">
                                <div class="text-center load-more-btn">
                                <div class="spinner-border spinner-border-custom-1 text-primary" role="status"></div>
                                <div>
                                    <small>Loading...</small>
                                </div>
                                </div>

                            </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="request" role="tabpanel" aria-labelledby="employee-tab">
                    <div class="mt-3 mb-4">
                        <div class="onboard-add row align-items-center mx-0">
                            <div class="col-md-12 p-0">
                                <div class="row justify-content-between align-items-center mx-0">
                                    <div class="col-lg-12 col-md-12 col-sm-12 ps-0">
                                        <div class="d-flex justify-content-start align-items-center">
                                            <div class="empFilerDropfilter dropdown">
                                                <button type="button" id="statusDropdown" class="btn btn-secondary new-deopdown d-flex align-items-center justify-content-between" (click)="changeShowFilter(true)">
                                                    Filters
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" viewBox="0 0 23 23" fill="none">
                                                        <mask id="mask0_7808_40" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="23" height="23">
                                                        <rect x="0.262695" y="0.283112" width="22.4338" height="22.4338" fill="#1C1B1F"/>
                                                        </mask>
                                                        <g mask="url(#mask0_7808_40)">
                                                        <path d="M9.61057 17.1084V15.239H13.3495V17.1084H9.61057ZM5.87161 12.4347V10.5653H17.0885V12.4347H5.87161ZM3.06738 7.76104V5.89156H19.8927V7.76104H3.06738Z" fill="#1C1B1F"/>
                                                        </g>
                                                        </svg>
                                                </button>


                                            </div>
                                            <div
                                                class="onboarding-date d-flex align-items-center justify-content-between position-relative w-100">
                                                <form novalidate
                                                    class="searching d-flex align-items-center justify-content-between w-100">
                                                    <div class="form-group w-100 position-relative">
                                                        <input type="text" name="search" id="searchInput" #searchInput="ngModel" placeholder="Search by name.."
                                                         class="form-control me-2 w-100" style="padding: 10px 45px;"  [(ngModel)]="searchTerm"
                                                         (keyup)="searchTermChanged($event)" />
                                                        <i class="bi bi-search search-icon d-flex align-items-center  h-100" *ngIf="searchTerm == ''"></i>
                                                        <i class="bi bi-x-lg search-icon d-flex align-items-center  h-100" *ngIf="searchTerm != ''"
                                                        (click)="resetFiltersSearch()"></i>

                                                    </div>
                                                </form>
                                            </div>

                                        </div>

                                        <div class="actionMenuList filter-box p-0 position-absolute bg-white border" [ngClass]="{'d-none': !showFilter}">
                                            <div class="d-flex align-items-center justify-content-between border-bottom p-3">
                                                <h5 class="mb-0 font-14 fw-semibold"> Filter</h5>
                                                <span class="pointer" (click)="changeShowFilter(false)">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" fill="none">
                                                    <g opacity="0.8">
                                                    <mask id="mask0_7729_258" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="18" height="19">
                                                    <rect y="0.5" width="18" height="18" fill="#D9D9D9"/>
                                                    </mask>
                                                    <g mask="url(#mask0_7729_258)">
                                                    <path d="M4.8 14.75L3.75 13.7L7.95 9.5L3.75 5.3L4.8 4.25L9 8.45L13.2 4.25L14.25 5.3L10.05 9.5L14.25 13.7L13.2 14.75L9 10.55L4.8 14.75Z" fill="#1C1B1F"/>
                                                    </g>
                                                    </g>
                                                    </svg>
                                                </span>
                                            </div>
                                            <div class="row p-3">

                                                <h5 class="font-14 mb-3">Date Range</h5>
                                                <div class="col-md-6 mb-3">
                                                    <label for="from" class="pb-2">From  </label>
                                                    <nz-date-picker [(ngModel)]="filters.fromDate" nzBorderless
                                                    [nzDisabledDate]="disabledDateFrom" nzplaceholder="dd/mm/yyyy"></nz-date-picker>
                                                </div>
                                                <div class="col-md-6 mb-3">
                                                    <label for="to" class="pb-2">To  </label>
                                                    <nz-date-picker [(ngModel)]="filters.toDate"[(ngModel)]="filters.toDate" nzBorderless
                                                    [nzDisabledDate]="disabledDateTo" nzplaceholder="dd/mm/yyyy"></nz-date-picker>
                                                </div>

                                                <div class="col-md-12 mb-3">
                                                    <label for="type" class="pb-2">Leave Type</label>
                                                    <nz-select [(ngModel)]="filters.leaveType" nzMode="multiple"  class="w-100 form-multiselect" nzPlaceHolder="Please select">
                                                        <nz-option *ngFor="let type of leaveTypes" [nzValue]="type" nzLabel="{{ type | titlecase }}"></nz-option>

                                                      </nz-select>
                                                </div>
                                                <div class="col-md-12 mb-3">
                                                    <label for="status" class="pb-2">Status</label>
                                                    <nz-select [(ngModel)]="filters.status" nzMode="multiple" class="w-100 form-multiselect" nzPlaceHolder="Please select">
                                                        <nz-option *ngFor="let stat of statusMaster" [nzValue]="stat" nzLabel="{{ stat | titlecase }}"></nz-option>
                                                    </nz-select>
                                                </div>
                                            </div>
                                            <div class="p-3 border-top d-flex gap-2 align-items-center justify-content-end">
                                                <button class="btn cancel-btn mt-0" (click)="resetFilters()">Reset it</button>
                                                <button class="btn submitActionBtn" (click)="applyFilters()">Apply</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="filter-bdg d-flex align-items-center gap-2 mt-3" *ngIf="appliedFilters.length>0">
                            <p *ngFor="let filter of appliedFilters" class="filter-pills d-flex align-items-center gap-2 pointer font-12 fw-semibold">
                                {{filter.key  | titlecase}} : {{ filter.value  | titlecase}}
                                <i class="bi bi-x-lg pointer" (click)="removeFilter(filter)"></i>
                              </p>

                          </div>

                        <div class="table-responsive bg-white mt-3 employee-table">
                            <table class="table" >
                               <thead class="thead-light">
                                  <tr>
                                     <th class="text-left font-13" style="width: 10%;">Employee Name</th>
                                     <th class="text-left font-13" style="width: 15%;">Type</th>
                                     <th class="text-left font-13" style="width: 15%;">Date</th>
                                     <th class="text-left font-13" style="width: 10%;">Requested To</th>
                                     <th class="text-left font-13" style="width: 10%;">Status</th>
                                     <th class="text-left font-13" style="width: 15%;">Leave Note</th>
                                     <th class="text-left font-13" style="width: 15%;">Cancellation Reason</th>

                                     <th class="text-end font-13 stickyColTdend" style="width: 10%;">Action </th>
                                  </tr>
                               </thead>
                               <!-- TO DO: Shimmer Loading Ui -->
                               <tbody *ngIf="isLoadingLeaves">
                                   <tr *ngFor="let item of [].constructor(10)">
                                       <td>
                                           <ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading>
                                       </td>
                                       <td>
                                           <ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading>
                                       </td>
                                       <td>
                                           <ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading>
                                       </td>
                                       <td>
                                           <ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading>
                                       </td>
                                       <td>
                                           <ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading>
                                       </td>
                                       <td>
                                           <ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading>
                                       </td>
                                       <td>
                                           <ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading>
                                       </td>
                                       <td>
                                           <ngx-shimmer-loading [width]="'100%'" [height]="'10px'"></ngx-shimmer-loading>
                                       </td>
                                   </tr>
                               </tbody>
                               <!-- Shimmer Loading Ui End-->

                               <!-- TO DO: empty notification  -->
                               <tbody *ngIf="leaves.length == 0 && !isLoadingLeaves">
                                   <tr>
                                     <td colspan="8">
                                       <div class="empty-file" style="margin-top: 5%; margin-bottom: 5%">
                                         <nz-empty nzNotFoundImage="assets/images/no-data-found-img.svg"
                                           [nzNotFoundContent]="contentTpl">
                                           <ng-template #contentTpl>
                                             <p class="mb-1 empty-detail font-16">
                                               No data for now
                                             </p>
                                           </ng-template>
                                         </nz-empty>
                                       </div>
                                     </td>
                                   </tr>
                                 </tbody>
                                  <!-- empty notification end -->
                               <tbody class="ng-star-inserted" *ngIf="leaves.length > 0 && !isLoadingLeaves">
                                <ng-container *ngFor="let leave of leaves;
                                let i = index
                              ">
                              <!-- class="new-request" -->
                                <tr >
                                    <td class="text-left"><span (click)="routeToUserDetails(leave.uuid)" class="team-maneger mb-0 pointer">{{leave.username}} </span></td>
                                     <td class="text-left">
                                        <p class="mb-1 font-12 fw-semibold">{{ leave.leaveType }}</p>
                                        <span class="team-maneger mb-0 table-font-weight text-optional">on {{ leave.leaveDate | date : "dd-MM-yyyy" || "N/A" }}</span>
                                    </td>
                                     <td class="text-left">
                                        <span class="team-maneger mb-0 fw-semibold font-12 "> Start Date - <span class="text-optional fw-normal"> {{ leave.startDate | date : 'dd-MM-yyyy' || "N/A" }}</span> <br>
                                          Ending Date -  <span class="text-optional fw-normal">{{ leave.endDate | date : 'dd-MM-yyyy' || "N/A" }} </span>
                                        </span>
                                        <!-- <p class="mb-0 font-12 fw-semibold" >
                                            Monday
                                        </p> -->
                                     </td>
                                     <td class="text-left"><span class=" mb-0 font-13 fw-semibold">{{leave.managerName}} </span></td>

                                     <td class="text-left">
                                      <div class="d-flex align-items-center gap-2">
                                         <span class="font-14 fw-semibold" [ngClass]="{
                                              'text-danger': leave.status == REJECTED,
                                              'text-primary': leave.status == PENDING || leave.status == REQUESTED,
                                              'text-success': leave.status == APPROVED
                                          }">{{leave.status|  uppercase}} </span>

                                      </div>
                                      <p class="mb-0 mt-0 fw-normal font-13 color-basic">By: {{leave.actionByName || '-'}} </p>
                                  </td>
                                     <td>
                                        <span class="team-maneger mb-0 table-font-weight white-space"  nzPopoverTitle="Title" nzPopoverContent="Content">{{leave.notes}}</span>
                                     </td>
                                     <td>
                                        <span class="team-maneger mb-0 table-font-weight white-space" nzPopoverTitle="Title" nzPopoverContent="Content">{{leave.rejectionReason || "N/A"}}</span>
                                    </td>

                                     <td class="text-end stickyColTdend">
                                        <div class="d-flex align-items-center justify-content-end gap-2">
                                            <span *ngIf="!isExpanded(i)"
                                            class="btnAction d-flex align-items-center justify-content-center"
                                            (click)="toggleCollapse(i); openCloseMonthCalender(); getDayWiseLeaveStatus(leave)">
                                            <i class="bi bi-calendar-week font-15"></i>
                                            </span>
                                            <span *ngIf="isExpanded(i)"
                                            class="btnAction staff-month-sheet d-flex align-items-center justify-content-center"
                                            (click)="toggleCollapse(i); openCloseMonthCalender()">
                                            <i class="bi bi-calendar-week font-15"></i>
                                            </span>
                                            <div class="dropdown">
                                              <span class="btnAction d-flex align-items-center justify-content-center pointer" type="button" data-bs-toggle="dropdown">
                                                <!-- Show loading spinner if the leave is being processed -->
                                                <ng-container *ngIf="leaveRequestLoading[leave.id]; else showDots">
                                                  <div class="spinner-border spinner-border-sm" role="status">
                                                    <span class="visually-hidden">Loading...</span>
                                                  </div>
                                                </ng-container>
                                                <!-- Show three dots SVG when not loading -->
                                                <ng-template #showDots>
                                                  <i class="bi bi-three-dots-vertical font-15"></i>
                                                </ng-template>
                                              </span>
                                              <div class="dropdown-menu actionMenuList">
                                                <li *ngIf="leave.status == PENDING && ((logInUserUuid!=leave.uuid && logInUserUuid==leave.managerUuid)  || ROLE=='ADMIN')">
                                                  <span (click)="approveOrRejectLeave(leave.id, APPROVED)">
                                                    <a class="dropdown-item">
                                                      <i class="bi bi-check2"></i>
                                                      Approve
                                                    </a>
                                                  </span>
                                                </li>
                                                <li *ngIf="leave.status == PENDING && ((logInUserUuid!=leave.uuid && logInUserUuid==leave.managerUuid) || ROLE=='ADMIN')">
                                                  <span (click)="approveOrRejectLeave(leave.id, REJECTED)">
                                                    <a class="dropdown-item">
                                                      <i class="bi bi-x"></i>
                                                      Reject
                                                    </a>
                                                  </span>
                                                </li>
                                                <li>
                                                  <a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#leave-request" (click)="viewLeave(leave)">
                                                    <i class="bi bi-eye"></i>
                                                    View request
                                                  </a>
                                                </li>
                                              </div>
                                            </div>
                                        </div>
                                     </td>
                                  </tr>

                                  <tr class="collapse" [id]="'collapseExamplesheet' + i" [ngClass]="{'show': isExpanded(i)}">
                                    <td colspan="9" class="p-1">
                                       <div class="month-deta">
                                          <table class="table table-bordesick-leaves day-data mb-0" *ngIf="dayWiseLeaveStatusLoader">
                                            <tr class="position-relative">
                                                <th>
                                                    <div class="p-0">
                                                      <ngx-shimmer-loading [width]="'100%'" [height]="'30px'"></ngx-shimmer-loading>
                                                      <br>
                                                      <ngx-shimmer-loading [width]="'100%'" [height]="'30px'"></ngx-shimmer-loading>
                                                    </div>
                                                </th>
                                            </tr>

                                          </table>
                                          <table class="table table-bordesick-leaves day-data mb-0" *ngIf="!dayWiseLeaveStatusLoader">
                                             <tr class="position-relative">
                                                <ng-container *ngFor="
                                                let dayWiseStatus of dayWiseLeaveStatus
                                              ">
                                              <th class="text-center">
                                                {{
                                                getDayNameFromDate(
                                                dayWiseStatus.date
                                                )[0]
                                                }}
                                                <br />
                                                {{
                                                getDayFromDate(dayWiseStatus.date)
                                                }}
                                              </th>
                                               </ng-container>
                                             </tr>
                                             <tr class="position-relative">
                                                <ng-container *ngFor="
                                                    let dayWiseStatus of dayWiseLeaveStatus
                                                    ">
                                                    <td class="text-center position-relative attendance-detail" [ngClass]="{
                                                        'text-success':
                                                        dayWiseStatus.status?.includes('Leave') ||  dayWiseStatus.status == 'LWP' ||
                                                        dayWiseStatus.status == 'Half-D',
                                                        'text-danger':
                                                        dayWiseStatus.status == 'Reject',
                                                        'text-warning':
                                                        dayWiseStatus.status == 'Apply',
                                                        'text-primary':
                                                        dayWiseStatus.status == 'W-off' ||
                                                        dayWiseStatus.status == HOLIDAY
                                                    }"
                                                    [style.backgroundColor]="isBetweenStartAndEndDate(dayWiseStatus.date) ? '#EFEFEF' : 'inherit'">
                                                    {{
                                                    dayWiseStatus.status[0] == "U"
                                                    ? "-"
                                                    : dayWiseStatus.status
                                                    }}
                                                    </td>
                                                </ng-container>
                                             </tr>

                                          </table>
                                       </div>
                                    </td>
                                 </tr>
                                </ng-container>

                                  <div
                                  class="d-flex align-items-center justify-content-between pagination-box w-100 p-3 bg-white border-top"
                                  *ngIf="!isLoadingLeaves && leaves.length > 0 && totalItems >itemPerPage">
                                  <p class="mb-0 p-0">
                                    Showing {{ (currentPage - 1) * itemPerPage + 1 }} -
                                    {{ ((currentPage - 1) * itemPerPage + 1)+(leaves.length-1) }} of {{ totalItems}} Leaves
                                  </p>
                                  <div class="pagition-box p-0">
                                    <ngb-pagination [collectionSize]="totalItems" [(page)]="currentPage" [pageSize]="itemPerPage"
                                      [maxSize]="5" [boundaryLinks]="true" [ellipses]="true"
                                      (pageChange)="onPageChange($event)">
                                    </ngb-pagination>
                                  </div>
                                </div>

                               </tbody>
                            </table>
                         </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<button type="button" class="btn btn-primary d-none" data-bs-toggle="modal" data-bs-target="#leave-request">
    Leave Request
</button>
<div class="modal fade" id="leave-request" tabindex="-1" role="dialog" aria-hidden="true"  data-bs-backdrop="static" data-bs-keyboard="false"
    aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered"  [ngStyle]="{'max-width: 700px': !leave?.attachment,'max-width: 1060px': leave?.attachment}" role="document">
      <div *ngIf="isModalOpen" class="modal-content">
      <app-leave-request
      [data]="leaveData"
      (closeModal)="closeModalHandler($event)"
    ></app-leave-request>
  </div>
    </div>
</div>


<!-- Leave Quota Modal -->
<div *ngIf="showLeaveQuotaModal" class="modal-overlay">
    <div class="modal-container p-0 border-rounded-2">
      <div class="modal-header mb-0">
        <h5 class="mb-0">User Leave Quota Information</h5>
        <button class="close-btn font-24" (click)="closeLeaveQuotaModal()">&times;</button>
      </div>

      <div class="modal-body">
        <div class="info-message border-rounded-2">
          <p class="mb-0">
              🚫 <strong>Note:</strong> The leave quota for <strong>{{userLeaveQuota.category}}</strong> has been fully utilized by the user.
              You can only <strong>reject</strong> this leave request.
          </p>
        </div>
        <div class="quota-details">
          <div class="detail-item border-rounded-2 d-flex alig-items-cennter justify-content-between">
            <span class="label font-13 fw-600 color-basic">👤 User Name:</span>
            <span class="font-13">{{ userLeaveQuota?.userName }}</span>
          </div>
          <div class="detail-item border-rounded-2  d-flex alig-items-cennter justify-content-between">
            <span class="label font-13 fw-600 color-basic">📅 Total Leaves:</span>
            <span class="font-13">{{ userLeaveQuota?.totalAllocatedLeaves }}</span>
          </div>
          <div class="detail-item border-rounded-2 d-flex alig-items-cennter justify-content-between">
            <span class="label  font-13 fw-600 color-basic">✅ Approved Leaves:</span>
            <span class="font-13">{{ userLeaveQuota?.approvedLeaves }}</span>
          </div>
          <div class="detail-item border-rounded-2 d-flex alig-items-cennter justify-content-between">
            <span class="label font-13 fw-600 color-basic">❌ Rejected Leaves:</span>
            <span class="font-13">{{ userLeaveQuota?.rejectedLeaves }}</span>
          </div>
          <div class="detail-item border-rounded-2 d-flex alig-items-cennter justify-content-between">
            <span class="label font-13 fw-600 color-basic">🕒 Remaining Leaves:</span>
            <span class="font-13">{{ userLeaveQuota?.remainingLeaves }}</span>
          </div>
        </div>
      </div>

      <div class="modal-footer border-top mt-0">
        <button class="btn cancel-btn font-13 fw-semibold mt-0" (click)="closeLeaveQuotaModal()">Cancel</button>
      </div>
    </div>
  </div>




