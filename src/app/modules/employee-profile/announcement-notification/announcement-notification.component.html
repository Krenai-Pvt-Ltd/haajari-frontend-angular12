<div class="m-3 mt-3 assets-detail mb-4">
    <div class="employee-assets">
        <div class="d-flex align-items-center justify-content-between d-none-md">
            <h5 class="font-18 ">Latest Updates</h5>
        </div>


        <!-- desktop notification  -->
        <div class="mt-3 desktop-notification" *ngIf="mailList.length>0 || mailLoading">
            <div class="notification">
                <div class="d-flex align-items-center gap-2">
                    <button class="btn assets-request" (click)="markMailAsReadAll('mail')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 25 25" fill="none">
                            <mask id="mask0_5653_2453" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0"
                                width="25" height="25">
                                <rect x="0.5" y="0.5" width="24" height="24" fill="#D9D9D9" />
                            </mask>
                            <g mask="url(#mask0_5653_2453)">
                                <path
                                    d="M12.0079 22.5C11.4694 22.5 11.0084 22.3042 10.625 21.9125C10.2415 21.5208 10.0498 21.05 10.0498 20.5H13.966C13.966 21.05 13.7743 21.5208 13.3908 21.9125C13.0073 22.3042 12.5464 22.5 12.0079 22.5ZM4.17542 19.5V17.5H6.13353V10.5C6.13353 9.11667 6.54147 7.8875 7.35735 6.8125C8.17323 5.7375 9.23388 5.03333 10.5393 4.7V4C10.5393 3.58333 10.6821 3.22917 10.9676 2.9375C11.2532 2.64583 11.5999 2.5 12.0079 2.5C12.4158 2.5 12.7626 2.64583 13.0481 2.9375C13.3337 3.22917 13.4765 3.58333 13.4765 4V4.325C13.297 4.69167 13.1664 5.06667 13.0848 5.45C13.0033 5.83333 12.9706 6.225 12.9869 6.625C12.8238 6.59167 12.6647 6.5625 12.5096 6.5375C12.3546 6.5125 12.1874 6.5 12.0079 6.5C10.9309 6.5 10.009 6.89167 9.24204 7.675C8.47511 8.45833 8.09165 9.4 8.09165 10.5V17.5H15.9241V11.075C16.2178 11.2083 16.5319 11.3125 16.8664 11.3875C17.201 11.4625 17.5396 11.5 17.8822 11.5V17.5H19.8403V19.5H4.17542ZM17.8822 9.5C17.0663 9.5 16.3728 9.20833 15.8017 8.625C15.2306 8.04167 14.945 7.33333 14.945 6.5C14.945 5.66667 15.2306 4.95833 15.8017 4.375C16.3728 3.79167 17.0663 3.5 17.8822 3.5C18.6981 3.5 19.3916 3.79167 19.9627 4.375C20.5338 4.95833 20.8194 5.66667 20.8194 6.5C20.8194 7.33333 20.5338 8.04167 19.9627 8.625C19.3916 9.20833 18.6981 9.5 17.8822 9.5Z"
                                    fill="#1C1B1F" />
                            </g>
                        </svg>
                        Mark All as Read
                    </button>
                    <button class="btn assets-request" (click)="reload('mail')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none">
                            <mask id="mask0_5653_2460" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0"
                                width="25" height="24">
                                <rect x="0.5" width="24" height="24" fill="#D9D9D9" />
                            </mask>
                            <g mask="url(#mask0_5653_2460)">
                                <path
                                    d="M12.5 20C10.2667 20 8.375 19.225 6.825 17.675C5.275 16.125 4.5 14.2333 4.5 12C4.5 9.76667 5.275 7.875 6.825 6.325C8.375 4.775 10.2667 4 12.5 4C13.65 4 14.75 4.2375 15.8 4.7125C16.85 5.1875 17.75 5.86667 18.5 6.75V4H20.5V11H13.5V9H17.7C17.1667 8.06667 16.4375 7.33333 15.5125 6.8C14.5875 6.26667 13.5833 6 12.5 6C10.8333 6 9.41667 6.58333 8.25 7.75C7.08333 8.91667 6.5 10.3333 6.5 12C6.5 13.6667 7.08333 15.0833 8.25 16.25C9.41667 17.4167 10.8333 18 12.5 18C13.7833 18 14.9417 17.6333 15.975 16.9C17.0083 16.1667 17.7333 15.2 18.15 14H20.25C19.7833 15.7667 18.8333 17.2083 17.4 18.325C15.9667 19.4417 14.3333 20 12.5 20Z"
                                    fill="#1C1B1F" />
                            </g>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="notification-message mt-3">
                <div *ngIf="mailLoading; else notificationList" class="shimmer-wrapper">
                    <!-- Shimmer Effect Template -->
                    <div class="shimmer-item d-flex align-items-center gap-3 p-3 border-bottom" *ngFor="let item of [].constructor(10)">
                        <div class="shimmer" style="width:15%; height: 15px;"></div>
                        <div class="shimmer" style="width:75%; height: 15px;"></div>
                        <div class="shimmer" style="width:10%; height: 15px;"></div>
                    </div>
                </div>
                <ng-template #notificationList>
                    <!-- Actual Notification List -->
                    <div *ngFor="let mail of mailList" class="d-flex align-items-center gap-3 p-3 border-bottom pointer"
                        [ngClass]="{'bg-light': !mail.isRead}" (click)="readNotification(mail)">
                        <div style="width:15%">
                            <h6 class="mb-0">{{ mail.title }}</h6>
                        </div>
                        <div style="width:75%">
                            <p class="mb-0">
                                {{ mail.message }}
                            </p>
                        </div>
                        <div style="width:10%" class="text-end d-flex align-items-center gap-2 justify-content-end">
                            <div *ngIf="!mail.isRead" class="new-notification"></div>
                            <span class="mb-0">{{ getTimeAgo(mail.createdDate.toLocaleString()) }}</span>
                        </div>
                    </div>
                </ng-template>
            </div>

            <div *ngIf="(totalMailNotification-1)/databaseHelper.itemPerPage > 0"
                class="d-flex align-items-center justify-content-between pagination-box-profile p-3 bg-white border-top">
                <!-- Ngb Pagination Component -->
                <p class="mb-0">
                    Showing items
                    {{ (databaseHelper.currentPage - 1) * databaseHelper.itemPerPage + 1 }} –
                    {{ Math.min(databaseHelper.currentPage * databaseHelper.itemPerPage, totalMailNotification) }}
                    of {{ totalMailNotification }} records
                </p>
                <ngb-pagination class="pagition-box" [collectionSize]="totalMailNotification" [rotate]="true"
                    (pageChange)="pageChanged($event)" [pageSize]="this.databaseHelper.itemPerPage"
                    [(page)]="this.databaseHelper.currentPage" [maxSize]="5" [boundaryLinks]="true">
                </ngb-pagination>
            </div>
        </div>
         <!-- desktop notification end -->


          <!-- mobile notification  -->
        <div class="mobile-notification" *ngIf="mailList.length>0 || mailLoading">
            <div class="d-flex align-items-center justify-content-between">
                <button class="btn assets-request" (click)="markMailAsReadAll('mail')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 25 25" fill="none">
                        <mask id="mask0_5653_2453" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0"
                            width="25" height="25">
                            <rect x="0.5" y="0.5" width="24" height="24" fill="#D9D9D9" />
                        </mask>
                        <g mask="url(#mask0_5653_2453)">
                            <path
                                d="M12.0079 22.5C11.4694 22.5 11.0084 22.3042 10.625 21.9125C10.2415 21.5208 10.0498 21.05 10.0498 20.5H13.966C13.966 21.05 13.7743 21.5208 13.3908 21.9125C13.0073 22.3042 12.5464 22.5 12.0079 22.5ZM4.17542 19.5V17.5H6.13353V10.5C6.13353 9.11667 6.54147 7.8875 7.35735 6.8125C8.17323 5.7375 9.23388 5.03333 10.5393 4.7V4C10.5393 3.58333 10.6821 3.22917 10.9676 2.9375C11.2532 2.64583 11.5999 2.5 12.0079 2.5C12.4158 2.5 12.7626 2.64583 13.0481 2.9375C13.3337 3.22917 13.4765 3.58333 13.4765 4V4.325C13.297 4.69167 13.1664 5.06667 13.0848 5.45C13.0033 5.83333 12.9706 6.225 12.9869 6.625C12.8238 6.59167 12.6647 6.5625 12.5096 6.5375C12.3546 6.5125 12.1874 6.5 12.0079 6.5C10.9309 6.5 10.009 6.89167 9.24204 7.675C8.47511 8.45833 8.09165 9.4 8.09165 10.5V17.5H15.9241V11.075C16.2178 11.2083 16.5319 11.3125 16.8664 11.3875C17.201 11.4625 17.5396 11.5 17.8822 11.5V17.5H19.8403V19.5H4.17542ZM17.8822 9.5C17.0663 9.5 16.3728 9.20833 15.8017 8.625C15.2306 8.04167 14.945 7.33333 14.945 6.5C14.945 5.66667 15.2306 4.95833 15.8017 4.375C16.3728 3.79167 17.0663 3.5 17.8822 3.5C18.6981 3.5 19.3916 3.79167 19.9627 4.375C20.5338 4.95833 20.8194 5.66667 20.8194 6.5C20.8194 7.33333 20.5338 8.04167 19.9627 8.625C19.3916 9.20833 18.6981 9.5 17.8822 9.5Z"
                                fill="#1C1B1F" />
                        </g>
                    </svg>
                    Mark All as Read
                </button>
                <button class="btn assets-request" (click)="reload('mail')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none">
                        <mask id="mask0_5653_2460" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0"
                            width="25" height="24">
                            <rect x="0.5" width="24" height="24" fill="#D9D9D9" />
                        </mask>
                        <g mask="url(#mask0_5653_2460)">
                            <path
                                d="M12.5 20C10.2667 20 8.375 19.225 6.825 17.675C5.275 16.125 4.5 14.2333 4.5 12C4.5 9.76667 5.275 7.875 6.825 6.325C8.375 4.775 10.2667 4 12.5 4C13.65 4 14.75 4.2375 15.8 4.7125C16.85 5.1875 17.75 5.86667 18.5 6.75V4H20.5V11H13.5V9H17.7C17.1667 8.06667 16.4375 7.33333 15.5125 6.8C14.5875 6.26667 13.5833 6 12.5 6C10.8333 6 9.41667 6.58333 8.25 7.75C7.08333 8.91667 6.5 10.3333 6.5 12C6.5 13.6667 7.08333 15.0833 8.25 16.25C9.41667 17.4167 10.8333 18 12.5 18C13.7833 18 14.9417 17.6333 15.975 16.9C17.0083 16.1667 17.7333 15.2 18.15 14H20.25C19.7833 15.7667 18.8333 17.2083 17.4 18.325C15.9667 19.4417 14.3333 20 12.5 20Z"
                                fill="#1C1B1F" />
                        </g>
                    </svg>
                </button>
            </div>
            <div class="notifaction-list border mt-3" [ngClass]="{'bg-light': !mail.isRead}" (click)="readNotification(mail)" *ngFor="let mail of mailList">
                <div class="d-flex align-items-center justify-content-between p-3 border-bottom bg-light">
                    <div class="d-flex align-items-center gap-2">
                        <span class="notification-name d-flex align-items-center justify-content-center fw-semibold font-12 fw-600 text-uppercase"
                        [ngClass]="{
                            'attendance-notification': mail.title.includes('Attendance'),
                            'onboarding-notification': mail.title.includes('Onboarding') ||  mail.title.includes('Welcome'),
                            'resignation-notification': mail.title.includes('Resignation'),
                            'profile-notification': mail.title.includes('Profile'),
                            'overtime-notification': mail.title.includes('Overtime'),
                            'leave-notification': mail.title.includes('Leave'),
                            'expense-notification': mail.title.includes('Expense'),
                            'assets-notification': mail.title.includes('Asset'),
                            'shift-notification': mail.title.includes('Shift')
                        }"> {{ mail.title.slice(0, 2) }} </span>
                        <h5 class="mb-0 font-13 fw-semibold">{{ mail.title }}</h5>
                    </div>

                    <div class="d-flex align-items-center gap-2">
                        <div *ngIf="!mail.isRead" class="new-notification"></div>
                        <span class="mb-0 fw-semibold font-12">{{ getTimeAgo(mail.createdDate.toLocaleString()) }}</span>
                    </div>
                </div>
                <p class="mb-0 font-13 fw-normal p-3">{{ mail.message }} </p>
            </div>

            <div *ngIf="(totalMailNotification-1)/databaseHelper.itemPerPage > 0"
                class="d-flex align-items-center justify-content-between pagination-box-profile p-3 bg-white border-top">
                <!-- Ngb Pagination Component -->
                <p class="mb-0">
                    Showing items
                    {{ (databaseHelper.currentPage - 1) * databaseHelper.itemPerPage + 1 }} –
                    {{ Math.min(databaseHelper.currentPage * databaseHelper.itemPerPage, totalMailNotification) }}
                    of {{ totalMailNotification }} records
                </p>
                <ngb-pagination class="pagition-box" [collectionSize]="totalMailNotification" [rotate]="true"
                    (pageChange)="pageChanged($event)" [pageSize]="this.databaseHelper.itemPerPage"
                    [(page)]="this.databaseHelper.currentPage" [maxSize]="5" [boundaryLinks]="true">
                </ngb-pagination>
            </div>



        </div>
         <!-- mobile notification end--->

        <div class="mt-3" *ngIf="(mailList.length==0 && !mailLoading)">
            <div class="empty-file" style="margin-top: 20%; margin-bottom: 20%">
                <nz-empty nzNotFoundImage="assets/images/no-data-found-img.svg" [nzNotFoundContent]="contentTpl">
                    <ng-template #contentTpl>
                        <p class="mb-1 empty-detail">No data for now</p>
                    </ng-template>
                </nz-empty>
            </div>
        </div>
    </div>
</div>




<button type="button" class="btn btn-primary d-none" data-bs-toggle="modal" data-bs-target="#notification-readmore">
    Onboarding
</button>

<!-- Modal -->
<div class="modal fade" id="notification-readmore" tabindex="-1" role="dialog" #assetRequestModal aria-hidden="true"
    aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog read-notification" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">{{ notification.title }}</h5>
                <button type="button" class="close-btn" data-bs-dismiss="modal" aria-label="Close" #closeButton>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <mask id="mask0_5037_2014" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0"
                            width="24" height="24">
                            <rect width="24" height="24" fill="#D9D9D9" />
                        </mask>
                        <g mask="url(#mask0_5037_2014)">
                            <path
                                d="M6.4 19L5 17.6L10.6 12L5 6.4L6.4 5L12 10.6L17.6 5L19 6.4L13.4 12L19 17.6L17.6 19L12 13.4L6.4 19Z"
                                fill="black" />
                        </g>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="notification-detail">
                    <div class="d-flex align-items-center gap-2 mb-4 notification-heading">
                        <img src="assets/images/user.png" style="width:50px;">
                        <div class="">
                            <h5 class="mb-1">{{apiResponse?.approvedBy || 'HR'}} <span
                                    class="created-announcement">Created an Announcement</span></h5>
                            <h6 class="mb-0">{{ getTimeAgo(notification.createdDate) }}</h6>
                        </div>
                    </div>
                    <h5 class="mb-4" *ngIf="!Constant.EMPTY_STRINGS.includes(apiResponse?.status)"><span
                            class="fw-semibold"> Status: </span> <span class="badge rounded-pill"
                            [ngClass]="{
                        'badge-soft-warning': apiResponse.status == 'PENDING', 'badge-soft-success': apiResponse.status == 'APPROVED', 'badge-soft-danger': apiResponse.status == 'REJECTED'}">
                            {{apiResponse?.status}} </span> </h5>
                    <h5 class="mb-3">{{ notification.message }}</h5>
                    <p class="mb-4 font-13" *ngIf="!Constant.EMPTY_STRINGS.includes(apiResponse?.createdDate)"><span
                            class="fw-semibold"> Requested On : </span> {{this.apiResponse?.createdDate | date :
                        'short'}} </p>
                    <p class="mb-4 font-13" *ngIf="!Constant.EMPTY_STRINGS.includes(apiResponse?.updatedDate)"><span
                            class="fw-semibold"> Action Taken On : </span> {{this.apiResponse?.updatedDate | date :
                        'short'}} </p>
                    <p class="mb-4 font-13" *ngIf="!Constant.EMPTY_STRINGS.includes(apiResponse?.startDate)"> <span
                            class="fw-semibold"> Start Date : </span> {{apiResponse?.startDate | date : 'short'}} </p>
                    <p class="mb-4 font-13" *ngIf="!Constant.EMPTY_STRINGS.includes(apiResponse?.endDate)"><span
                            class="fw-semibold"> End Date : </span> {{apiResponse?.endDate | date : 'short'}} </p>

                    <p class="mb-4 font-13" *ngIf="!Constant.EMPTY_STRINGS.includes(apiResponse?.approvedBy?.name)">
                        <span class="fw-semibold"> {{apiResponse?.status}} by : </span> {{apiResponse?.approvedBy.name}}
                    </p>
                    <p class="mb-4 font-13" *ngIf="!Constant.EMPTY_STRINGS.includes(apiResponse?.optNotes)"><span
                            class="fw-semibold"> Note: </span> {{apiResponse?.optNotes}} </p>
                    <p class="mb-4 font-13" *ngIf="!Constant.EMPTY_STRINGS.includes(apiResponse?.note)"><span
                            class="fw-semibold"> Note: </span> {{apiResponse?.note}} </p>


                </div>
            </div>
        </div>
    </div>
</div>


<!-- Modal -->
<div class="modal fade" id="createAnnouncement" tabindex="-1" role="dialog" #assetRequestModal aria-hidden="true"
    aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Create Announcement</h5>
                <button type="button" class="close-btn" data-bs-dismiss="modal" aria-label="Close" #closeButton>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <mask id="mask0_5037_2014" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0"
                            width="24" height="24">
                            <rect width="24" height="24" fill="#D9D9D9" />
                        </mask>
                        <g mask="url(#mask0_5037_2014)">
                            <path
                                d="M6.4 19L5 17.6L10.6 12L5 6.4L6.4 5L12 10.6L17.6 5L19 6.4L13.4 12L19 17.6L17.6 19L12 13.4L6.4 19Z"
                                fill="black" />
                        </g>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="row register-form-box">
                        <div class="col-md-12 mb-3">
                            <label for="templateName" class="pb-2">
                                Announcement Type
                            </label>
                            <nz-form-control>
                                <nz-select class="form-control" style="width: 100%" nzSize="large"
                                    nzPlaceHolder="Select the announcement" required>
                                    <nz-option [nzValue]="'Announcement'" [nzLabel]="'Announcement'"></nz-option>
                                    <nz-option [nzValue]="'Post'" [nzLabel]="'Post'"></nz-option>
                                    <nz-option [nzValue]="'Poll'" [nzLabel]="'Poll'"></nz-option>
                                </nz-select>
                            </nz-form-control>
                        </div>
                        <div class="col-md-12 mb-3">
                            <label for="templateName" class="pb-2">
                                Template Name
                            </label>
                            <input class="form-control input-zorro" placeholder="Enter template name here"
                                nzSize="large" minlength="3" maxlength="50" name="tempNamed" required />
                        </div>



                        <div class="col-md-12 mb-3">
                            <label for="templateName" class="pb-2">
                                Description
                            </label>
                            <textarea class="form-control nots-section" id="exampleFormControlTextarea1"
                                placeholder="Write description" rows="3"></textarea>
                        </div>





                    </div>
                </form>
            </div>
            <div class="modal-footer d-flex align-items-center justify-content-end gap-2">
                <button class="btn cancel-btn" data-bs-dismiss="modal" aria-label="Close" #closeButton>Cancel</button>
                <button class="btn submitActionBtn">Submit</button>
            </div>
        </div>
    </div>
</div>
