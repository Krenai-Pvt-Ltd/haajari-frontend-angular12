<div class="m-3 doucment-detail">
    <div class="employee-doucument mt-4">
        <div class="employee-doc-box row">

          <ng-container *ngFor="let doc of documents">
          <div class="col-md-3" *ngIf="doc.documentType=='employee_doc'">
            <div *ngIf="doc.documentType=='employee_doc'" class="employee-doc-file p-2">
              <div class="d-flex align-items-center justify-content-between">
                <div class="d-flex align-items-center gap-2">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" fill="none">
                    <mask id="mask0_4843_560" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="18" height="19">
                      <rect y="0.5" width="18" height="18" fill="#454746" />
                    </mask>
                    <g mask="url(#mask0_4843_560)">
                      <path
                        d="M3 15.5C2.5875 15.5 2.23438 15.3531 1.94063 15.0594C1.64688 14.7656 1.5 14.4125 1.5 14V5C1.5 4.5875 1.64688 4.23438 1.94063 3.94063C2.23438 3.64688 2.5875 3.5 3 3.5H7.5L9 5H15C15.4125 5 15.7656 5.14688 16.0594 5.44063C16.3531 5.73438 16.5 6.0875 16.5 6.5V14C16.5 14.4125 16.3531 14.7656 16.0594 15.0594C15.7656 15.3531 15.4125 15.5 15 15.5H3ZM4.5 12.5H10.5V11H4.5V12.5ZM4.5 9.5H13.5V8H4.5V9.5Z"
                        fill="#454746" />
                    </g>
                  </svg>
                  <h5 class="mb-0 font-10">{{ doc.name | titlecase }}</h5>
                </div>
              </div>

              <!-- Conditional rendering -->
              <div *ngIf="!doc.url; else documentUploaded"
                   class="upload-file-input bg-white p-2 mt-2 d-flex align-items-center justify-content-center flex-column">
                <input id="fileSelect" type="file" name="img[]" accept=".xlsx" class="input" (change)="uploadFile($event, doc)">
                <span>
                  <svg xmlns="http://www.w3.org/2000/svg" width="46" height="45" viewBox="0 0 46 45" fill="none">
                    <g clip-path="url(#clip0_4843_1408)">
                      <path
                        d="M12.0151 0H27.0758L39.8253 13.2948V39.1489C39.8253 42.3774 37.2027 45 33.9656 45H12.0152C8.78667 45 6.16406 42.3774 6.16406 39.1489V5.85114C6.16401 2.6226 8.78661 0 12.0151 0Z"
                        fill="#6666F2" />
                      <path opacity="0.302" fill-rule="evenodd" clip-rule="evenodd"
                        d="M27.0625 0V13.191H39.8294L27.0625 0Z" fill="white" />
                      <path
                        d="M28.9285 23.4109H17.0618C16.5165 23.4109 16.0664 22.9695 16.0664 22.4242C16.0664 21.8789 16.5165 21.4375 17.0618 21.4375H28.9285C29.4738 21.4375 29.9152 21.8789 29.9152 22.4242C29.9152 22.9695 29.4738 23.4109 28.9285 23.4109ZM24.9729 35.2776H17.0618C16.5165 35.2776 16.0664 34.8362 16.0664 34.2909C16.0664 33.7456 16.5165 33.3042 17.0618 33.3042H24.9729C25.5183 33.3042 25.9596 33.7456 25.9596 34.2909C25.9596 34.8362 25.5183 35.2776 24.9729 35.2776ZM28.9285 31.322H17.0618C16.5165 31.322 16.0664 30.8806 16.0664 30.3353C16.0664 29.7901 16.5165 29.3486 17.0618 29.3486H28.9285C29.4738 29.3486 29.9152 29.7901 29.9152 30.3353C29.9152 30.8806 29.4738 31.322 28.9285 31.322ZM28.9285 27.3665H17.0618C16.5165 27.3665 16.0664 26.925 16.0664 26.3798C16.0664 25.8345 16.5165 25.3931 17.0618 25.3931H28.9285C29.4738 25.3931 29.9152 25.8345 29.9152 26.3798C29.9152 26.925 29.4738 27.3665 28.9285 27.3665Z"
                        fill="white" />
                    </g>
                    <defs>
                      <clipPath id="clip0_4843_1408">
                        <rect width="45" height="45" fill="white" transform="translate(0.5)" />
                      </clipPath>
                    </defs>
                  </svg>
                </span>
                <button onclick="docType='employee_doc'" class="btn add-file mt-1"> <i class="bi bi-plus-lg"></i> Add File</button>
              </div>

              <!-- Document Uploaded -->
              <ng-template #documentUploaded>
                <div class="upload-file bg-white p-2 mt-2">
                  <img *ngIf="isImage(doc.url)" [src]="doc.url" alt="{{ doc.url }}" style="width: 100%;" (click)="openPdfModel(doc.url)">
                  <div *ngIf="!isImage(doc.url)" (click)="openPdfModel(doc.url)">
                    <i [ngClass]="
                    getFileTypeIcon(
                      doc.url
                    )
                  "></i>
                  </div>
                </div>
              </ng-template>
            </div>
          </div>
        </ng-container>

            <div class="col-md-3">
                <div class="employee-doc-file p-2">
                    <div class="d-flex align-items-center justify-content-between">
                        <div class="d-flex align-items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" fill="none">
                                <mask id="mask0_4997_5278" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0"
                                    width="18" height="19">
                                    <rect y="0.5" width="18" height="18" fill="#D9D9D9" />
                                </mask>
                                <g mask="url(#mask0_4997_5278)">
                                    <path d="M8.25 16.25V10.25H2.25V8.75H8.25V2.75H9.75V8.75H15.75V10.25H9.75V16.25H8.25Z"
                                        fill="#1C1B1F" />
                                </g>
                            </svg>
                            <h5 class="mb-0 font-10">Add Document</h5>
                        </div>
                    </div>
                    <div class="upload-file-input bg-white p-2 mt-2 d-flex align-items-center justify-content-center flex-column pointer"
                        data-bs-toggle="modal" data-bs-target="#addDocument" (click)="setDocType('employee_doc')">
                        <!-- <input id="fileSelect" type="file" name="img[]" accept=".xlsx" class="input"> -->

                        <span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="46" height="45" viewBox="0 0 46 45" fill="none">
                                <g clip-path="url(#clip0_4843_1408)">
                                    <path
                                        d="M12.0151 0H27.0758L39.8253 13.2948V39.1489C39.8253 42.3774 37.2027 45 33.9656 45H12.0152C8.78667 45 6.16406 42.3774 6.16406 39.1489V5.85114C6.16401 2.6226 8.78661 0 12.0151 0Z"
                                        fill="#6666F2" />
                                    <path opacity="0.302" fill-rule="evenodd" clip-rule="evenodd"
                                        d="M27.0625 0V13.191H39.8294L27.0625 0Z" fill="white" />
                                    <path
                                        d="M28.9285 23.4109H17.0618C16.5165 23.4109 16.0664 22.9695 16.0664 22.4242C16.0664 21.8789 16.5165 21.4375 17.0618 21.4375H28.9285C29.4738 21.4375 29.9152 21.8789 29.9152 22.4242C29.9152 22.9695 29.4738 23.4109 28.9285 23.4109ZM24.9729 35.2776H17.0618C16.5165 35.2776 16.0664 34.8362 16.0664 34.2909C16.0664 33.7456 16.5165 33.3042 17.0618 33.3042H24.9729C25.5183 33.3042 25.9596 33.7456 25.9596 34.2909C25.9596 34.8362 25.5183 35.2776 24.9729 35.2776ZM28.9285 31.322H17.0618C16.5165 31.322 16.0664 30.8806 16.0664 30.3353C16.0664 29.7901 16.5165 29.3486 17.0618 29.3486H28.9285C29.4738 29.3486 29.9152 29.7901 29.9152 30.3353C29.9152 30.8806 29.4738 31.322 28.9285 31.322ZM28.9285 27.3665H17.0618C16.5165 27.3665 16.0664 26.925 16.0664 26.3798C16.0664 25.8345 16.5165 25.3931 17.0618 25.3931H28.9285C29.4738 25.3931 29.9152 25.8345 29.9152 26.3798C29.9152 26.925 29.4738 27.3665 28.9285 27.3665Z"
                                        fill="white" />
                                </g>
                                <defs>
                                    <clipPath id="clip0_4843_1408">
                                        <rect width="45" height="45" fill="white" transform="translate(0.5)" />
                                    </clipPath>
                                </defs>
                            </svg>
                        </span>
                        <button onclick="docType='employee_doc'" class="btn add-file mt-1"> <i
                                class="bi bi-plus-lg"></i> Add File</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="employee-doc-box row">
          <ng-container *ngFor="let doc of documents">
          <div class="col-md-3" *ngIf="doc.documentType=='company_doc'">
            <div class="employee-doc-file p-2">
              <div class="d-flex align-items-center justify-content-between">
                <div class="d-flex align-items-center gap-2">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" fill="none">
                    <mask id="mask0_4843_560" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="18" height="19">
                      <rect y="0.5" width="18" height="18" fill="#454746" />
                    </mask>
                    <g mask="url(#mask0_4843_560)">
                      <path
                        d="M3 15.5C2.5875 15.5 2.23438 15.3531 1.94063 15.0594C1.64688 14.7656 1.5 14.4125 1.5 14V5C1.5 4.5875 1.64688 4.23438 1.94063 3.94063C2.23438 3.64688 2.5875 3.5 3 3.5H7.5L9 5H15C15.4125 5 15.7656 5.14688 16.0594 5.44063C16.3531 5.73438 16.5 6.0875 16.5 6.5V14C16.5 14.4125 16.3531 14.7656 16.0594 15.0594C15.7656 15.3531 15.4125 15.5 15 15.5H3ZM4.5 12.5H10.5V11H4.5V12.5ZM4.5 9.5H13.5V8H4.5V9.5Z"
                        fill="#454746" />
                    </g>
                  </svg>
                  <h5 class="mb-0 font-10">{{ doc.name | titlecase }}</h5>
                </div>
              </div>

              <!-- Conditional rendering -->
              <div *ngIf="!doc.url; else documentUploaded"
                   class="upload-file-input bg-white p-2 mt-2 d-flex align-items-center justify-content-center flex-column">
                <input id="fileSelect" type="file" name="img[]" accept="image/jpeg, image/png, image/jpg,  application/pdf" class="input" (change)="uploadFile($event, doc)">
                <span>
                  <svg xmlns="http://www.w3.org/2000/svg" width="46" height="45" viewBox="0 0 46 45" fill="none">
                    <g clip-path="url(#clip0_4843_1408)">
                      <path
                        d="M12.0151 0H27.0758L39.8253 13.2948V39.1489C39.8253 42.3774 37.2027 45 33.9656 45H12.0152C8.78667 45 6.16406 42.3774 6.16406 39.1489V5.85114C6.16401 2.6226 8.78661 0 12.0151 0Z"
                        fill="#6666F2" />
                      <path opacity="0.302" fill-rule="evenodd" clip-rule="evenodd"
                        d="M27.0625 0V13.191H39.8294L27.0625 0Z" fill="white" />
                      <path
                        d="M28.9285 23.4109H17.0618C16.5165 23.4109 16.0664 22.9695 16.0664 22.4242C16.0664 21.8789 16.5165 21.4375 17.0618 21.4375H28.9285C29.4738 21.4375 29.9152 21.8789 29.9152 22.4242C29.9152 22.9695 29.4738 23.4109 28.9285 23.4109ZM24.9729 35.2776H17.0618C16.5165 35.2776 16.0664 34.8362 16.0664 34.2909C16.0664 33.7456 16.5165 33.3042 17.0618 33.3042H24.9729C25.5183 33.3042 25.9596 33.7456 25.9596 34.2909C25.9596 34.8362 25.5183 35.2776 24.9729 35.2776ZM28.9285 31.322H17.0618C16.5165 31.322 16.0664 30.8806 16.0664 30.3353C16.0664 29.7901 16.5165 29.3486 17.0618 29.3486H28.9285C29.4738 29.3486 29.9152 29.7901 29.9152 30.3353C29.9152 30.8806 29.4738 31.322 28.9285 31.322ZM28.9285 27.3665H17.0618C16.5165 27.3665 16.0664 26.925 16.0664 26.3798C16.0664 25.8345 16.5165 25.3931 17.0618 25.3931H28.9285C29.4738 25.3931 29.9152 25.8345 29.9152 26.3798C29.9152 26.925 29.4738 27.3665 28.9285 27.3665Z"
                        fill="white" />
                    </g>
                    <defs>
                      <clipPath id="clip0_4843_1408">
                        <rect width="45" height="45" fill="white" transform="translate(0.5)" />
                      </clipPath>
                    </defs>
                  </svg>
                </span>
                <button class="btn add-file mt-1"> <i class="bi bi-plus-lg"></i> Add File</button>
              </div>

              <!-- Document Uploaded -->
              <ng-template #documentUploaded>
                <div class="upload-file bg-white p-2 mt-2">
                  <img *ngIf="isImage(doc.url)" [src]="doc.url" alt="{{ doc.url }}" style="width: 100%;" (click)="openPdfModel(doc.url)">
                  <div *ngIf="!isImage(doc.url)" class="icon-preview" (click)="openPdfModel(doc.url)">
                    <i [ngClass]="
                    getFileTypeIcon(
                      doc.url
                    )
                  "></i>
                  </div>
                </div>
              </ng-template>
            </div>
          </div>
        </ng-container>

            <div class="col-md-3">
                <div class="employee-doc-file p-2">
                    <div class="d-flex align-items-center justify-content-between">
                        <div class="d-flex align-items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewBox="0 0 18 19" fill="none">
                                <mask id="mask0_4997_5278" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0"
                                    width="18" height="19">
                                    <rect y="0.5" width="18" height="18" fill="#D9D9D9" />
                                </mask>
                                <g mask="url(#mask0_4997_5278)">
                                    <path d="M8.25 16.25V10.25H2.25V8.75H8.25V2.75H9.75V8.75H15.75V10.25H9.75V16.25H8.25Z"
                                        fill="#1C1B1F" />
                                </g>
                            </svg>
                            <h5 class="mb-0 font-10">Add Document</h5>
                        </div>
                    </div>
                    <div class="upload-file-input bg-white p-2 mt-2 d-flex align-items-center justify-content-center flex-column pointer" data-bs-toggle="modal" data-bs-target="#addDocument" (click)="setDocType('company_doc')">
                        <!-- <input id="fileSelect" type="file" name="img[]" accept=".xlsx" class="input"> -->

                        <span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="46" height="45" viewBox="0 0 46 45" fill="none">
                                <g clip-path="url(#clip0_4843_1408)">
                                    <path
                                        d="M12.0151 0H27.0758L39.8253 13.2948V39.1489C39.8253 42.3774 37.2027 45 33.9656 45H12.0152C8.78667 45 6.16406 42.3774 6.16406 39.1489V5.85114C6.16401 2.6226 8.78661 0 12.0151 0Z"
                                        fill="#6666F2" />
                                    <path opacity="0.302" fill-rule="evenodd" clip-rule="evenodd"
                                        d="M27.0625 0V13.191H39.8294L27.0625 0Z" fill="white" />
                                    <path
                                        d="M28.9285 23.4109H17.0618C16.5165 23.4109 16.0664 22.9695 16.0664 22.4242C16.0664 21.8789 16.5165 21.4375 17.0618 21.4375H28.9285C29.4738 21.4375 29.9152 21.8789 29.9152 22.4242C29.9152 22.9695 29.4738 23.4109 28.9285 23.4109ZM24.9729 35.2776H17.0618C16.5165 35.2776 16.0664 34.8362 16.0664 34.2909C16.0664 33.7456 16.5165 33.3042 17.0618 33.3042H24.9729C25.5183 33.3042 25.9596 33.7456 25.9596 34.2909C25.9596 34.8362 25.5183 35.2776 24.9729 35.2776ZM28.9285 31.322H17.0618C16.5165 31.322 16.0664 30.8806 16.0664 30.3353C16.0664 29.7901 16.5165 29.3486 17.0618 29.3486H28.9285C29.4738 29.3486 29.9152 29.7901 29.9152 30.3353C29.9152 30.8806 29.4738 31.322 28.9285 31.322ZM28.9285 27.3665H17.0618C16.5165 27.3665 16.0664 26.925 16.0664 26.3798C16.0664 25.8345 16.5165 25.3931 17.0618 25.3931H28.9285C29.4738 25.3931 29.9152 25.8345 29.9152 26.3798C29.9152 26.925 29.4738 27.3665 28.9285 27.3665Z"
                                        fill="white" />
                                </g>
                                <defs>
                                    <clipPath id="clip0_4843_1408">
                                        <rect width="45" height="45" fill="white" transform="translate(0.5)" />
                                    </clipPath>
                                </defs>
                            </svg>
                        </span>

                        <button type="button" class="btn add-file mt-1">
                           <i class="bi bi-plus-lg"></i> Add File
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<button type="button" class="btn btn-primary d-none" data-bs-toggle="modal" data-bs-target="#showImageModal"
        #openViewModal id="openViewModal"></button>
      <div class="modal blur-bg-2" id="showImageModal" tabindex="-1" data-bs-keyboard="false"
        aria-labelledby="shareModalLabel1" aria-hidden="true">
        <div class="modal-dialog modal-xl">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">
                <!-- {{ transform(nextOpenDocName) }} -->
                {{ isPDF ? "PDF" : "Image" }}
              </h5>
            </div>
            <div class="modal-body text-center" style="overflow: scroll; min-height: 450px">
              <iframe *ngIf="isPDF" class="nest" [src]="previewString" style="width: 100%; height: 100vh"
                frameborder="0"></iframe>
              <img *ngIf="isImage2" style="width: -webkit-fill-available" [src]="previewString" alt="" />
            </div>
            <div class="modal-footer d-flex align-items-center justify-content-end gap-3">
              <button type="button" class="btn btn-de-secondary" data-bs-dismiss="modal" aria-label="Close"> Cancel
              </button>
              <button class="btn btn-primary" type="submit" aria-label="Next Step"
                (click)="downloadSingleImage(downloadString.toString())">
                <span>
                  <i class="bi bi-download"></i> Download </span>
              </button>
            </div>
          </div>
        </div>
      </div>

<!-- Button trigger modal -->
<button type="button" class="btn btn-primary d-none" data-toggle="modal" data-target="#addDocument">
    Apply for a leave
</button>

<!-- Modal -->
<div class="modal fade" id="addDocument" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Add Document</h5>
                <button type="button" class="close-btn" data-bs-dismiss="modal" aria-label="Close" #closeButton>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <mask id="mask0_5037_2014" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0"
                            width="24" height="24">
                            <rect width="24" height="24" fill="#D9D9D9" />
                        </mask>
                        <g mask="url(#mask0_5037_2014)">
                            <path
                                d="M6.4 19L5 17.6L10.6 12L5 6.4L6.4 5L12 10.6L17.6 5L19 6.4L13.4 12L19 17.6L17.6 19L12 13.4L6.4 19Z"
                                fill="black" />
                        </g>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
              <div class="assets-request-form">
                <form>
                  <div class="row register-form-box">
                    <div class="col-md-12 mb-3">
                      <div class="form-group">
                        <label for="documentName" class="mb-2">Document Name</label>
                        <input
                          type="text"
                          class="form-control"
                          id="documentName"
                          placeholder="Enter document name"
                          [(ngModel)]="doc.name"
                          name="documentName"
                        />
                      </div>
                    </div>
                    <div class="col-md-12">
                      <div class="form-group">
                        <label for="fileInput" class="mb-2">Attach File</label>
                        <div
                          class="upload-file-input p-2 d-flex align-items-center justify-content-center flex-column add-other-file"
                        >
                          <input
                            id="fileInput"
                            type="file"
                            name="file"
                            accept=".xlsx,.pdf,.docx"
                            class="input"
                            (change)="onFileSelected($event)"
                          />
                          <span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="46" height="45" viewBox="0 0 46 45" fill="none">
                                <g clip-path="url(#clip0_4843_1408)">
                                    <path
                                        d="M12.0151 0H27.0758L39.8253 13.2948V39.1489C39.8253 42.3774 37.2027 45 33.9656 45H12.0152C8.78667 45 6.16406 42.3774 6.16406 39.1489V5.85114C6.16401 2.6226 8.78661 0 12.0151 0Z"
                                        fill="#6666F2" />
                                    <path opacity="0.302" fill-rule="evenodd" clip-rule="evenodd"
                                        d="M27.0625 0V13.191H39.8294L27.0625 0Z" fill="white" />
                                    <path
                                        d="M28.9285 23.4109H17.0618C16.5165 23.4109 16.0664 22.9695 16.0664 22.4242C16.0664 21.8789 16.5165 21.4375 17.0618 21.4375H28.9285C29.4738 21.4375 29.9152 21.8789 29.9152 22.4242C29.9152 22.9695 29.4738 23.4109 28.9285 23.4109ZM24.9729 35.2776H17.0618C16.5165 35.2776 16.0664 34.8362 16.0664 34.2909C16.0664 33.7456 16.5165 33.3042 17.0618 33.3042H24.9729C25.5183 33.3042 25.9596 33.7456 25.9596 34.2909C25.9596 34.8362 25.5183 35.2776 24.9729 35.2776ZM28.9285 31.322H17.0618C16.5165 31.322 16.0664 30.8806 16.0664 30.3353C16.0664 29.7901 16.5165 29.3486 17.0618 29.3486H28.9285C29.4738 29.3486 29.9152 29.7901 29.9152 30.3353C29.9152 30.8806 29.4738 31.322 28.9285 31.322ZM28.9285 27.3665H17.0618C16.5165 27.3665 16.0664 26.925 16.0664 26.3798C16.0664 25.8345 16.5165 25.3931 17.0618 25.3931H28.9285C29.4738 25.3931 29.9152 25.8345 29.9152 26.3798C29.9152 26.925 29.4738 27.3665 28.9285 27.3665Z"
                                        fill="white" />
                                </g>
                                <defs>
                                    <clipPath id="clip0_4843_1408">
                                        <rect width="45" height="45" fill="white" transform="translate(0.5)" />
                                    </clipPath>
                                </defs>
                            </svg>
                        </span>
                          <button
                            type="button"
                            class="btn add-file mt-2 font-14"
                          >
                            <i class="bi bi-plus-lg"></i>{{doc.fileName!=''? doc.fileName : 'Add File' }}
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn cancel-btn"
                data-bs-dismiss="modal"
              >
                Cancel
              </button>
              <button
                type="button"
                class="btn submitActionBtn"
                [disabled]="isLoading"
                (click)="onSubmit()"
              >
                <span *ngIf="!isLoading">Submit</span>
                <div class="dot-opacity-loader" *ngIf="isLoading">
                  <span></span>
                  <span></span>
                  <span></span>
                </div>
              </button>
            </div>

        </div>
    </div>
</div>
