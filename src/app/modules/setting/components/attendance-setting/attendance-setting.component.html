<div class="page-wrapper">
  <!-- Page Content-->
  <div class="page-content-tab">
    <div class="container-fluid">
      <div class="company-settinh">
        <div class="row mt-3">
          <div class="col-md-4">
            <div class="form-roe-data">
              <h5>Attendance Mode</h5>
              <p>This will be displayed on your profile.</p>
            </div>
          </div>
          <div class="col-md-7">
            <div class="row mb-3">
              <ng-container
                *ngIf="
                  isShimmer &&
                    attendanceModeList.length === 0 &&
                    !dataNotFoundPlaceholder &&
                    !networkConnectionErrorPlaceHolder;
                  else attendanceModeData
                "
              >
                <div class="row">
                  <div class="col-md-12">
                    <div class="attendance-settin-list mb-3">
                      <ngx-shimmer-loading
                        [width]="'100%'"
                        [height]="'60px'"
                        style="border-radius: 50%"
                      ></ngx-shimmer-loading>
                    </div>
                    <div class="attendance-settin-list mb-3">
                      <ngx-shimmer-loading
                        [width]="'100%'"
                        [height]="'60px'"
                        style="border-radius: 50%"
                      ></ngx-shimmer-loading>
                    </div>
                    <div class="attendance-settin-list mb-3">
                      <ngx-shimmer-loading
                        [width]="'100%'"
                        [height]="'60px'"
                        style="border-radius: 50%"
                      ></ngx-shimmer-loading>
                    </div>
                  </div>
                </div>
              </ng-container>
              <ng-template #attendanceModeData>
                <div
                  class="attendance-settin-list"
                  *ngFor="let attendanceMode of attendanceModeList"
                >
                  <div
                    class="categryCustomizecard p-3 d-flex pointer align-items-center gap-2 bg-white"
                    [ngClass]="{
                      'attendance-active':
                        attendanceMode.id === selectedAttendanceModeId
                    }"
                    (click)="updateAttendanceModeMethodCall(attendanceMode.id)"
                  >
                    <div class="categryCustomizeinfo">
                      <label
                        for="customizecategory1"
                        class="mb-0 pointer d-block"
                      >
                        <h3>{{ attendanceMode.name }}</h3>
                        <p>{{ attendanceMode.description }}</p>
                      </label>
                    </div>
                    <div
                      class="active-check"
                      *ngIf="attendanceMode.id === selectedAttendanceModeId"
                    >
                      <i class="bi bi-check2"></i>
                    </div>
                  </div>
                </div>
              </ng-template>
            </div>
          </div>
          <div class="col-md-12">
            <div class="border-box"></div>
          </div>
          <div class="col-md-4 mt-3 mb-3">
            <div class="form-roe-data">
              <h5>Shift Settings</h5>
              <p>A quick snapshot of your company.</p>
            </div>
            <div class="total-shifts p-3 mt-4">
              <div class="d-flex align-items-center justify-content-between">
                <div>
                  <h6 class="text-truncate">Total Shifts</h6>
                  <h4 class="mt-3 fw-bold">{{ totalShiftCount }}</h4>
                </div>
                <span
                  class="total-user-icon d-flex align-items-center justify-content-center"
                >
                  <img src="assets/images/total-user-icon.svg" />
                </span>
              </div>
              <div class="mt-3">
                <div
                  class="d-flex align-items-center justify-content-between mb-3"
                  *ngIf="shiftCounts.dayShiftCount != 0"
                >
                  <small class="text-muted">Day Shifts</small>
                  <small class="text-muted">{{
                    shiftCounts.dayShiftCount || 0
                  }}</small>
                </div>
                <div
                  class="d-flex align-items-center justify-content-between mb-3"
                  *ngIf="shiftCounts.nightShiftCount != 0"
                >
                  <small class="text-muted">Night Shifts</small>
                  <small class="text-muted">{{
                    shiftCounts.nightShiftCount || 0
                  }}</small>
                </div>
                <div
                  class="d-flex align-items-center justify-content-between"
                  *ngIf="shiftCounts.rotationalShiftCount != 0"
                >
                  <small class="text-muted">Rotational Shifts</small>
                  <small class="text-muted">{{
                    shiftCounts.rotationalShiftCount || 0
                  }}</small>
                </div>
              </div>
            </div>
          </div>
          <!-- {{ dataNotFoundPlaceholder }} {{ isShimmer }} -->
          <div class="col-md-7 mt-3 mb-3">
            <ng-container
              *ngIf="
                isShimmer &&
                  organizationShiftTimingWithShiftTypeResponseList.length ===
                    0 &&
                  !dataNotFoundPlaceholder &&
                  !networkConnectionErrorPlaceHolder;
                else organizationShiftTimingWithShiftTypeData
              "
            >
              <div class="">
                <div class="text-end">
                  <ngx-shimmer-loading
                    [width]="'40%'"
                    [height]="'20px'"
                    style="border-radius: 50%"
                  ></ngx-shimmer-loading>
                </div>
              </div>
              <div
                class="mt-3"
                style="
                  border: 1px solid #f5f5f5;
                  padding: 5px;
                  border-radius: 6px;
                "
              >
                <div
                  class="row"
                  style="
                    border-bottom: 1px solid #f5f5f5;
                    padding-top: 10px;
                    padding-bottom: 10px;
                  "
                >
                  <div class="col-md-4">
                    <div class="">
                      <ngx-shimmer-loading
                        [width]="'100%'"
                        [height]="'20px'"
                        style="border-radius: 50%"
                      ></ngx-shimmer-loading>
                    </div>
                  </div>
                </div>
                <div class="row mt-3">
                  <div class="col-md-3">
                    <div class="">
                      <ngx-shimmer-loading
                        [width]="'100%'"
                        [height]="'20px'"
                        style="border-radius: 50%"
                      ></ngx-shimmer-loading>
                    </div>
                  </div>
                </div>
                <div class="row mt-3">
                  <div class="col-md-4">
                    <div class="">
                      <ngx-shimmer-loading
                        [width]="'100%'"
                        [height]="'30px'"
                        style="border-radius: 50%"
                      ></ngx-shimmer-loading>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="">
                      <ngx-shimmer-loading
                        [width]="'100%'"
                        [height]="'30px'"
                        style="border-radius: 50%"
                      ></ngx-shimmer-loading>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="">
                      <ngx-shimmer-loading
                        [width]="'100%'"
                        [height]="'30px'"
                        style="border-radius: 50%"
                      ></ngx-shimmer-loading>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="">
                      <ngx-shimmer-loading
                        [width]="'100%'"
                        [height]="'30px'"
                        style="border-radius: 50%"
                      ></ngx-shimmer-loading>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="">
                      <ngx-shimmer-loading
                        [width]="'100%'"
                        [height]="'30px'"
                        style="border-radius: 50%"
                      ></ngx-shimmer-loading>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="">
                      <ngx-shimmer-loading
                        [width]="'100%'"
                        [height]="'30px'"
                        style="border-radius: 50%"
                      ></ngx-shimmer-loading>
                    </div>
                  </div>
                </div>
              </div>
            </ng-container>
            <ng-template #organizationShiftTimingWithShiftTypeData>
              <ng-container
                *ngIf="
                  organizationShiftTimingWithShiftTypeResponseList.length !==
                    0 &&
                    !dataNotFoundPlaceholder &&
                    !networkConnectionErrorPlaceHolder;
                  else errorInFetchingOrganizationShiftTimingData">
                <div class="add-shift-main-box">
                  <div class="add-shift-box d-flex align-items-center justify-content-between p-3 pt-2 pb-2">
                    <div class="">
                      <h6 class="text-truncate mb-0">Shifts</h6>
                    </div>
                    <div class="">
                      <a
                        class="add-shift-time-btn"
                        data-bs-toggle="modal"
                        data-bs-target="#shiftTime"
                        (click)="openAddShiftTimeModal()"
                      >
                        <i class="bi bi-plus"></i> Add Shift Time
                      </a>
                    </div>
                  </div>

                  <div class="shift-set">
                    <div
                      class="shift-time p-3 m-3"
                      *ngFor="
                        let organizationShiftTimingWithShiftTypeResponse of organizationShiftTimingWithShiftTypeResponseList;
                        let i = index
                      "
                    >
                      <div class="">
                        <div
                          class="d-flex align-items-center justify-content-between"
                        >
                          <div class="d-flex align-items-center gap-3">
                            <div class="">
                              <span
                                class="automation-rules-icon d-flex align-items-center justify-content-center"
                              >
                                <img src="assets/images/rule-icon.svg" />
                              </span>
                            </div>
                            <div class="">
                              <h6 class="text-truncate mb-0">
                                {{
                                  organizationShiftTimingWithShiftTypeResponse
                                    .shiftType.name
                                }}
                              </h6>
                              <small class="text-muted"
                                >Define the shift timing rules for the
                                employees</small
                              >
                            </div>
                          </div>
                          <div class="">
                            <!-- <span
                            class="automation-rules-toogel-btn pointer"
                            data-bs-toggle="collapse"
                            href="#multiCollapseExample1"
                            role="button"
                            aria-expanded="false"
                            aria-controls="multiCollapseExample1"
                            ><i class="bi bi-chevron-down"></i
                          ></span> -->
                            <span
                              data-bs-toggle="collapse"
                              role="button"
                              class="automation-rules-toogel-btn pointer"
                              [attr.data-bs-target]="
                                '#multiCollapseExample' + i
                              "
                              [attr.aria-controls]="'multiCollapseExample' + i"
                              [attr.aria-expanded]="
                                activeIndex == i ? 'true' : 'false'
                              "
                              (click)="toggleCollapse(i)"
                            >
                              <i class="bi bi-chevron-down"></i>
                            </span>
                          </div>
                        </div>
                        <div
                          class="collapse multi-collapse"
                          [id]="'multiCollapseExample' + i"
                          [class.show]="activeIndex === i"
                          *ngFor="
                            let organizationShiftTimingResponse of organizationShiftTimingWithShiftTypeResponse.organizationShiftTimingResponseList
                          "
                        >
                          <div
                            class="d-flex align-items-center justify-content-between mt-3"
                          >
                            <div class="">
                              <p class="mb-0">
                                <i
                                  class="bi bi-arrow-right"
                                  style="padding-right: 10px"
                                ></i>
                                {{ organizationShiftTimingResponse.name }}
                              </p>
                            </div>
                            <div class="d-flex align-items-center gap-4">
                              <!-- <i class="bi bi-pencil pointer"></i><i class="bi bi-people"></i><i class="bi bi-trash pointer text-danger"></i> -->
                              <a
                                style="cursor: pointer"
                                data-bs-toggle="modal"
                                data-bs-target="#shiftTime"
                                (click)="
                                  updateOrganizationShiftTiming(
                                    organizationShiftTimingResponse,
                                    'STAFF_SELECTION'
                                  )
                                "
                              >
                                <i class="bi bi-people"></i>
                              </a>
                              <a
                                style="cursor: pointer"
                                data-bs-toggle="modal"
                                data-bs-target="#shiftTime"
                                (click)="
                                  updateOrganizationShiftTiming(
                                    organizationShiftTimingResponse,
                                    'SHIFT_TIME'
                                  )
                                "
                              >
                                <i class="bi bi-pencil pointer"></i>
                              </a>
                              <a
                                style="cursor: pointer"
                                class="delete-rule"
                                (click)="
                                  deleteOrganizationShiftTimingMethodCall(
                                    organizationShiftTimingResponse.id
                                  )
                                "
                              >
                                <i class="bi bi-trash pointer text-danger"></i>
                              </a>
                            </div>
                          </div>
                          <div
                            class="shift-in-out-box bg-white row mt-3 p-3 m-0"
                          >
                            <div class="col-md-4">
                              <div class="shift-in-out-time mb-3">
                                <p class="mb-0">
                                  In Time |
                                  <span style="color: #009688">{{
                                    organizationShiftTimingResponse.inTime | date: 'hh:mm a'
                                  }}</span>
                                </p>
                              </div>
                            </div>
                            <div class="col-md-4">
                              <div class="shift-in-out-time mb-3">
                                <p class="mb-0">
                                  Out Time |
                                  <span style="color: #009688">{{
                                    organizationShiftTimingResponse.outTime | date: 'hh:mm a'
                                  }}</span>
                                </p>
                              </div>
                            </div>
                            <div class="col-md-4">
                              <div class="shift-in-out-time mb-3">
                                <p class="mb-0">
                                  Working Hours |
                                  <span style="color: #009688">{{
                                    organizationShiftTimingResponse.workingHour
                                  }}</span>
                                </p>
                              </div>
                            </div>
                            <div class="col-md-4">
                              <div class="shift-in-out-time">
                                <p class="mb-0">
                                  Break Time |
                                  <span style="color: #009688">{{
                                    organizationShiftTimingResponse.startLunch | date: 'hh:mm a'
                                  }}</span>
                                </p>
                              </div>
                            </div>
                            <div class="col-md-4">
                              <div class="shift-in-out-time">
                                <p class="mb-0">
                                  Back Time |
                                  <span style="color: #009688">{{
                                    organizationShiftTimingResponse.endLunch | date: 'hh:mm a'
                                  }}</span>
                                </p>
                              </div>
                            </div>
                            <div class="col-md-4">
                              <div class="shift-in-out-time">
                                <p class="mb-0">
                                  Total Break Hours |
                                  <span style="color: #009688">
                                    {{
                                      organizationShiftTimingResponse.lunchHour
                                    }}</span
                                  >
                                </p>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-container>
            </ng-template>
            <ng-template #errorInFetchingOrganizationShiftTimingData>
              <div class="empty-file" *ngIf="dataNotFoundPlaceholder">
                <div class="errorboxmain">
                  <div class="errorboxinner">
                    <div class="errorboxplaceholder mb-2">
                      <img
                        src="assets/images/empty-box.svg"
                        style="width: 80px"
                      />
                    </div>
                    <div class="">
                      <p class="mb-0">Shift Timings Not Found</p>
                    </div>
                    <div
                      class="add-filtter mt-2 mb-3"
                      style="text-align: center"
                    >
                      <a
                        class=""
                        style="font-size: 16px; color: #6666f3"
                        data-bs-toggle="modal"
                        data-bs-target="#shiftTime"
                        (click)="openAddShiftTimeModal()"
                      >
                        <i class="bi bi-plus"></i> Add Shift Time
                      </a>
                    </div>
                  </div>
                </div>
              </div>
              <div class="empty-file" *ngIf="networkConnectionErrorPlaceHolder">
                <div class="errorboxmain">
                  <div class="errorboxinner text-center">
                    <div class="errorboxplaceholder mb-2">
                      <img src="assets/images/signal.svg" style="width: 80px" />
                    </div>
                    <div class="">
                      <h4>Something went wrong</h4>
                      <p>
                        An error occurred while processing your request. Please
                        refresh the page and try again.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </ng-template>
          </div>
          <div class="col-md-12">
            <div class="border-box"></div>
          </div>
          <div class="col-md-4 mt-3 mb-3">
            <div class="form-roe-data">
              <h5>Holiday(s)</h5>
              <p>A quick snapshot of your company.</p>
            </div>
            <div class="total-shifts p-3 mt-4">
              <div class="d-flex align-items-center justify-content-between">
                <div>
                  <h6 class="text-truncate">Total Holiday’s</h6>
                  <h4 class="mt-3 fw-bold">{{ totalHolidaysNumber || 0 }}</h4>
                </div>
                <span
                  class="total-user-icon d-flex align-items-center justify-content-center"
                >
                  <img src="assets/images/total-user-icon.svg" />
                </span>
              </div>
              <div class="mt-3">
                <div
                  class="d-flex align-items-center justify-content-between mb-3"
                >
                  <small class="text-muted d-flex align-items-center gap-3 mb-0"
                    ><span class="universal"></span> National Holiday's</small
                  >
                  <small class="text-muted">{{
                    universalHolidaysNumber
                  }}</small>
                </div>
                <div
                  class="d-flex align-items-center justify-content-between mb-3"
                >
                  <small
                    class="text-muted d-flex align-items-center gap-3 mb-0"
                  >
                    <span class="custom"></span> Custom Holiday's
                  </small>
                  <small class="text-muted">{{ customHolidaysNumber }}</small>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-7 mt-3 mb-3">
            <div class="add-shift-main-box">
              <div
                class="add-shift-box d-flex align-items-center justify-content-between p-3 pt-2 pb-2"
              >
                <div class="">
                  <h6 class="text-truncate mb-0">Holiday's List</h6>
                </div>
                <div class="">
                  <a
                    class="add-shift-time-btn"
                    data-bs-toggle="modal"
                    data-bs-target="#addholiday"
                  >
                    <i class="bi bi-plus"></i> Add more holidays
                  </a>
                </div>
              </div>
              <div class="m-3 holiday-list">
                <div
                  class="row holiday-list-box-height"
                  [ngClass]="{
                    'holiday-list-box': loadMoreHolidaysBoolean == true
                  }"
                >
                  <div
                    class="errorboxmain text-center"
                    *ngIf="holidays.length == 0"
                  >
                    <div class="errorboxinner">
                      <div class="errorboxplaceholder mb-2">
                        <img
                          src="assets/images/empty-box.svg"
                          style="width: 80px"
                        />
                      </div>
                      <div class="">
                        <h4>No Data Found</h4>
                        <p class="mb-0">
                          We're unable to locate a record associated with the
                          information you entered.
                        </p>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6" *ngFor="let holiday of holidays">
                    <div
                      class="holiday-date mb-3 d-flex align-items-center justify-content-between"
                      [ngClass]="{
                        'universal-holiday':
                          holiday.holidayType === 'Universal',
                        'custom-holiday': holiday.holidayType === 'Custom'
                      }"
                    >
                      <p class="mb-0">
                        {{ holiday.name }} |
                        <span style="color: #3f988f">{{
                          holiday.date | date : "dd MMMM, yyyy"
                        }}</span>
                      </p>
                      <div
                        *ngIf="
                          holiday.holidayType === 'Custom' &&
                          isDateGreaterThanToday(holiday.date)
                        "
                        (click)="deleteCustomHolidays(holiday.id)"
                      >
                        <i class="bi bi-trash text-danger pointer"></i>
                      </div>
                    </div>
                  </div>
                </div>
                <div
                  class="d-flex align-items-center justify-content-end"
                  *ngIf="totalMoreHolidays > 0 || openLoadMoreHoliday"
                >
                  <div class="">
                    <a class="view-all-btn" (click)="loadMoreHolidays()"
                      >View More <i class="bi bi-chevron-down"></i>
                    </a>
                  </div>
                </div>
                <div
                  class="d-flex align-items-center justify-content-end"
                  *ngIf="totalMoreHolidays <= 0 && !openLoadMoreHoliday"
                >
                  <div class="">
                    <a class="view-all-btn" (click)="hideHolidays()"
                      >View Less <i class="bi bi-chevron-up"></i>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- <div class="col-md-12">
            <div class="border-box"></div>
          </div> -->
          <!-- <div class="col-md-4 mt-3 mb-3">
            <div class="form-roe-data">
              <h5>Staff Weekly Holidays</h5>
              <p> Assign weekly off days of your business to automatically mark attendance for those days </p>
            </div>
          </div> -->
          <!-- <div class="col-md-7 mt-3 mb-3">
            <div class="empty-file" *ngIf="isWeeklyHolidayErrorPlaceholder">
              <div class="errorboxmain">
                <div class="errorboxinner text-center">
                  <div class="errorboxplaceholder mb-2">
                    <img src="assets/images/signal.svg" style="width: 80px" />
                  </div>
                  <div class="">
                    <h4>Something went wrong</h4>
                    <p> An error occurred while processing your request. Please refresh the page and try again. </p>
                  </div>
                </div>
              </div>
            </div>
            <div class="" *ngIf="!isWeeklyHolidayErrorPlaceholder">
              <div class="add-shift-main-box">
                <div class="add-shift-box d-flex align-items-center justify-content-between p-3 pt-2 pb-2">
                  <div class="">
                    <h6 class="text-truncate mb-0">Weekly Holidays</h6>
                  </div>
                  <div class="">
                    <a class="add-shift-time-btn" data-bs-toggle="modal" data-bs-target="#addweeklyholiday">
                      <i class="bi bi-plus"></i> Add Weekly Holiday's </a>
                  </div>
                </div>
                <div class="empty-file" *ngIf="weeklyHolidays.length === 0">
                  <div class="errorboxmain">
                    <div class="errorboxinner text-center">
                      <div class="errorboxplaceholder mb-2">
                        <img src="assets/images/empty-box.svg" style="width: 80px" />
                      </div>
                      <div class="">
                        <h4>Not Found</h4>
                        <p class="mb-0"> We're unable to locate a record associated with the information you entered. </p>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="m-3 holiday-list" *ngIf="weeklyHolidays.length > 0">
                  <div class="row">
                    <div class="col-md-6" *ngFor="let weeklyHol of weeklyHolidays">
                      <div class="weekly-holidays mb-3 d-flex align-items-center justify-content-between">
                        <p class="mb-0"> Weekends | <span style="color: #3f988f">{{ weeklyHol.name
                        }}</span>
                        </p>
                        <div>
                          <i class="bi bi-trash text-danger pointer" (click)="deleteWeeklyHolidays(weeklyHol.id)"></i>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div> -->
          <div class="col-md-12">
            <div class="border-box"></div>
          </div>
          <div class="col-md-4 mt-3 mb-3">
            <div class="form-roe-data">
              <h5>Automation Rules</h5>
              <p>A quick snapshot of your company.</p>
            </div>
          </div>
          <div class="col-md-7 mt-3 mb-3">
            <ng-container
              *ngIf="
                isShimmerForAttendanceRule &&
                  attendanceRuleWithAttendanceRuleDefinitionResponseList.length ==
                    0 &&
                  !dataNotFoundPlaceholderForAttendanceRule &&
                  !networkConnectionErrorPlaceHolderForAttendanceRule;
                else attendanceRuleWithDefinitionData
              "
            >
              <div class="">
                <div class="text-end">
                  <ngx-shimmer-loading
                    [width]="'40%'"
                    [height]="'20px'"
                    style="border-radius: 50%"
                  ></ngx-shimmer-loading>
                </div>
              </div>
              <div
                class="mt-3"
                style="
                  border: 1px solid #f5f5f5;
                  padding: 5px;
                  border-radius: 6px;
                "
              >
                <div
                  class="row"
                  style="
                    border-bottom: 1px solid #f5f5f5;
                    padding-top: 10px;
                    padding-bottom: 10px;
                  "
                >
                  <div class="col-md-4">
                    <div class="">
                      <ngx-shimmer-loading
                        [width]="'100%'"
                        [height]="'20px'"
                        style="border-radius: 50%"
                      ></ngx-shimmer-loading>
                    </div>
                  </div>
                </div>
                <div class="row mt-3">
                  <div class="col-md-3">
                    <div class="">
                      <ngx-shimmer-loading
                        [width]="'100%'"
                        [height]="'20px'"
                        style="border-radius: 50%"
                      ></ngx-shimmer-loading>
                    </div>
                  </div>
                </div>
                <div class="row mt-3">
                  <div class="col-md-4">
                    <div class="">
                      <ngx-shimmer-loading
                        [width]="'100%'"
                        [height]="'30px'"
                        style="border-radius: 50%"
                      ></ngx-shimmer-loading>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="">
                      <ngx-shimmer-loading
                        [width]="'100%'"
                        [height]="'30px'"
                        style="border-radius: 50%"
                      ></ngx-shimmer-loading>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="">
                      <ngx-shimmer-loading
                        [width]="'100%'"
                        [height]="'30px'"
                        style="border-radius: 50%"
                      ></ngx-shimmer-loading>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="">
                      <ngx-shimmer-loading
                        [width]="'100%'"
                        [height]="'30px'"
                        style="border-radius: 50%"
                      ></ngx-shimmer-loading>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="">
                      <ngx-shimmer-loading
                        [width]="'100%'"
                        [height]="'30px'"
                        style="border-radius: 50%"
                      ></ngx-shimmer-loading>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="">
                      <ngx-shimmer-loading
                        [width]="'100%'"
                        [height]="'30px'"
                        style="border-radius: 50%"
                      ></ngx-shimmer-loading>
                    </div>
                  </div>
                </div>
              </div>
            </ng-container>
            <ng-template #attendanceRuleWithDefinitionData>
              <ng-container
                *ngIf="
                  attendanceRuleWithAttendanceRuleDefinitionResponseList.length !==
                    0 &&
                    !dataNotFoundPlaceholderForAttendanceRule &&
                    !networkConnectionErrorPlaceHolderForAttendanceRule;
                  else errorInFetchingAttendanceRuleWithAttendanceRuleDefinitionData
                "
              >
                <div class="add-shift-main-box">
                  <div
                    class="add-shift-box d-flex align-items-center justify-content-between p-3 pt-2 pb-2"
                  >
                    <div class="">
                      <h6 class="text-truncate mb-0">Rules</h6>
                    </div>
                    <div class="">
                      <a
                        class="add-shift-time-btn"
                        data-bs-toggle="modal"
                        data-bs-target="#automation-rules"
                        (click)="getAttendanceRuleByOrganizationMethodCall()"
                      >
                        <i class="bi bi-plus"></i> Add Automation Rules
                      </a>
                    </div>
                  </div>
                  <div
                    class="shift-time p-3 m-3"
                    *ngFor="
                      let attendanceRuleWithAttendanceRuleDefinitionResponse of attendanceRuleWithAttendanceRuleDefinitionResponseList;
                      let automationIndex = index
                    "
                  >
                    <div class="">
                      <div
                        class="d-flex align-items-center justify-content-between"
                      >
                        <div class="d-flex align-items-center gap-3">
                          <div class="">
                            <span
                              class="automation-rules-icon d-flex align-items-center justify-content-center"
                            >
                              <img src="assets/images/rule-icon.svg" />
                            </span>
                          </div>
                          <div class="">
                            <h6 class="text-truncate mb-0">
                              {{
                                attendanceRuleWithAttendanceRuleDefinitionResponse
                                  .attendanceRuleResponse.name
                              }}
                            </h6>
                            <small class="text-muted">{{
                              attendanceRuleWithAttendanceRuleDefinitionResponse
                                .attendanceRuleResponse.description
                            }}</small>
                          </div>
                        </div>
                        <div class="">
                          <!-- <span
                          class="automation-rules-toogel-btn pointer"
                          data-bs-toggle="collapse"
                          href="#multiCollapseExample5"
                          role="button"
                          aria-expanded="false"
                          aria-controls="multiCollapseExample5"
                          ><i class="bi bi-chevron-down"></i
                        ></span> -->
                          <span
                            class="automation-rules-toogel-btn pointer"
                            data-bs-toggle="collapse"
                            [attr.data-bs-target]="
                              '#multiCollapseExample5' + automationIndex
                            "
                            role="button"
                            [attr.aria-controls]="
                              'multiCollapseExample5' + automationIndex
                            "
                            [attr.aria-expanded]="
                              automationIndex === activeIndex5
                                ? 'true'
                                : 'false'
                            "
                            (click)="toggleCollapse5(automationIndex)"
                          >
                            <i class="bi bi-chevron-down"></i>
                          </span>
                        </div>
                      </div>
                      <div
                        class="collapse multi-collapse"
                        [id]="'multiCollapseExample5' + automationIndex"
                        [class.show]="activeIndex5 === automationIndex"
                        *ngFor="
                          let attendanceRuleDefinitionResponse of attendanceRuleWithAttendanceRuleDefinitionResponse.attendanceRuleDefinitionResponseList;
                          let i = index
                        "
                      >
                        <div
                          class="d-flex align-items-center justify-content-between mt-3"
                        >
                          <div class="">
                            <p class="mb-0">
                              <i
                                class="bi bi-arrow-right"
                                style="padding-right: 10px"
                              ></i>
                              Rule ({{ i + 1 }})
                            </p>
                          </div>
                          <div class="d-flex align-items-center gap-4">
                            <a
                              data-bs-toggle="modal"
                              data-bs-target="#rules-value"
                              class="create-rule"
                              style="cursor: pointer"
                              (click)="
                                updateAttendanceRuleDefinition(
                                  attendanceRuleDefinitionResponse,
                                  attendanceRuleWithAttendanceRuleDefinitionResponse.attendanceRuleResponse,
                                  automationIndex
                                )
                              "
                            >
                              <i class="bi bi-pencil pointer"></i>
                            </a>
                            <a
                              class="delete-rule"
                              style="cursor: pointer"
                              (click)="
                                deleteAttendanceRuleDefinitionMethodCall(
                                  attendanceRuleDefinitionResponse.id,
                                  attendanceRuleDefinitionResponse.attendanceRuleTypeId
                                )
                              "
                              *ngIf="
                                !deleteAttendanceRuleTemplateLoader(
                                  attendanceRuleDefinitionResponse.id
                                )
                              "
                            >
                              <i class="bi bi-trash pointer text-danger"></i>
                            </a>
                            <div
                              class="dot-opacity-loader"
                              *ngIf="
                                deleteAttendanceRuleTemplateLoader(
                                  attendanceRuleDefinitionResponse.id
                                )
                              "
                            >
                              <span style="background-color: #6666f3"></span>
                              <span style="background-color: #6666f3"></span>
                              <span style="background-color: #6666f3"></span>
                            </div>
                            <!-- <i class="bi bi-pencil pointer"></i><i class="bi bi-trash pointer text-danger"></i> -->
                          </div>
                        </div>
                        <div
                          class="row mt-3"
                          *ngIf="
                            attendanceRuleDefinitionResponse.attendanceRuleTypeId ==
                            DEDUCTION_RULE_DEFINITION
                          "
                        >
                          <div class="col-md-4">
                            <div class="custom-salary">
                              <div class="custom-salary-hedding p-3">
                                <h4 class="mb-0">Custom Salary Deduction</h4>
                              </div>
                              <div class="custom-salary-para p-3">
                                <div
                                  class="d-flex align-items-center justify-content-between mb-3"
                                >
                                  <p class="mb-0">Duration</p>
                                  <span style="color: #3f988f">
                                    <ng-container
                                      *ngIf="
                                        attendanceRuleDefinitionResponse
                                          .deductionRuleDefinitionResponse
                                          .customSalaryDeduction
                                          .lateDuration !== null &&
                                          attendanceRuleDefinitionResponse
                                            .deductionRuleDefinitionResponse
                                            .customSalaryDeduction
                                            .lateDuration !== '';
                                        else na1
                                      "
                                    >
                                      <span style="color: 3f988f">{{
                                        attendanceRuleDefinitionResponse
                                          .deductionRuleDefinitionResponse
                                          .customSalaryDeduction.lateDuration
                                      }}</span>
                                      <span style="color: 3f988f"> hrs.</span>
                                    </ng-container>
                                    <ng-template #na1>
                                      <span style="color: 3f988f">N/A</span>
                                    </ng-template>
                                  </span>
                                </div>

                                <div
                                  class="d-flex align-items-center justify-content-between mb-3"
                                >
                                  <p class="mb-0">Deduction</p>
                                  <!-- <span> | </span> -->
                                  <span style="color: #009688">
                                    <ng-container
                                      *ngIf="
                                        attendanceRuleDefinitionResponse
                                          ?.deductionRuleDefinitionResponse
                                          ?.deductionType?.id ===
                                          DEDUCTION_TYPE_PER_MINUTE;
                                        else customDeductionFixAmount
                                      "
                                    >
                                      <span style="color: 3f988f">{{
                                        attendanceRuleDefinitionResponse
                                          ?.deductionRuleDefinitionResponse
                                          ?.deductionType?.type
                                      }}</span>
                                    </ng-container>
                                    <ng-template #customDeductionFixAmount>
                                      <ng-container
                                        *ngIf="
                                          attendanceRuleDefinitionResponse
                                            ?.deductionRuleDefinitionResponse
                                            ?.deductionType?.type;
                                          else customDeductionNA
                                        "
                                      >
                                        <span style="color: 3f988f">{{
                                          attendanceRuleDefinitionResponse
                                            ?.deductionRuleDefinitionResponse
                                            ?.deductionType?.type
                                        }}</span>
                                        <span style="color: 3f988f">
                                          (Rs.
                                          {{
                                            attendanceRuleDefinitionResponse
                                              .deductionRuleDefinitionResponse
                                              .customSalaryDeduction
                                              .amountInRupees
                                          }})</span
                                        >
                                      </ng-container>
                                    </ng-template>
                                    <ng-template #customDeductionNA>
                                      <span>N/A</span>
                                    </ng-template>
                                  </span>
                                </div>
                                <div
                                  class="d-flex align-items-center justify-content-between"
                                >
                                  <p class="mb-0">Occurrences</p>
                                  <!-- <span> | </span> -->
                                  <span style="color: #009688">
                                    <ng-container
                                      *ngIf="
                                        attendanceRuleDefinitionResponse
                                          .deductionRuleDefinitionResponse
                                          .customSalaryDeduction
                                          .occurrenceCount !== 0;
                                        else customOccurrenceOrNA
                                      "
                                    >
                                      <span>{{
                                        attendanceRuleDefinitionResponse
                                          .deductionRuleDefinitionResponse
                                          .customSalaryDeduction.occurrenceCount
                                      }}</span>
                                      <span style="color: 3f988f"> times</span>
                                    </ng-container>
                                    <ng-template #customOccurrenceOrNA
                                      >N/A</ng-template
                                    >
                                  </span>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="col-md-4">
                            <div class="custom-salary">
                              <div class="custom-salary-hedding p-3">
                                <h4 class="mb-0">Half Day Salary Deduction</h4>
                                <!-- <h4 class="mb-0">
                                Half Day Salary Deduction Rules
                              </h4> -->
                              </div>
                              <div class="custom-salary-para p-3">
                                <div
                                  class="d-flex align-items-center justify-content-between mb-3"
                                >
                                  <p class="mb-0">Duration</p>
                                  <!-- <span> | </span> -->
                                  <span style="color: #009688">
                                    <ng-container
                                      *ngIf="
                                        attendanceRuleDefinitionResponse
                                          .deductionRuleDefinitionResponse
                                          .halfDaySalaryDeduction
                                          .lateDuration !== null &&
                                          attendanceRuleDefinitionResponse
                                            .deductionRuleDefinitionResponse
                                            .halfDaySalaryDeduction
                                            .lateDuration !== '';
                                        else na2
                                      "
                                    >
                                      <span>{{
                                        attendanceRuleDefinitionResponse
                                          .deductionRuleDefinitionResponse
                                          .halfDaySalaryDeduction.lateDuration
                                      }}</span>
                                      <span style="color: 3f988f"> hrs.</span>
                                    </ng-container>
                                    <ng-template #na2>
                                      <span>N/A</span>
                                    </ng-template>
                                  </span>
                                </div>
                                <div
                                  class="d-flex align-items-center justify-content-between"
                                >
                                  <!-- <p class="mb-0">Occasion</p><span style="color: #3f988f">5 Times</span> -->
                                  <p class="mb-0">Occurrences</p>
                                  <!-- <span> | </span> -->
                                  <span style="color: #009688">
                                    <ng-container
                                      *ngIf="
                                        attendanceRuleDefinitionResponse
                                          .deductionRuleDefinitionResponse
                                          .halfDaySalaryDeduction
                                          .occurrenceCount !== 0;
                                        else halfDayOccurrenceOrNA
                                      "
                                    >
                                      <span>{{
                                        attendanceRuleDefinitionResponse
                                          .deductionRuleDefinitionResponse
                                          .halfDaySalaryDeduction
                                          .occurrenceCount
                                      }}</span>
                                      <span style="color: 3f988f"> times</span>
                                    </ng-container>
                                    <ng-template #halfDayOccurrenceOrNA
                                      >N/A</ng-template
                                    >
                                  </span>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="col-md-4">
                            <div class="custom-salary">
                              <div class="custom-salary-hedding p-3">
                                <h4 class="mb-0">Full Day Salary Deduction</h4>
                              </div>
                              <div class="custom-salary-para p-3">
                                <div
                                  class="d-flex align-items-center justify-content-between mb-3"
                                >
                                  <p class="mb-0">Duration</p>
                                  <!-- <span> | </span> -->
                                  <span style="color: #009688">
                                    <ng-container
                                      *ngIf="
                                        attendanceRuleDefinitionResponse
                                          .deductionRuleDefinitionResponse
                                          .fullDaySalaryDeduction
                                          .lateDuration !== null &&
                                          attendanceRuleDefinitionResponse
                                            .deductionRuleDefinitionResponse
                                            .fullDaySalaryDeduction
                                            .lateDuration != '';
                                        else na3
                                      "
                                    >
                                      <span>{{
                                        attendanceRuleDefinitionResponse
                                          .deductionRuleDefinitionResponse
                                          .fullDaySalaryDeduction.lateDuration
                                      }}</span>
                                      <span style="color: 3f988f"> hrs.</span>
                                    </ng-container>
                                    <ng-template #na3>
                                      <span>N/A</span>
                                    </ng-template>
                                  </span>
                                </div>
                                <div
                                  class="d-flex align-items-center justify-content-between"
                                >
                                  <!-- <p class="mb-0">Occasion</p><span style="color: #3f988f">5 Times</span> -->
                                  <p class="mb-0">Occurrences</p>
                                  <!-- <span> | </span> -->
                                  <span style="color: #009688">
                                    <ng-container
                                      *ngIf="
                                        attendanceRuleDefinitionResponse
                                          .deductionRuleDefinitionResponse
                                          .fullDaySalaryDeduction
                                          .occurrenceCount !== 0;
                                        else fullDayOccurrenceOrNA
                                      "
                                    >
                                      <span>{{
                                        attendanceRuleDefinitionResponse
                                          .deductionRuleDefinitionResponse
                                          .fullDaySalaryDeduction
                                          .occurrenceCount
                                      }}</span>
                                      <span style="color: 3f988f"> times</span>
                                    </ng-container>
                                    <ng-template #fullDayOccurrenceOrNA
                                      >N/A</ng-template
                                    >
                                  </span>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div
                          class="row mt-3"
                          *ngIf="
                            attendanceRuleDefinitionResponse.attendanceRuleTypeId ==
                            OVERTIME_RULE_DEFINITION
                          "
                        >
                          <div class="col-md-4">
                            <div class="custom-salary">
                              <div class="custom-salary-hedding p-3">
                                <h4 class="mb-0">Custom Payout</h4>
                              </div>
                              <div class="custom-salary-para p-3">
                                <div
                                  class="d-flex align-items-center justify-content-between mb-3"
                                >
                                  <p class="mb-0">Duration</p>
                                  <span style="color: #3f988f">
                                    <ng-container
                                      *ngIf="
                                        attendanceRuleDefinitionResponse
                                          .overtimeRuleDefinitionResponse
                                          .customDuration !== null &&
                                          attendanceRuleDefinitionResponse
                                            .overtimeRuleDefinitionResponse
                                            .customDuration !== '';
                                        else customDurationNA
                                      "
                                    >
                                      <span style="color: 3f988f">{{
                                        attendanceRuleDefinitionResponse
                                          .overtimeRuleDefinitionResponse
                                          .customDuration
                                      }}</span>
                                      <span style="color: 3f988f"> hrs.</span>
                                    </ng-container>
                                    <ng-template #customDurationNA>
                                      <span style="color: 3f988f">N/A</span>
                                    </ng-template>
                                  </span>
                                </div>
                                <div
                                  class="d-flex align-items-center justify-content-between mb-3"
                                >
                                  <p class="mb-0">Pay Type</p>
                                  <!-- <span> | </span> -->
                                  <span style="color: #009688">
                                    <ng-container
                                      *ngIf="
                                        attendanceRuleDefinitionResponse
                                          ?.overtimeRuleDefinitionResponse
                                          ?.customOvertimeType?.id !=
                                          OVERTIME_TYPE_FIXED_AMOUNT;
                                        else customPayFixAmount
                                      "
                                    >
                                      <span style="color: 3f988f">{{
                                        attendanceRuleDefinitionResponse
                                          ?.overtimeRuleDefinitionResponse
                                          ?.customOvertimeType?.type
                                      }}</span>
                                    </ng-container>
                                    <ng-template #customPayFixAmount>
                                      <ng-container
                                        *ngIf="
                                          attendanceRuleDefinitionResponse
                                            ?.overtimeRuleDefinitionResponse
                                            ?.customOvertimeType?.type;
                                          else customPayNA
                                        "
                                      >
                                        <span style="color: 3f988f">{{
                                          attendanceRuleDefinitionResponse
                                            ?.overtimeRuleDefinitionResponse
                                            ?.customOvertimeType?.type
                                        }}</span>
                                        <span style="color: 3f988f">
                                          (Rs.
                                          {{
                                            attendanceRuleDefinitionResponse
                                              .overtimeRuleDefinitionResponse
                                              .customAmountInRupees
                                          }})</span
                                        >
                                      </ng-container>
                                    </ng-template>
                                    <ng-template #customPayNA>
                                      <span>N/A</span>
                                    </ng-template>
                                  </span>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="col-md-4">
                            <div class="custom-salary">
                              <div class="custom-salary-hedding p-3">
                                <h4 class="mb-0">Half Day Payout</h4>
                                <!-- <h4 class="mb-0">
                                Half Day Salary Deduction Rules
                              </h4> -->
                              </div>
                              <div class="custom-salary-para p-3">
                                <div
                                  class="d-flex align-items-center justify-content-between mb-3"
                                >
                                  <p class="mb-0">Duration</p>
                                  <!-- <span> | </span> -->
                                  <span style="color: #009688">
                                    <ng-container
                                      *ngIf="
                                        attendanceRuleDefinitionResponse
                                          .overtimeRuleDefinitionResponse
                                          .halfDayDuration !== null &&
                                          attendanceRuleDefinitionResponse
                                            .overtimeRuleDefinitionResponse
                                            .halfDayDuration !== '';
                                        else halfDayDurationNA
                                      "
                                    >
                                      <span>{{
                                        attendanceRuleDefinitionResponse
                                          .overtimeRuleDefinitionResponse
                                          .halfDayDuration
                                      }}</span>
                                      <span style="color: 3f988f"> hrs.</span>
                                    </ng-container>
                                    <ng-template #halfDayDurationNA>
                                      <span>N/A</span>
                                    </ng-template>
                                  </span>
                                </div>
                                <div
                                  class="d-flex align-items-center justify-content-between mb-3"
                                >
                                  <p class="mb-0">Pay Type</p>
                                  <!-- <span> | </span> -->
                                  <span style="color: #009688">
                                    <ng-container
                                      *ngIf="
                                        attendanceRuleDefinitionResponse
                                          ?.overtimeRuleDefinitionResponse
                                          ?.halfDayOvertimeType?.id !=
                                          OVERTIME_TYPE_FIXED_AMOUNT;
                                        else halfDayPayFixAmount
                                      "
                                    >
                                      <span style="color: 3f988f">{{
                                        attendanceRuleDefinitionResponse
                                          ?.overtimeRuleDefinitionResponse
                                          ?.halfDayOvertimeType?.type
                                      }}</span>
                                    </ng-container>
                                    <ng-template #halfDayPayFixAmount>
                                      <ng-container
                                        *ngIf="
                                          attendanceRuleDefinitionResponse
                                            ?.overtimeRuleDefinitionResponse
                                            ?.halfDayOvertimeType?.type;
                                          else halfDayPayNA
                                        "
                                      >
                                        <span style="color: 3f988f">{{
                                          attendanceRuleDefinitionResponse
                                            ?.overtimeRuleDefinitionResponse
                                            ?.halfDayOvertimeType?.type
                                        }}</span>
                                        <span style="color: 3f988f">
                                          (Rs.
                                          {{
                                            attendanceRuleDefinitionResponse
                                              .overtimeRuleDefinitionResponse
                                              .halfDayAmountInRupees
                                          }})</span
                                        >
                                      </ng-container>
                                    </ng-template>
                                    <ng-template #halfDayPayNA>
                                      <span>N/A</span>
                                    </ng-template>
                                  </span>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="col-md-4">
                            <div class="custom-salary">
                              <div class="custom-salary-hedding p-3">
                                <h4 class="mb-0">Full Day Payout</h4>
                              </div>
                              <div class="custom-salary-para p-3">
                                <div
                                  class="d-flex align-items-center justify-content-between mb-3"
                                >
                                  <p class="mb-0">Duration</p>
                                  <!-- <span> | </span> -->
                                  <span style="color: #009688">
                                    <ng-container
                                      *ngIf="
                                        attendanceRuleDefinitionResponse
                                          .overtimeRuleDefinitionResponse
                                          .fullDayDuration != null &&
                                          attendanceRuleDefinitionResponse
                                            .overtimeRuleDefinitionResponse
                                            .fullDayDuration != '';
                                        else fullDayDurationNA
                                      "
                                    >
                                      <span>{{
                                        attendanceRuleDefinitionResponse
                                          .overtimeRuleDefinitionResponse
                                          .fullDayDuration
                                      }}</span>
                                      <span style="color: 3f988f"> hrs.</span>
                                    </ng-container>
                                    <ng-template #fullDayDurationNA>
                                      <span>N/A</span>
                                    </ng-template>
                                  </span>
                                </div>
                                <div
                                  class="d-flex align-items-center justify-content-between mb-3"
                                >
                                  <p class="mb-0">Pay Type</p>
                                  <!-- <span> | </span> -->
                                  <span style="color: #009688">
                                    <ng-container
                                      *ngIf="
                                        attendanceRuleDefinitionResponse
                                          ?.overtimeRuleDefinitionResponse
                                          ?.fullDayOvertimeType?.id !=
                                          OVERTIME_TYPE_FIXED_AMOUNT;
                                        else fullDayPayFixAmount
                                      "
                                    >
                                      <span style="color: 3f988f">{{
                                        attendanceRuleDefinitionResponse
                                          ?.overtimeRuleDefinitionResponse
                                          ?.fullDayOvertimeType?.type
                                      }}</span>
                                    </ng-container>
                                    <ng-template #fullDayPayFixAmount>
                                      <ng-container
                                        *ngIf="
                                          attendanceRuleDefinitionResponse
                                            ?.overtimeRuleDefinitionResponse
                                            ?.fullDayOvertimeType?.type;
                                          else halfDayPayNA
                                        "
                                      >
                                        <span style="color: 3f988f">{{
                                          attendanceRuleDefinitionResponse
                                            ?.overtimeRuleDefinitionResponse
                                            ?.fullDayOvertimeType?.type
                                        }}</span>
                                        <span style="color: 3f988f">
                                          (Rs.
                                          {{
                                            attendanceRuleDefinitionResponse
                                              .overtimeRuleDefinitionResponse
                                              .fullDayAmountInRupees
                                          }})</span
                                        >
                                      </ng-container>
                                    </ng-template>
                                    <ng-template #halfDayPayNA>
                                      <span>N/A</span>
                                    </ng-template>
                                  </span>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-container>
            </ng-template>
            <!-- {{ dataNotFoundPlaceholderForAttendanceRule }} -->
            <ng-template
              #errorInFetchingAttendanceRuleWithAttendanceRuleDefinitionData
            >
              <div
                class="empty-file"
                *ngIf="dataNotFoundPlaceholderForAttendanceRule"
              >
                <div class="errorboxmain">
                  <div class="errorboxinner">
                    <div class="errorboxplaceholder mb-2">
                      <img
                        src="assets/images/empty-box.svg"
                        style="width: 80px"
                      />
                    </div>
                    <div class="">
                      <p class="mb-0">Automation Rules Not Found</p>
                    </div>
                    <div
                      class="add-filtter mt-2 mb-3"
                      style="text-align: center"
                    >
                      <a
                        class=""
                        style="font-size: 14px; color: #6666f3"
                        data-bs-toggle="modal"
                        data-bs-target="#automation-rules"
                        (click)="getAttendanceRuleByOrganizationMethodCall()"
                      >
                        <i class="bi bi-plus"></i> Add Automation Rules
                      </a>
                    </div>
                  </div>
                </div>
              </div>
              <div
                class="empty-file"
                *ngIf="networkConnectionErrorPlaceHolderForAttendanceRule"
              >
                <div class="errorboxmain">
                  <div class="errorboxinner text-center">
                    <div class="errorboxplaceholder mb-2">
                      <img src="assets/images/signal.svg" style="width: 80px" />
                    </div>
                    <div class="">
                      <h4>Something went wrong</h4>
                      <p>
                        An error occurred while processing your request. Please
                        refresh the page and try again.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </ng-template>
            <div class="col-md-12">
              <div class="border-box"></div>
            </div>
            <div class="col-md-1"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div
    class="modal fade"
    id="shiftTime"
    tabindex="-1"
    role="dialog"
    aria-labelledby="exampleModalDefaultLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h6 class="modal-title m-0" id="exampleModalDefaultLabel">
            Shift Time
          </h6>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
            #closeShiftTimingModal
          ></button>
        </div>
        <div class="modal-body modal-height-fix">
          <div class="">
            <ul id="myTab" role="tablist" class="nav nav-tabs">
              <li role="presentation" class="nav-item">
                <button
                  id="home-tab"
                  data-bs-toggle="tab"
                  data-bs-target="#shiftime"
                  type="button"
                  role="tab"
                  aria-controls="shiftime"
                  aria-selected="true"
                  class="nav-link active"
                  [class.active]="activeTab === 'shiftime'"
                  (click)="shiftTimingActiveTabMethod()"
                  #shiftTimingActiveTab
                >
                  Shift Time
                </button>
              </li>
              <li role="presentation" class="nav-item">
                <button
                  id="holiday-tab"
                  data-bs-toggle="tab"
                  [attr.aria-selected]="!shiftForm.invalid"
                  [attr.tabindex]="shiftForm.invalid ? -1 : null"
                  data-bs-target="#weeklyOff"
                  type="button"
                  role="tab"
                  [class.active]="activeTab === 'weeklyOff'"
                  (click)="weekOffActiveTabMethod()"
                  [disabled]="shiftForm.invalid"
                  aria-controls="weeklyOff"
                  class="nav-link"
                  #weekOffActiveTab>
                  WeekOff Settings
                </button>
              </li>

              <li role="presentation" class="nav-item">
                <!-- [class.disabled]="shiftForm.invalid" -->
                <!-- (click)="!shiftForm.invalid && staffActiveTabInShiftTimingMethod()" -->
                <button
                  id="profile-tab"
                  data-bs-toggle="tab"
                  [attr.aria-selected]="!shiftForm.invalid"
                  [attr.tabindex]="shiftForm.invalid ? -1 : null"
                  data-bs-target="#staffselection"
                  type="button"
                  role="tab"
                  aria-controls="staffselection"
                  aria-selected="false"
                  class="nav-link"
                  #staffActiveTabInShiftTiming
                  [class.active]="activeTab === 'staffselection'"
                  (click)="staffActiveTabInShiftTimingMethod()"
                  [disabled]="shiftForm.invalid"
                >
                  Staff selection
                </button>
              </li>
            </ul>
            <div class="tab-content" id="myTabContent">
              <div
                class="tab-pane fade show active"
                id="shiftime"
                role="tabpanel"
                [class.show]="activeTab === 'shiftime'"
                [class.active]="activeTab === 'shiftime'"
              >
                <form
                  #shiftForm="ngForm"
                  ngNativeValidate
                  (ngSubmit)="submitShiftTimingForm()"
                >
                  <div class="row p-3">
                    <!-- Dropdown for Shift Type -->
                    <div class="col-md-6">
                      <!-- Existing dropdown code for shift types -->
                      <div class="form-fild">
                        <label for="exampleInputEmail1" class="pb-2"
                          >Shift Type</label
                        >
                        <div class="dropdown">
                          <button
                            class="btn btn-secondary dropdown-toggle new-dropdown"
                            type="button"
                            id="dropdownMenuButton1"
                            data-bs-toggle="dropdown"
                            aria-expanded="false"
                            style="
                              text-align: left;
                              background-color: white;
                              color: black;
                              border-color: #ced4da;
                              width: 100%;
                            "
                          >
                            {{ selectedShiftType?.name || "Select shift type" }}
                            <i class="bi bi-chevron-down"></i>
                          </button>
                          <ul
                            class="dropdown-menu"
                            aria-labelledby="dropdownMenuButton1"
                            style="width: 100%"
                          >
                            <li *ngFor="let shiftType of shiftTypeList">
                              <a
                                class="dropdown-item"
                                (click)="selectShiftType(shiftType)"
                              >
                                {{ shiftType.name }}
                              </a>
                            </li>
                          </ul>
                        </div>
                      </div>
                    </div>
                    <!-- Shift Name Input -->
                    <div class="col-md-6">
                      <div class="mb-3">
                        <label for="shiftName" class="pb-2">Shift Name</label>
                        <input
                          type="text"
                          class="form-control whatapp-login-input"
                          id="shiftName"
                          placeholder="Shift name"
                          required
                          [(ngModel)]="organizationShiftTimingRequest.name"
                          name="shiftName"
                        />
                      </div>
                    </div>
                    <!-- In Time Input -->
                    <div class="col-md-4">
                      <div class="mb-3">
                        <label for="inTime" class="pb-2">In Time</label>
                        <nz-time-picker
                          [(ngModel)]="
                            organizationShiftTimingRequest.inTimeDate
                          "
                          [nzUse12Hours]="true"
                          nzFormat="h:mm a"
                          (ngModelChange)="onTimeChange('inTime', $event)"
                          [ngModelOptions]="{ standalone: true }"
                        >
                        </nz-time-picker>
                        <div
                          *ngIf="
                            organizationShiftTimingValidationErrors['inTime']
                          "
                          class="text-danger"
                        >
                          {{
                            organizationShiftTimingValidationErrors["inTime"]
                          }}
                        </div>
                      </div>
                    </div>

                    <div class="col-md-4">
                      <div class="mb-3">
                        <label for="outTime" class="pb-2">Out Time</label>
                        <nz-time-picker
                          [(ngModel)]="
                            organizationShiftTimingRequest.outTimeDate
                          "
                          [nzUse12Hours]="true"
                          nzFormat="h:mm a"
                          (ngModelChange)="onTimeChange('outTime', $event)"
                          [ngModelOptions]="{ standalone: true }"
                        ></nz-time-picker>
                        <div
                          *ngIf="
                            organizationShiftTimingValidationErrors['outTime']
                          "
                          class="text-danger"
                        >
                          {{
                            organizationShiftTimingValidationErrors["outTime"]
                          }}
                        </div>
                      </div>
                    </div>
                    <!-- Working Hours Display -->
                    <div class="col-md-4">
                      <div class="mb-3">
                        <label for="workingHours" class="pb-2"
                          >Working Hours</label
                        >
                        <input
                          id="workingHours"
                          type="text"
                          class="form-control whatapp-login-input"
                          readonly
                          [(ngModel)]="
                            organizationShiftTimingRequest.workingHour
                          "
                          name="workingHours"
                          placeholder="Working hours"
                        />
                      </div>
                    </div>
                    <!-- Lunch Break Start Time Input -->
                    <div class="col-md-4">
                      <div class="mb-3">
                        <label for="startLunch" class="pb-2"
                          >Lunch Break Start Time</label
                        >
                        <nz-time-picker
                          [(ngModel)]="
                            organizationShiftTimingRequest.startLunchDate
                          "
                          [nzUse12Hours]="true"
                          nzFormat="h:mm a"
                          (ngModelChange)="onTimeChange('startLunch', $event)"
                          [ngModelOptions]="{ standalone: true }"
                        ></nz-time-picker>
                        <div
                          *ngIf="
                            organizationShiftTimingValidationErrors[
                              'startLunch'
                            ]
                          "
                          class="text-danger"
                        >
                          {{
                            organizationShiftTimingValidationErrors[
                              "startLunch"
                            ]
                          }}
                        </div>
                      </div>
                    </div>
                    <!-- Lunch Break End Time Input -->
                    <div class="col-md-4">
                      <div class="mb-3">
                        <label for="endLunch" class="pb-2"
                          >Lunch Break End Time</label
                        >
                        <nz-time-picker
                          [(ngModel)]="
                            organizationShiftTimingRequest.endLunchDate
                          "
                          [nzUse12Hours]="true"
                          nzFormat="h:mm a"
                          (ngModelChange)="onTimeChange('endLunch', $event)"
                          [ngModelOptions]="{ standalone: true }"
                        ></nz-time-picker>
                        <div
                          *ngIf="
                            organizationShiftTimingValidationErrors['endLunch']
                          "
                          class="text-danger"
                        >
                          {{
                            organizationShiftTimingValidationErrors["endLunch"]
                          }}
                        </div>
                      </div>
                    </div>
                    <!-- Lunch Break Duration Display -->
                    <div class="col-md-4">
                      <div class="mb-3">
                        <label for="totalLunchBreakDuration" class="pb-2"
                          >Total Lunch Break Duration</label
                        >
                        <input
                          id="totalLunchBreakDuration"
                          type="text"
                          class="form-control whatapp-login-input"
                          readonly
                          [(ngModel)]="organizationShiftTimingRequest.lunchHour"
                          name="totalLunchBreakDuration"
                          placeholder="Lunch break hours"
                        />
                      </div>
                    </div>
                  </div>
                </form>
                <div
                  class="modal-footer d-flex align-items-center justify-content-between"
                >
                  <button
                    type="submit"
                    class="btn btn-outline-primary btn-round"
                    [disabled]="shiftForm.invalid"
                    (click)="weekOffActiveTabMethod()"
                  >
                    Next
                  </button>
                </div>
              </div>

              <!-- Enter Week OFFs -->

              <div
                class="tab-pane fade"
                id="weeklyOff"
                role="tabpanel"
                [class.show]="activeTab === 'weeklyOff'"
                [class.active]="activeTab === 'weeklyOff'"
              >
                <div class="staf-list-box mt-3">
                  <div
                    class="row mb-1 mt-3 align-items-center"
                    style="padding-bottom: 15px"
                  >
                    <div class="col-md-12">
                      <div
                        class="week-checkbox d-flex align-items-center gap-3"
                        *ngFor="let day of weekDay; let i = index"
                      >
                        <div class="form-check d-flex align-items-center gap-2">
                          <input
                            class="form-check-input"
                            type="checkbox"
                            [(ngModel)]="day.selected"
                            [id]="'weekDay' + i"
                            (click)="toggleSelection(i)"
                          />
                          <label
                            class="form-check-label align-label"
                            [for]="'weekDay' + i"
                            >{{ day.name }}</label
                          >
                        </div>
                        <div *ngIf="day.selected">
                          <div
                            class="btn-group"
                            role="group"
                            aria-label="Basic radio toggle button group"
                          >
                            <input
                              type="radio"
                              class="btn-check"
                              name="btnradio{{ i }}"
                              id="btnradio1-{{ i }}"
                              autocomplete="off"
                              (click)="toggleAlternate(i, false)"
                              [value]="false"
                              [(ngModel)]="day.isAlternate"
                            />
                            <label
                              class="btn btn-outline-primary"
                              for="btnradio1-{{ i }}"
                              >All</label
                            >
                            <input
                              type="radio"
                              class="btn-check"
                              name="btnradio{{ i }}"
                              id="btnradio2-{{ i }}"
                              autocomplete="off"
                              (click)="toggleAlternate(i, true)"
                              [value]="true"
                              [(ngModel)]="day.isAlternate"
                            />
                            <label
                              class="btn btn-outline-primary"
                              for="btnradio2-{{ i }}"
                              >Alternate</label
                            >
                          </div>
                          <div
                            class="btn-group radio-btn"
                            role="group"
                            aria-label="Basic radio toggle button group"
                            *ngIf="day.isAlternate"
                          >
                            <input
                              type="radio"
                              class="btn-check"
                              name="btnradioAlt{{ i }}"
                              id="btnradio3-{{ i }}"
                              autocomplete="off"
                              (click)="day.weekOffType = 1"
                              [value]="1"
                              [(ngModel)]="day.weekOffType"
                            />
                            <label
                              class="btn btn-outline-primary"
                              for="btnradio3-{{ i }}"
                              >ODD</label
                            >
                            <input
                              type="radio"
                              class="btn-check"
                              name="btnradioAlt{{ i }}"
                              id="btnradio4-{{ i }}"
                              autocomplete="off"
                              (click)="day.weekOffType = 2"
                              [value]="2"
                              [(ngModel)]="day.weekOffType"
                            />
                            <label
                              class="btn btn-outline-primary"
                              for="btnradio4-{{ i }}"
                              >EVEN</label
                            >
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div
                  class="modal-footer d-flex align-items-center justify-content-between"
                >
                  <button
                    type="button"
                    class="btn btn-outline-secondary btn-round"
                    (click)="shiftTimingActiveTabMethod()"
                  >
                    Back
                  </button>
                  <button
                    type="submit"
                    class="btn btn-outline-primary btn-round"
                    [disabled]="shiftForm.invalid"
                    (click)="staffActiveTabInShiftTimingMethod()"
                  >
                    Next
                  </button>
                </div>
              </div>

              <div
                class="tab-pane fade"
                id="staffselection"
                role="tabpanel"
                [class.show]="activeTab === 'staffselection'"
                [class.active]="activeTab === 'staffselection'"
              >
                <div class="staf-list-box mt-3">
                  <div
                    class="row mb-1 mt-3 align-items-center"
                    style="padding-bottom: 15px"
                  >
                    <div class="col-md-12">
                      <div
                        class="d-flex align-items-center"
                        style="border: 1px solid #f1f1f1"
                      >
                        <div style="width: 30%; position: relative">
                          <div class="dropdown" style="width: 100%">
                            <button
                              type="button"
                              id="dropdownMenuButton1"
                              data-bs-toggle="dropdown"
                              aria-expanded="false"
                              class="btn btn-secondary dropdown-toggle new-deopdown"
                            >
                              {{ selectedTeamName }}
                              <i
                                class="bi bi-chevron-down"
                                style="color: #444; font-size: 15px"
                              ></i>
                            </button>
                            <ul
                              aria-labelledby="dropdownMenuButton1"
                              class="dropdown-menu team-dropdown"
                              style="
                                width: 100%;
                                max-height: 200px;
                                overflow-y: auto;
                              "
                            >
                              <li
                                class="ng-star-inserted"
                                (click)="selectTeam(0)"
                              >
                                <a class="dropdown-item">All</a>
                              </li>
                              <li
                                class="ng-star-inserted"
                                *ngFor="let tn of teamNameList"
                                (click)="selectTeam(tn.teamId)"
                              >
                                <a class="dropdown-item"> {{ tn.teamName }} </a>
                              </li>
                            </ul>
                          </div>
                        </div>

                        <div class="" style="width: 70%">
                          <form
                            novalidate=""
                            role="search"
                            (submit)="searchUsers()"
                            class="searching ng-untouched ng-pristine ng-valid"
                          >
                            <div class="form-group" style="position: relative">
                              <input
                                type="text"
                                id="searchText"
                                placeholder="Search by name and role"
                                class="form-control me-2 ng-untouched ng-pristine ng-valid attendance-details-search"
                                (keyup)="searchUsers()"
                                [(ngModel)]="searchText"
                                [ngModelOptions]="{ standalone: true }"
                                style="padding: 10px 50px 10px 40px"
                              />
                              <button
                                *ngIf="searchText.length !== 0"
                                type="button"
                                class="btn close-btn"
                                (click)="clearSearchText()"
                              >
                                <i class="bi bi-x mt-auto mb-auto pl-3"></i>
                              </button>
                              <i
                                class="bi bi-search search-icon"
                                style="
                                  position: absolute;
                                  top: 50%;
                                  transform: translateY(-50%);
                                  left: 10px;
                                  padding-left: 5px;
                                "
                              ></i>
                            </div>
                          </form>
                        </div>

                        <div class="container">
                          <div class="content-wrapper">
                            <div class="filter-wrapper">
                              <!-- Display this only if there are selected staff -->
                              <a
                                class="info-button"
                                *ngIf="selectedStaffsUuids.length > 0"
                              >
                                {{ selectedStaffsUuids.length }} selected of
                                {{ totalUserCount }}
                              </a>
                              <!-- Clear button shows only if there are selected staff -->
                              <span
                                class="clear-button text-danger"
                                *ngIf="selectedStaffsUuids.length > 0"
                                (click)="unselectAllUsers()"
                              >
                                Clear all users <i class="bi bi-x"></i>
                              </span>
                              <label class="checkbox-label">
                                <input
                                  type="checkbox"
                                  [(ngModel)]="isAllUsersSelected"
                                  (change)="selectAllUsers($event)"
                                />
                                Select all
                              </label>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <ng-container
                    *ngIf="total > 0; else noDataFoundPlaceholderInShiftTiming"
                  >
                    <table class="table">
                      <thead class="thead-light">
                        <tr>
                          <th style="width: 0%">
                            <input
                              type="checkbox"
                              style="cursor: pointer"
                              class="form-check-input"
                              [(ngModel)]="isAllSelected"
                              (change)="selectAll(isAllSelected)"
                            />
                          </th>
                          <!-- <th style="width:25%; padding: 12px 15px;">S. No.</th> -->
                          <th style="width: 25%; padding: 12px 15px">Name</th>
                          <th style="width: 25%; padding: 12px 15px">Email</th>
                          <th style="width: 25%; padding: 12px 15px">Phone</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr
                          *ngFor="
                            let staff of staffs
                              | paginate
                                : {
                                    itemsPerPage: itemPerPage,
                                    currentPage: pageNumber,
                                    totalItems: total
                                  }
                          "
                          style="border-bottom: 1px solid #dddddd"
                        >
                          <td>
                            <div class="form-check">
                              <input
                                type="checkbox"
                                style="cursor: pointer"
                                class="form-check-input"
                                [(ngModel)]="staff.selected"
                                (change)="checkIndividualSelection()"
                              />
                            </div>
                          </td>
                          <!-- <td style="padding: 12px 15px;">{{ i+1 }}</td> -->
                          <td style="padding: 12px 15px">{{ staff.name }}</td>
                          <td style="padding: 12px 15px">
                            {{ staff.email ? staff.email : "N/A" }}
                          </td>
                          <td style="padding: 12px 15px">
                            {{ staff.phoneNumber || "N/A" }}
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </ng-container>
                  <ng-template #noDataFoundPlaceholderInShiftTiming>
                    <div class="errorboxmain">
                      <div class="errorboxinner text-center">
                        <div class="errorboxplaceholder mb-2">
                          <img
                            src="assets/images/addnewproduct.svg"
                            style="width: 80px"
                          />
                        </div>
                        <h4>No Data Found</h4>
                        <p>
                          We're unable to locate a record associated with the
                          information you entered.
                        </p>
                      </div>
                    </div>
                  </ng-template>
                </div>
                <!-- *ngIf="staffs.length > 8" -->
                <div
                  class="pagination pl-3"
                  *ngIf="
                    total > itemPerPage - 1 ||
                    (pageNumber === lastPageNumber && lastPageNumber !== 1)
                  "
                >
                  <p class="mb-0" style="padding-left: 15px">
                    Showing {{ getStartIndex() }} - {{ getEndIndex() }} of
                    {{ total }} members
                  </p>
                  <div class="row">
                    <div class="col-md-12">
                      <nav aria-label="Page navigation example">
                        <ul class="pagination justify-content-end">
                          <li
                            class="page-item"
                            [class.disabled]="pageNumber == 1"
                          >
                            <a
                              class="page-link"
                              href="javascript:void(0);"
                              aria-label="Previous"
                              (click)="changePage('prev')"
                            >
                              <span aria-hidden="true">&laquo;</span>
                            </a>
                          </li>
                          <li
                            class="page-item"
                            *ngFor="let page of getPages()"
                            [class.active]="pageNumber == page"
                          >
                            <a
                              class="page-link"
                              href="javascript:void(0);"
                              (click)="changePage(page)"
                              >{{ page }}</a
                            >
                          </li>
                          <li
                            class="page-item"
                            [class.disabled]="pageNumber == totalPages"
                          >
                            <a
                              class="page-link"
                              href="javascript:void(0);"
                              aria-label="Next"
                              (click)="changePage('next')"
                            >
                              <span aria-hidden="true">&raquo;</span>
                            </a>
                          </li>
                        </ul>
                      </nav>
                    </div>
                  </div>
                </div>
                <div id="back-and-submit">
                  <div
                    class="modal-footer d-flex align-items-center justify-content-end"
                  ></div>
                </div>
                <div
                  class="modal-footer d-flex align-items-center justify-content-between"
                >
                  <button
                    type="button"
                    class="btn btn-outline-secondary btn-round"
                    (click)="weekOffActiveTabMethod()"
                  >
                    Back
                  </button>
                  <button
                    type="button"
                    class="btn btn-outline-primary btn-round"
                    (click)="registerOrganizationShiftTimingMethodCall()"
                  >
                    Submit
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- <div class="modal-footer d-flex align-items-center justify-content-between">
          <button type="button" class="btn btn-outline-secondary btn-round" (click)="shiftTimingActiveTabMethod()" *ngIf="isStaffSelectionFlag || !isWeekOffFlag"> Back </button>
          <div class="d-flex align-items-center gap-3">
            <button type="submit" class="btn btn-outline-primary btn-round" [disabled]="shiftForm.invalid" (click)="staffActiveTabInShiftTimingMethod()" *ngIf="!isStaffSelectionFlag || isWeekOffFlag"> Next </button>
            <button type="button" class="btn btn-outline-primary btn-round" (click)="registerOrganizationShiftTimingMethodCall()"  *ngIf="isStaffSelectionFlag"> Submit </button>
          </div>
        </div> -->
      </div>
    </div>
  </div>

  <div
    class="modal fade"
    id="attendance-setting"
    tabindex="-1"
    role="dialog"
    aria-labelledby="exampleModalDefaultLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h6 class="modal-title m-0" id="exampleModalDefaultLabel">
            Manual Attendance
          </h6>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
        <!--end modal-header-->
        <div class="modal-body">
          <div class="row">
            <div class="col-md-12">
              <div class="attendance-settin-list">
                <div
                  class="categryCustomizecard p-3 attendance-active d-flex pointer align-items-center gap-2 bg-white"
                >
                  <div class="categryCustomizeinput">
                    <input type="radio" name="mannual" id="mannualType" />
                  </div>
                  <div class="categryCustomizeinfo">
                    <label for="mannualType" class="mb-0 pointer d-block">
                      <h3>Manual Attendance</h3>
                      <p>
                        Large images are best for products where every detail is
                        a part of the product’s value.
                      </p>
                    </label>
                  </div>
                </div>
                <div
                  class="categryCustomizecard p-3 d-flex pointer align-items-center gap-2 bg-white"
                >
                  <div class="categryCustomizeinput">
                    <input type="radio" name="location" id="locationType" />
                  </div>
                  <div class="categryCustomizeinfo">
                    <label for="locationType" class="mb-0 pointer d-block">
                      <h3>Staff Attendance With Location</h3>
                      <p>
                        Large images are best for products where every detail is
                        a part of the product’s value.
                      </p>
                    </label>
                  </div>
                </div>
                <div
                  class="categryCustomizecard p-3 d-flex pointer align-items-center gap-2 bg-white"
                >
                  <div class="categryCustomizeinput">
                    <input
                      type="radio"
                      name="selfieLocation"
                      id="selfieLocationType"
                    />
                  </div>
                  <div class="categryCustomizeinfo">
                    <label
                      for="selfieLocationType"
                      class="mb-0 pointer d-block"
                    >
                      <h3>Staff Attendance With Selfie & Location</h3>
                      <p>
                        Large images are best for products where every detail is
                        a part of the product’s value.
                      </p>
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!--end row-->
        </div>
        <!--end modal-body-->
        <div
          class="modal-footer d-flex align-items-center justify-content-center"
        >
          <button type="button" class="btn btn-primary" style="width: 100%">
            Save & Contnue
          </button>
        </div>
        <!--end modal-footer-->
      </div>
      <!--end modal-content-->
    </div>
    <!--end modal-dialog-->
  </div>
  <!--end modal-->
  <div
    class="modal fade"
    id="addholiday"
    tabindex="-1"
    role="dialog"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Add Holiday(s)</h5>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            #customHolidayModal
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body">
          <form #holidayForm="ngForm">
            <div
              *ngFor="let holiday of holidayList; let i = index"
              class="form-group row mb-3"
            >
              <div class="col-md-6">
                <input
                  type="text"
                  name="holidayName{{ i }}"
                  [(ngModel)]="holiday.name"
                  class="form-control whatapp-login-input"
                  placeholder="Enter Holiday Name"
                  required
                />
              </div>
              <div class="col-md-5">
                <nz-date-picker
                  class="nz-overlay-container whatapp-login-input"
                  name="holidayDate{{ i }}"
                  [(ngModel)]="holiday.date"
                  ngModel
                  required
                  nzPlaceHolder="Select Holiday Date"
                ></nz-date-picker>
              </div>
              <div class="col-md-1">
                <!-- <button
                type="button"
                class="btn btn-outline-danger"
                (click)="removeHoliday(i)"
                *ngIf="holidayList.length > 1"
              >
                Remove
              </button> -->
                <button
                  type="button"
                  class="btn btn-soft-danger btn-icon-square-sm"
                  style="padding: 24px"
                  (click)="removeHoliday(i)"
                  *ngIf="holidayList.length > 1"
                >
                  <i class="bi bi-trash"></i>
                </button>
              </div>
            </div>
          </form>
        </div>
        <div class="d-flex justify-content-between modal-footer">
          <span class="add-more-holiday" (click)="addHoliday()">
            <i class="bi bi-plus"></i> Add More
          </span>
          <button
            type="submit"
            class="btn btn-outline-primary btn-round"
            (click)="registerCustomHolidays()"
            [disabled]="holidayForm.invalid"
            *ngIf="!isCustomHolidayLoader"
          >
            Submit
          </button>
          <div class="dot-opacity-loader" *ngIf="isCustomHolidayLoader">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div
    class="modal fade"
    id="addweeklyholiday"
    tabindex="-1"
    role="dialog"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h6 class="modal-title">Weekly Holiday</h6>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
            #closeWeeklyHolidayModal
          ></button>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-md-12">
              <div
                class="week-checkbox d-flex align-items-center gap-3"
                *ngFor="let day of weekDay; let i = index"
              >
                <div class="form-check d-flex align-items-center gap-2">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    [(ngModel)]="day.selected"
                    [id]="'weekDay' + i"
                    (click)="toggleSelection(i)"
                  />
                  <label
                    class="form-check-label align-label"
                    [for]="'weekDay' + i"
                    >{{ day.name }}</label
                  >
                </div>
                <div *ngIf="day.selected">
                  <div
                    class="btn-group"
                    role="group"
                    aria-label="Basic radio toggle button group"
                  >
                    <!-- <input type="radio" class="btn-check" name="btnradio{{ i }}" id="btnradio1-{{ i }}" autocomplete="off" (click)="toggleAlternate(i, false)" [checked]="!day.isAlternate" />
                    <label class="btn btn-outline-primary" for="btnradio1-{{ i }}">All</label>
                    <input type="radio" class="btn-check" name="btnradio{{ i }}" id="btnradio2-{{ i }}" autocomplete="off" (click)="toggleAlternate(i, true)" [checked]="day.isAlternate" /> -->
                    <label
                      class="btn btn-outline-primary"
                      for="btnradio2-{{ i }}"
                      >Alternate</label
                    >
                  </div>
                  <div
                    class="btn-group radio-btn"
                    role="group"
                    aria-label="Basic radio toggle button group"
                    *ngIf="day.isAlternate"
                  >
                    <input
                      type="radio"
                      class="btn-check"
                      name="btnradioAlt{{ i }}"
                      id="btnradio3-{{ i }}"
                      autocomplete="off"
                      (click)="day.weekOffType = 1"
                      [checked]="day.weekOffType === 1"
                    />
                    <label
                      class="btn btn-outline-primary"
                      for="btnradio3-{{ i }}"
                      >ODD</label
                    >
                    <input
                      type="radio"
                      class="btn-check"
                      name="btnradioAlt{{ i }}"
                      id="btnradio4-{{ i }}"
                      autocomplete="off"
                      (click)="day.weekOffType = 2"
                      [checked]="day.weekOffType === 2"
                    />
                    <label
                      class="btn btn-outline-primary"
                      for="btnradio4-{{ i }}"
                      >EVEN</label
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-primary btnmarkcancel"
            data-bs-dismiss="modal"
          >
            Cancel
          </button>
          <button
            type="button"
            class="btn btnmarkdelete"
            (click)="submitWeeklyHolidays()"
            *ngIf="!submitWeeklyHolidaysLoader"
          >
            Submit
          </button>
          <div class="dot-opacity-loader" *ngIf="submitWeeklyHolidaysLoader">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div
    class="modal fade"
    id="addweeklyholiday"
    tabindex="-1"
    role="dialog"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h6 class="modal-title">Weekly Holiday</h6>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
            #closeWeeklyHolidayModal
          ></button>
        </div>
        <div class="modal-body">
          <!-- Tabs navigation -->
          <ul id="weeklyHolidayTab" role="tablist" class="nav nav-tabs">
            <li role="presentation" class="nav-item">
              <button
                id="holiday-tab"
                data-bs-toggle="tab"
                data-bs-target="#holidaySettings"
                type="button"
                role="tab"
                aria-controls="holidaySettings"
                aria-selected="true"
                class="nav-link active"
              >
                WeekOff Settings
              </button>
            </li>
            <!-- <li role="presentation" class="nav-item">
                    <button
                        id="advanced-tab"
                        data-bs-toggle="tab"
                        data-bs-target="#advancedSettings"
                        type="button"
                        role="tab"
                        aria-controls="advancedSettings"
                        aria-selected="false"
                        class="nav-link"
                    >
                        Advanced Settings
                    </button>
                </li> -->
          </ul>

          <!-- Tab panes -->
          <div class="tab-content">
            <div
              role="tabpanel"
              class="tab-pane fade show active"
              id="holidaySettings"
              aria-labelledby="holiday-tab"
            >
              <!-- Existing content for Weekly Holiday Settings -->
              <div class="row">
                <div class="col-md-12">
                  <div
                    class="week-checkbox d-flex align-items-center gap-3"
                    *ngFor="let day of weekDay; let i = index"
                  >
                    <div class="form-check d-flex align-items-center gap-2">
                      <!-- <input
                                  class="form-check-input"
                                  type="checkbox"
                                  [(ngModel)]="day.selected"
                                  [id]="'weekDay' + i"
                                  (click)="toggleSelection(i)"
                                /> -->
                      <label
                        class="form-check-label align-label"
                        [for]="'weekDay' + i"
                        >{{ day.name }}</label
                      >
                    </div>
                    <div *ngIf="day.selected">
                      <div
                        class="btn-group"
                        role="group"
                        aria-label="Basic radio toggle button group"
                      >
                        <!-- <input
                                    type="radio"
                                    class="btn-check"
                                    name="btnradio{{ i }}"
                                    id="btnradio1-{{ i }}"
                                    autocomplete="off"
                                    (click)="toggleAlternate(i, false)"
                                    [checked]="!day.isAlternate"
                                  /> -->
                        <label
                          class="btn btn-outline-primary"
                          for="btnradio1-{{ i }}"
                          >All</label
                        >
                        <!--               
                                  <input
                                    type="radio"
                                    class="btn-check"
                                    name="btnradio{{ i }}"
                                    id="btnradio2-{{ i }}"
                                    autocomplete="off"
                                    (click)="toggleAlternate(i, true)"
                                    [checked]="day.isAlternate"
                                  /> -->
                        <label
                          class="btn btn-outline-primary"
                          for="btnradio2-{{ i }}"
                          >Alternate</label
                        >
                      </div>

                      <div
                        class="btn-group radio-btn"
                        role="group"
                        aria-label="Basic radio toggle button group"
                        *ngIf="day.isAlternate"
                      >
                        <input
                          type="radio"
                          class="btn-check"
                          name="btnradioAlt{{ i }}"
                          id="btnradio3-{{ i }}"
                          autocomplete="off"
                          (click)="day.weekOffType = 1"
                          [checked]="day.weekOffType === 1"
                        />
                        <label
                          class="btn btn-outline-primary"
                          for="btnradio3-{{ i }}"
                          >ODD</label
                        >

                        <input
                          type="radio"
                          class="btn-check"
                          name="btnradioAlt{{ i }}"
                          id="btnradio4-{{ i }}"
                          autocomplete="off"
                          (click)="day.weekOffType = 2"
                          [checked]="day.weekOffType === 2"
                        />
                        <label
                          class="btn btn-outline-primary"
                          for="btnradio4-{{ i }}"
                          >EVEN</label
                        >
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div
              role="tabpanel"
              class="tab-pane fade"
              id="advancedSettings"
              aria-labelledby="advanced-tab"
            >
              <!-- Additional settings or features you want to add can go here -->
              <div class="row">
                <div class="col-md-12">
                  <div
                    class="d-flex align-items-center"
                    style="border: 1px solid #f1f1f1"
                  >
                    <div style="width: 30%; position: relative">
                      <div class="dropdown" style="width: 100%">
                        <button
                          type="button"
                          id="dropdownMenuButton1"
                          data-bs-toggle="dropdown"
                          aria-expanded="false"
                          class="btn btn-secondary dropdown-toggle new-deopdown"
                        >
                          {{ selectedTeamName }}
                          <i
                            class="bi bi-chevron-down"
                            style="color: #444; font-size: 15px"
                          ></i>
                        </button>
                        <ul
                          aria-labelledby="dropdownMenuButton1"
                          class="dropdown-menu team-dropdown"
                          style="width: 100%"
                        >
                          <li class="ng-star-inserted" (click)="selectTeam(0)">
                            <a class="dropdown-item">All</a>
                          </li>
                          <li
                            class="ng-star-inserted"
                            *ngFor="let tn of teamNameList"
                            (click)="selectTeam(tn.teamId)"
                          >
                            <a class="dropdown-item"> {{ tn.teamName }} </a>
                          </li>
                        </ul>
                      </div>
                    </div>

                    <div class="" style="width: 70%">
                      <form
                        novalidate=""
                        role="search"
                        (submit)="searchUsers()"
                        class="searching ng-untouched ng-pristine ng-valid"
                      >
                        <div class="form-group" style="position: relative">
                          <input
                            type="text"
                            id="searchText"
                            placeholder="Search by name and role"
                            class="form-control me-2 ng-untouched ng-pristine ng-valid attendance-details-search"
                            (keyup)="searchUsers()"
                            [(ngModel)]="searchText"
                            [ngModelOptions]="{ standalone: true }"
                            style="padding: 10px 50px 10px 40px"
                          />
                          <button
                            *ngIf="searchText.length !== 0"
                            type="button"
                            class="btn close-btn"
                            (click)="clearSearchText()"
                          >
                            <i class="bi bi-x mt-auto mb-auto pl-3"></i>
                          </button>
                          <i
                            class="bi bi-search search-icon"
                            style="
                              position: absolute;
                              top: 50%;
                              transform: translateY(-50%);
                              left: 10px;
                              padding-left: 5px;
                            "
                          ></i>
                        </div>
                      </form>
                    </div>

                    <div class="" style="width: 20%">
                      <div
                        class="d-flex justify-content-end align-items-center"
                        style="gap: 10px; padding-right: 15px"
                      >
                        <div
                          class="add-filtter d-flex align-items-center justify-content-end"
                          style="gap: 10px"
                        >
                          <a type="button"> 8 selected of 24 </a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <ng-container
                *ngIf="total > 0; else noDataFoundPlaceholderInShiftTiming"
              >
                <table class="table">
                  <thead class="thead-light">
                    <tr>
                      <th style="width: 0%">
                        <input
                          type="checkbox"
                          style="cursor: pointer"
                          class="form-check-input"
                          [(ngModel)]="isAllSelected"
                          (change)="selectAll(isAllSelected)"
                        />
                      </th>
                      <!-- <th style="width:25%; padding: 12px 15px;">S. No.</th> -->
                      <th style="width: 25%; padding: 12px 15px">Name</th>
                      <th style="width: 25%; padding: 12px 15px">Email</th>
                      <th style="width: 25%; padding: 12px 15px">Phone</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr
                      *ngFor="
                        let staff of staffs
                          | paginate
                            : {
                                itemsPerPage: itemPerPage,
                                currentPage: pageNumber,
                                totalItems: total
                              }
                      "
                      style="border-bottom: 1px solid #dddddd"
                    >
                      <td>
                        <div class="form-check">
                          <input
                            type="checkbox"
                            style="cursor: pointer"
                            class="form-check-input"
                            [(ngModel)]="staff.selected"
                            (change)="checkIndividualSelection()"
                          />
                        </div>
                      </td>
                      <!-- <td style="padding: 12px 15px;">{{ i+1 }}</td> -->
                      <td style="padding: 12px 15px">{{ staff.name }}</td>
                      <td style="padding: 12px 15px">
                        {{ staff.email ? staff.email : "N/A" }}
                      </td>
                      <td style="padding: 12px 15px">
                        {{ staff.phoneNumber || "N/A" }}
                      </td>
                    </tr>
                  </tbody>
                </table>
              </ng-container>

              <ng-template #noDataFoundPlaceholderInShiftTiming>
                <div class="errorboxmain">
                  <div class="errorboxinner text-center">
                    <div class="errorboxplaceholder mb-2">
                      <img
                        src="assets/images/addnewproduct.svg"
                        style="width: 80px"
                      />
                    </div>

                    <h4>No Data Found</h4>

                    <p>
                      We're unable to locate a record associated with the
                      information you entered.
                    </p>
                  </div>
                </div>
              </ng-template>
              <div
                class="pagination pl-3"
                *ngIf="
                  total > itemPerPage - 1 ||
                  (pageNumber === lastPageNumber && lastPageNumber !== 1)
                "
              >
                <p class="mb-0" style="padding-left: 15px">
                  Showing {{ getStartIndex() }} - {{ getEndIndex() }} of
                  {{ total }} teams
                </p>
                <div class="row">
                  <div class="col-md-12">
                    <nav aria-label="Page navigation example">
                      <ul class="pagination justify-content-end">
                        <li
                          class="page-item"
                          [class.disabled]="pageNumber == 1"
                        >
                          <a
                            class="page-link"
                            href="javascript:void(0);"
                            aria-label="Previous"
                            (click)="changePage('prev')"
                          >
                            <span aria-hidden="true">&laquo;</span>
                          </a>
                        </li>
                        <li
                          class="page-item"
                          *ngFor="let page of getPages()"
                          [class.active]="pageNumber == page"
                        >
                          <a
                            class="page-link"
                            href="javascript:void(0);"
                            (click)="changePage(page)"
                            >{{ page }}</a
                          >
                        </li>
                        <li
                          class="page-item"
                          [class.disabled]="pageNumber == totalPages"
                        >
                          <a
                            class="page-link"
                            href="javascript:void(0);"
                            aria-label="Next"
                            (click)="changePage('next')"
                          >
                            <span aria-hidden="true">&raquo;</span>
                          </a>
                        </li>
                      </ul>
                    </nav>
                  </div>
                </div>
              </div>
              <div id="back-and-submit">
                <div
                  class="modal-footer d-flex align-items-center justify-content-end"
                ></div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-primary btnmarkcancel"
            data-bs-dismiss="modal"
          >
            Cancel
          </button>
          <button
            type="button"
            class="btn btnmarkdelete"
            (click)="submitWeeklyHolidays()"
            *ngIf="!submitWeeklyHolidaysLoader"
          >
            Submit
          </button>
          <div class="dot-opacity-loader" *ngIf="submitWeeklyHolidaysLoader">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div
    class="modal fade"
    id="automation-rules"
    data-bs-backdrop="static"
    tabindex="-1"
    role="dialog"
    aria-labelledby="exampleModalDefaultLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-xl" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h6 class="modal-title m-0" id="exampleModalDefaultLabel">
            Automation Rules
          </h6>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
            #attendanceRuleDefinitionModalClose
          ></button>
        </div>
        <!--end modal-header-->
        <div class="modal-body">
          <div class="row">
            <div class="col-md-8">
              <div
                class="d-flex align-items-center attendance-boxx"
                *ngFor="
                  let attendanceRuleResponse of attendanceRuleResponseList
                "
              >
                <div class="late-icon">
                  <i class="bi bi-person"></i>
                </div>
                <div class="late-rule">
                  <h5>{{ attendanceRuleResponse.name }}</h5>
                  <p class="mb-0">{{ attendanceRuleResponse.description }}</p>
                </div>
                <div
                  class="late-btn d-flex justify-content-end"
                  style="gap: 10px; padding-right: 20px"
                >
                  <a
                    href=""
                    data-bs-toggle="modal"
                    data-bs-target="#rules-value"
                    class="create-rule"
                    style="font-size: 12px"
                    (click)="
                      openAttendanceRuleResponseModal(attendanceRuleResponse)
                    "
                    >Create rule from here <i class="bi bi-chevron-right"></i>
                  </a>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="rule-section">
                <div class="rule-main-div">
                  <div class="tracking-body">
                    <ul class="tracking-steps">
                      <li class="tracking-item">
                        <div class="d-flex new-stap">
                          <div class="tracing-icon">
                            <i class="bi bi-check2"></i>
                          </div>
                          <div class="tracking-data">
                            <p>Create your rule</p>
                            <div>
                              <span> Automate Late fine for employee </span>
                            </div>
                          </div>
                        </div>
                      </li>
                      <li class="tracking-item">
                        <div class="d-flex align-items-center new-stap">
                          <div class="tracing-icon">
                            <i class="bi bi-check2"></i>
                          </div>
                          <div class="tracking-data">
                            <p>Set a rule value</p>
                            <div>
                              <span>Set a value for your rule type.</span>
                            </div>
                          </div>
                        </div>
                      </li>
                      <li class="tracking-item">
                        <div class="d-flex new-stap">
                          <div class="tracing-icon">
                            <i class="bi bi-check2"></i>
                          </div>
                          <div class="tracking-data">
                            <p>Assign Staff</p>
                            <div>
                              <span> Automate Late fine for employee </span>
                            </div>
                          </div>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div
    class="modal fade"
    id="rules-value"
    data-bs-backdrop="static"
    tabindex="-1"
    role="dialog"
    aria-labelledby="exampleModalDefaultLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-xl" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h6 class="modal-title m-0" id="exampleModalDefaultLabel">
            {{ attendanceRuleResponse.name }}
          </h6>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
            #addAttendanceRuleDefinitionModalClose
            (click)="clearAttendanceRuleDefinitionModal()"
          ></button>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-md-8">
              <div class="">
                <ul
                  id="myTab"
                  role="tablist"
                  class="nav nav-tabs"
                  *ngIf="CURRENT_MODAL == DEDUCTION_RULE_DEFINITION"
                >
                  <li role="presentation" class="nav-item">
                    <button
                      id="home-tab"
                      data-bs-toggle="tab"
                      data-bs-target="#home"
                      type="button"
                      role="tab"
                      aria-controls="home"
                      aria-selected="true"
                      class="nav-link active"
                      #ruleActiveTab
                    >
                      Rules
                    </button>
                  </li>
                  <li role="presentation" class="nav-item">
                    <button
                      id="profile-tab"
                      data-bs-toggle="tab"
                      [class.disabled]="
                        (!customCheckbox &&
                          !halfDayCheckbox &&
                          !fullDayCheckbox) ||
                        selectedCustomDeductionType?.type == '' ||
                        attendanceRuleForm.invalid ||
                        compareTimesValidation()
                      "
                      [attr.aria-selected]="!attendanceRuleForm.invalid"
                      [attr.tabindex]="attendanceRuleForm.invalid ? -1 : null"
                      (click)="
                        !attendanceRuleForm.invalid &&
                          staffActiveTabInAutomationRuleMethod()
                      "
                      data-bs-target="#profile"
                      type="button"
                      role="tab"
                      aria-controls="profile"
                      aria-selected="false"
                      class="nav-link"
                      #staffActiveTabInAutomationRule
                    >
                      Staff selection
                    </button>
                  </li>
                </ul>
                <ul
                  id="myTab"
                  role="tablist"
                  class="nav nav-tabs"
                  *ngIf="CURRENT_MODAL == OVERTIME_RULE_DEFINITION"
                >
                  <li role="presentation" class="nav-item">
                    <button
                      id="home-tab"
                      data-bs-toggle="tab"
                      data-bs-target="#home"
                      type="button"
                      role="tab"
                      aria-controls="home"
                      aria-selected="true"
                      class="nav-link active"
                      #ruleActiveTab
                    >
                      Rules
                    </button>
                  </li>
                  <li role="presentation" class="nav-item">
                    <button
                      id="profile-tab"
                      data-bs-toggle="tab"
                      [class.disabled]="
                        (!customCheckbox &&
                          !halfDayCheckbox &&
                          !fullDayCheckbox) ||
                        selectedCustomOvertimeType?.type == '' ||
                        selectedHalfDayOvertimeType?.type == '' ||
                        selectedFullDayOvertimeType?.type == '' ||
                        attendanceRuleForm.invalid ||
                        compareTimesValidation()
                      "
                      [attr.aria-selected]="!attendanceRuleForm.invalid"
                      [attr.tabindex]="attendanceRuleForm.invalid ? -1 : null"
                      (click)="
                        !attendanceRuleForm.invalid &&
                          staffActiveTabInAutomationRuleMethod()
                      "
                      data-bs-target="#profile"
                      type="button"
                      role="tab"
                      aria-controls="profile"
                      aria-selected="false"
                      class="nav-link"
                      #staffActiveTabInAutomationRule
                    >
                      Staff selection
                    </button>
                  </li>
                </ul>
                <div class="tab-content" id="myTabContent">
                  <div
                    class="tab-pane fade show active"
                    id="home"
                    role="tabpanel"
                  >
                    <!-- <form #testForm="ngForm">
                      <input type="text" required name="test2" ngModel minlength="2">
                      <input type="text" required name="test21" ngModel minlength="2">
                      <button type="button" class="btn btn-primary" [disabled]="!testForm.valid" (click)="testFormcheck()">submit</button>
                    </form> -->

                    <!-- <form #attendanceRuleForm="ngForm" (ngSubmit)="submitAttendanceRuleForm()"> -->
                    <form #attendanceRuleForm="ngForm">
                      <div
                        class="rules-main"
                        *ngIf="CURRENT_MODAL == DEDUCTION_RULE_DEFINITION"
                      >
                        <div class="form-check pb-3">
                          <input
                            class="form-check-input"
                            style="cursor: pointer"
                            type="checkbox"
                            value=""
                            id="flexCheckChecked"
                            [checked]="customCheckbox"
                            (click)="tickCustomCheckbox()"
                          />
                          <label
                            class="form-check-label"
                            for="flexCheckChecked"
                          >
                            {{ attendanceRuleResponse.customRuleHeader }}
                          </label>
                        </div>
                        <div class="dudtion-type" *ngIf="customCheckbox">
                          <div class="col-md-12">
                            <div class="row">
                              <div class="col-md-4">
                                <div class="if-late">
                                  <label for="hoursInput" class="pb-2"
                                    >{{ attendanceRuleResponse.ruleSubHeader }}
                                  </label>
                                  <div
                                    class="d-flex justify-content-center align-items-center"
                                    style="gap: 5px"
                                  >
                                    <nz-time-picker
                                      [(ngModel)]="customLateDurationValue"
                                      [ngModelOptions]="{ standalone: true }"
                                      nzFormat="HH:mm"
                                      nzPlaceHolder="Select Duration"
                                      [nzDisabledHours]="disabledHours"
                                      (ngModelChange)="
                                        getlateDuration(
                                          $event,
                                          attendanceRuleResponse.attendanceRuleTypeId
                                        )
                                      "
                                      name="lateDuration"
                                      required
                                      #lateDuration="ngModel"
                                    ></nz-time-picker>
                                    <span>
                                      <b>hrs.</b>
                                    </span>
                                  </div>
                                  <div
                                    *ngIf="
                                      lateDuration?.touched &&
                                      lateDuration.errors?.required
                                    "
                                    class="text-danger"
                                    style="font-size: 13px"
                                  >
                                    Duration is required.
                                  </div>
                                  <div
                                    *ngIf="invalidCustomlateDuration1"
                                    class="text-danger"
                                    style="font-size: 13px"
                                  >
                                    Custom Duration should be less than Half Day
                                    Duration.
                                  </div>
                                  <div
                                    *ngIf="invalidCustomlateDuration2"
                                    class="text-danger"
                                    style="font-size: 13px"
                                  >
                                    Custom Duration should be less than full Day
                                    Duration.
                                  </div>
                                </div>
                              </div>
                              <div class="col-md-4">
                                <div class="dudct-type">
                                  <label for="exampleInputEmail1" class="pb-2"
                                    >Deduction Type</label
                                  >
                                  <div class="dropdown">
                                    <button
                                      class="btn btn-secondary dropdown-toggle new-dropdown"
                                      type="button"
                                      id="dropdownMenuButton1"
                                      data-bs-toggle="dropdown"
                                      aria-expanded="false"
                                      style="
                                        text-align: left;
                                        background-color: white;
                                        color: black;
                                        border-color: #ced4da;
                                        width: 100%;
                                      "
                                    >
                                      {{
                                        selectedCustomDeductionType?.type ||
                                          "Select deduction type"
                                      }}
                                      <i class="bi bi-chevron-down"></i>
                                    </button>
                                    <ul
                                      class="dropdown-menu"
                                      aria-labelledby="dropdownMenuButton1"
                                      style="width: 100%"
                                    >
                                      <li
                                        *ngFor="
                                          let deductionType of deductionTypeList
                                        "
                                      >
                                        <a
                                          class="dropdown-item"
                                          (click)="
                                            selectCustomDeductionType(
                                              deductionType
                                            )
                                          "
                                        >
                                          {{ deductionType.type }}
                                        </a>
                                      </li>
                                    </ul>
                                  </div>
                                </div>
                              </div>
                              <div class="col-md-4">
                                <div
                                  *ngIf="
                                    selectedCustomDeductionType?.type ==
                                    'FIXED AMOUNT'
                                  "
                                >
                                  <label for="exampleInputEmail1" class="pb-2"
                                    >Amount in rupees:</label
                                  >
                                  <div
                                    class="justify-content-center"
                                    style="gap: 20px"
                                  >
                                    <input
                                      type="number"
                                      class="form-control"
                                      aria-describedby="emailHelp"
                                      placeholder="Enter the amount here"
                                      [(ngModel)]="
                                        attendanceRuleDefinitionRequest!
                                          .deductionRuleDefinitionRequest!
                                          .customSalaryDeduction!.amountInRupees
                                      "
                                      [ngModelOptions]="{ standalone: true }"
                                      name="amount"
                                      #amount="ngModel"
                                      required
                                    />
                                    <div
                                      *ngIf="
                                        amount?.touched &&
                                        amount.errors?.required
                                      "
                                      class="text-danger"
                                      style="font-size: 13px"
                                    >
                                      Amount is required.
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="mt-3">
                            <div class="form-check">
                              <input
                                class="form-check-input"
                                style="cursor: pointer"
                                type="checkbox"
                                value=""
                                id="Occurrences"
                                [checked]="customOccurrenceCheckbox"
                                (click)="tickCustomOccurrenceCheckbox()"
                              />
                              <label
                                class="form-check-label"
                                #Occurrences
                                for="Occurrences"
                              >
                                Set Occurrences (Weekly)
                              </label>
                            </div>
                            <div
                              class="d-flex align-items-center mt-2"
                              style="gap: 10px"
                              *ngIf="customOccurrenceCheckbox"
                            >
                              <div class="col-md-12">
                                <div class="row">
                                  <div class="col-md-4">
                                    <div
                                      class="if-late d-flex align-items-center"
                                      style="width: 150px; gap: 10px"
                                    >
                                      <input
                                        type="text"
                                        class="form-control"
                                        aria-describedby="emailHelp"
                                        placeholder="Count"
                                        [(ngModel)]="
                                          attendanceRuleDefinitionRequest!
                                            .deductionRuleDefinitionRequest!
                                            .customSalaryDeduction!
                                            .occurrenceCount
                                        "
                                        [ngModelOptions]="{ standalone: true }"
                                        name="lateOccurrenceCount"
                                        #lateOccurrenceCount="ngModel"
                                        required
                                      />
                                      <span>
                                        <b>times</b>
                                      </span>
                                    </div>
                                    <div
                                      *ngIf="
                                        lateOccurrenceCount?.touched &&
                                        lateOccurrenceCount.errors?.required
                                      "
                                      class="text-danger"
                                      style="font-size: 13px"
                                    >
                                      Count is required.
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="mt-2">
                          <div class="form-check pb-3">
                            <input
                              class="form-check-input"
                              style="cursor: pointer"
                              type="checkbox"
                              value=""
                              id="staff"
                              [checked]="halfDayCheckbox"
                              (click)="tickHalfDayCheckbox()"
                            />
                            <label class="form-check-label" for="staff">
                              {{ attendanceRuleResponse.halfDayRuleHeader }}
                            </label>
                          </div>
                          <!-- half day salary deduction -->
                          <div class="dudtion-type" *ngIf="halfDayCheckbox">
                            <div class="col-md-12">
                              <div class="row">
                                <div class="col-md-4">
                                  <div class="if-late">
                                    <label for="exampleInputEmail1" class="pb-2"
                                      >{{
                                        attendanceRuleResponse.ruleSubHeader
                                      }}
                                    </label>
                                    <div
                                      class="d-flex justify-content-center align-items-center"
                                      style="gap: 5px"
                                    >
                                      <nz-time-picker
                                        [(ngModel)]="halfDayLateDurationValue"
                                        [ngModelOptions]="{ standalone: true }"
                                        nzFormat="HH:mm"
                                        nzPlaceHolder="Select Duration"
                                        (ngModelChange)="
                                          getHalfDaylateDuration(
                                            $event,
                                            attendanceRuleResponse.attendanceRuleTypeId
                                          )
                                        "
                                        name="halfDayLateDuration"
                                        #halfDayLateDuration="ngModel"
                                        required
                                      ></nz-time-picker>
                                      <span>
                                        <b>hrs.</b>
                                      </span>
                                    </div>
                                    <div
                                      *ngIf="invalidHalfDaylateDuration1"
                                      class="text-danger"
                                      style="font-size: 13px"
                                    >
                                      Half Day Duration should be greater than
                                      Custom Day Duration.
                                    </div>
                                    <div
                                      *ngIf="invalidHalfDaylateDuration2"
                                      class="text-danger"
                                      style="font-size: 13px"
                                    >
                                      Half Day Duration should be less than full
                                      Day Duration.
                                    </div>
                                    <div
                                      *ngIf="
                                        halfDayLateDuration?.touched &&
                                        halfDayLateDuration.errors?.required
                                      "
                                      class="text-danger"
                                      style="font-size: 13px"
                                    >
                                      Duration is required.
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="mt-3">
                              <div class="form-check">
                                <input
                                  class="form-check-input"
                                  style="cursor: pointer"
                                  type="checkbox"
                                  value=""
                                  id="Occurrences2"
                                  [checked]="halfDayOccurrenceCheckbox"
                                  (click)="tickHalfDayOccurrenceCheckbox()"
                                />
                                <label
                                  class="form-check-label"
                                  for="Occurrences2"
                                >
                                  Set Occurrences (Weekly)
                                </label>
                              </div>
                              <div
                                class="d-flex align-items-center mt-2"
                                style="gap: 10px"
                                *ngIf="halfDayOccurrenceCheckbox"
                              >
                                <div class="col-md-12">
                                  <div class="row">
                                    <div class="col-md-4">
                                      <div
                                        class="if-late d-flex justify-content-center align-items-center"
                                        style="width: 150px; gap: 10px"
                                      >
                                        <input
                                          type="text"
                                          class="form-control"
                                          aria-describedby="emailHelp"
                                          placeholder="Count"
                                          [(ngModel)]="
                                            attendanceRuleDefinitionRequest!
                                              .deductionRuleDefinitionRequest!
                                              .halfDaySalaryDeduction!
                                              .occurrenceCount
                                          "
                                          [ngModelOptions]="{
                                            standalone: true
                                          }"
                                          name="halfDayOccurrenceCount"
                                          #halfDayOccurrenceCount="ngModel"
                                          required
                                        />
                                        <span>
                                          <b>times</b>
                                        </span>
                                      </div>
                                      <div
                                        *ngIf="
                                          halfDayOccurrenceCount?.touched &&
                                          halfDayOccurrenceCount.errors
                                            ?.required
                                        "
                                        class="text-danger"
                                        style="font-size: 13px"
                                      >
                                        Count is required.
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <!-- full day salary deduction -->
                          <div class="form-check pb-3">
                            <input
                              class="form-check-input"
                              style="cursor: pointer"
                              type="checkbox"
                              value=""
                              id="selery"
                              [checked]="fullDayCheckbox"
                              (click)="tickFullDayCheckbox()"
                            />
                            <label class="form-check-label" for="selery">
                              {{ attendanceRuleResponse.fullDayRuleHeader }}
                            </label>
                          </div>
                          <div class="dudtion-type" *ngIf="fullDayCheckbox">
                            <div class="col-md-12">
                              <div class="row">
                                <div class="col-md-4">
                                  <div class="if-late">
                                    <label for="exampleInputEmail1" class="pb-2"
                                      >{{
                                        attendanceRuleResponse.ruleSubHeader
                                      }}
                                    </label>
                                    <div
                                      class="d-flex justify-content-center align-items-center"
                                      style="gap: 5px"
                                    >
                                      <nz-time-picker
                                        [(ngModel)]="fullDayLateDurationValue"
                                        [ngModelOptions]="{ standalone: true }"
                                        nzFormat="HH:mm"
                                        nzPlaceHolder="Select Duration"
                                        (ngModelChange)="
                                          getFullDaylateDuration(
                                            $event,
                                            attendanceRuleResponse.attendanceRuleTypeId
                                          )
                                        "
                                        name="fullDayLateDuration"
                                        #fullDayLateDuration="ngModel"
                                        required
                                      ></nz-time-picker>
                                      <span>
                                        <b>hrs.</b>
                                      </span>
                                    </div>
                                    <div
                                      *ngIf="invalidFullDaylateDuration1"
                                      class="text-danger"
                                      style="font-size: 13px"
                                    >
                                      Full Day Duration should be greater than
                                      Custom Day Duration.
                                    </div>
                                    <div
                                      *ngIf="invalidFullDaylateDuration2"
                                      class="text-danger"
                                      style="font-size: 13px"
                                    >
                                      Full Day Duration should be greater than
                                      Half Day Duration.
                                    </div>
                                    <div
                                      *ngIf="
                                        fullDayLateDuration?.touched &&
                                        fullDayLateDuration.errors?.required
                                      "
                                      class="text-danger"
                                      style="font-size: 13px"
                                    >
                                      Duration is required.
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="mt-3">
                              <div class="form-check">
                                <input
                                  class="form-check-input"
                                  style="cursor: pointer"
                                  type="checkbox"
                                  value=""
                                  id="Occurrences3"
                                  [checked]="fullDayOccurrenceCheckbox"
                                  (click)="tickFullDayOccurrenceCheckbox()"
                                />
                                <label
                                  class="form-check-label"
                                  for="Occurrences3"
                                >
                                  Set Occurrences (Weekly)</label
                                >
                              </div>
                              <div
                                class="d-flex align-items-center mt-2"
                                style="gap: 10px"
                                *ngIf="fullDayOccurrenceCheckbox"
                              >
                                <div class="col-md-12">
                                  <div class="row">
                                    <div class="col-md-4">
                                      <div
                                        class="if-late d-flex justify-content-center align-items-center"
                                        style="width: 150px; gap: 10px"
                                      >
                                        <input
                                          type="text"
                                          class="form-control"
                                          aria-describedby="emailHelp"
                                          placeholder="Count"
                                          [(ngModel)]="
                                            attendanceRuleDefinitionRequest!
                                              .deductionRuleDefinitionRequest!
                                              .fullDaySalaryDeduction!
                                              .occurrenceCount
                                          "
                                          [ngModelOptions]="{
                                            standalone: true
                                          }"
                                          name="fullDayOccurrenceCount"
                                          #fullDayOccurrenceCount="ngModel"
                                          required
                                          max="5"
                                        />
                                        <span>
                                          <b>times</b>
                                        </span>
                                      </div>
                                      <div
                                        *ngIf="
                                          fullDayOccurrenceCount?.touched &&
                                          fullDayOccurrenceCount.errors
                                            ?.required
                                        "
                                        class="text-danger"
                                        style="font-size: 13px"
                                      >
                                        Count is required.
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div
                        class="rules-main"
                        *ngIf="CURRENT_MODAL == OVERTIME_RULE_DEFINITION"
                      >
                        <div class="form-check pb-3">
                          <input
                            class="form-check-input"
                            style="cursor: pointer"
                            type="checkbox"
                            value=""
                            id="flexCheckChecked"
                            [checked]="customCheckbox"
                            (click)="tickCustomCheckbox()"
                          />
                          <label
                            class="form-check-label"
                            for="flexCheckChecked"
                          >
                            {{ attendanceRuleResponse.customRuleHeader }}
                          </label>
                        </div>
                        <div class="dudtion-type" *ngIf="customCheckbox">
                          <div class="col-md-12">
                            <div class="row">
                              <div class="col-md-4">
                                <div class="if-late">
                                  <label for="hoursInput" class="pb-2"
                                    >{{ attendanceRuleResponse.ruleSubHeader }}
                                  </label>
                                  <div
                                    class="d-flex justify-content-center align-items-center"
                                    style="gap: 5px"
                                  >
                                    <nz-time-picker
                                      [(ngModel)]="customOvertimeDurationValue"
                                      [ngModelOptions]="{ standalone: true }"
                                      nzFormat="HH:mm"
                                      nzPlaceHolder="Select Duration"
                                      [nzDisabledHours]="disabledHours"
                                      (ngModelChange)="
                                        getlateDuration(
                                          $event,
                                          attendanceRuleResponse.attendanceRuleTypeId
                                        )
                                      "
                                      name="lateDuration"
                                      required
                                      #lateDuration="ngModel"
                                    ></nz-time-picker>
                                    <span>
                                      <b>hrs.</b>
                                    </span>
                                  </div>
                                  <div
                                    *ngIf="
                                      lateDuration?.touched &&
                                      lateDuration.errors?.required
                                    "
                                    class="text-danger"
                                    style="font-size: 13px"
                                  >
                                    Duration is required.
                                  </div>
                                  <div
                                    *ngIf="invalidCustomlateDuration1"
                                    class="text-danger"
                                    style="font-size: 13px"
                                  >
                                    Custom Duration should be less than Half Day
                                    Duration.
                                  </div>
                                  <div
                                    *ngIf="invalidCustomlateDuration2"
                                    class="text-danger"
                                    style="font-size: 13px"
                                  >
                                    Custom Duration should be less than full Day
                                    Duration.
                                  </div>
                                </div>
                              </div>
                              <div class="col-md-4">
                                <div class="overtime-type">
                                  <label for="exampleInputEmail1" class="pb-2"
                                    >Overtime Pay Type</label
                                  >
                                  <div class="dropdown">
                                    <button
                                      class="btn btn-secondary dropdown-toggle new-dropdown"
                                      type="button"
                                      id="dropdownMenuButton1"
                                      data-bs-toggle="dropdown"
                                      aria-expanded="false"
                                      style="
                                        text-align: left;
                                        background-color: white;
                                        color: black;
                                        border-color: #ced4da;
                                        width: 100%;
                                      "
                                    >
                                      {{
                                        selectedCustomOvertimeType?.type ||
                                          "Select"
                                      }}
                                      <i class="bi bi-chevron-down"></i>
                                    </button>
                                    <ul
                                      class="dropdown-menu"
                                      aria-labelledby="dropdownMenuButton1"
                                      style="width: 100%"
                                    >
                                      <li
                                        *ngFor="
                                          let overtimeType of overtimeTypeList
                                        "
                                      >
                                        <a
                                          class="dropdown-item"
                                          (click)="
                                            selectCustomOvertimeType(
                                              overtimeType
                                            )
                                          "
                                          >{{ overtimeType.type }}</a
                                        >
                                      </li>
                                    </ul>
                                  </div>
                                </div>
                              </div>
                              <div class="col-md-4">
                                <div
                                  *ngIf="
                                    selectedCustomOvertimeType?.type ==
                                    'FIXED AMOUNT'
                                  "
                                >
                                  <label for="exampleInputEmail1" class="pb-2"
                                    >Amount in rupees:</label
                                  >
                                  <div
                                    class="justify-content-center"
                                    style="gap: 20px"
                                  >
                                    <input
                                      type="number"
                                      class="form-control"
                                      aria-describedby="emailHelp"
                                      placeholder="Enter the amount here"
                                      [(ngModel)]="
                                        attendanceRuleDefinitionRequest!
                                          .overtimeRuleDefinitionRequest!
                                          .customAmountInRupees
                                      "
                                      (change)="
                                        checkOvertimeFixAmountValidation(
                                          CUSTOM_OVERTIME_FIX_AMOUNT_STEP
                                        )
                                      "
                                      [ngModelOptions]="{ standalone: true }"
                                      name="customFixAmount"
                                      #customFixAmount="ngModel"
                                      required
                                    />

                                    <div
                                      *ngIf="
                                        customFixAmount?.touched &&
                                        customFixAmount.errors?.required
                                      "
                                      class="text-danger"
                                      style="font-size: 13px"
                                    >
                                      Amount is required.
                                    </div>
                                    <div
                                      *ngIf="
                                        overtimeFixAmountValidationErrors[
                                          'CUSTOM_OVERTIME_FIX_AMOUNT_ERROR'
                                        ]
                                      "
                                      class="text-danger"
                                    >
                                      {{
                                        overtimeFixAmountValidationErrors[
                                          "CUSTOM_OVERTIME_FIX_AMOUNT_ERROR"
                                        ]
                                      }}
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="mt-2">
                          <div class="form-check pb-3">
                            <input
                              class="form-check-input"
                              style="cursor: pointer"
                              type="checkbox"
                              value=""
                              id="staff"
                              [checked]="halfDayCheckbox"
                              (click)="tickHalfDayCheckbox()"
                            />
                            <label class="form-check-label" for="staff">
                              {{ attendanceRuleResponse.halfDayRuleHeader }}
                            </label>
                          </div>
                          <!-- half day salary deduction -->
                          <div class="dudtion-type" *ngIf="halfDayCheckbox">
                            <div class="col-md-12">
                              <div class="row">
                                <div class="col-md-4">
                                  <div class="if-late">
                                    <label for="exampleInputEmail1" class="pb-2"
                                      >{{
                                        attendanceRuleResponse.ruleSubHeader
                                      }}
                                    </label>
                                    <div
                                      class="d-flex justify-content-center align-items-center"
                                      style="gap: 5px"
                                    >
                                      <nz-time-picker
                                        [(ngModel)]="
                                          halfDayOvertimeDurationValue
                                        "
                                        [ngModelOptions]="{ standalone: true }"
                                        nzFormat="HH:mm"
                                        nzPlaceHolder="Select Duration"
                                        (ngModelChange)="
                                          getHalfDaylateDuration(
                                            $event,
                                            attendanceRuleResponse.attendanceRuleTypeId
                                          )
                                        "
                                        name="halfDayLateDuration"
                                        #halfDayLateDuration="ngModel"
                                        required
                                      ></nz-time-picker>
                                      <span>
                                        <b>hrs.</b>
                                      </span>
                                    </div>
                                    <div
                                      *ngIf="invalidHalfDaylateDuration1"
                                      class="text-danger"
                                      style="font-size: 13px"
                                    >
                                      Half Day Duration should be greater than
                                      Custom Day Duration.
                                    </div>
                                    <div
                                      *ngIf="invalidHalfDaylateDuration2"
                                      class="text-danger"
                                      style="font-size: 13px"
                                    >
                                      Half Day Duration should be less than full
                                      Day Duration.
                                    </div>
                                    <div
                                      *ngIf="
                                        halfDayLateDuration?.touched &&
                                        halfDayLateDuration.errors?.required
                                      "
                                      class="text-danger"
                                      style="font-size: 13px"
                                    >
                                      Duration is required.
                                    </div>
                                  </div>
                                </div>
                                <div class="col-md-4">
                                  <div class="overtime-type">
                                    <label for="exampleInputEmail1" class="pb-2"
                                      >Overtime Pay Type</label
                                    >
                                    <div class="dropdown">
                                      <button
                                        class="btn btn-secondary dropdown-toggle new-dropdown"
                                        type="button"
                                        id="dropdownMenuButton1"
                                        data-bs-toggle="dropdown"
                                        aria-expanded="false"
                                        style="
                                          text-align: left;
                                          background-color: white;
                                          color: black;
                                          border-color: #ced4da;
                                          width: 100%;
                                        "
                                      >
                                        {{
                                          selectedHalfDayOvertimeType?.type ||
                                            "Select"
                                        }}
                                        <i class="bi bi-chevron-down"></i>
                                      </button>
                                      <ul
                                        class="dropdown-menu"
                                        aria-labelledby="dropdownMenuButton1"
                                        style="width: 100%"
                                      >
                                        <li
                                          *ngFor="
                                            let overtimeType of overtimeTypeList
                                          "
                                        >
                                          <a
                                            class="dropdown-item"
                                            (click)="
                                              selectHalfDayOvertimeType(
                                                overtimeType
                                              )
                                            "
                                            >{{ overtimeType.type }}</a
                                          >
                                        </li>
                                      </ul>
                                    </div>
                                  </div>
                                </div>
                                <div class="col-md-4">
                                  <div
                                    *ngIf="
                                      selectedHalfDayOvertimeType?.type ==
                                      'FIXED AMOUNT'
                                    "
                                  >
                                    <label for="exampleInputEmail1" class="pb-2"
                                      >Amount in rupees:</label
                                    >
                                    <div
                                      class="justify-content-center"
                                      style="gap: 20px"
                                    >
                                      <input
                                        type="number"
                                        class="form-control"
                                        aria-describedby="emailHelp"
                                        placeholder="Enter the amount here"
                                        [(ngModel)]="
                                          attendanceRuleDefinitionRequest!
                                            .overtimeRuleDefinitionRequest!
                                            .halfDayAmountInRupees
                                        "
                                        (change)="
                                          checkOvertimeFixAmountValidation(
                                            HALF_DAY_OVERTIME_FIX_AMOUNT_STEP
                                          )
                                        "
                                        [ngModelOptions]="{ standalone: true }"
                                        name="halfDayFixAmount"
                                        #halfDayFixAmount="ngModel"
                                        required
                                      />
                                      <div
                                        *ngIf="
                                          halfDayFixAmount?.touched &&
                                          halfDayFixAmount.errors?.required
                                        "
                                        class="text-danger"
                                        style="font-size: 13px"
                                      >
                                        Amount is required.
                                      </div>
                                      <div
                                        *ngIf="
                                          overtimeFixAmountValidationErrors[
                                            'HALF_DAY_OVERTIME_FIX_AMOUNT_ERROR'
                                          ]
                                        "
                                        class="text-danger"
                                      >
                                        {{
                                          overtimeFixAmountValidationErrors[
                                            "HALF_DAY_OVERTIME_FIX_AMOUNT_ERROR"
                                          ]
                                        }}
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <!-- full day salary deduction -->
                          <div class="form-check pb-3">
                            <input
                              class="form-check-input"
                              style="cursor: pointer"
                              type="checkbox"
                              value=""
                              id="selery"
                              [checked]="fullDayCheckbox"
                              (click)="tickFullDayCheckbox()"
                            />
                            <label class="form-check-label" for="selery">
                              {{ attendanceRuleResponse.fullDayRuleHeader }}
                            </label>
                          </div>
                          <div class="dudtion-type" *ngIf="fullDayCheckbox">
                            <div class="col-md-12">
                              <div class="row">
                                <div class="col-md-4">
                                  <div class="if-late">
                                    <label for="exampleInputEmail1" class="pb-2"
                                      >{{
                                        attendanceRuleResponse.ruleSubHeader
                                      }}
                                    </label>
                                    <div
                                      class="d-flex justify-content-center align-items-center"
                                      style="gap: 5px"
                                    >
                                      <nz-time-picker
                                        [(ngModel)]="
                                          fullDayOvertimeDurationValue
                                        "
                                        [ngModelOptions]="{ standalone: true }"
                                        nzFormat="HH:mm"
                                        nzPlaceHolder="Select Duration"
                                        (ngModelChange)="
                                          getFullDaylateDuration(
                                            $event,
                                            attendanceRuleResponse.attendanceRuleTypeId
                                          )
                                        "
                                        name="fullDayLateDuration"
                                        #fullDayLateDuration="ngModel"
                                        required
                                      ></nz-time-picker>
                                      <span>
                                        <b>hrs.</b>
                                      </span>
                                    </div>
                                    <div
                                      *ngIf="invalidFullDaylateDuration1"
                                      class="text-danger"
                                      style="font-size: 13px"
                                    >
                                      Full Day Duration should be greater than
                                      Custom Day Duration.
                                    </div>
                                    <div
                                      *ngIf="invalidFullDaylateDuration2"
                                      class="text-danger"
                                      style="font-size: 13px"
                                    >
                                      Full Day Duration should be greater than
                                      Half Day Duration.
                                    </div>
                                    <div
                                      *ngIf="
                                        fullDayLateDuration?.touched &&
                                        fullDayLateDuration.errors?.required
                                      "
                                      class="text-danger"
                                      style="font-size: 13px"
                                    >
                                      Duration is required.
                                    </div>
                                  </div>
                                </div>
                                <div class="col-md-4">
                                  <div class="overtime-type">
                                    <label for="exampleInputEmail1" class="pb-2"
                                      >Overtime Pay Type</label
                                    >
                                    <div class="dropdown">
                                      <button
                                        class="btn btn-secondary dropdown-toggle new-dropdown"
                                        type="button"
                                        id="dropdownMenuButton1"
                                        data-bs-toggle="dropdown"
                                        aria-expanded="false"
                                        style="
                                          text-align: left;
                                          background-color: white;
                                          color: black;
                                          border-color: #ced4da;
                                          width: 100%;
                                        "
                                      >
                                        {{
                                          selectedFullDayOvertimeType?.type ||
                                            "Select"
                                        }}
                                        <i class="bi bi-chevron-down"></i>
                                      </button>
                                      <ul
                                        class="dropdown-menu"
                                        aria-labelledby="dropdownMenuButton1"
                                        style="width: 100%"
                                      >
                                        <li
                                          *ngFor="
                                            let overtimeType of overtimeTypeList
                                          "
                                        >
                                          <a
                                            class="dropdown-item"
                                            (click)="
                                              selectFullDayOvertimeType(
                                                overtimeType
                                              )
                                            "
                                            >{{ overtimeType.type }}</a
                                          >
                                        </li>
                                      </ul>
                                    </div>
                                  </div>
                                </div>
                                <div class="col-md-4">
                                  <div
                                    *ngIf="
                                      selectedFullDayOvertimeType?.type ==
                                      'FIXED AMOUNT'
                                    "
                                  >
                                    <label for="exampleInputEmail1" class="pb-2"
                                      >Amount in rupees:</label
                                    >
                                    <div
                                      class="justify-content-center"
                                      style="gap: 20px"
                                    >
                                      <input
                                        type="number"
                                        class="form-control"
                                        aria-describedby="emailHelp"
                                        placeholder="Enter the amount here"
                                        [(ngModel)]="
                                          attendanceRuleDefinitionRequest!
                                            .overtimeRuleDefinitionRequest!
                                            .fullDayAmountInRupees
                                        "
                                        (change)="
                                          checkOvertimeFixAmountValidation(
                                            FULL_DAY_OVERTIME_FIX_AMOUNT_STEP
                                          )
                                        "
                                        [ngModelOptions]="{ standalone: true }"
                                        name="fullDayFixAmount"
                                        #fullDayFixAmount="ngModel"
                                        required
                                      />
                                      <div
                                        *ngIf="
                                          fullDayFixAmount?.touched &&
                                          fullDayFixAmount.errors?.required
                                        "
                                        class="text-danger"
                                        style="font-size: 13px"
                                      >
                                        Amount is required.
                                      </div>
                                      <div
                                        *ngIf="
                                          overtimeFixAmountValidationErrors[
                                            'FULL_DAY_OVERTIME_FIX_AMOUNT_ERROR'
                                          ]
                                        "
                                        class="text-danger"
                                      >
                                        {{
                                          overtimeFixAmountValidationErrors[
                                            "FULL_DAY_OVERTIME_FIX_AMOUNT_ERROR"
                                          ]
                                        }}
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div
                        class="modal-footer"
                        *ngIf="CURRENT_MODAL == DEDUCTION_RULE_DEFINITION"
                      >
                        <!-- (!customCheckbox && !halfDayCheckbox && !fullDayCheckbox) || (selectedCustomDeductionType?.type == '')  || compareTimesValidation() ||  -->
                        <button
                          type="submit"
                          class="btn btn-primary"
                          [disabled]="
                            (!customCheckbox &&
                              !halfDayCheckbox &&
                              !fullDayCheckbox) ||
                            selectedCustomDeductionType?.type == '' ||
                            attendanceRuleForm.invalid ||
                            compareTimesValidation()
                          "
                          (click)="staffActiveTabInAutomationRuleMethod()"
                        >
                          Next
                        </button>
                      </div>

                      <div
                        class="modal-footer"
                        *ngIf="CURRENT_MODAL == OVERTIME_RULE_DEFINITION"
                      >
                        <button
                          type="submit"
                          class="btn btn-primary"
                          [disabled]="
                            (!customCheckbox &&
                              !halfDayCheckbox &&
                              !fullDayCheckbox) ||
                            selectedCustomOvertimeType?.type == '' ||
                            selectedHalfDayOvertimeType?.type == '' ||
                            selectedFullDayOvertimeType?.type == '' ||
                            attendanceRuleForm.invalid ||
                            compareTimesValidation()
                          "
                          (click)="staffActiveTabInAutomationRuleMethod()"
                        >
                          Next
                        </button>
                      </div>
                    </form>
                  </div>
                  <div class="tab-pane fade" id="profile" role="tabpanel">
                    <div class="staf-list-box mt-3">
                      <div class="row mb-3">
                        <div class="col-md-6">
                          <div>
                            <h5>
                              Userlist
                              <span
                                style="
                                  color: #4761f6;
                                  background-color: #d1d6f2;
                                  padding: 5px;
                                  border-radius: 5px;
                                "
                              >
                                <b>{{ total }}</b>
                              </span>
                            </h5>
                          </div>
                        </div>
                        <div class="col-md-6">
                          <form
                            novalidate=""
                            role="search"
                            (submit)="searchUsers()"
                            class="searching ng-untouched ng-pristine ng-valid"
                          >
                            <div class="form-group" style="position: relative">
                              <input
                                type="text"
                                id="searchText"
                                placeholder="Search by name and role"
                                class="form-control me-2 ng-untouched ng-pristine ng-valid"
                                (keyup)="searchUsers()"
                                [(ngModel)]="searchText"
                                [ngModelOptions]="{ standalone: true }"
                                style="padding: 10px 50px 10px 30px"
                              />
                              <button
                                *ngIf="searchText.length !== 0"
                                type="button"
                                class="btn close-btn"
                                (click)="clearSearchText()"
                              >
                                <i class="bi bi-x mt-auto mb-auto pl-3"></i>
                              </button>
                              <i
                                class="bi bi-search search-icon"
                                style="
                                  position: absolute;
                                  top: 50%;
                                  transform: translateY(-50%);
                                  left: 10px;
                                "
                              ></i>
                            </div>
                          </form>
                        </div>
                      </div>
                      <div
                        style="
                          display: flex;
                          justify-content: space-between;
                          align-items: center;
                        "
                      >
                        <div *ngIf="selectedStaffsUuids.length > 0">
                          <ng-container
                            *ngIf="
                              selectedStaffsUuids.length === total;
                              else elseCondition2
                            "
                          >
                            <span
                              (click)="unselectAllUsers()"
                              style="
                                cursor: pointer;
                                color: #eb5050;
                                background-color: #fcf1f1;
                                padding: 8px;
                                border-radius: 5px;
                              "
                              >Clear all <i class="bi bi-x"></i
                            ></span>
                          </ng-container>
                          <ng-template #elseCondition2>
                            <span
                              (click)="selectAllUsers(true)"
                              style="
                                cursor: pointer;
                                color: #4761f6;
                                background-color: #eef1ff;
                                padding: 8px;
                                border-radius: 5px;
                              "
                              >Select all {{ total }} users</span
                            >
                          </ng-template>
                        </div>
                        <div *ngIf="selectedStaffsUuids.length !== 0">
                          <ng-container
                            *ngIf="
                              selectedStaffsUuids.length === total;
                              else elseCondition1
                            "
                          >
                            <span
                              >All <b>{{ total }}</b> users selected
                            </span>
                          </ng-container>
                          <ng-template #elseCondition1>
                            <span>
                              <b>{{ selectedStaffsUuids.length }}</b> selected
                              of <b>{{ total }}</b>
                            </span>
                            <span
                              style="cursor: pointer"
                              (click)="unselectAllUsers()"
                            >
                              <i class="bi bi-x"></i>
                            </span>
                          </ng-template>
                        </div>
                      </div>
                      <ng-container
                        *ngIf="
                          total > 0;
                          else noDataFoundPlaceholderInAutomationRule
                        "
                      >
                        <table class="table">
                          <thead class="thead-light">
                            <tr>
                              <th style="width: 0%">
                                <input
                                  type="checkbox"
                                  style="cursor: pointer"
                                  class="form-check-input"
                                  [(ngModel)]="isAllSelected"
                                  (change)="selectAll(isAllSelected)"
                                />
                              </th>
                              <!-- <th style="width:25%; padding: 12px 15px;">S. No.</th> -->
                              <th style="width: 25%; padding: 12px 15px">
                                Name
                              </th>
                              <th style="width: 25%; padding: 12px 15px">
                                Email
                              </th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr
                              *ngFor="
                                let staff of staffs
                                  | paginate
                                    : {
                                        itemsPerPage: itemPerPage,
                                        currentPage: pageNumber,
                                        totalItems: total
                                      }
                              "
                              style="border-bottom: 1px solid #dddddd"
                            >
                              <td>
                                <div class="form-check">
                                  <input
                                    type="checkbox"
                                    style="cursor: pointer"
                                    class="form-check-input"
                                    [(ngModel)]="staff.selected"
                                    (change)="checkIndividualSelection()"
                                  />
                                </div>
                              </td>
                              <!-- <td style="padding: 12px 15px;">{{ i+1 }}</td> -->
                              <td style="padding: 12px 15px">
                                {{ staff.name }}
                              </td>
                              <td style="padding: 12px 15px">
                                {{ staff.email ? staff.email : "N/A" }}
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </ng-container>
                      <ng-template #noDataFoundPlaceholderInAutomationRule>
                        <div class="errorboxmain">
                          <div class="errorboxinner text-center">
                            <div class="errorboxplaceholder mb-2">
                              <img
                                src="assets/images/addnewproduct.svg"
                                style="width: 80px"
                              />
                            </div>
                            <h4>No Data Found</h4>
                            <p>
                              We're unable to locate a record associated with
                              the information you entered.
                            </p>
                          </div>
                        </div>
                      </ng-template>
                    </div>
                    <div
                      class="pagination pl-3"
                      *ngIf="
                        total > itemPerPage - 1 ||
                        (pageNumber === lastPageNumber && lastPageNumber !== 1)
                      "
                    >
                      <p class="mb-0" style="padding-left: 15px">
                        Showing {{ getStartIndex() }} - {{ getEndIndex() }} of
                        {{ total }} teams
                      </p>
                      <div class="row">
                        <div class="col-md-12">
                          <nav aria-label="Page navigation example">
                            <ul class="pagination justify-content-end">
                              <li
                                class="page-item"
                                [class.disabled]="pageNumber == 1"
                              >
                                <a
                                  class="page-link"
                                  href="javascript:void(0);"
                                  aria-label="Previous"
                                  (click)="changePage('prev')"
                                >
                                  <span aria-hidden="true">&laquo;</span>
                                </a>
                              </li>
                              <li
                                class="page-item"
                                *ngFor="let page of getPages()"
                                [class.active]="pageNumber == page"
                              >
                                <a
                                  class="page-link"
                                  href="javascript:void(0);"
                                  (click)="changePage(page)"
                                  >{{ page }}</a
                                >
                              </li>
                              <li
                                class="page-item"
                                [class.disabled]="pageNumber == totalPages"
                              >
                                <a
                                  class="page-link"
                                  href="javascript:void(0);"
                                  aria-label="Next"
                                  (click)="changePage('next')"
                                >
                                  <span aria-hidden="true">&raquo;</span>
                                </a>
                              </li>
                            </ul>
                          </nav>
                        </div>
                      </div>
                    </div>
                    <div id="back-and-submit">
                      <div
                        class="modal-footer d-flex align-items-center justify-content-end"
                      >
                        <button
                          type="button"
                          class="btn btn-outline-primary"
                          (click)="ruleActiveTabMethod()"
                        >
                          Back
                        </button>
                      </div>
                      <div
                        class="modal-footer d-flex align-items-center justify-content-end"
                      >
                        <button
                          type="button"
                          class="btn btn-primary"
                          (click)="registerAttendanceRuleDefinitionMethodCall()"
                        >
                          Submit
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="rule-section">
                <div class="tracking-body">
                  <ul class="tracking-steps">
                    <li class="tracking-item tracking-itemActive newline">
                      <div class="d-flex new-stap">
                        <div class="tracing-icon active">
                          <i class="bi bi-check2"></i>
                        </div>
                        <div class="tracking-data">
                          <p>Create your first rule</p>
                          <div>
                            <span> Automate Late fine for employee </span>
                          </div>
                        </div>
                      </div>
                    </li>
                    <!-- <li class="tracking-item" [ngClass]="tracking-itemActive newline: activeModel"> -->
                    <li
                      class="tracking-item"
                      [ngClass]="{ 'tracking-itemActive newline': activeModel }"
                    >
                      <div class="d-flex align-items-center new-stap">
                        <div
                          class="tracing-icon"
                          [ngClass]="{ active: activeModel }"
                        >
                          <span *ngIf="activeModel">
                            <i class="bi bi-check2"></i>
                          </span>
                          <span *ngIf="!activeModel">2</span>
                        </div>
                        <!-- <div class="tracing-icon">2 -->
                        <!-- <i class="bi bi-check2"></i> -->
                        <!-- </div> -->
                        <div class="tracking-data">
                          <p>Set a rule value</p>
                          <div>
                            <span>Set a value for your rule type.</span>
                          </div>
                        </div>
                      </div>
                    </li>
                    <li class="tracking-item">
                      <div class="d-flex new-stap">
                        <div
                          class="tracing-icon"
                          [ngClass]="{ active: activeModel2 }"
                        >
                          <span *ngIf="activeModel2">
                            <i class="bi bi-check2"></i>
                          </span>
                          <span *ngIf="!activeModel2">3</span>
                        </div>
                        <!-- <div class="tracing-icon">3 -->
                        <!-- <i class="bi bi-check2"></i> -->
                        <!-- </div> -->
                        <div class="tracking-data">
                          <p>Assign Staff</p>
                          <div>
                            <span> Automate Late fine for employee </span>
                          </div>
                        </div>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- <div class="modal-footer d-flex align-items-center justify-content-end"><button type="button" class="btn btn-primary"
                                    (click)="registerAttendanceRuleDefinitionMethodCall()">Submit</button></div> -->
      </div>
    </div>
  </div>
  <div
    class="modal fade"
    id="create-rule"
    tabindex="-1"
    role="dialog"
    aria-labelledby="exampleModalDefaultLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-md" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h6 class="modal-title m-0" id="exampleModalDefaultLabel">
            Late Entry Rules
          </h6>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
        <!--end modal-header-->
        <div class="modal-body"></div>
        <div class="modal-footer d-flex align-items-center justify-content-end">
          <button type="button" class="btn btn-primary">Submit</button>
        </div>
      </div>
    </div>
  </div>
  <button
    type="button"
    style="display: none"
    data-bs-toggle="modal"
    data-bs-target="#attendancewithlocationss"
    #attendancewithlocationssButton
    id="attendancewithlocationssButton"
  ></button>
  <div
    class="modal fade"
    id="attendancewithlocationss"
    tabindex="-1"
    role="dialog"
    aria-labelledby="attendancewithlocation"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-lg" role="document">
      <form
        #organizationAddressForm="ngForm"
        ngNativeValidate
        (ngSubmit)="setOrganizationAddressDetailMethodCall()"
      >
        <div class="modal-content">
          <div class="modal-header">
            <h6 class="modal-title m-0" id="exampleModalDefaultLabel">
              Staff Attendance With Location
            </h6>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              #closeAddressModal
              aria-label="Close"
            ></button>
          </div>
          <!--end modal-header-->
          <div class="modal-body">
            <div class="form-group">
              <div class="row">
                <div class="col-md-12">
                  <div class="mb-3">
                    <label for="addressLine1" class="pb-2">Address </label>
                    <input
                      type="text"
                      id="addressLine1"
                      placeholder="Address line 1"
                      ngx-google-places-autocomplete
                      #placesRef="ngx-places"
                      (onAddressChange)="handleAddressChange($event)"
                      required=""
                      name="addressLine1"
                      class="form-control ng-untouched ng-pristine ng-invalid"
                      [(ngModel)]="organizationAddressDetail.addressLine1"
                    />
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="mb-3">
                    <label for="radius" class="pb-2"
                      >Employee Location Must be in</label
                    >
                    <input
                      type="text"
                      id="radius"
                      placeholder="in meters"
                      required=""
                      name="radius"
                      class="form-control ng-untouched ng-pristine ng-invalid"
                      [(ngModel)]="organizationAddressDetail.radius"
                    />
                  </div>
                </div>
              </div>
            </div>
            <!-- <div class="">
         
            <agm-map 
              [latitude]="organizationAddressDetail.latitude" 
              [longitude]="organizationAddressDetail.longitude" 
              [zoom]="mapZoom"
              (mapClick)="onMapClick($event)"
            >
              <agm-marker 
                *ngIf="organizationAddressDetail.latitude && organizationAddressDetail.longitude"
                [latitude]="organizationAddressDetail.latitude"
                [longitude]="organizationAddressDetail.longitude"
                draggable="true"
                (dragEnd)="onMarkerDragEnd($event)"
              ></agm-marker>
            </agm-map>
          </div> -->
            <div class="mb-10" *ngIf="isShowMap">
              <section>
                <div class="el-card-item">
                  <div class="el-card-avatar el-overlay-1">
                    <div class="map">
                      <agm-map
                        style="height: 350px"
                        [latitude]="lat"
                        [longitude]="lng"
                        [zoom]="zoom"
                        [maxZoom]="20"
                        [zoomControl]="true"
                        (mapClick)="onMapClick($event)"
                        [disableDefaultUI]="true"
                        [keyboardShortcuts]="false"
                      >
                        <agm-marker
                          *ngIf="
                            (organizationAddressDetail.latitude &&
                              organizationAddressDetail.longitude) ||
                            (lat && lng)
                          "
                          [latitude]="lat"
                          [longitude]="lng"
                          draggable="true"
                          [agmFitBounds]="true"
                          (dragEnd)="onMarkerDragEnd($event)"
                        ></agm-marker>
                      </agm-map>
                      <!--  #placesRef="ngx-places" -->

                      <div class="map-locate-me">
                        <button
                          type="button"
                          class="locate-btn btn btn-sm text-white"
                          (click)="getCurrentLocation()"
                        >
                          <i class="fa fa-crosshairs"></i>

                          Locate Me
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- </div> -->
              </section>
            </div>
          </div>
          <div
            class="modal-footer d-flex align-items-center justify-content-end"
          >
            <button
              class="btn btn-primary"
              type="submit"
              [disabled]="toggle"
              aria-label="Next Step"
            >
              <div *ngIf="toggle" class="dot-opacity-loader">
                <span></span>
                <span></span>
                <span></span>
              </div>
              <span *ngIf="!toggle">
                Save <i class="bi bi-arrow-right" style="padding-left: 8px"></i>
              </span>
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>







