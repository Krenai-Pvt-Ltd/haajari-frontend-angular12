<div class="page-wrapper">
  <!-- Page Content-->
  <div class="page-content-tab">
    <div class="container-fluid">
      <div class="company-settinh  mt-4">
        <div class="row">
          <div class="col-md-4">
            <div class="form-roe-data">
              <h5>Attendance Mode</h5>
              <p>This will be displayed on your profile.</p>
            </div>
          </div>
          <div class="col-md-7">
            <div class="row mb-3"   [ngClass]="{'disable-action-item':!rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)}" >
              <ng-container *ngIf="
                  isShimmer &&
                    attendanceModeList.length === 0 &&
                    !dataNotFoundPlaceholder &&
                    !networkConnectionErrorPlaceHolder;
                  else attendanceModeData
                ">
                <div class="row">
                  <div class="col-md-12">
                    <div class="attendance-settin-list mb-3">
                      <ngx-shimmer-loading [width]="'100%'" [height]="'60px'"
                        style="border-radius: 50%"></ngx-shimmer-loading>
                    </div>
                    <div class="attendance-settin-list mb-3">
                      <ngx-shimmer-loading [width]="'100%'" [height]="'60px'"
                        style="border-radius: 50%"></ngx-shimmer-loading>
                    </div>
                    <div class="attendance-settin-list mb-3">
                      <ngx-shimmer-loading [width]="'100%'" [height]="'60px'"
                        style="border-radius: 50%"></ngx-shimmer-loading>
                    </div>
                  </div>
                </div>
              </ng-container>
              <ng-template #attendanceModeData>
                <div class="attendance-settin-list" *ngFor="let attendanceMode of attendanceModeList">
                  <div class="categryCustomizecard p-3 d-flex pointer align-items-center gap-2 bg-white" [ngClass]="{
                      'attendance-active':
                        attendanceMode.id === selectedAttendanceModeId
                    }" (click)="updateAttendanceModeMethodCall(attendanceMode.id)">
                    <div class="categryCustomizeinfo">
                      <label for="customizecategory1" class="mb-0 pointer d-block">
                        <h3>{{ attendanceMode.name }}</h3>
                        <p>{{ attendanceMode.description }}</p>
                      </label>
                    </div>
                    <div class="active-check" *ngIf="attendanceMode.id === selectedAttendanceModeId">
                      <i class="bi bi-check2"></i>
                    </div>
                  </div>
                </div>
              </ng-template>
            </div>
          </div>
          <div class="col-md-12">
            <div class="border-box"></div>
          </div>
          <div class="col-md-4 mt-3 mb-3">
            <div class="form-roe-data">
              <h5>Shift Settings</h5>
              <p>A quick snapshot of your company.</p>
            </div>
            <div class="total-shifts p-3 mt-4" *ngIf="totalShiftCount">
              <div class="d-flex align-items-center justify-content-between">
                <div>
                  <h6 class="text-truncate">Total Shifts</h6>
                  <h4 class="mt-3 fw-bold">{{ totalShiftCount }}</h4>
                </div>
                <span class="total-user-icon d-flex align-items-center justify-content-center">
                  <img src="assets/images/total-user-icon.svg" />
                </span>
              </div>
              <div class="mt-3">
                <div class="d-flex align-items-center justify-content-between mb-3"
                  *ngIf="shiftCounts?.dayShiftCount != 0">
                  <small class="text-muted">Day Shifts</small>
                  <small class="text-muted">{{
                    shiftCounts?.dayShiftCount || 0
                    }}</small>
                </div>
                <div class="d-flex align-items-center justify-content-between mb-3"
                  *ngIf="shiftCounts.nightShiftCount != 0">
                  <small class="text-muted">Night Shifts</small>
                  <small class="text-muted">{{
                    shiftCounts.nightShiftCount || 0
                    }}</small>
                </div>
                <div class="d-flex align-items-center justify-content-between"
                  *ngIf="shiftCounts.rotationalShiftCount != 0">
                  <small class="text-muted">Automated Punchin</small>
                  <small class="text-muted">{{
                    shiftCounts.rotationalShiftCount || 0
                    }}</small>
                </div>
              </div>
            </div>
          </div>
          <!-- {{ dataNotFoundPlaceholder }} {{ isShimmer }} -->
          <div class="col-md-7 mt-3 mb-3">
            <ng-container *ngIf="
                isShimmer &&
                  organizationShiftTimingWithShiftTypeResponseList.length ===
                    0 &&
                  !dataNotFoundPlaceholder &&
                  !networkConnectionErrorPlaceHolder;
                else organizationShiftTimingWithShiftTypeData
              ">
              <div class="">
                <div class="text-end">
                  <ngx-shimmer-loading [width]="'40%'" [height]="'20px'"
                    style="border-radius: 50%"></ngx-shimmer-loading>
                </div>
              </div>
              <div class="mt-3" style="
                  border: 1px solid #f5f5f5;
                  padding: 5px;
                  border-radius: 6px;
                ">
                <div class="row" style="
                    border-bottom: 1px solid #f5f5f5;
                    padding-top: 10px;
                    padding-bottom: 10px;
                  ">
                  <div class="col-md-4">
                    <div class="">
                      <ngx-shimmer-loading [width]="'100%'" [height]="'20px'"
                        style="border-radius: 50%"></ngx-shimmer-loading>
                    </div>
                  </div>
                </div>
                <div class="row mt-3">
                  <div class="col-md-3">
                    <div class="">
                      <ngx-shimmer-loading [width]="'100%'" [height]="'20px'"
                        style="border-radius: 50%"></ngx-shimmer-loading>
                    </div>
                  </div>
                </div>
                <div class="row mt-3">
                  <div class="col-md-4">
                    <div class="">
                      <ngx-shimmer-loading [width]="'100%'" [height]="'30px'"
                        style="border-radius: 50%"></ngx-shimmer-loading>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="">
                      <ngx-shimmer-loading [width]="'100%'" [height]="'30px'"
                        style="border-radius: 50%"></ngx-shimmer-loading>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="">
                      <ngx-shimmer-loading [width]="'100%'" [height]="'30px'"
                        style="border-radius: 50%"></ngx-shimmer-loading>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="">
                      <ngx-shimmer-loading [width]="'100%'" [height]="'30px'"
                        style="border-radius: 50%"></ngx-shimmer-loading>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="">
                      <ngx-shimmer-loading [width]="'100%'" [height]="'30px'"
                        style="border-radius: 50%"></ngx-shimmer-loading>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="">
                      <ngx-shimmer-loading [width]="'100%'" [height]="'30px'"
                        style="border-radius: 50%"></ngx-shimmer-loading>
                    </div>
                  </div>
                </div>
              </div>
            </ng-container>
            <ng-template #organizationShiftTimingWithShiftTypeData>
              <ng-container *ngIf="
                  organizationShiftTimingWithShiftTypeResponseList.length !==
                    0 &&
                    !dataNotFoundPlaceholder &&
                    !networkConnectionErrorPlaceHolder;
                  else errorInFetchingOrganizationShiftTimingData
                ">
                <div class="add-shift-main-box">
                  <div class="add-shift-box d-flex align-items-center justify-content-between p-3 pt-2 pb-2">
                    <div class="">
                      <h6 class="text-truncate mb-0">Shifts</h6>
                    </div>
                    <div    *ngIf="rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)" >
                      <a class="add-shift-time-btn" data-bs-toggle="modal" data-bs-target="#shiftTime"
                        (click)="openAddShiftTimeModal()">
                        <i class="bi bi-plus"></i> Add Shift Time
                      </a>
                    </div>
                  </div>
                  <div class="shift-set">
                    <div class="shift-time p-3 m-3" *ngFor="
                        let organizationShiftTimingWithShiftTypeResponse of organizationShiftTimingWithShiftTypeResponseList;
                        let i = index
                      ">
                      <div class="">
                        <div class="d-flex align-items-center justify-content-between">
                          <div class="d-flex align-items-center gap-3">
                            <div class="">
                              <span class="automation-rules-icon d-flex align-items-center justify-content-center">
                                <img src="assets/images/rule-icon.svg" />
                              </span>
                            </div>
                            <div class="">
                              <h6 class="text-truncate mb-0">
                                {{
                                organizationShiftTimingWithShiftTypeResponse
                                .shiftType.name
                                }}
                              </h6>
                              <small class="text-muted">Define the shift timing rules for the
                                employees</small>
                            </div>
                          </div>
                          <div >
                            <span data-bs-toggle="collapse" role="button" class="automation-rules-toogel-btn pointer"
                              [attr.data-bs-target]="
                                '#multiCollapseExample' + i
                              " [attr.aria-controls]="'multiCollapseExample' + i" [attr.aria-expanded]="
                                activeIndex == i ? 'true' : 'false'
                              " (click)="toggleCollapse(i)">
                              <i class="bi bi-chevron-down"></i>
                            </span>
                          </div>
                        </div>
                        <div class="collapse multi-collapse" [id]="'multiCollapseExample' + i"
                          [class.show]="activeIndex === i" *ngFor="
                            let organizationShiftTimingResponse of organizationShiftTimingWithShiftTypeResponse.organizationShiftTimingResponseList
                          ">
                          <div class="d-flex align-items-center justify-content-between mt-3">
                            <div>
                              <div class="d-flex align-items-center gap-3">
                              <p class="mb-0">
                                <i class="bi bi-arrow-right" style="padding-right: 10px"></i>
                                {{ organizationShiftTimingResponse.name }}

                              </p>
                              <div  *ngIf="organizationShiftTimingResponse.updateFrom" class="badge rounded-pill badge-soft-danger font-12"
                              [nzPopoverOverlayStyle]="{'width':'350px'}" [nzPopoverContent]="contentTemplate" nz-popover nzPopoverPlacement="left">
                              New Shift</div>
                            </div>
                            <ng-template #contentTemplate>
                              <div class="request-g p-0">
                                <div class="d-flex align-items-center justify-content-between border-bottom p-3">
                                  <h5 class="mb-0 font-14">New Updated Shift</h5>
                                </div>
                                <div class="p-3">
                                  <p class="mb-0 font-13 fw-semibold"> <span class="text-danger"  *ngIf="organizationShiftTimingResponse.updateFrom"> ( New shift update from {{ organizationShiftTimingResponse.updateFrom | date: 'd MMM' }} at {{ organizationShiftTimingResponse.updateFrom | date: 'hh:mm a' }}) </span></p>
                                </div>
                                <a data-bs-toggle="modal" data-bs-target="#shiftTime" *ngIf="organizationShiftTimingResponse.updateId > 0" (click)="fetchShiftTiming(organizationShiftTimingResponse)">View</a>
                              </div>
                            </ng-template>
                            </div>
                            <div class="d-flex align-items-center gap-4">
                              <a style="cursor: pointer" data-bs-toggle="modal" data-bs-target="#shiftTime" (click)="
                                  updateOrganizationShiftTiming(
                                    organizationShiftTimingResponse,
                                    'STAFF_SELECTION'
                                  )
                                ">
                                <i class="bi bi-people"></i>
                              </a>
                             
                              <a style="cursor: pointer" data-bs-toggle="modal" data-bs-target="#shiftTime" (click)="
                                  updateOrganizationShiftTiming(
                                    organizationShiftTimingResponse,
                                    'SHIFT_TIME'
                                  )
                                ">
                                <i class="bi  pointer"
                                [ngClass]="{'bi-pencil':rbacService.hasWriteAccess(Routes.ATTENDANCESETTING),'bi-eye':!rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)}"
                                ></i>
                              </a>
                              <a style="cursor: pointer" class="delete-rule" data-bs-toggle="modal" data-bs-target="#delete-shift"
                              *ngIf="rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)"
                               (click)="
                                  getShiftTemplateId(
                                    organizationShiftTimingResponse.id
                                  )
                                ">
                                <i class="bi bi-trash pointer text-danger"></i>
                              </a>
                            
                            </div>
                          </div>
                          <div class="shift-in-out-box bg-white row mt-3 p-3 m-0">
                            <div class="col-md-4">
                              <div class="shift-in-out-time mb-3">
                                <p class="mb-0">
                                  In Time |
                                  <span style="color: #009688">{{
                                    organizationShiftTimingResponse.inTime
                                    | date : "hh:mm a"
                                    }}</span>
                                </p>
                              </div>
                            </div>
                            <div class="col-md-4">
                              <div class="shift-in-out-time mb-3">
                                <p class="mb-0">
                                  Out Time |
                                  <span style="color: #009688">{{
                                    organizationShiftTimingResponse.outTime
                                    | date : "hh:mm a"
                                    }}</span>
                                </p>
                              </div>
                            </div>
                            <div class="col-md-4">
                              <div class="shift-in-out-time mb-3">
                                <p class="mb-0">
                                  Working Hours |
                                  <span style="color: #009688">{{
                                    organizationShiftTimingResponse.workingHour
                                    }}</span>
                                </p>
                              </div>
                            </div>
                            <div class="col-md-4">
                              <div class="shift-in-out-time">
                                <p class="mb-0">
                                  Break Time |
                                  <span style="color: #009688">{{
                                    organizationShiftTimingResponse.startLunch
                                    | date : "hh:mm a"
                                    }}</span>
                                </p>
                              </div>
                            </div>
                            <div class="col-md-4">
                              <div class="shift-in-out-time">
                                <p class="mb-0">
                                  Back Time |
                                  <span style="color: #009688">{{
                                    organizationShiftTimingResponse.endLunch
                                    | date : "hh:mm a"
                                    }}</span>
                                </p>
                              </div>
                            </div>
                            <div class="col-md-4">
                              <div class="shift-in-out-time">
                                <p class="mb-0">
                                  Total Break Hours |
                                  <span style="color: #009688">
                                    {{
                                    organizationShiftTimingResponse.lunchHour
                                    }}</span>
                                </p>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-container>
            </ng-template>
            <ng-template #errorInFetchingOrganizationShiftTimingData>
             

              <!-- {{dataNotFoundPlaceholder}} -->
              <div class="empty-file" *ngIf="dataNotFoundPlaceholder">
                <nz-empty nzNotFoundImage="assets/images/add-automation-rules.svg" [nzNotFoundContent]="contentTpl">
                  <ng-template #contentTpl>
                    <p class="mb-1 empty-detail font-14">
                      Shift Timings Not Found
                    </p>
                    <div class="add-filtter">
                      <a class="text-primary font-14 text-center" data-bs-toggle="modal" data-bs-target="#shiftTime"
                        (click)="openAddShiftTimeModal()">
                        Add Shift Time
                      </a>
                    </div>
                  </ng-template>
                </nz-empty>
              </div>
              <div class="empty-file" *ngIf="networkConnectionErrorPlaceHolder">
                <nz-empty nzNotFoundImage="assets/images/add-automation-rules.svg" [nzNotFoundContent]="contentTpl">
                  <ng-template #contentTpl>
                    <p class="mb-1 empty-detail font-14">
                      Something went wrong
                    </p>
              
                  </ng-template>
                </nz-empty>
              </div>
           
            </ng-template>
          </div>
          
          <div class="col-md-12">
            <div class="border-box"></div>
          </div>
          <div class="col-md-4 mt-3 mb-3">
            <div class="form-roe-data">
              <h5>Holiday(s)</h5>
              <p>A quick snapshot of your company.</p>
            </div>
            <div class="total-shifts p-3 mt-4">
              <div class="d-flex align-items-center justify-content-between">
                <div>
                  <h6 class="text-truncate">Total Holiday’s</h6>
                  <h4 class="mt-3 fw-bold">{{ totalHolidaysNumber || 0 }}</h4>
                </div>
                <span class="total-user-icon d-flex align-items-center justify-content-center">
                  <img src="assets/images/total-user-icon.svg" />
                </span>
              </div>
              <div class="mt-3">
                <div class="d-flex align-items-center justify-content-between mb-3">
                  <small class="text-muted d-flex align-items-center gap-3 mb-0">
                    <span class="universal"></span> National Holiday's
                  </small>
                  <small class="text-muted">{{
                    universalHolidaysNumber
                    }}</small>
                </div>
                <div class="d-flex align-items-center justify-content-between mb-3">
                  <small class="text-muted d-flex align-items-center gap-3 mb-0">
                    <span class="custom"></span> Custom Holiday's
                  </small>
                  <small class="text-muted">{{ customHolidaysNumber }}</small>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-7 mt-3 mb-3">
            <div class="add-shift-main-box">
              <div class="add-shift-box d-flex align-items-center justify-content-between p-3 pt-2 pb-2">
                <div >
                  <h6 class="text-truncate mb-0">Holiday's List</h6>
                </div>
                <div >
                  <a class="add-shift-time-btn" data-bs-toggle="modal"  *ngIf="rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)"
                  data-bs-target="#addholiday">
                    <i class="bi bi-plus"></i> Add more holidays
                  </a>
                </div>
              </div>
              <div class="m-3 holiday-list">
                <div class="row holiday-list-box-height" [ngClass]="{
                    'holiday-list-box': loadMoreHolidaysBoolean == true
                  }">
                 

                  <div class="empty-file" *ngIf="holidays.length == 0">
                    <nz-empty nzNotFoundImage="assets/images/no-data-found-img.svg" [nzNotFoundContent]="contentTpl">
                      <ng-template #contentTpl>
                        <p class="mb-1 empty-detail font-14">No Data Found</p>
             
                      </ng-template>
                    </nz-empty>
                  </div>
                  <div class="col-md-6" *ngFor="let holiday of holidays">
                    <div class="holiday-date mb-3 d-flex align-items-center justify-content-between" [ngClass]="{
                        'universal-holiday':
                          holiday.holidayType === 'Universal',
                        'custom-holiday': holiday.holidayType === 'Custom'
                      }">
                      <p class="mb-0">
                        {{ holiday.name }} |
                        <span style="color: #3f988f">{{
                          holiday.date | date : "dd MMMM, yyyy"
                          }}</span>
                      </p>
                      <div *ngIf="
                          holiday.holidayType === 'Custom' &&
                          isDateGreaterThanToday(holiday.date) && rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)
                        " (click)="deleteCustomHolidays(holiday.id)">
                        <i class="bi bi-trash text-danger pointer"></i>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="d-flex align-items-center justify-content-end"
                  *ngIf="totalMoreHolidays > 0 || openLoadMoreHoliday">
                  <div class="">
                    <a class="view-all-btn" (click)="loadMoreHolidays()">View More <i class="bi bi-chevron-down"></i>
                    </a>
                  </div>
                </div>
                <div class="d-flex align-items-center justify-content-end"
                  *ngIf="totalMoreHolidays <= 0 && !openLoadMoreHoliday">
                  <div class="">
                    <a class="view-all-btn" (click)="hideHolidays()">View Less <i class="bi bi-chevron-up"></i>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
         
          <div class="col-md-12">
            <div class="border-box"></div>
          </div>
          <div class="col-md-4 mt-3 mb-3" #automationRules>
            <div class="form-roe-data">
              <h5>Automation Rules</h5>
              <p>A quick snapshot of your company.</p>
            </div>
          </div>
          <div class="col-md-7 mt-3 mb-3">
            <ng-container *ngIf="
                isShimmerForAttendanceRule &&
                  attendanceRuleWithAttendanceRuleDefinitionResponseList.length ==
                    0 &&
                  !dataNotFoundPlaceholderForAttendanceRule &&
                  !networkConnectionErrorPlaceHolderForAttendanceRule;
                else attendanceRuleWithDefinitionData
              ">
              <div class="">
                <div class="text-end">
                  <ngx-shimmer-loading [width]="'40%'" [height]="'20px'"
                    style="border-radius: 50%"></ngx-shimmer-loading>
                </div>
              </div>
              <div class="mt-3" style="
                  border: 1px solid #f5f5f5;
                  padding: 5px;
                  border-radius: 6px;
                ">
                <div class="row" style="
                    border-bottom: 1px solid #f5f5f5;
                    padding-top: 10px;
                    padding-bottom: 10px;
                  ">
                  <div class="col-md-4">
                    <div class="">
                      <ngx-shimmer-loading [width]="'100%'" [height]="'20px'"
                        style="border-radius: 50%"></ngx-shimmer-loading>
                    </div>
                  </div>
                </div>
                <div class="row mt-3">
                  <div class="col-md-3">
                    <div class="">
                      <ngx-shimmer-loading [width]="'100%'" [height]="'20px'"
                        style="border-radius: 50%"></ngx-shimmer-loading>
                    </div>
                  </div>
                </div>
                <div class="row mt-3">
                  <div class="col-md-4">
                    <div class="">
                      <ngx-shimmer-loading [width]="'100%'" [height]="'30px'"
                        style="border-radius: 50%"></ngx-shimmer-loading>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="">
                      <ngx-shimmer-loading [width]="'100%'" [height]="'30px'"
                        style="border-radius: 50%"></ngx-shimmer-loading>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="">
                      <ngx-shimmer-loading [width]="'100%'" [height]="'30px'"
                        style="border-radius: 50%"></ngx-shimmer-loading>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="">
                      <ngx-shimmer-loading [width]="'100%'" [height]="'30px'"
                        style="border-radius: 50%"></ngx-shimmer-loading>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="">
                      <ngx-shimmer-loading [width]="'100%'" [height]="'30px'"
                        style="border-radius: 50%"></ngx-shimmer-loading>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="">
                      <ngx-shimmer-loading [width]="'100%'" [height]="'30px'"
                        style="border-radius: 50%"></ngx-shimmer-loading>
                    </div>
                  </div>
                </div>
              </div>
            </ng-container>
            <ng-template #attendanceRuleWithDefinitionData>
              <ng-container *ngIf="
                  attendanceRuleWithAttendanceRuleDefinitionResponseList.length !==
                    0 &&
                    !dataNotFoundPlaceholderForAttendanceRule &&
                    !networkConnectionErrorPlaceHolderForAttendanceRule;
                  else errorInFetchingAttendanceRuleWithAttendanceRuleDefinitionData
                ">
                <div class="add-shift-main-box">
                  <div class="add-shift-box d-flex align-items-center justify-content-between p-3 pt-2 pb-2">
                    <div class="">
                      <h6 class="text-truncate mb-0">Rules</h6>
                    </div>
                    <div *ngIf="rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)">
                      <a class="add-shift-time-btn" data-bs-toggle="modal" data-bs-target="#automation-rules"
                        id="automationRuless" #automationRuless (click)="getAttendanceRuleByOrganizationMethodCall()">
                        <i class="bi bi-plus"></i> Add Automation Rules
                      </a>


                    </div>
                  </div>
                  <div class="shift-time p-3 m-3" *ngFor="
                      let attendanceRuleWithAttendanceRuleDefinitionResponse of attendanceRuleWithAttendanceRuleDefinitionResponseList;
                      let automationIndex = index
                    ">
                    <div class="">
                      <div class="d-flex align-items-center justify-content-between">
                        <div class="d-flex align-items-center gap-3">
                          <div class="">
                            <span class="automation-rules-icon d-flex align-items-center justify-content-center">
                              <img src="assets/images/rule-icon.svg" />
                            </span>
                          </div>
                          <div class="">
                            <h6 class="text-truncate mb-0">
                              {{
                              attendanceRuleWithAttendanceRuleDefinitionResponse
                              .attendanceRuleResponse.name
                              }}
                            </h6>
                            <small class="text-muted">{{
                              attendanceRuleWithAttendanceRuleDefinitionResponse
                              .attendanceRuleResponse.description
                              }}</small>
                          </div>
                        </div>
                        <div class="">
                          <span class="automation-rules-toogel-btn pointer" data-bs-toggle="collapse"
                            [attr.data-bs-target]="
                              '#multiCollapseExample5' + automationIndex
                            " role="button" [attr.aria-controls]="
                              'multiCollapseExample5' + automationIndex
                            " [attr.aria-expanded]="
                              automationIndex === activeIndex5
                                ? 'true'
                                : 'false'
                            " (click)="toggleCollapse5(automationIndex)">
                            <i class="bi bi-chevron-down"></i>
                          </span>
                        </div>
                      </div>
                      <div class="collapse multi-collapse" [id]="'multiCollapseExample5' + automationIndex"
                        [class.show]="activeIndex5 === automationIndex" *ngFor="
                          let attendanceRuleDefinitionResponse of attendanceRuleWithAttendanceRuleDefinitionResponse.attendanceRuleDefinitionResponseList;
                          let i = index
                        ">
                        <div class="d-flex align-items-center justify-content-between mt-3">
                          <div class="">
                            <p class="mb-0">
                              <i class="bi bi-arrow-right" style="padding-right: 10px"></i>
                              Rule ({{ i + 1 }})
                            </p>
                          </div>
                          <div class="d-flex align-items-center gap-4">
                            <a data-bs-toggle="modal" data-bs-target="#rules-value" class="create-rule"
                              style="cursor: pointer" (click)="
                                updateAttendanceRuleDefinition(
                                  attendanceRuleDefinitionResponse,
                                  attendanceRuleWithAttendanceRuleDefinitionResponse.attendanceRuleResponse,
                                  automationIndex
                                )
                              ">
                              <i class="bi  pointer" [ngClass]="{'bi-pencil':rbacService.hasWriteAccess(Routes.ATTENDANCESETTING),'bi-eye':!rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)}"></i>
                            </a>

                            
                            <a class="delete-rule" style="cursor: pointer" data-bs-toggle="modal"
                             data-bs-target="#delete-automation" *ngIf="rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)"
                              (click)="getAutomationTemplateId(attendanceRuleDefinitionResponse.id, attendanceRuleDefinitionResponse.attendanceRuleTypeId  ) " >
                              <i class="bi bi-trash pointer text-danger"></i>
                            </a>
                           
                          </div>
                        </div>
                        <div class="row mt-3" *ngIf="
                            attendanceRuleDefinitionResponse.attendanceRuleTypeId ==
                            DEDUCTION_RULE_DEFINITION
                          ">
                          <div [ngClass]="{
                              'col-md-4':
                                getDeductionRuleDefinitionComponentCount(
                                  attendanceRuleDefinitionResponse.deductionRuleDefinitionResponse
                                ) == COL_MD_4,
                              'col-md-6':
                                getDeductionRuleDefinitionComponentCount(
                                  attendanceRuleDefinitionResponse.deductionRuleDefinitionResponse
                                ) == COL_MD_6,
                              'col-md-12':
                                getDeductionRuleDefinitionComponentCount(
                                  attendanceRuleDefinitionResponse.deductionRuleDefinitionResponse
                                ) == COL_MD_12
                            }" *ngIf="
                              attendanceRuleDefinitionResponse
                                .deductionRuleDefinitionResponse
                                .customSalaryDeduction.lateDuration != null &&
                              attendanceRuleDefinitionResponse
                                .deductionRuleDefinitionResponse
                                .customSalaryDeduction.lateDuration != undefined
                            ">
                            <div class="custom-salary">
                              <div class="custom-salary-hedding p-3">
                                <h4 class="mb-0">Custom Salary Deduction</h4>
                              </div>
                              <div class="custom-salary-para p-3">
                                <div class="d-flex align-items-center justify-content-between mb-3">
                                  <p class="mb-0">Duration</p>
                                  <span style="color: #3f988f">
                                    <ng-container *ngIf="
                                        attendanceRuleDefinitionResponse
                                          .deductionRuleDefinitionResponse
                                          .customSalaryDeduction
                                          .lateDuration !== null &&
                                          attendanceRuleDefinitionResponse
                                            .deductionRuleDefinitionResponse
                                            .customSalaryDeduction
                                            .lateDuration !== '';
                                        else na1
                                      ">
                                      <span style="color: 3f988f">{{
                                        attendanceRuleDefinitionResponse
                                        .deductionRuleDefinitionResponse
                                        .customSalaryDeduction.lateDuration
                                        }}</span>
                                      <span style="color: 3f988f"> hrs.</span>
                                    </ng-container>
                                    <ng-template #na1>
                                      <span style="color: 3f988f">N/A</span>
                                    </ng-template>
                                  </span>
                                </div>
                                <div class="d-flex align-items-center justify-content-between mb-3">
                                  <p class="mb-0">Deduction</p>
                                  <span style="color: #009688">
                                    <ng-container *ngIf="
                                        attendanceRuleDefinitionResponse
                                          ?.deductionRuleDefinitionResponse
                                          ?.deductionType?.id ===
                                          DEDUCTION_TYPE_PER_MINUTE;
                                        else customDeductionFixAmount
                                      ">
                                      <span style="color: 3f988f">{{
                                        attendanceRuleDefinitionResponse
                                        ?.deductionRuleDefinitionResponse
                                        ?.deductionType?.type
                                        }}</span>
                                    </ng-container>
                                    <ng-template #customDeductionFixAmount>
                                      <ng-container *ngIf="
                                          attendanceRuleDefinitionResponse
                                            ?.deductionRuleDefinitionResponse
                                            ?.deductionType?.type;
                                          else customDeductionNA
                                        ">
                                        <span style="color: 3f988f">{{
                                          attendanceRuleDefinitionResponse
                                          ?.deductionRuleDefinitionResponse
                                          ?.deductionType?.type
                                          }}</span>
                                        <span style="color: 3f988f">
                                          (Rs.
                                          {{
                                          attendanceRuleDefinitionResponse
                                          .deductionRuleDefinitionResponse
                                          .customSalaryDeduction
                                          .amountInRupees
                                          }})</span>
                                      </ng-container>
                                    </ng-template>
                                    <ng-template #customDeductionNA>
                                      <span>N/A</span>
                                    </ng-template>
                                  </span>
                                </div>
                                <div class="d-flex align-items-center justify-content-between">
                                  <p class="mb-0">Occurrences</p>
                                  <!-- <span> | </span> -->
                                  <span style="color: #009688">
                                    <ng-container *ngIf="
                                        attendanceRuleDefinitionResponse
                                          .deductionRuleDefinitionResponse
                                          .customSalaryDeduction
                                          .occurrenceCount !== 0;
                                        else customOccurrenceOrNA
                                      ">
                                      <span>{{
                                        attendanceRuleDefinitionResponse
                                        .deductionRuleDefinitionResponse
                                        .customSalaryDeduction.occurrenceCount
                                        }}</span>
                                      <span style="color: 3f988f"> times</span>
                                    </ng-container>
                                    <ng-template #customOccurrenceOrNA>N/A</ng-template>
                                  </span>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div [ngClass]="{
                              'col-md-4':
                                getDeductionRuleDefinitionComponentCount(
                                  attendanceRuleDefinitionResponse.deductionRuleDefinitionResponse
                                ) == COL_MD_4,
                              'col-md-6':
                                getDeductionRuleDefinitionComponentCount(
                                  attendanceRuleDefinitionResponse.deductionRuleDefinitionResponse
                                ) == COL_MD_6,
                              'col-md-12':
                                getDeductionRuleDefinitionComponentCount(
                                  attendanceRuleDefinitionResponse.deductionRuleDefinitionResponse
                                ) == COL_MD_12
                            }" *ngIf="
                              attendanceRuleDefinitionResponse
                                .deductionRuleDefinitionResponse
                                .halfDaySalaryDeduction.lateDuration != null &&
                              attendanceRuleDefinitionResponse
                                .deductionRuleDefinitionResponse
                                .halfDaySalaryDeduction.lateDuration !=
                                undefined
                            ">
                            <div class="custom-salary">
                              <div class="custom-salary-hedding p-3">
                                <h4 class="mb-0">Half Day Salary Deduction</h4>
                              </div>
                              <div class="custom-salary-para p-3">
                                <div class="d-flex align-items-center justify-content-between mb-3">
                                  <p class="mb-0">Duration</p>
                                  <span style="color: #009688">
                                    <ng-container *ngIf="
                                        attendanceRuleDefinitionResponse
                                          .deductionRuleDefinitionResponse
                                          .halfDaySalaryDeduction
                                          .lateDuration !== null &&
                                          attendanceRuleDefinitionResponse
                                            .deductionRuleDefinitionResponse
                                            .halfDaySalaryDeduction
                                            .lateDuration !== '';
                                        else na2
                                      ">
                                      <span>{{
                                        attendanceRuleDefinitionResponse
                                        .deductionRuleDefinitionResponse
                                        .halfDaySalaryDeduction.lateDuration
                                        }}</span>
                                      <span style="color: 3f988f"> hrs.</span>
                                    </ng-container>
                                    <ng-template #na2>
                                      <span>N/A</span>
                                    </ng-template>
                                  </span>
                                </div>
                                <div class="d-flex align-items-center justify-content-between">
                                  <p class="mb-0">Occurrences</p>
                                  <span style="color: #009688">
                                    <ng-container *ngIf="
                                        attendanceRuleDefinitionResponse
                                          .deductionRuleDefinitionResponse
                                          .halfDaySalaryDeduction
                                          .occurrenceCount !== 0;
                                        else halfDayOccurrenceOrNA
                                      ">
                                      <span>{{
                                        attendanceRuleDefinitionResponse
                                        .deductionRuleDefinitionResponse
                                        .halfDaySalaryDeduction
                                        .occurrenceCount
                                        }}</span>
                                      <span style="color: 3f988f"> times</span>
                                    </ng-container>
                                    <ng-template #halfDayOccurrenceOrNA>N/A</ng-template>
                                  </span>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div [ngClass]="{
                              'col-md-4':
                                getDeductionRuleDefinitionComponentCount(
                                  attendanceRuleDefinitionResponse.deductionRuleDefinitionResponse
                                ) == COL_MD_4,
                              'col-md-6':
                                getDeductionRuleDefinitionComponentCount(
                                  attendanceRuleDefinitionResponse.deductionRuleDefinitionResponse
                                ) == COL_MD_6,
                              'col-md-12':
                                getDeductionRuleDefinitionComponentCount(
                                  attendanceRuleDefinitionResponse.deductionRuleDefinitionResponse
                                ) == COL_MD_12
                            }" *ngIf="
                              attendanceRuleDefinitionResponse
                                .deductionRuleDefinitionResponse
                                .fullDaySalaryDeduction.lateDuration != null &&
                              attendanceRuleDefinitionResponse
                                .deductionRuleDefinitionResponse
                                .fullDaySalaryDeduction.lateDuration !=
                                undefined
                            ">
                            <div class="custom-salary">
                              <div class="custom-salary-hedding p-3">
                                <h4 class="mb-0">Full Day Salary Deduction</h4>
                              </div>
                              <div class="custom-salary-para p-3">
                                <div class="d-flex align-items-center justify-content-between mb-3">
                                  <p class="mb-0">Duration</p>
                                  <span style="color: #009688">
                                    <ng-container *ngIf="
                                        attendanceRuleDefinitionResponse
                                          .deductionRuleDefinitionResponse
                                          .fullDaySalaryDeduction
                                          .lateDuration !== null &&
                                          attendanceRuleDefinitionResponse
                                            .deductionRuleDefinitionResponse
                                            .fullDaySalaryDeduction
                                            .lateDuration != '';
                                        else na3
                                      ">
                                      <span>{{
                                        attendanceRuleDefinitionResponse
                                        .deductionRuleDefinitionResponse
                                        .fullDaySalaryDeduction.lateDuration
                                        }}</span>
                                      <span style="color: 3f988f"> hrs.</span>
                                    </ng-container>
                                    <ng-template #na3>
                                      <span>N/A</span>
                                    </ng-template>
                                  </span>
                                </div>
                                <div class="d-flex align-items-center justify-content-between">
                                  <p class="mb-0">Occurrences</p>
                                  <span style="color: #009688">
                                    <ng-container *ngIf="
                                        attendanceRuleDefinitionResponse
                                          .deductionRuleDefinitionResponse
                                          .fullDaySalaryDeduction
                                          .occurrenceCount !== 0;
                                        else fullDayOccurrenceOrNA
                                      ">
                                      <span>{{
                                        attendanceRuleDefinitionResponse
                                        .deductionRuleDefinitionResponse
                                        .fullDaySalaryDeduction
                                        .occurrenceCount
                                        }}</span>
                                      <span style="color: 3f988f"> times</span>
                                    </ng-container>
                                    <ng-template #fullDayOccurrenceOrNA>N/A</ng-template>
                                  </span>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="row mt-3" *ngIf="
                            attendanceRuleDefinitionResponse.attendanceRuleTypeId ==
                            OVERTIME_RULE_DEFINITION
                          ">
                          <div [ngClass]="{
                              'col-md-4':
                                getOvertimeRuleDefinitionComponentCount(
                                  attendanceRuleDefinitionResponse.overtimeRuleDefinitionResponse
                                ) == COL_MD_4,
                              'col-md-6':
                                getOvertimeRuleDefinitionComponentCount(
                                  attendanceRuleDefinitionResponse.overtimeRuleDefinitionResponse
                                ) == COL_MD_6,
                              'col-md-12':
                                getOvertimeRuleDefinitionComponentCount(
                                  attendanceRuleDefinitionResponse.overtimeRuleDefinitionResponse
                                ) == COL_MD_12
                            }" *ngIf="
                              attendanceRuleDefinitionResponse
                                .overtimeRuleDefinitionResponse
                                .customDuration != null &&
                              attendanceRuleDefinitionResponse
                                .overtimeRuleDefinitionResponse
                                .customDuration != undefined
                            ">
                            <div class="custom-salary">
                              <div class="custom-salary-hedding p-3">
                                <h4 class="mb-0">Custom Payout</h4>
                              </div>
                              <div class="custom-salary-para p-3">
                                <div class="d-flex align-items-center justify-content-between mb-3">
                                  <p class="mb-0">Duration</p>
                                  <span style="color: #3f988f">
                                    <ng-container *ngIf="
                                        attendanceRuleDefinitionResponse
                                          .overtimeRuleDefinitionResponse
                                          .customDuration !== null &&
                                          attendanceRuleDefinitionResponse
                                            .overtimeRuleDefinitionResponse
                                            .customDuration !== '';
                                        else customDurationNA
                                      ">
                                      <span style="color: 3f988f">{{
                                        attendanceRuleDefinitionResponse
                                        .overtimeRuleDefinitionResponse
                                        .customDuration
                                        }}</span>
                                      <span style="color: 3f988f"> hrs.</span>
                                    </ng-container>
                                    <ng-template #customDurationNA>
                                      <span style="color: 3f988f">N/A</span>
                                    </ng-template>
                                  </span>
                                </div>
                                <div class="d-flex align-items-center justify-content-between mb-3">
                                  <p class="mb-0">Pay Type</p>
                                  <span style="color: #009688">
                                    <ng-container *ngIf="
                                        attendanceRuleDefinitionResponse
                                          ?.overtimeRuleDefinitionResponse
                                          ?.customOvertimeType?.id !=
                                          OVERTIME_TYPE_FIXED_AMOUNT;
                                        else customPayFixAmount
                                      ">
                                      <span style="color: 3f988f">{{
                                        attendanceRuleDefinitionResponse
                                        ?.overtimeRuleDefinitionResponse
                                        ?.customOvertimeType?.type
                                        }}</span>
                                    </ng-container>
                                    <ng-template #customPayFixAmount>
                                      <ng-container *ngIf="
                                          attendanceRuleDefinitionResponse
                                            ?.overtimeRuleDefinitionResponse
                                            ?.customOvertimeType?.type;
                                          else customPayNA
                                        ">
                                        <span style="color: 3f988f">{{
                                          attendanceRuleDefinitionResponse
                                          ?.overtimeRuleDefinitionResponse
                                          ?.customOvertimeType?.type
                                          }}</span>
                                        <span style="color: 3f988f">
                                          (Rs.
                                          {{
                                          attendanceRuleDefinitionResponse
                                          .overtimeRuleDefinitionResponse
                                          .customAmountInRupees
                                          }})</span>
                                      </ng-container>
                                    </ng-template>
                                    <ng-template #customPayNA>
                                      <span>N/A</span>
                                    </ng-template>
                                  </span>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div [ngClass]="{
                              'col-md-4':
                                getOvertimeRuleDefinitionComponentCount(
                                  attendanceRuleDefinitionResponse.overtimeRuleDefinitionResponse
                                ) == COL_MD_4,
                              'col-md-6':
                                getOvertimeRuleDefinitionComponentCount(
                                  attendanceRuleDefinitionResponse.overtimeRuleDefinitionResponse
                                ) == COL_MD_6,
                              'col-md-12':
                                getOvertimeRuleDefinitionComponentCount(
                                  attendanceRuleDefinitionResponse.overtimeRuleDefinitionResponse
                                ) == COL_MD_12
                            }" *ngIf="
                              attendanceRuleDefinitionResponse
                                .overtimeRuleDefinitionResponse
                                .halfDayDuration != null &&
                              attendanceRuleDefinitionResponse
                                .overtimeRuleDefinitionResponse
                                .halfDayDuration != undefined
                            ">
                            <div class="custom-salary">
                              <div class="custom-salary-hedding p-3">
                                <h4 class="mb-0">Half Day Payout</h4>
                              </div>
                              <div class="custom-salary-para p-3">
                                <div class="d-flex align-items-center justify-content-between mb-3">
                                  <p class="mb-0">Duration</p>
                                  <span style="color: #009688">
                                    <ng-container *ngIf="
                                        attendanceRuleDefinitionResponse
                                          .overtimeRuleDefinitionResponse
                                          .halfDayDuration !== null &&
                                          attendanceRuleDefinitionResponse
                                            .overtimeRuleDefinitionResponse
                                            .halfDayDuration !== '';
                                        else halfDayDurationNA
                                      ">
                                      <span>{{
                                        attendanceRuleDefinitionResponse
                                        .overtimeRuleDefinitionResponse
                                        .halfDayDuration
                                        }}</span>
                                      <span style="color: 3f988f"> hrs.</span>
                                    </ng-container>
                                    <ng-template #halfDayDurationNA>
                                      <span>N/A</span>
                                    </ng-template>
                                  </span>
                                </div>
                                <div class="d-flex align-items-center justify-content-between mb-3">
                                  <p class="mb-0">Pay Type</p>
                                  <span style="color: #009688">
                                    <ng-container *ngIf="
                                        attendanceRuleDefinitionResponse
                                          ?.overtimeRuleDefinitionResponse
                                          ?.halfDayOvertimeType?.id !=
                                          OVERTIME_TYPE_FIXED_AMOUNT;
                                        else halfDayPayFixAmount
                                      ">
                                      <span style="color: 3f988f">{{
                                        attendanceRuleDefinitionResponse
                                        ?.overtimeRuleDefinitionResponse
                                        ?.halfDayOvertimeType?.type
                                        }}</span>
                                    </ng-container>
                                    <ng-template #halfDayPayFixAmount>
                                      <ng-container *ngIf="
                                          attendanceRuleDefinitionResponse
                                            ?.overtimeRuleDefinitionResponse
                                            ?.halfDayOvertimeType?.type;
                                          else halfDayPayNA
                                        ">
                                        <span style="color: 3f988f">{{
                                          attendanceRuleDefinitionResponse
                                          ?.overtimeRuleDefinitionResponse
                                          ?.halfDayOvertimeType?.type
                                          }}</span>
                                        <span style="color: 3f988f">
                                          (Rs.
                                          {{
                                          attendanceRuleDefinitionResponse
                                          .overtimeRuleDefinitionResponse
                                          .halfDayAmountInRupees
                                          }})</span>
                                      </ng-container>
                                    </ng-template>
                                    <ng-template #halfDayPayNA>
                                      <span>N/A</span>
                                    </ng-template>
                                  </span>
                                </div>
                              </div>
                            </div>
                          </div>

                          <div [ngClass]="{
                              'col-md-4':
                                getOvertimeRuleDefinitionComponentCount(
                                  attendanceRuleDefinitionResponse.overtimeRuleDefinitionResponse
                                ) == COL_MD_4,
                              'col-md-6':
                                getOvertimeRuleDefinitionComponentCount(
                                  attendanceRuleDefinitionResponse.overtimeRuleDefinitionResponse
                                ) == COL_MD_6,
                              'col-md-12':
                                getOvertimeRuleDefinitionComponentCount(
                                  attendanceRuleDefinitionResponse.overtimeRuleDefinitionResponse
                                ) == COL_MD_12
                            }" *ngIf="
                              attendanceRuleDefinitionResponse
                                .overtimeRuleDefinitionResponse
                                .fullDayDuration != null &&
                              attendanceRuleDefinitionResponse
                                .overtimeRuleDefinitionResponse
                                .fullDayDuration != undefined
                            ">
                            <div class="custom-salary">
                              <div class="custom-salary-hedding p-3">
                                <h4 class="mb-0">Full Day Payout</h4>
                              </div>
                              <div class="custom-salary-para p-3">
                                <div class="d-flex align-items-center justify-content-between mb-3">
                                  <p class="mb-0">Duration</p>
                                  <!-- <span> | </span> -->
                                  <span style="color: #009688">
                                    <ng-container *ngIf="
                                        attendanceRuleDefinitionResponse
                                          .overtimeRuleDefinitionResponse
                                          .fullDayDuration != null &&
                                          attendanceRuleDefinitionResponse
                                            .overtimeRuleDefinitionResponse
                                            .fullDayDuration != '';
                                        else fullDayDurationNA
                                      ">
                                      <span>{{
                                        attendanceRuleDefinitionResponse
                                        .overtimeRuleDefinitionResponse
                                        .fullDayDuration
                                        }}</span>
                                      <span style="color: 3f988f"> hrs.</span>
                                    </ng-container>
                                    <ng-template #fullDayDurationNA>
                                      <span>N/A</span>
                                    </ng-template>
                                  </span>
                                </div>
                                <div class="d-flex align-items-center justify-content-between mb-3">
                                  <p class="mb-0">Pay Type</p>
                                  <!-- <span> | </span> -->
                                  <span style="color: #009688">
                                    <ng-container *ngIf="
                                        attendanceRuleDefinitionResponse
                                          ?.overtimeRuleDefinitionResponse
                                          ?.fullDayOvertimeType?.id !=
                                          OVERTIME_TYPE_FIXED_AMOUNT;
                                        else fullDayPayFixAmount
                                      ">
                                      <span style="color: 3f988f">{{
                                        attendanceRuleDefinitionResponse
                                        ?.overtimeRuleDefinitionResponse
                                        ?.fullDayOvertimeType?.type
                                        }}</span>
                                    </ng-container>
                                    <ng-template #fullDayPayFixAmount>
                                      <ng-container *ngIf="
                                          attendanceRuleDefinitionResponse
                                            ?.overtimeRuleDefinitionResponse
                                            ?.fullDayOvertimeType?.type;
                                          else halfDayPayNA
                                        ">
                                        <span style="color: 3f988f">{{
                                          attendanceRuleDefinitionResponse
                                          ?.overtimeRuleDefinitionResponse
                                          ?.fullDayOvertimeType?.type
                                          }}</span>
                                        <span style="color: 3f988f">
                                          (Rs.
                                          {{
                                          attendanceRuleDefinitionResponse
                                          .overtimeRuleDefinitionResponse
                                          .fullDayAmountInRupees
                                          }})</span>
                                      </ng-container>
                                    </ng-template>
                                    <ng-template #halfDayPayNA>
                                      <span>N/A</span>
                                    </ng-template>
                                  </span>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-container>
            </ng-template>
            <!-- {{ dataNotFoundPlaceholderForAttendanceRule }} -->
            <ng-template #errorInFetchingAttendanceRuleWithAttendanceRuleDefinitionData>
              <!-- <div
                class="empty-file"
                *ngIf="dataNotFoundPlaceholderForAttendanceRule"
              >
                <div class="errorboxmain">
                  <div class="errorboxinner">
                    <div class="errorboxplaceholder mb-2">
                      <img
                        src="assets/images/empty-box.svg"
                        style="width: 80px"
                      />
                    </div>
                    <div class="">
                      <p class="mb-0">Automation Rules Not Found</p>
                    </div>
                    <div
                      class="add-filtter mt-2 mb-3"
                      style="text-align: center"
                    >
                      <a
                        class=""
                        style="font-size: 14px; color: #6666f3"
                        data-bs-toggle="modal"
                        data-bs-target="#automation-rules"
                        (click)="getAttendanceRuleByOrganizationMethodCall()"
                      >
                        <i class="bi bi-plus"></i> Add Automation Rules
                      </a>
                    </div>
                  </div>
                </div>
              </div> -->
              <div class="empty-file" *ngIf="dataNotFoundPlaceholderForAttendanceRule">
                <nz-empty nzNotFoundImage="assets/images/add-automation-rules.svg" [nzNotFoundContent]="contentTpl">
                  <ng-template #contentTpl>
                    <p class="mb-1 empty-detail font-14">
                      Automation Rules Not Found
                    </p>
                    <div class="d-flex align-items-center justify-content-center gap-3">

                      <div class="add-filtter">
                        <button class="btn font-14 text-primary p-0" data-bs-toggle="modal" id="emptyStateAddRule"
                          data-bs-target="#automation-rules" (click)="getAttendanceRuleByOrganizationMethodCall()">
                          <i class="bi bi-plus"></i> Create Rules
                        </button>
                      </div>
                      <span class="spreter-line" *ngIf="!stepCompleted"></span>
                      <div class="skip-btn" *ngIf="!stepCompleted">
                        <button class="btn font-14 text-primary p-0" (click)="skipForNow()" *ngIf="!skipLoading">
                          Skip this step for now <i class="bi bi-arrow-right"></i>
                        </button>
                        <div class="dot-opacity-loader" *ngIf="skipLoading">
                          <span></span>
                          <span></span>
                          <span></span>
                        </div>
                      </div>
                    </div>
                  </ng-template>
                </nz-empty>
              </div>

              <div class="empty-file" *ngIf="networkConnectionErrorPlaceHolderForAttendanceRule">
                <nz-empty nzNotFoundImage="assets/images/add-automation-rules.svg" [nzNotFoundContent]="contentTpl">
                  <ng-template #contentTpl>
                    <p class="mb-1 empty-detail font-14">
                      Something went wrong
                    </p>
                    <!-- <div class="add-filtter">
                      <a
                        class="text-primary font-14 text-center"
                        data-bs-toggle="modal"
                        data-bs-target="#automation-rules"
                        (click)="getAttendanceRuleByOrganizationMethodCall()"
                      >
                        Create Rules
                      </a>
                    </div> -->
                  </ng-template>
                </nz-empty>
              </div>
              <!-- <div
                class="empty-file"
                *ngIf="networkConnectionErrorPlaceHolderForAttendanceRule"
              >
                <div class="errorboxmain">
                  <div class="errorboxinner text-center">
                    <div class="errorboxplaceholder mb-2">
                      <img src="assets/images/signal.svg" style="width: 80px" />
                    </div>
                    <div class="">
                      <h4>Something went wrong</h4>
                      <p>
                        An error occurred while processing your request. Please
                        refresh the page and try again.
                      </p>
                    </div>
                  </div>
                </div>
              </div> -->
            </ng-template>
            <div class="col-md-12">
              <!-- <div class="border-box"></div> -->
            </div>
            <div class="col-md-1"></div>
          </div>
        </div>
      </div>
    </div>
  </div>



  <div class="modal fade" id="shiftTime" tabindex="-1" role="dialog" aria-labelledby="exampleModalDefaultLabel"
    data-bs-backdrop="static" data-bs-keyboard="false" >
    <div class="modal-dialog modal-dialog-centered" style="max-width: 1050px;" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title"> Shift Time</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" (click)="clearPage()"
            #closeShiftTimingModal></button>
        </div>
        <div class="modal-body p-0">
          <div class="shift-time-modal">
            <div class="row h-100 p-0 m-0">
              <div class="col-md-3 p-0 m-0">
                <div class="shift-time-menu">
                  <div class="nav flex-column nav-pills pt-3" id="v-pills-tab" role="tablist"
                    aria-orientation="vertical">
                    <button id="home-tab" data-bs-toggle="tab" data-bs-target="#shiftime" type="button" role="tab"
                      aria-controls="shiftime" aria-selected="true" class="nav-link active"
                      [class.active]="activeTab === 'shiftime'" (click)="shiftTimingActiveTabMethod()"
                      #shiftTimingActiveTab>
                      Shift Time
                    </button>

                    <button id="holiday-tab" data-bs-toggle="tab" [attr.aria-selected]="!shiftForm.invalid"
                      [attr.tabindex]="shiftForm.invalid ? -1 : null" data-bs-target="#weeklyOff" type="button"
                      role="tab" [class.active]="activeTab === 'weeklyOff'" (click)="weekOffActiveTabMethod()"
                      [disabled]="
                      shiftForm.invalid ||
                      !organizationShiftTimingRequest.inTimeDate ||
                      !organizationShiftTimingRequest.outTimeDate ||
                      !organizationShiftTimingRequest.startLunchDate ||
                      !organizationShiftTimingRequest.endLunchDate
                    " aria-controls="weeklyOff" class="nav-link" #weekOffActiveTab>
                      Week Off Settings
                    </button>

                    <button id="profile-tab" data-bs-toggle="tab" [attr.aria-selected]="!shiftForm.invalid"
                      [attr.tabindex]="shiftForm.invalid ? -1 : null" data-bs-target="#staffselection" type="button"
                      role="tab" aria-controls="staffselection" [disabled]="
                      shiftForm.invalid ||
                      !organizationShiftTimingRequest.inTimeDate ||
                      !organizationShiftTimingRequest.outTimeDate ||
                      !organizationShiftTimingRequest.startLunchDate ||
                      !organizationShiftTimingRequest.endLunchDate
                    " class="nav-link" #staffActiveTabInShiftTiming [class.active]="activeTab === 'staffselection'"
                      (click)="staffActiveTabInShiftTimingMethod()">
                      Staff Selection
                    </button>
                  </div>
                </div>
              </div>
              <div class="col-md-9 p-0 m-0">
                <div class="leave-templete p-3 bg-white">
                  <div class="tab-content" id="v-pills-tabContent">
                    <div class="tab-pane fade show active" id="shiftime" role="tabpanel"
                      [class.show]="activeTab === 'shiftime'" [class.active]="activeTab === 'shiftime'">

                      <form #shiftForm="ngForm" ngNativeValidate   [ngClass]="{'disable-action-item':!rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)}"
                      (ngSubmit)="submitShiftTimingForm()">
                        <div class="row">
                          <div class="col-md-6 mb-3">
                            <label class="pb-2">Shift Type</label>
                            <nz-form-control>
                              <nz-select nzSize="large" nzPlaceHolder="Select shift type" required
                                id="expTypeIdInput" name="expTypeId" class="form-control w-100 placeholder-line"
                                [(ngModel)]="selectedShiftType.id" (ngModelChange)="selectShiftType(selectedShiftType)">
                                <nz-option *ngFor=" let shiftType of shiftTypeList" [nzValue]="shiftType.id"
                                  [nzLabel]="shiftType.name">

                                </nz-option>
                              </nz-select>
                            </nz-form-control>
                          </div>
                          <div class="col-md-6 mb-3">
                            <label for="shiftName" class="pb-2">Shift Name</label>
                            <input type="text" class="form-control input-zorro" id="shiftName" placeholder="Shift name"
                              required [(ngModel)]="organizationShiftTimingRequest.name"
                              (input)=" checkShiftPresenceData( organizationShiftTimingRequest.name )" name="shiftName"
                              minlength="3" required #shiftName="ngModel" [disabled]="currentShiftId != 0" />

                            <div *ngIf="isShiftNamePresent">
                              <p class="errortxt mb-2 text-danger">
                                <i class="bi bi-exclamation-circle"></i>
                                Shift Name already existed.
                              </p>
                            </div>
                            <div *ngIf="shiftName?.dirty && !isShiftNamePresent">
                              <p class="errortxt mb-2 text-danger" *ngIf="shiftName.errors?.required">
                                <i class="bi bi-exclamation-circle"></i>
                                Shift Name is required.
                              </p>
                              <p class="errortxt mb-2 text-danger" *ngIf="shiftName.errors?.minlength">
                                <i class="bi bi-exclamation-circle"></i>
                                Please enter minimum three characters.
                              </p>
                            </div>
                          </div>
                          <div class="col-md-4 mb-3">
                            <label for="inTime" class="pb-2">In Time</label>
                            <nz-time-picker [(ngModel)]="
                                organizationShiftTimingRequest.inTimeDate
                              " [nzUse12Hours]="true" nzFormat="h:mm a"
                              (ngModelChange)="onTimeChange('inTime', $event)"
                              [ngModelOptions]="{ standalone: true }"></nz-time-picker>

                            <div *ngIf="
                                organizationShiftTimingValidationErrors['inTime']
                              " class="text-danger">
                              {{
                              organizationShiftTimingValidationErrors["inTime"]
                              }}
                            </div>
                          </div>
                          <div class="col-md-4 mb-3">
                            <label for="outTime" class="pb-2">Out Time</label>
                            <nz-time-picker [(ngModel)]="
                                organizationShiftTimingRequest.outTimeDate
                              " [nzUse12Hours]="true" nzFormat="h:mm a"
                              (ngModelChange)="onTimeChange('outTime', $event)"
                              [ngModelOptions]="{ standalone: true }"></nz-time-picker>
                            <div *ngIf="
                                organizationShiftTimingValidationErrors['outTime']
                              " class="text-danger">
                              {{
                              organizationShiftTimingValidationErrors["outTime"]
                              }}
                            </div>
                          </div>
                          <div class="col-md-4 mb-3">
                            <label for="workingHours" class="pb-2">Working Hours</label>
                            <input id="workingHours" type="text" class="form-control input-zorro" readonly [(ngModel)]="
                                organizationShiftTimingRequest.workingHour
                              " name="workingHours" placeholder="Working hours" />
                          </div>
                          <div class="col-md-4 mb-3">
                            <label for="startLunch" class="pb-2">Lunch Break Start Time</label>
                            <nz-time-picker [(ngModel)]="
                                organizationShiftTimingRequest.startLunchDate
                              " [nzUse12Hours]="true" nzFormat="h:mm a"
                              (ngModelChange)="onTimeChange('startLunch', $event)"
                              [ngModelOptions]="{ standalone: true }"></nz-time-picker>
                            <div *ngIf="
                                organizationShiftTimingValidationErrors[
                                  'startLunch'
                                ]
                              " class="text-danger">
                              {{
                              organizationShiftTimingValidationErrors[
                              "startLunch"
                              ]
                              }}
                            </div>
                          </div>
                          <div class="col-md-4 mb-3">
                            <label for="endLunch" class="pb-2">Lunch Break End Time</label>
                            <nz-time-picker [(ngModel)]="
                                organizationShiftTimingRequest.endLunchDate
                              " [nzUse12Hours]="true" nzFormat="h:mm a"
                              (ngModelChange)="onTimeChange('endLunch', $event)"
                              [ngModelOptions]="{ standalone: true }"></nz-time-picker>
                            <div *ngIf="
                                organizationShiftTimingValidationErrors['endLunch']
                              " class="text-danger">
                              {{
                              organizationShiftTimingValidationErrors["endLunch"]
                              }}
                            </div>
                          </div>
                          <div class="col-md-4 mb-3">
                            <label for="totalLunchBreakDuration" class="pb-2">Total Lunch Break Duration</label>
                            <input id="totalLunchBreakDuration" type="text" class="form-control input-zorro" readonly
                              [(ngModel)]="organizationShiftTimingRequest.lunchHour" name="totalLunchBreakDuration"
                              placeholder="Lunch break hours" />
                          </div>
                        </div>
                        <div class="col-md-12 mb-3 d-flex align-items-center gap-3">
                          <label>Enable Auto Checkout </label>
                          <nz-switch id="isAutoCheckout" name="isAutoCheckout" [(ngModel)]="organizationShiftTimingRequest.autoCheckedOut" ></nz-switch>
                        </div>

                        <div class="row" *ngIf="organizationShiftTimingRequest.autoCheckedOut">
                          <div class="col-md-6 mb-3">
                            <label for="autoCheckout" class="pb-2">Auto Checkout Time</label>
                            <nz-time-picker [(ngModel)]="organizationShiftTimingRequest.autoCheckout"
                                            [nzUse12Hours]="true" nzFormat="h:mm a"
                                            (ngModelChange)="onTimeChange('autoCheckout', $event)"
                                            [ngModelOptions]="{ standalone: true }">
                            </nz-time-picker>
                          </div>

                          <div class="col-md-6 mb-3">
                            <label for="autoCheckoutDifference" class="pb-2">Auto Checkout Difference</label>
                            <input id="autoCheckoutDifference" type="text" class="form-control input-zorro" readonly
                                   [value]="autoCheckoutDifference" name="autoCheckoutDifference" placeholder="HH:mm" />
                            <div *ngIf="organizationShiftTimingValidationErrors['autoCheckout']" class="text-danger">
                              {{ organizationShiftTimingValidationErrors['autoCheckout'] }}
                            </div>
                          </div>
                        </div>

                        </form>


                      <div class="leave-footer" *ngIf="rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)">
                     


                        <div class="modal-footer d-flex align-items-center justify-content-end bg-white ">
                          <button type="submit" class="btn p-0 next-btn nextBtn" (click)="weekOffActiveTabMethod()"
                            [disabled]="
                      shiftForm.invalid ||
                      !organizationShiftTimingRequest.inTimeDate ||
                      !organizationShiftTimingRequest.outTimeDate ||
                      !organizationShiftTimingRequest.startLunchDate ||
                      !organizationShiftTimingRequest.endLunchDate
                    " [ngClass]="{'btn-border':!(shiftForm.invalid ||
                      !organizationShiftTimingRequest.inTimeDate ||
                      !organizationShiftTimingRequest.outTimeDate ||
                      !organizationShiftTimingRequest.startLunchDate ||
                      !organizationShiftTimingRequest.endLunchDate)}"> Next
                            <svg _ngcontent-vay-c354="" xmlns="http://www.w3.org/2000/svg" width="22" height="22"
                              viewBox="0 0 22 22" fill="none">
                              <path _ngcontent-vay-c354=""
                                d="M1.95801 11.0005C1.95801 10.8131 2.01656 10.6609 2.13366 10.5438C2.25076 10.4267 2.40299 10.3681 2.59035 10.3681H18.1179L13.9725 6.22276C13.832 6.08224 13.7618 5.9183 13.7618 5.73094C13.7618 5.54358 13.832 5.39135 13.9725 5.27424C14.1131 5.15714 14.277 5.09859 14.4644 5.09859C14.6517 5.09859 14.8157 5.14543 14.9562 5.23911L20.2257 10.5086C20.3194 10.6492 20.3662 10.8131 20.3662 11.0005C20.3662 11.1878 20.3194 11.3518 20.2257 11.4923L14.9562 16.7618C14.8157 16.8555 14.6517 16.9023 14.4644 16.9023C14.277 16.9023 14.1131 16.8438 13.9725 16.7267C13.832 16.6096 13.7618 16.4574 13.7618 16.27C13.7618 16.0826 13.832 15.9187 13.9725 15.7782L18.1179 11.6328H2.59035C2.40299 11.6328 2.25076 11.5743 2.13366 11.4572C2.01656 11.3401 1.95801 11.1878 1.95801 11.0005Z"
                                fill="#6666F2">
                              </path>
                            </svg>
                          </button>
                        </div>
                      </div>

                    </div>
                    <div class="tab-pane fade" id="weeklyOff" role="tabpanel" [class.show]="activeTab === 'weeklyOff'"
                      [class.active]="activeTab === 'weeklyOff'">

                      <div class="staf-list-box mt-3">
                        <div class="row mb-1 mt-3 align-items-center" style="padding-bottom: 15px">
                          <div class="col-md-12">
                            <div class="week-checkbox d-flex align-items-center gap-3"
                              *ngFor="let day of weekDay; let i = index">
                              <div class="form-check d-flex align-items-center gap-2">
                                <input class="form-check-input" type="checkbox" [(ngModel)]="day.selected"
                                  [id]="'weekDay' + i" (click)="toggleSelection(i)"  [ngClass]="{'disable-action-item':!rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)}"/>
                                <label class="form-check-label align-label" [for]="'weekDay' + i"
                                [ngClass]="{'disable-action-item':!rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)}">{{ day.name }}</label>
                              </div>
                              <div *ngIf="day.selected">
                                <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                                  <input type="radio" class="btn-check" name="btnradio{{ i }}" id="btnradio1-{{ i }}" 
                                  [disabled]="!rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)"
                                    autocomplete="off" (click)="toggleAlternate(i, false)" [value]="false"
                                    [(ngModel)]="day.isAlternate" />
                                  <label class="btn btn-outline-primary" for="btnradio1-{{ i }}">All</label>
                                  <input type="radio" class="btn-check" name="btnradio{{ i }}" id="btnradio2-{{ i }}"
                                  [disabled]="!rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)"
                                    autocomplete="off" (click)="toggleAlternate(i, true)" [value]="true"
                                    [(ngModel)]="day.isAlternate" />
                                  <label class="btn btn-outline-primary" for="btnradio2-{{ i }}">Alternate</label>
                                </div>
                                <div class="btn-group radio-btn" role="group"
                                  aria-label="Basic radio toggle button group" *ngIf="day.isAlternate">
                                  <input type="radio" class="btn-check" name="btnradioAlt{{ i }}" id="btnradio3-{{ i }}"
                                  [disabled]="!rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)"
                                    autocomplete="off" (click)="day.weekOffType = 1" [value]="1"
                                    [(ngModel)]="day.weekOffType" />
                                  <label class="btn btn-outline-primary" for="btnradio3-{{ i }}">ODD</label>
                                  <input type="radio" class="btn-check" name="btnradioAlt{{ i }}" id="btnradio4-{{ i }}"
                                  [disabled]="!rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)"
                                    autocomplete="off" (click)="day.weekOffType = 2" [value]="2"
                                    [(ngModel)]="day.weekOffType" />
                                  <label class="btn btn-outline-primary" for="btnradio4-{{ i }}">EVEN</label>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="modal-footer d-flex align-items-center justify-content-between bg-white leave-footer" *ngIf="rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)">
                        <button class="btn p-0 text-black fw-semibold font-16" (click)="shiftTimingActiveTabMethod()">
                          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none">
                            <path
                              d="M19.75 10.6714C19.75 10.8588 19.6914 11.011 19.5743 11.1281C19.4572 11.2452 19.305 11.3038 19.1177 11.3038H3.59011L7.73547 15.4491C7.87599 15.5896 7.94625 15.7536 7.94625 15.9409C7.94625 16.1283 7.87599 16.2805 7.73547 16.3976C7.59495 16.5147 7.43101 16.5733 7.24365 16.5733C7.05628 16.5733 6.89234 16.5264 6.75182 16.4328L1.48229 11.1632C1.38861 11.0227 1.34177 10.8588 1.34177 10.6714C1.34177 10.484 1.38861 10.3201 1.48229 10.1796L6.75182 4.91005C6.89234 4.81637 7.05628 4.76953 7.24365 4.76953C7.43101 4.76953 7.59495 4.82808 7.73547 4.94518C7.87599 5.06228 7.94625 5.21451 7.94625 5.40188C7.94625 5.58924 7.87599 5.75318 7.73547 5.8937L3.59011 10.0391H19.1177C19.305 10.0391 19.4572 10.0976 19.5743 10.2147C19.6914 10.3318 19.75 10.484 19.75 10.6714Z"
                              fill="black"></path>
                          </svg>
                          Previous
                        </button>
                        <button type="submit" class="btn p-0 next-btn nextBtn" [disabled]="shiftForm.invalid"
                          [ngClass]="{'btn-border':!shiftForm.invalid}" (click)="staffActiveTabInShiftTimingMethod()">
                          Next
                          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22"
                            viewBox="0 0 22 22" fill="none">
                            <path
                              d="M1.95801 11.0005C1.95801 10.8131 2.01656 10.6609 2.13366 10.5438C2.25076 10.4267 2.40299 10.3681 2.59035 10.3681H18.1179L13.9725 6.22276C13.832 6.08224 13.7618 5.9183 13.7618 5.73094C13.7618 5.54358 13.832 5.39135 13.9725 5.27424C14.1131 5.15714 14.277 5.09859 14.4644 5.09859C14.6517 5.09859 14.8157 5.14543 14.9562 5.23911L20.2257 10.5086C20.3194 10.6492 20.3662 10.8131 20.3662 11.0005C20.3662 11.1878 20.3194 11.3518 20.2257 11.4923L14.9562 16.7618C14.8157 16.8555 14.6517 16.9023 14.4644 16.9023C14.277 16.9023 14.1131 16.8438 13.9725 16.7267C13.832 16.6096 13.7618 16.4574 13.7618 16.27C13.7618 16.0826 13.832 15.9187 13.9725 15.7782L18.1179 11.6328H2.59035C2.40299 11.6328 2.25076 11.5743 2.13366 11.4572C2.01656 11.3401 1.95801 11.1878 1.95801 11.0005Z"
                              fill="#6666F2">
                            </path>
                          </svg>
                        </button>
                      </div>
                    </div>
                    <div class="tab-pane fade" id="staffselection" role="tabpanel"
                      [class.show]="activeTab === 'staffselection'" [class.active]="activeTab === 'staffselection'">
                      <div class="staf-list-box mt-3">
                        <div class="row mb-1 mt-3 align-items-center" style="padding-bottom: 15px">
                          <div class="col-md-12">
                            <div class="d-flex align-items-center" style="border: 1px solid #f1f1f1">
                              <div style="width: 30%; position: relative">
                                <div class="dropdown" style="width: 100%">
                                  <button type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown"
                                    aria-expanded="false" class="btn btn-secondary dropdown-toggle new-deopdown">
                                    {{ selectedTeamName }}
                                    <i class="bi bi-chevron-down" style="color: #444; font-size: 15px"></i>
                                  </button>
                                  <ul aria-labelledby="dropdownMenuButton1" class="dropdown-menu team-dropdown" style="
                                    width: 100%;
                                    max-height: 200px;
                                    overflow-y: auto;
                                  ">
                                    <li class="ng-star-inserted" (click)="selectTeam(0)">
                                      <a class="dropdown-item">All</a>
                                    </li>
                                    <li class="ng-star-inserted" *ngFor="let tn of teamNameList"
                                      (click)="selectTeam(tn.teamId)">
                                      <a class="dropdown-item"> {{ tn.teamName }} </a>
                                    </li>
                                  </ul>
                                </div>
                              </div>
                              <div class="" style="width: 70%">
                                <form novalidate="" role="search" (submit)="searchUsers()"
                                  class="searching ng-untouched ng-pristine ng-valid">
                                  <div class="form-group" style="position: relative">
                                    <input type="text" id="searchText" placeholder="Search by name and role"
                                      class="form-control me-2 ng-untouched ng-pristine ng-valid attendance-details-search"
                                      (keyup)="searchUsers()" [(ngModel)]="searchText"
                                      [ngModelOptions]="{ standalone: true }" style="padding: 10px 50px 10px 40px" />

                                    <i *ngIf="searchText.length !== 0" (click)="clearSearchText()"
                                      class="bi bi-x search-icon position-absolute font-20 close-icon text-primary pointer"></i>

                                    <i *ngIf="!searchText" class="bi bi-search search-icon position-absolute"></i>
                                  </div>
                                </form>
                              </div>
                              <div class="container">
                                <div class="content-wrapper">
                                  <div class="d-flex align-items-center gap-2 search-list"
                                    *ngIf="selectedStaffsUuids.length > 0">
                                    <a class="info-button text-black">
                                      <span class="text-primary"> {{ selectedStaffsUuids.length }} </span>&nbsp;
                                      Selected of&nbsp;
                                      <span class="text-primary"> {{ totalUserCount }} </span>
                                    </a>
                                    <ng-container *ngIf="rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)">
                                    <span class="separator"></span>
                                    <span class="clear-button text-danger fw-semibold pointer" 
                                      (click)="unselectAllUsers()">
                                      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="19" viewBox="0 0 20 19"
                                        fill="none">
                                        <mask id="mask0_4127_2858" style="mask-type: alpha" maskUnits="userSpaceOnUse"
                                          x="0" y="0" width="20" height="19">
                                          <rect x="0.927246" y="0.460938" width="18.1564" height="18.1564"
                                            fill="#dc3545" />
                                        </mask>
                                        <g mask="url(#mask0_4127_2858)">
                                          <path
                                            d="M5.7642 14.8373L4.70508 13.7782L8.94157 9.54171L4.70508 5.30522L5.7642 4.24609L10.0007 8.48259L14.2372 4.24609L15.2963 5.30522L11.0598 9.54171L15.2963 13.7782L14.2372 14.8373L10.0007 10.6008L5.7642 14.8373Z"
                                            fill="#dc3545" />
                                        </g>
                                      </svg>
                                      Clear Selection
                                    </span>
                                    <span class="separator"></span>
                                    <label class="checkbox-label " style="width:100px;">
                                      <input type="checkbox" [(ngModel)]="isAllUsersSelected"
                                        (change)="selectAllUsers($event)" /> &nbsp;
                                      Select all
                                    </label>
                                  </ng-container>

                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <ng-container *ngIf="total > 0; else noDataFoundPlaceholderInShiftTiming">
                          <div class="staff-section-table">
                            <table class="table">
                              <thead class="thead-light">
                                <tr>
                                  <th style="width: 0%">
                                    <input type="checkbox" style="cursor: pointer" class="form-check-input" 
                                    [ngClass]="{'disable-action-item':!rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)}"
                                      [(ngModel)]="isAllSelected" (change)="selectAll(isAllSelected)" />
                                  </th>
                                  <th style="width: 25%; padding: 12px 15px">Name</th>
                                  <th style="width: 25%; padding: 12px 15px">Email</th>
                                  <th style="width: 25%; padding: 12px 15px">Phone</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr *ngFor="
                                let staff of staffs
                                  | paginate
                                    : {
                                        itemsPerPage: itemPerPage,
                                        currentPage: pageNumber,
                                        totalItems: total
                                      }
                              " style="border-bottom: 1px solid #dddddd">
                                  <td>
                                    <div class="form-check">
                                      <input type="checkbox" style="cursor: pointer" class="form-check-input"
                                      [ngClass]="{'disable-action-item':!rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)}"
                                        [(ngModel)]="staff.selected" (change)="checkIndividualSelection()" />
                                    </div>
                                  </td>
                                  <td style="padding: 12px 15px">{{ staff.name }}</td>
                                  <td style="padding: 12px 15px">
                                    {{ staff.email ? staff.email : "N/A" }}
                                  </td>
                                  <td style="padding: 12px 15px">
                                    {{ staff.phoneNumber || "N/A" }}
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </ng-container>
                        <ng-template #noDataFoundPlaceholderInShiftTiming>
                          <div class="empty-file" style="margin-top: 33%;">
                            <nz-empty nzNotFoundImage="assets/images/no-data-found-img.svg"
                              [nzNotFoundContent]="contentTpl">
                              <ng-template #contentTpl>
                                <p class="mb-1 empty-detail">No data for now</p>
                              </ng-template>
                            </nz-empty>
                          </div>
                        </ng-template>
                      </div>

                      <div class="bg-white leave-footer">

                        <div class="pagination justify-content-between p-3" *ngIf="staffs.length > 0">
                          <p class="mb-0">
                            Showing {{ 1 + ( databaseHelper.itemPerPage * (databaseHelper.currentPage - 1)) }} - {{
                            staffs.length + ( databaseHelper.itemPerPage * (databaseHelper.currentPage - 1)) }} of {{
                            total }} members
                          </p>
                          <div class="row">
                            <div class="col-md-12">
                              <ngb-pagination class="pagition-box" [collectionSize]="total" [rotate]="true"
                                (pageChange)="pageChanged($event)" [pageSize]="databaseHelper.itemPerPage"
                                [(page)]="databaseHelper.currentPage" [maxSize]="4"
                                [boundaryLinks]="true"></ngb-pagination>
                            </div>
                          </div>
                        </div>

                        <div class="modal-footer d-flex align-items-center justify-content-between " *ngIf="rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)">
                          <button type="button" class="btn p-0 text-black fw-semibold font-16" (click)="weekOffActiveTabMethod()">
                            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none">
                              <path
                                d="M19.75 10.6714C19.75 10.8588 19.6914 11.011 19.5743 11.1281C19.4572 11.2452 19.305 11.3038 19.1177 11.3038H3.59011L7.73547 15.4491C7.87599 15.5896 7.94625 15.7536 7.94625 15.9409C7.94625 16.1283 7.87599 16.2805 7.73547 16.3976C7.59495 16.5147 7.43101 16.5733 7.24365 16.5733C7.05628 16.5733 6.89234 16.5264 6.75182 16.4328L1.48229 11.1632C1.38861 11.0227 1.34177 10.8588 1.34177 10.6714C1.34177 10.484 1.38861 10.3201 1.48229 10.1796L6.75182 4.91005C6.89234 4.81637 7.05628 4.76953 7.24365 4.76953C7.43101 4.76953 7.59495 4.82808 7.73547 4.94518C7.87599 5.06228 7.94625 5.21451 7.94625 5.40188C7.94625 5.58924 7.87599 5.75318 7.73547 5.8937L3.59011 10.0391H19.1177C19.305 10.0391 19.4572 10.0976 19.5743 10.2147C19.6914 10.3318 19.75 10.484 19.75 10.6714Z"
                                fill="black"></path>
                            </svg>
                          Previous
                          </button>
                          <button class="btn p-0 next-btn nextBtn" [disabled]="isEditStaffLoader" (click)="registerOrganizationShiftTimingMethodCall()"
                            *ngIf="this.userNameWithShiftName?.length < 1" [disabled]="selectedStaffsUuids.length <1"
                            [ngClass]="{'btn-border':selectedStaffsUuids.length > 0}">
                            <span *ngIf="!isEditStaffLoader">Submit
                              <svg _ngcontent-vay-c354="" xmlns="http://www.w3.org/2000/svg" width="22" height="22"
                                viewBox="0 0 22 22" fill="none">
                                <path _ngcontent-vay-c354=""
                                  d="M1.95801 11.0005C1.95801 10.8131 2.01656 10.6609 2.13366 10.5438C2.25076 10.4267 2.40299 10.3681 2.59035 10.3681H18.1179L13.9725 6.22276C13.832 6.08224 13.7618 5.9183 13.7618 5.73094C13.7618 5.54358 13.832 5.39135 13.9725 5.27424C14.1131 5.15714 14.277 5.09859 14.4644 5.09859C14.6517 5.09859 14.8157 5.14543 14.9562 5.23911L20.2257 10.5086C20.3194 10.6492 20.3662 10.8131 20.3662 11.0005C20.3662 11.1878 20.3194 11.3518 20.2257 11.4923L14.9562 16.7618C14.8157 16.8555 14.6517 16.9023 14.4644 16.9023C14.277 16.9023 14.1131 16.8438 13.9725 16.7267C13.832 16.6096 13.7618 16.4574 13.7618 16.27C13.7618 16.0826 13.832 15.9187 13.9725 15.7782L18.1179 11.6328H2.59035C2.40299 11.6328 2.25076 11.5743 2.13366 11.4572C2.01656 11.3401 1.95801 11.1878 1.95801 11.0005Z"
                                  fill="#6666F2">
                                </path>
                              </svg>
                            </span>
                            <div class="dot-opacity-loader" *ngIf="isEditStaffLoader">
                              <span></span>
                              <span></span>
                              <span></span>
                            </div>
                          </button>
                          <button class="btn p-0 next-btn nextBtn" *ngIf="
                           this.userNameWithShiftName?.length > 0 && !this.isValidated "
                            data-bs-target="#usersAlreadyAssigned" data-bs-toggle="modal"
                            [disabled]="selectedStaffsUuids.length <1"
                            [ngClass]="{'btn-border':selectedStaffsUuids.length > 0}">
                            <span *ngIf="!isEditStaffLoader">Submit
                              <svg _ngcontent-vay-c354="" xmlns="http://www.w3.org/2000/svg" width="22" height="22"
                                viewBox="0 0 22 22" fill="none">
                                <path _ngcontent-vay-c354=""
                                  d="M1.95801 11.0005C1.95801 10.8131 2.01656 10.6609 2.13366 10.5438C2.25076 10.4267 2.40299 10.3681 2.59035 10.3681H18.1179L13.9725 6.22276C13.832 6.08224 13.7618 5.9183 13.7618 5.73094C13.7618 5.54358 13.832 5.39135 13.9725 5.27424C14.1131 5.15714 14.277 5.09859 14.4644 5.09859C14.6517 5.09859 14.8157 5.14543 14.9562 5.23911L20.2257 10.5086C20.3194 10.6492 20.3662 10.8131 20.3662 11.0005C20.3662 11.1878 20.3194 11.3518 20.2257 11.4923L14.9562 16.7618C14.8157 16.8555 14.6517 16.9023 14.4644 16.9023C14.277 16.9023 14.1131 16.8438 13.9725 16.7267C13.832 16.6096 13.7618 16.4574 13.7618 16.27C13.7618 16.0826 13.832 15.9187 13.9725 15.7782L18.1179 11.6328H2.59035C2.40299 11.6328 2.25076 11.5743 2.13366 11.4572C2.01656 11.3401 1.95801 11.1878 1.95801 11.0005Z"
                                  fill="#6666F2">
                                </path>
                              </svg>
                            </span>
                            <div class="dot-opacity-loader" *ngIf="isEditStaffLoader">
                              <span></span>
                              <span></span>
                              <span></span>
                            </div>

                          </button>
                        </div>
                      </div>

                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>







  <div class="modal fade" id="attendance-setting" tabindex="-1" role="dialog" aria-labelledby="exampleModalDefaultLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h6 class="modal-title m-0" id="exampleModalDefaultLabel">
            Manual Attendance
          </h6>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <!--end modal-header-->
        <div class="modal-body">
          <div class="row">
            <div class="col-md-12">
              <div class="attendance-settin-list">
                <div
                  class="categryCustomizecard p-3 attendance-active d-flex pointer align-items-center gap-2 bg-white">
                  <div class="categryCustomizeinput">
                    <input type="radio" name="mannual" id="mannualType" />
                  </div>
                  <div class="categryCustomizeinfo">
                    <label for="mannualType" class="mb-0 pointer d-block">
                      <h3>Manual Attendance</h3>
                      <p>
                        Large images are best for products where every detail is
                        a part of the product’s value.
                      </p>
                    </label>
                  </div>
                </div>
                <div class="categryCustomizecard p-3 d-flex pointer align-items-center gap-2 bg-white">
                  <div class="categryCustomizeinput">
                    <input type="radio" name="location" id="locationType" />
                  </div>
                  <div class="categryCustomizeinfo">
                    <label for="locationType" class="mb-0 pointer d-block">
                      <h3>Staff Attendance With Location</h3>
                      <p>
                        Large images are best for products where every detail is
                        a part of the product’s value.
                      </p>
                    </label>
                  </div>
                </div>
                <div class="categryCustomizecard p-3 d-flex pointer align-items-center gap-2 bg-white">
                  <div class="categryCustomizeinput">
                    <input type="radio" name="selfieLocation" id="selfieLocationType" />
                  </div>
                  <div class="categryCustomizeinfo">
                    <label for="selfieLocationType" class="mb-0 pointer d-block">
                      <h3>Staff Attendance With Selfie & Location</h3>
                      <p>
                        Large images are best for products where every detail is
                        a part of the product’s value.
                      </p>
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!--end row-->
        </div>
        <!--end modal-body-->
        <div class="modal-footer d-flex align-items-center justify-content-center">
          <button type="button" class="btn btn-primary" style="width: 100%">
            Save & Contnue
          </button>
        </div>
        <!--end modal-footer-->
      </div>
      <!--end modal-content-->
    </div>
    <!--end modal-dialog-->
  </div>
  <!--end modal-->
  <div class="modal fade" id="addholiday" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Add Holiday(s)</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" #customHolidayModal
            aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form #holidayForm="ngForm">
            <div *ngFor="let holiday of holidayList; let i = index" class="row">
              <div class="col-md-6 mb-3">
                <label class="pb-2">Holiday Name</label>
                <input type="text" name="holidayName{{ i }}" [(ngModel)]="holiday.name" class="form-control input-zorro"
                  placeholder="Enter Holiday Name" required />
              </div>
              <div class="mb-3"
                [ngClass]="{ 'col-md-5': holidayList.length > 1, 'col-md-6' :  holidayList.length == 1 }">
                <label class="pb-2">Holiday Date</label>
                <nz-date-picker class="form-control" name="holidayDate{{ i }}" [(ngModel)]="holiday.date" ngModel
                  required nzPlaceHolder="Select Holiday Date"></nz-date-picker>
              </div>
              <div class="col-md-1">

                <button type="button" class="btn btn-soft-danger btn-icon-square-sm" style="padding: 22px"
                  (click)="removeHoliday(i)" *ngIf="holidayList.length > 1">
                  <i class="bi bi-trash"></i>
                </button>
              </div>
            </div>
          </form>
        </div>
        <div class="d-flex justify-content-between modal-footer">
          <button class="btn p-0 text-primary" (click)="addHoliday()">
            <i class="bi bi-plus"></i> Add More
          </button>
          <button type="submit" class="btn submitActionBtn" (click)="registerCustomHolidays()"
            [disabled]="holidayForm.invalid" *ngIf="!isCustomHolidayLoader">
            Submit
          </button>
          <div class="dot-opacity-loader" *ngIf="isCustomHolidayLoader">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="addweeklyholiday" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h6 class="modal-title">Weekly Holiday</h6>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
            #closeWeeklyHolidayModal></button>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-md-12">
              <div class="week-checkbox d-flex align-items-center gap-3" *ngFor="let day of weekDay; let i = index">
                <div class="form-check d-flex align-items-center gap-2">
                  <input class="form-check-input" type="checkbox" [(ngModel)]="day.selected" [id]="'weekDay' + i"
                    (click)="toggleSelection(i)" />
                  <label class="form-check-label align-label" [for]="'weekDay' + i">{{ day.name }}</label>
                </div>
                <div *ngIf="day.selected">
                  <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                    <!-- <input type="radio" class="btn-check" name="btnradio{{ i }}" id="btnradio1-{{ i }}" autocomplete="off" (click)="toggleAlternate(i, false)" [checked]="!day.isAlternate" /><label class="btn btn-outline-primary" for="btnradio1-{{ i }}">All</label><input type="radio" class="btn-check" name="btnradio{{ i }}" id="btnradio2-{{ i }}" autocomplete="off" (click)="toggleAlternate(i, true)" [checked]="day.isAlternate" /> -->
                    <label class="btn btn-outline-primary" for="btnradio2-{{ i }}">Alternate</label>
                  </div>
                  <div class="btn-group radio-btn" role="group" aria-label="Basic radio toggle button group"
                    *ngIf="day.isAlternate">
                    <input type="radio" class="btn-check" name="btnradioAlt{{ i }}" id="btnradio3-{{ i }}"
                      autocomplete="off" (click)="day.weekOffType = 1" [checked]="day.weekOffType === 1" />
                    <label class="btn btn-outline-primary" for="btnradio3-{{ i }}">ODD</label>
                    <input type="radio" class="btn-check" name="btnradioAlt{{ i }}" id="btnradio4-{{ i }}"
                      autocomplete="off" (click)="day.weekOffType = 2" [checked]="day.weekOffType === 2" />
                    <label class="btn btn-outline-primary" for="btnradio4-{{ i }}">EVEN</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary btnmarkcancel" data-bs-dismiss="modal">
            Cancel
          </button>
          <button type="button" class="btn btnmarkdelete" (click)="submitWeeklyHolidays()"
            *ngIf="!submitWeeklyHolidaysLoader">
            Submit
          </button>
          <div class="dot-opacity-loader" *ngIf="submitWeeklyHolidaysLoader">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="addweeklyholiday" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h6 class="modal-title">Weekly Holiday</h6>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
            #closeWeeklyHolidayModal></button>
        </div>
        <div class="modal-body">
          <!-- Tabs navigation -->
          <ul id="weeklyHolidayTab" role="tablist" class="nav nav-tabs">
            <li role="presentation" class="nav-item">
              <button id="holiday-tab" data-bs-toggle="tab" data-bs-target="#holidaySettings" type="button" role="tab"
                aria-controls="holidaySettings" aria-selected="true" class="nav-link active">
                WeekOff Settings
              </button>
            </li>
           
          </ul>
          <!-- Tab panes -->
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade show active" id="holidaySettings" aria-labelledby="holiday-tab">
              <!-- Existing content for Weekly Holiday Settings -->
              <div class="row">
                <div class="col-md-12">
                  <div class="week-checkbox d-flex align-items-center gap-3" *ngFor="let day of weekDay; let i = index">
                    <div class="form-check d-flex align-items-center gap-2">
                    
                      <label class="form-check-label align-label" [for]="'weekDay' + i">{{ day.name }}</label>
                    </div>
                    <div *ngIf="day.selected">
                      <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                 
                        <label class="btn btn-outline-primary" for="btnradio1-{{ i }}">All</label>
                    
                        <label class="btn btn-outline-primary" for="btnradio2-{{ i }}">Alternate</label>
                      </div>
                      <div class="btn-group radio-btn" role="group" aria-label="Basic radio toggle button group"
                        *ngIf="day.isAlternate">
                        <input type="radio" class="btn-check" name="btnradioAlt{{ i }}" id="btnradio3-{{ i }}"
                          autocomplete="off" (click)="day.weekOffType = 1" [checked]="day.weekOffType === 1" />
                        <label class="btn btn-outline-primary" for="btnradio3-{{ i }}">ODD</label>
                        <input type="radio" class="btn-check" name="btnradioAlt{{ i }}" id="btnradio4-{{ i }}"
                          autocomplete="off" (click)="day.weekOffType = 2" [checked]="day.weekOffType === 2" />
                        <label class="btn btn-outline-primary" for="btnradio4-{{ i }}">EVEN</label>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="advancedSettings" aria-labelledby="advanced-tab">
              <!-- Additional settings or features you want to add can go here -->
              <div class="row">
                <div class="col-md-12">
                  <div class="d-flex align-items-center" style="border: 1px solid #f1f1f1">
                    <div style="width: 30%; position: relative">
                      <div class="dropdown" style="width: 100%">
                        <button type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false"
                          class="btn btn-secondary dropdown-toggle new-deopdown">
                          {{ selectedTeamName }}
                          <i class="bi bi-chevron-down" style="color: #444; font-size: 15px"></i>
                        </button>
                        <ul aria-labelledby="dropdownMenuButton1" class="dropdown-menu team-dropdown"
                          style="width: 100%">
                          <li class="ng-star-inserted" (click)="selectTeam(0)">
                            <a class="dropdown-item">All</a>
                          </li>
                          <li class="ng-star-inserted" *ngFor="let tn of teamNameList" (click)="selectTeam(tn.teamId)">
                            <a class="dropdown-item"> {{ tn.teamName }} </a>
                          </li>
                        </ul>
                      </div>
                    </div>
                    <div class="" style="width: 70%">
                      <form novalidate="" role="search" (submit)="searchUsers()"
                        class="searching ng-untouched ng-pristine ng-valid">
                        <div class="form-group" style="position: relative">
                          <input type="text" id="searchText" placeholder="Search by name and role"
                            class="form-control me-2 ng-untouched ng-pristine ng-valid attendance-details-search"
                            (keyup)="searchUsers()" [(ngModel)]="searchText" [ngModelOptions]="{ standalone: true }"
                            style="padding: 10px 50px 10px 40px" />
                          <button *ngIf="searchText.length !== 0" type="button" class="btn close-btn"
                            (click)="clearSearchText()">
                            <i class="bi bi-x mt-auto mb-auto pl-3"></i>
                          </button>
                          <i class="bi bi-search search-icon" style="
                              position: absolute;
                              top: 50%;
                              transform: translateY(-50%);
                              left: 10px;
                              padding-left: 5px;
                            "></i>
                        </div>
                      </form>
                    </div>
                    <div class="" style="width: 20%">
                      <div class="d-flex justify-content-end align-items-center" style="gap: 10px; padding-right: 15px">
                        <div class="add-filtter d-flex align-items-center justify-content-end" style="gap: 10px">
                          <a type="button"> 8 selected of 24 </a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <ng-container *ngIf="total > 0; else noDataFoundPlaceholderInShiftTiming">
                <table class="table">
                  <thead class="thead-light">
                    <tr>
                      <th style="width: 0%">
                        <input type="checkbox" style="cursor: pointer" class="form-check-input"
                          [(ngModel)]="isAllSelected" (change)="selectAll(isAllSelected)" />
                      </th>
                      <th style="width: 25%; padding: 12px 15px">Name</th>
                      <th style="width: 25%; padding: 12px 15px">Email</th>
                      <th style="width: 25%; padding: 12px 15px">Phone</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="
                        let staff of staffs
                          | paginate
                            : {
                                itemsPerPage: itemPerPage,
                                currentPage: pageNumber,
                                totalItems: total
                              }
                      " style="border-bottom: 1px solid #dddddd">
                      <td>
                        <div class="form-check">
                          <input type="checkbox" style="cursor: pointer" class="form-check-input"
                            [(ngModel)]="staff.selected" (change)="checkIndividualSelection()" />
                        </div>
                      </td>
                      <td style="padding: 12px 15px">{{ staff.name }}</td>
                      <td style="padding: 12px 15px">
                        {{ staff.email ? staff.email : "N/A" }}
                      </td>
                      <td style="padding: 12px 15px">
                        {{ staff.phoneNumber || "N/A" }}
                      </td>
                    </tr>
                  </tbody>
                </table>
              </ng-container>
              <ng-template #noDataFoundPlaceholderInShiftTiming>
                <div class="errorboxmain">
                  <div class="errorboxinner text-center">
                    <div class="errorboxplaceholder mb-2">
                      <img src="assets/images/addnewproduct.svg" style="width: 80px" />
                    </div>
                    <h4>No Data Found</h4>
                    <p>
                      We're unable to locate a record associated with the
                      information you entered.
                    </p>
                  </div>
                </div>
              </ng-template>



              <!-- staff pagination start -->
              <div class="pagination justify-content-between pl-3" *ngIf="staffs.length > 0">
                <p class="mb-0" style="padding-left: 15px">
                  Showing {{ staffs.length }} of {{ total }} members
                </p>
                <div class="row">
                  <div class="col-md-12">
                    <ngb-pagination [collectionSize]="total" [rotate]="true" (pageChange)="pageChanged($event)"
                      [pageSize]="databaseHelper.itemPerPage" [(page)]="databaseHelper.currentPage" [maxSize]="4"
                      [boundaryLinks]="true"></ngb-pagination>
                  </div>
                </div>
              </div>

              <div id="back-and-submit">
                <div class="modal-footer d-flex align-items-center justify-content-end"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary btnmarkcancel" data-bs-dismiss="modal">
            Cancel
          </button>
          <button type="button" class="btn btnmarkdelete" (click)="submitWeeklyHolidays()"
            *ngIf="!submitWeeklyHolidaysLoader">
            Submit
          </button>
          <div class="dot-opacity-loader" *ngIf="submitWeeklyHolidaysLoader">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="automation-rules" data-bs-backdrop="static" tabindex="-1" role="dialog"
    aria-labelledby="exampleModalDefaultLabel" >
    <div class="modal-dialog modal-xl" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h6 class="modal-title m-0" id="exampleModalDefaultLabel">
            Automation Rules
          </h6>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
            #attendanceRuleDefinitionModalClose></button>
        </div>
        <!--end modal-header-->
        <div class="modal-body">
          <div class="row">
            <div class="col-md-8">
              <div class="d-flex align-items-center attendance-boxx" *ngFor="
                  let attendanceRuleResponse of attendanceRuleResponseList
                ">
                <div class="late-icon">
                  <i class="bi bi-person"></i>
                </div>
                <div class="late-rule">
                  <h5>{{ attendanceRuleResponse.name }}</h5>
                  <p class="mb-0">{{ attendanceRuleResponse.description }}</p>
                </div>
                <div class="late-btn d-flex justify-content-end" style="gap: 10px; padding-right: 20px">
                  <a href="" data-bs-toggle="modal" data-bs-target="#rules-value" class="create-rule"
                    style="font-size: 12px" (click)="
                      openAttendanceRuleResponseModal(attendanceRuleResponse)
                    ">Create rule from here <i class="bi bi-chevron-right"></i>
                  </a>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="rule-section">
                <div class="rule-main-div">
                  <div class="tracking-body">
                    <ul class="tracking-steps">
                      <li class="tracking-item">
                        <div class="d-flex new-stap">
                          <div class="tracing-icon">
                            <i class="bi bi-check2"></i>
                          </div>
                          <div class="tracking-data">
                            <p>Create your rule</p>
                            <div>
                              <span> Automate Late fine for employee </span>
                            </div>
                          </div>
                        </div>
                      </li>
                      <li class="tracking-item">
                        <div class="d-flex align-items-center new-stap">
                          <div class="tracing-icon">
                            <i class="bi bi-check2"></i>
                          </div>
                          <div class="tracking-data">
                            <p>Set a rule value</p>
                            <div>
                              <span>Set a value for your rule type.</span>
                            </div>
                          </div>
                        </div>
                      </li>
                      <li class="tracking-item">
                        <div class="d-flex new-stap">
                          <div class="tracing-icon">
                            <i class="bi bi-check2"></i>
                          </div>
                          <div class="tracking-data">
                            <p>Assign Staff</p>
                            <div>
                              <span> Automate Late fine for employee </span>
                            </div>
                          </div>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="rules-value" data-bs-backdrop="static" tabindex="-1" role="dialog"
    aria-labelledby="exampleModalDefaultLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h6 class="modal-title m-0" id="exampleModalDefaultLabel">
            {{ attendanceRuleResponse.name }}
          </h6>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
            #addAttendanceRuleDefinitionModalClose (click)="clearAttendanceRuleDefinitionModal()"></button>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-md-8">
              <div class="">
                <ul id="myTab" role="tablist" class="nav nav-tabs" *ngIf="CURRENT_MODAL == DEDUCTION_RULE_DEFINITION">
                  <li role="presentation" class="nav-item">
                    <button id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab"
                      aria-controls="home" aria-selected="true" class="nav-link active" #ruleActiveTab>
                      Rules
                    </button>
                  </li>
                  <li role="presentation" class="nav-item">
                    <button id="profile-tab" data-bs-toggle="tab" [class.disabled]="
                        isNextButtonDisabledForDeductionRuleDefinitionForm() ||
                        attendanceRuleForm.invalid ||
                        compareTimesValidation()
                      " [attr.aria-selected]="!attendanceRuleForm.invalid"
                      [attr.tabindex]="attendanceRuleForm.invalid ? -1 : null" (click)="
                        !attendanceRuleForm.invalid &&
                          staffActiveTabInAutomationRuleMethod()
                      " data-bs-target="#profile" type="button" role="tab" aria-controls="profile"
                      aria-selected="false" class="nav-link" #staffActiveTabInAutomationRule>
                      Staff selection
                    </button>
                  </li>
                </ul>
                <ul id="myTab" role="tablist" class="nav nav-tabs" *ngIf="CURRENT_MODAL == OVERTIME_RULE_DEFINITION">
                  <li role="presentation" class="nav-item">
                    <button id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab"
                      aria-controls="home" aria-selected="true" class="nav-link active" #ruleActiveTab>
                      Rules
                    </button>
                  </li>
                  <li role="presentation" class="nav-item">
                    <button id="profile-tab" data-bs-toggle="tab" [class.disabled]="
                        isNextButtonDisabledForOvertimeRuleDefinitionForm() ||
                        attendanceRuleForm.invalid ||
                        compareTimesValidation()
                      " [attr.aria-selected]="!attendanceRuleForm.invalid"
                      [attr.tabindex]="attendanceRuleForm.invalid ? -1 : null" (click)="
                        !attendanceRuleForm.invalid &&
                          staffActiveTabInAutomationRuleMethod()
                      " data-bs-target="#profile" type="button" role="tab" aria-controls="profile"
                      aria-selected="false" class="nav-link" #staffActiveTabInAutomationRule>
                      Staff selection
                    </button>
                  </li>
                </ul>
                <div class="tab-content" id="myTabContent">
                  <div class="tab-pane fade show active" id="home" role="tabpanel">
                    <!-- <form #testForm="ngForm"><input type="text" required name="test2" ngModel minlength="2"><input type="text" required name="test21" ngModel minlength="2"><button type="button" class="btn btn-primary" [disabled]="!testForm.valid" (click)="testFormcheck()">submit</button></form> -->
                    <!-- <form #attendanceRuleForm="ngForm" (ngSubmit)="submitAttendanceRuleForm()"> -->
                    <form #attendanceRuleForm="ngForm" [ngClass]="{'disable-action-item':!rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)}">
                      <ng-container *ngIf="CURRENT_MODAL == DEDUCTION_RULE_DEFINITION">
                        <div class="rules-main">
                          <div class="form-check pb-3">
                            <input class="form-check-input" style="cursor: pointer" type="checkbox" value=""
                              id="flexCheckChecked" [checked]="customCheckbox" (click)="
                                tickCustomCheckbox(DEDUCTION_RULE_DEFINITION)
                              " />
                            <label class="form-check-label" for="flexCheckChecked">
                              {{ attendanceRuleResponse.customRuleHeader }}
                            </label>
                          </div>
                          <div class="dudtion-type" *ngIf="customCheckbox">
                            <div class="col-md-12">
                              <div class="row">
                                <div class="col-md-4">
                                  <div class="if-late">
                                    <label for="hoursInput" class="pb-2">{{
                                      attendanceRuleResponse.ruleSubHeader
                                      }}
                                    </label>
                                    <div class="d-flex justify-content-center align-items-center" style="gap: 5px">
                                      <nz-time-picker class="automation-rule-duration-picker"
                                        [(ngModel)]="customLateDurationValue" [ngModelOptions]="{ standalone: true }"
                                        nzFormat="HH:mm" nzPlaceHolder="Select Duration" (nzOpenChange)="
                                          onCustomDurationOpen( $event,attendanceRuleResponse.attendanceRuleTypeId )"
                                          (ngModelChange)=" getlateDuration( $event,  attendanceRuleResponse.attendanceRuleTypeId) "
                                           name="lateDuration" required #lateDuration="ngModel"></nz-time-picker>
                                      <span>
                                        <b>hrs.</b>
                                      </span>
                                    </div>
                                    <div *ngIf="lateDuration?.touched &&lateDuration.errors?.required" class="text-danger" style="font-size: 13px">
                                      Duration is required.
                                    </div>
                                    <div *ngIf="invalidCustomlateDuration1" class="text-danger" style="font-size: 13px">
                                      Custom Duration should be less than Half
                                      Day Duration.
                                    </div>
                                    <div *ngIf="invalidCustomlateDuration2" class="text-danger" style="font-size: 13px">
                                      Custom Duration should be less than full
                                      Day Duration.
                                    </div>
                                  </div>
                                </div>
                                <div class="col-md-4">
                                  <div class="dudct-type">
                                    <label for="exampleInputEmail1" class="pb-2">Deduction Type</label>
                                    <div class="dropdown">
                                      <button class="btn btn-secondary dropdown-toggle new-dropdown" type="button"
                                        id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false" style="
                                          text-align: left;
                                          background-color: white;
                                          color: black;
                                          border-color: #ced4da;
                                          width: 100%;
                                        ">
                                        {{selectedCustomDeductionType?.type || "Select deduction type" }}
                                        <i class="bi bi-chevron-down"></i>
                                      </button>
                                      <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1"
                                        style="width: 100%">
                                        <li *ngFor="
                                            let deductionType of deductionTypeList
                                          ">
                                          <a class="dropdown-item" (click)="
                                              selectCustomDeductionType(
                                                deductionType
                                              )
                                            ">
                                            {{ deductionType.type }}
                                          </a>
                                        </li>
                                      </ul>
                                    </div>
                                  </div>
                                </div>
                                <div class="col-md-4">
                                  <div *ngIf="
                                      selectedCustomDeductionType?.type ==
                                      'FIXED AMOUNT'
                                    ">
                                    <label for="exampleInputEmail1" class="pb-2">Amount in rupees:</label>
                                    <div class="justify-content-center" style="gap: 20px">
                                      <input type="number" class="form-control" aria-describedby="emailHelp"
                                        placeholder="Enter the amount here" [(ngModel)]="
                                          attendanceRuleDefinitionRequest!.deductionRuleDefinitionRequest!.customSalaryDeduction!.amountInRupees"
                                           [ngModelOptions]="{ standalone: true }" name="amount" #amount="ngModel"
                                        required />
                                      <div *ngIf=" amount?.touched && amount.errors?.required
                                        " class="text-danger" style="font-size: 13px">
                                        Amount is required.
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>

                            <div class="mt-3">
                              <div class="form-check">
                                <input class="form-check-input" style="cursor: pointer" type="checkbox" value=""
                                  id="Occurrences" [checked]="customOccurrenceCheckbox"
                                  (click)="tickCustomOccurrenceCheckbox()" />
                                <label class="form-check-label" #Occurrences for="Occurrences">
                                  Set Occurrences (Monthly)
                                </label>
                              </div>
                              <div class="d-flex align-items-center mt-2" style="gap: 10px"
                                *ngIf="customOccurrenceCheckbox">
                                <div class="col-md-12">
                                  <div class="row">
                                    <div class="col-md-4">
                                      <div class="if-late d-flex align-items-center" style="width: 150px; gap: 10px">
                                        <input type="text" class="form-control" aria-describedby="emailHelp"
                                          placeholder="Count" [(ngModel)]="
                                            attendanceRuleDefinitionRequest!
                                              .deductionRuleDefinitionRequest!
                                              .customSalaryDeduction!
                                              .occurrenceCount
                                          " [ngModelOptions]="{
                                            standalone: true
                                          }" name="lateOccurrenceCount" #lateOccurrenceCount="ngModel" required />
                                        <span>
                                          <b>times</b>
                                        </span>
                                      </div>
                                      <div *ngIf="
                                          lateOccurrenceCount?.touched &&
                                          lateOccurrenceCount.errors?.required
                                        " class="text-danger" style="font-size: 13px">
                                        Count is required.
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="mt-2">
                            <div class="form-check pb-3">
                              <input class="form-check-input" style="cursor: pointer" type="checkbox" value=""
                                id="staff" [checked]="halfDayCheckbox" (click)="
                                  tickHalfDayCheckbox(DEDUCTION_RULE_DEFINITION)
                                " />
                              <label class="form-check-label" for="staff">
                                {{ attendanceRuleResponse.halfDayRuleHeader }}
                              </label>
                            </div>
                            <!-- half day salary deduction -->
                            <div class="dudtion-type" *ngIf="halfDayCheckbox">
                              <div class="col-md-12">
                                <div class="row">
                                  <div class="col-md-4">
                                    <div class="if-late">
                                      <label for="exampleInputEmail1" class="pb-2">{{
                                        attendanceRuleResponse.ruleSubHeader
                                        }}
                                      </label>
                                      <div class="d-flex justify-content-center align-items-center" style="gap: 5px">
                                        <nz-time-picker class="automation-rule-duration-picker"
                                          [(ngModel)]="halfDayLateDurationValue" [ngModelOptions]="{
                                            standalone: true
                                          }" nzFormat="HH:mm" nzPlaceHolder="Select Duration" (nzOpenChange)="
                                            onHalfDayDurationOpen(
                                              $event,
                                              attendanceRuleResponse.attendanceRuleTypeId
                                            )
                                          " (ngModelChange)="
                                            getHalfDaylateDuration(
                                              $event,
                                              attendanceRuleResponse.attendanceRuleTypeId
                                            )
                                          " name="halfDayLateDuration" #halfDayLateDuration="ngModel"
                                          required></nz-time-picker>
                                        <span>
                                          <b>hrs.</b>
                                        </span>
                                      </div>
                                      <div *ngIf="invalidHalfDaylateDuration1" class="text-danger"
                                        style="font-size: 13px">
                                        Half Day Duration should be longer than
                                        Custom Day Duration.
                                      </div>
                                      <div *ngIf="invalidHalfDaylateDuration2" class="text-danger"
                                        style="font-size: 13px">
                                        Half Day Duration should be less than
                                        full Day Duration.
                                      </div>
                                      <div *ngIf="
                                          halfDayLateDuration?.touched &&
                                          halfDayLateDuration.errors?.required
                                        " class="text-danger" style="font-size: 13px">
                                        Duration is required.
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="mt-3">
                                <div class="form-check">
                                  <input class="form-check-input" style="cursor: pointer" type="checkbox" value=""
                                    id="Occurrences2" [checked]="halfDayOccurrenceCheckbox"
                                    (click)="tickHalfDayOccurrenceCheckbox()" />
                                  <label class="form-check-label" for="Occurrences2">
                                    Set Occurrences (Monthly)
                                  </label>
                                </div>
                                <div class="d-flex align-items-center mt-2" style="gap: 10px"
                                  *ngIf="halfDayOccurrenceCheckbox">
                                  <div class="col-md-12">
                                    <div class="row">
                                      <div class="col-md-4">
                                        <div class="if-late d-flex justify-content-center align-items-center"
                                          style="width: 150px; gap: 10px">
                                          <input type="text" class="form-control" aria-describedby="emailHelp"
                                            placeholder="Count" [(ngModel)]="
                                              attendanceRuleDefinitionRequest!
                                                .deductionRuleDefinitionRequest!
                                                .halfDaySalaryDeduction!
                                                .occurrenceCount
                                            " [ngModelOptions]="{
                                              standalone: true
                                            }" name="halfDayOccurrenceCount" #halfDayOccurrenceCount="ngModel"
                                            required />
                                          <span>
                                            <b>times</b>
                                          </span>
                                        </div>
                                        <div *ngIf="
                                            halfDayOccurrenceCount?.touched &&
                                            halfDayOccurrenceCount.errors
                                              ?.required
                                          " class="text-danger" style="font-size: 13px">
                                          Count is required.
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <!-- full day salary deduction -->
                            <div class="form-check pb-3">
                              <input class="form-check-input" style="cursor: pointer" type="checkbox" value=""
                                id="selery" [checked]="fullDayCheckbox" (click)="
                                  tickFullDayCheckbox(DEDUCTION_RULE_DEFINITION)
                                " />
                              <label class="form-check-label" for="selery">
                                {{ attendanceRuleResponse.fullDayRuleHeader }}
                              </label>
                            </div>
                            <div class="dudtion-type" *ngIf="fullDayCheckbox">
                              <div class="col-md-12">
                                <div class="row">
                                  <div class="col-md-4">
                                    <div class="if-late">
                                      <label for="exampleInputEmail1" class="pb-2">{{
                                        attendanceRuleResponse.ruleSubHeader
                                        }}
                                      </label>
                                      <div class="d-flex justify-content-center align-items-center" style="gap: 5px">
                                        <nz-time-picker class="automation-rule-duration-picker"
                                          [(ngModel)]="fullDayLateDurationValue" [ngModelOptions]="{
                                            standalone: true
                                          }" nzFormat="HH:mm" nzPlaceHolder="Select Duration" nzShowNow="false"
                                          (nzOpenChange)="
                                            onFullDayDurationOpen(
                                              $event,
                                              attendanceRuleResponse.attendanceRuleTypeId
                                            )
                                          " (ngModelChange)="
                                            getFullDaylateDuration(
                                              $event,
                                              attendanceRuleResponse.attendanceRuleTypeId
                                            )
                                          " name="fullDayLateDuration" #fullDayLateDuration="ngModel"
                                          required></nz-time-picker>
                                        <span>
                                          <b>hrs.</b>
                                        </span>
                                      </div>
                                      <div *ngIf="invalidFullDaylateDuration1" class="text-danger"
                                        style="font-size: 13px">
                                        Full Day Duration should be longer than
                                        Custom Day Duration.
                                      </div>
                                      <div *ngIf="invalidFullDaylateDuration2" class="text-danger"
                                        style="font-size: 13px">
                                        Full Day Duration should be longer than
                                        Half Day Duration.
                                      </div>
                                      <div *ngIf="
                                          fullDayLateDuration?.touched &&
                                          fullDayLateDuration.errors?.required
                                        " class="text-danger" style="font-size: 13px">
                                        Duration is required.
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="mt-3">
                                <div class="form-check">
                                  <input class="form-check-input" style="cursor: pointer" type="checkbox" value=""
                                    id="Occurrences3" [checked]="fullDayOccurrenceCheckbox"
                                    (click)="tickFullDayOccurrenceCheckbox()" />
                                  <label class="form-check-label" for="Occurrences3">
                                    Set Occurrences (Monthly)</label>
                                </div>
                                <div class="d-flex align-items-center mt-2" style="gap: 10px"
                                  *ngIf="fullDayOccurrenceCheckbox">
                                  <div class="col-md-12">
                                    <div class="row">
                                      <div class="col-md-4">
                                        <div class="if-late d-flex justify-content-center align-items-center"
                                          style="width: 150px; gap: 10px">
                                          <input type="text" class="form-control" aria-describedby="emailHelp"
                                            placeholder="Count" [(ngModel)]="
                                              attendanceRuleDefinitionRequest!
                                                .deductionRuleDefinitionRequest!
                                                .fullDaySalaryDeduction!
                                                .occurrenceCount
                                            " [ngModelOptions]="{
                                              standalone: true
                                            }" name="fullDayOccurrenceCount" #fullDayOccurrenceCount="ngModel" required
                                            max="5" />
                                          <span>
                                            <b>times</b>
                                          </span>
                                        </div>
                                        <div *ngIf="
                                            fullDayOccurrenceCount?.touched &&
                                            fullDayOccurrenceCount.errors
                                              ?.required
                                          " class="text-danger" style="font-size: 13px">
                                          Count is required.
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="modal-footer" *ngIf="rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)">
                          <button type="submit" class="btn btn-primary" [disabled]="
                              isNextButtonDisabledForDeductionRuleDefinitionForm() ||
                              attendanceRuleForm.invalid ||
                              compareTimesValidation()
                            " (click)="staffActiveTabInAutomationRuleMethod()">
                            Next
                          </button>
                        </div>
                      </ng-container>
                      <ng-container *ngIf="CURRENT_MODAL == OVERTIME_RULE_DEFINITION">
                        <div class="rules-main">
                          <div class="form-check pb-3">
                            <input class="form-check-input" style="cursor: pointer" type="checkbox" value=""
                              id="flexCheckChecked" [checked]="customCheckbox" (click)="
                                tickCustomCheckbox(OVERTIME_RULE_DEFINITION)
                              " />
                            <label class="form-check-label" for="flexCheckChecked">
                              {{ attendanceRuleResponse.customRuleHeader }}
                            </label>
                          </div>
                          <div class="dudtion-type" *ngIf="customCheckbox">
                            <div class="col-md-12">
                              <div class="row">
                                <div class="col-md-4">
                                  <div class="if-late">
                                    <label for="hoursInput" class="pb-2">{{
                                      attendanceRuleResponse.ruleSubHeader
                                      }}
                                    </label>
                                    <div class="d-flex justify-content-center align-items-center" style="gap: 5px">
                                      <nz-time-picker class="automation-rule-duration-picker" [(ngModel)]="
                                          customOvertimeDurationValue
                                        " [ngModelOptions]="{ standalone: true }" nzFormat="HH:mm"
                                        nzPlaceHolder="Select Duration" [nzDisabledHours]="disabledHours"
                                        (nzOpenChange)="
                                          onCustomDurationOpen(
                                            $event,
                                            attendanceRuleResponse.attendanceRuleTypeId
                                          )
                                        " (ngModelChange)="
                                          getlateDuration(
                                            $event,
                                            attendanceRuleResponse.attendanceRuleTypeId
                                          )
                                        " name="lateDuration" required #lateDuration="ngModel"></nz-time-picker>
                                      <span>
                                        <b>hrs.</b>
                                      </span>
                                    </div>
                                    <div *ngIf="
                                        lateDuration?.touched &&
                                        lateDuration.errors?.required
                                      " class="text-danger" style="font-size: 13px">
                                      Duration is required.
                                    </div>
                                    <div *ngIf="invalidCustomlateDuration1" class="text-danger" style="font-size: 13px">
                                      Custom Duration should be less than Half
                                      Day Duration.
                                    </div>
                                    <div *ngIf="invalidCustomlateDuration2" class="text-danger" style="font-size: 13px">
                                      Custom Duration should be less than full
                                      Day Duration.
                                    </div>
                                  </div>
                                </div>
                                <div class="col-md-4">
                                  <div class="overtime-type">
                                    <label for="exampleInputEmail1" class="pb-2">Overtime Pay Type</label>
                                    <div class="dropdown">
                                      <button class="btn btn-secondary dropdown-toggle new-dropdown" type="button"
                                        id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false" style="
                                          text-align: left;
                                          background-color: white;
                                          color: black;
                                          border-color: #ced4da;
                                          width: 100%;
                                        ">
                                        {{
                                        selectedCustomOvertimeType?.type ||
                                        "Select"
                                        }}
                                        <i class="bi bi-chevron-down"></i>
                                      </button>
                                      <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1"
                                        style="width: 100%">
                                        <li *ngFor="
                                            let overtimeType of overtimeTypeList
                                          ">
                                          <a class="dropdown-item" (click)="
                                              selectCustomOvertimeType(
                                                overtimeType
                                              )
                                            ">{{ overtimeType.type }}</a>
                                        </li>
                                      </ul>
                                    </div>
                                  </div>
                                </div>
                                <div class="col-md-4">
                                  <div *ngIf="
                                      selectedCustomOvertimeType?.type ==
                                      'FIXED AMOUNT'
                                    ">
                                    <label for="exampleInputEmail1" class="pb-2">Amount in rupees:</label>
                                    <div class="justify-content-center" style="gap: 20px">
                                      <input type="number" class="form-control" aria-describedby="emailHelp"
                                        placeholder="Enter the amount here" [(ngModel)]="
                                          attendanceRuleDefinitionRequest!
                                            .overtimeRuleDefinitionRequest!
                                            .customAmountInRupees
                                        " (change)="
                                          checkOvertimeFixAmountValidation(
                                            CUSTOM_OVERTIME_FIX_AMOUNT_STEP
                                          )
                                        " [ngModelOptions]="{ standalone: true }" name="customFixAmount"
                                        #customFixAmount="ngModel" required />
                                      <div *ngIf="
                                          customFixAmount?.touched &&
                                          customFixAmount.errors?.required
                                        " class="text-danger" style="font-size: 13px">
                                        Amount is required.
                                      </div>
                                      <div *ngIf="
                                          overtimeFixAmountValidationErrors[
                                            'CUSTOM_OVERTIME_FIX_AMOUNT_ERROR'
                                          ]
                                        " class="text-danger">
                                        {{
                                        overtimeFixAmountValidationErrors[
                                        "CUSTOM_OVERTIME_FIX_AMOUNT_ERROR"
                                        ]
                                        }}
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="mt-2">
                            <div class="form-check pb-3">
                              <input class="form-check-input" style="cursor: pointer" type="checkbox" value=""
                                id="staff" [checked]="halfDayCheckbox" (click)="
                                  tickHalfDayCheckbox(OVERTIME_RULE_DEFINITION)
                                " />
                              <label class="form-check-label" for="staff">
                                {{ attendanceRuleResponse.halfDayRuleHeader }}
                              </label>
                            </div>
                            <!-- half day salary deduction -->
                            <div class="dudtion-type" *ngIf="halfDayCheckbox">
                              <div class="col-md-12">
                                <div class="row">
                                  <div class="col-md-4">
                                    <div class="if-late">
                                      <label for="exampleInputEmail1" class="pb-2">{{
                                        attendanceRuleResponse.ruleSubHeader
                                        }}
                                      </label>
                                      <div class="d-flex justify-content-center align-items-center" style="gap: 5px">
                                        <nz-time-picker class="automation-rule-duration-picker" [(ngModel)]="
                                            halfDayOvertimeDurationValue
                                          " [ngModelOptions]="{
                                            standalone: true
                                          }" nzFormat="HH:mm" nzPlaceHolder="Select Duration" (nzOpenChange)="
                                            onHalfDayDurationOpen(
                                              $event,
                                              attendanceRuleResponse.attendanceRuleTypeId
                                            )
                                          " (ngModelChange)="
                                            getHalfDaylateDuration(
                                              $event,
                                              attendanceRuleResponse.attendanceRuleTypeId
                                            )
                                          " name="halfDayLateDuration" #halfDayLateDuration="ngModel"
                                          required></nz-time-picker>
                                        <span>
                                          <b>hrs.</b>
                                        </span>
                                      </div>
                                      <div *ngIf="invalidHalfDaylateDuration1" class="text-danger"
                                        style="font-size: 13px">
                                        Half Day Duration should be longer than
                                        Custom Day Duration.
                                      </div>
                                      <div *ngIf="invalidHalfDaylateDuration2" class="text-danger"
                                        style="font-size: 13px">
                                        Half Day Duration should be less than
                                        full Day Duration.
                                      </div>
                                      <div *ngIf="
                                          halfDayLateDuration?.touched &&
                                          halfDayLateDuration.errors?.required
                                        " class="text-danger" style="font-size: 13px">
                                        Duration is required.
                                      </div>
                                    </div>
                                  </div>
                                  <div class="col-md-4">
                                    <div class="overtime-type">
                                      <label for="exampleInputEmail1" class="pb-2">Overtime Pay Type</label>
                                      <div class="dropdown">
                                        <button class="btn btn-secondary dropdown-toggle new-dropdown" type="button"
                                          id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false"
                                          style="
                                            text-align: left;
                                            background-color: white;
                                            color: black;
                                            border-color: #ced4da;
                                            width: 100%;
                                          ">
                                          {{
                                          selectedHalfDayOvertimeType?.type ||
                                          "Select"
                                          }}
                                          <i class="bi bi-chevron-down"></i>
                                        </button>
                                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1"
                                          style="width: 100%">
                                          <li *ngFor="
                                              let overtimeType of overtimeTypeList
                                            ">
                                            <a class="dropdown-item" (click)="
                                                selectHalfDayOvertimeType(
                                                  overtimeType
                                                )
                                              ">{{ overtimeType.type }}</a>
                                          </li>
                                        </ul>
                                      </div>
                                    </div>
                                  </div>
                                  <div class="col-md-4">
                                    <div *ngIf="
                                        selectedHalfDayOvertimeType?.type ==
                                        'FIXED AMOUNT'
                                      ">
                                      <label for="exampleInputEmail1" class="pb-2">Amount in rupees:</label>
                                      <div class="justify-content-center" style="gap: 20px">
                                        <input type="number" class="form-control" aria-describedby="emailHelp"
                                          placeholder="Enter the amount here" [(ngModel)]="
                                            attendanceRuleDefinitionRequest!
                                              .overtimeRuleDefinitionRequest!
                                              .halfDayAmountInRupees
                                          " (change)="
                                            checkOvertimeFixAmountValidation(
                                              HALF_DAY_OVERTIME_FIX_AMOUNT_STEP
                                            )
                                          " [ngModelOptions]="{
                                            standalone: true
                                          }" name="halfDayFixAmount" #halfDayFixAmount="ngModel" required />
                                        <div *ngIf="
                                            halfDayFixAmount?.touched &&
                                            halfDayFixAmount.errors?.required
                                          " class="text-danger" style="font-size: 13px">
                                          Amount is required.
                                        </div>
                                        <div *ngIf="
                                            overtimeFixAmountValidationErrors[
                                              'HALF_DAY_OVERTIME_FIX_AMOUNT_ERROR'
                                            ]
                                          " class="text-danger">
                                          {{
                                          overtimeFixAmountValidationErrors[
                                          "HALF_DAY_OVERTIME_FIX_AMOUNT_ERROR"
                                          ]
                                          }}
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <!-- full day salary deduction -->
                            <div class="form-check pb-3">
                              <input class="form-check-input" style="cursor: pointer" type="checkbox" value=""
                                id="selery" [checked]="fullDayCheckbox" (click)="
                                  tickFullDayCheckbox(OVERTIME_RULE_DEFINITION)
                                " />
                              <label class="form-check-label" for="selery">
                                {{ attendanceRuleResponse.fullDayRuleHeader }}
                              </label>
                            </div>
                            <div class="dudtion-type" *ngIf="fullDayCheckbox">
                              <div class="col-md-12">
                                <div class="row">
                                  <div class="col-md-4">
                                    <div class="if-late">
                                      <label for="exampleInputEmail1" class="pb-2">{{
                                        attendanceRuleResponse.ruleSubHeader
                                        }}
                                      </label>
                                      <div class="d-flex justify-content-center align-items-center" style="gap: 5px">
                                        <nz-time-picker class="automation-rule-duration-picker" [(ngModel)]="
                                            fullDayOvertimeDurationValue
                                          " [ngModelOptions]="{
                                            standalone: true
                                          }" nzFormat="HH:mm" nzPlaceHolder="Select Duration" (nzOpenChange)="
                                            onFullDayDurationOpen(
                                              $event,
                                              attendanceRuleResponse.attendanceRuleTypeId
                                            )
                                          " (ngModelChange)="
                                            getFullDaylateDuration(
                                              $event,
                                              attendanceRuleResponse.attendanceRuleTypeId
                                            )
                                          " name="fullDayLateDuration" #fullDayLateDuration="ngModel"
                                          required></nz-time-picker>
                                        <span>
                                          <b>hrs.</b>
                                        </span>
                                      </div>
                                      <div *ngIf="invalidFullDaylateDuration1" class="text-danger"
                                        style="font-size: 13px">
                                        Full Day Duration should be longer than
                                        Custom Day Duration.
                                      </div>
                                      <div *ngIf="invalidFullDaylateDuration2" class="text-danger"
                                        style="font-size: 13px">
                                        Full Day Duration should be longer than
                                        Half Day Duration.
                                      </div>
                                      <div *ngIf="
                                          fullDayLateDuration?.touched &&
                                          fullDayLateDuration.errors?.required
                                        " class="text-danger" style="font-size: 13px">
                                        Duration is required.
                                      </div>
                                    </div>
                                  </div>
                                  <div class="col-md-4">
                                    <div class="overtime-type">
                                      <label for="exampleInputEmail1" class="pb-2">Overtime Pay Type</label>
                                      <div class="dropdown">
                                        <button class="btn btn-secondary dropdown-toggle new-dropdown" type="button"
                                          id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false"
                                          style="
                                            text-align: left;
                                            background-color: white;
                                            color: black;
                                            border-color: #ced4da;
                                            width: 100%;
                                          ">
                                          {{
                                          selectedFullDayOvertimeType?.type ||
                                          "Select"
                                          }}
                                          <i class="bi bi-chevron-down"></i>
                                        </button>
                                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1"
                                          style="width: 100%">
                                          <li *ngFor="
                                              let overtimeType of overtimeTypeList
                                            ">
                                            <a class="dropdown-item" (click)="
                                                selectFullDayOvertimeType(
                                                  overtimeType
                                                )
                                              ">{{ overtimeType.type }}</a>
                                          </li>
                                        </ul>
                                      </div>
                                    </div>
                                  </div>
                                  <div class="col-md-4">
                                    <div *ngIf="
                                        selectedFullDayOvertimeType?.type ==
                                        'FIXED AMOUNT'
                                      ">
                                      <label for="exampleInputEmail1" class="pb-2">Amount in rupees:</label>
                                      <div class="justify-content-center" style="gap: 20px">
                                        <input type="number" class="form-control" aria-describedby="emailHelp"
                                          placeholder="Enter the amount here" [(ngModel)]="
                                            attendanceRuleDefinitionRequest!
                                              .overtimeRuleDefinitionRequest!
                                              .fullDayAmountInRupees
                                          " (change)="
                                            checkOvertimeFixAmountValidation(
                                              FULL_DAY_OVERTIME_FIX_AMOUNT_STEP
                                            )
                                          " [ngModelOptions]="{
                                            standalone: true
                                          }" name="fullDayFixAmount" #fullDayFixAmount="ngModel" required />
                                        <div *ngIf="
                                            fullDayFixAmount?.touched &&
                                            fullDayFixAmount.errors?.required
                                          " class="text-danger" style="font-size: 13px">
                                          Amount is required.
                                        </div>
                                        <div *ngIf="
                                            overtimeFixAmountValidationErrors[
                                              'FULL_DAY_OVERTIME_FIX_AMOUNT_ERROR'
                                            ]
                                          " class="text-danger">
                                          {{
                                          overtimeFixAmountValidationErrors[
                                          "FULL_DAY_OVERTIME_FIX_AMOUNT_ERROR"
                                          ]
                                          }}
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="modal-footer" *ngIf="rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)">
                          <button type="submit" class="btn btn-primary" [disabled]="
                              isNextButtonDisabledForOvertimeRuleDefinitionForm() ||
                              attendanceRuleForm.invalid ||
                              compareTimesValidation()
                            " (click)="staffActiveTabInAutomationRuleMethod()">
                            Next
                          </button>
                        </div>
                      </ng-container>
                    </form>
                  </div>
                  <div class="tab-pane fade" id="profile" role="tabpanel">
                    <div class="staf-list-box mt-3">
                      <div class="row mb-1 mt-3 align-items-center" style="padding-bottom: 15px">
                        <div class="col-md-12">
                          <div class="d-flex align-items-center" style="border: 1px solid #f1f1f1">
                            <div class="" style="width: 70%">
                              <form novalidate="" role="search" (submit)="searchUsers()" 
                                class="searching ng-untouched ng-pristine ng-valid">
                                <div class="form-group" style="position: relative">
                                  <input type="text" id="searchText" placeholder="Search by name and role" 
                                    class="form-control me-2 ng-untouched ng-pristine ng-valid attendance-details-search"
                                    (keyup)="searchUsers()" [(ngModel)]="searchText"
                                    [ngModelOptions]="{ standalone: true }" style="padding: 10px 50px 10px 40px" />
                                  <button *ngIf="searchText.length !== 0" type="button" class="btn close-btn"
                                    (click)="clearSearchText()">
                                    <i class="bi bi-x mt-auto mb-auto pl-3"></i>
                                  </button>
                                  <i class="bi bi-search search-icon" style="
                                      position: absolute;
                                      top: 50%;
                                      transform: translateY(-50%);
                                      left: 10px;
                                      padding-left: 5px;
                                    "></i>
                                </div>
                              </form>
                            </div>
                            <div class="container">
                              <div class="content-wrapper">
                                <div class="filter-wrapper">
                                  <!-- Display this only if there are selected staff -->
                                  <a class="info-button" *ngIf="selectedStaffsUuids.length > 0">
                                    {{ selectedStaffsUuids.length }} selected of
                                    {{ total }}
                                  </a>
                                  <ng-container *ngIf="rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)">
                                  <!-- Clear button shows only if there are selected staff -->
                                  <span class="clear-button text-danger" *ngIf="selectedStaffsUuids.length > 0"
                                    (click)="unselectAllUsers()">
                                    Clear all users <i class="bi bi-x"></i>
                                  </span>
                                  <label class="checkbox-label" style="cursor: pointer">
                                    <input type="checkbox" [(ngModel)]="isAllUsersSelected"
                                      (change)="selectAllUsers($event)" />
                                    Select all
                                  </label>
                                </ng-container>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <ng-container *ngIf="
                          total > 0;
                          else noDataFoundPlaceholderInAutomationRule
                        ">
                        <table class="table">
                          <thead class="thead-light">
                            <tr>
                              <th style="width: 0%">
                                <input type="checkbox" style="cursor: pointer" class="form-check-input"
                                [disabled]="!rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)"
                                  [(ngModel)]="isAllSelected" (change)="selectAll(isAllSelected)" />
                              </th>
                              <!-- <th style="width:25%; padding: 12px 15px;">S. No.</th> -->
                              <th style="width: 25%; padding: 12px 15px">
                                Name
                              </th>
                              <th style="width: 25%; padding: 12px 15px">
                                Email
                              </th>
                              <th style="width: 25%; padding: 12px 15px">
                                Phone
                              </th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="
                                let staff of staffs
                                  | paginate
                                    : {
                                        itemsPerPage: itemPerPage,
                                        currentPage: pageNumber,
                                        totalItems: total
                                      }
                              " style="border-bottom: 1px solid #dddddd">
                              <td>
                                <div class="form-check">
                                  <input type="checkbox" style="cursor: pointer" class="form-check-input"
                                  [disabled]="!rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)"
                                    [(ngModel)]="staff.selected" (change)="checkIndividualSelection()" />
                                </div>
                              </td>
                              <!-- <td style="padding: 12px 15px;">{{ i+1 }}</td> -->
                              <td style="padding: 12px 15px">
                                {{ staff.name }}
                              </td>
                              <td style="padding: 12px 15px">
                                {{ staff.email ? staff.email : "N/A" }}
                              </td>
                              <td style="padding: 12px 15px">
                                {{ staff.phoneNumber || "N/A" }}
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </ng-container>
                      <ng-template #noDataFoundPlaceholderInAutomationRule>
                        <div class="errorboxmain">
                          <div class="errorboxinner text-center">
                            <div class="errorboxplaceholder mb-2">
                              <img src="assets/images/empty-folder.svg" style="width: 80px" />
                            </div>
                            <h4>No Data Found</h4>
                            <p>
                              We're unable to locate a record associated with
                              the information you entered.
                            </p>
                          </div>
                        </div>
                      </ng-template>
                    </div>


                    <!-- staff pagination start -->
                    <div class="pagination justify-content-between pl-3" *ngIf="staffs.length > 0">
                      <p class="mb-0" style="padding-left: 15px">
                        Showing {{ staffs.length }} of {{ total }} members
                      </p>
                      <div class="row">
                        <div class="col-md-12">
                          <ngb-pagination [collectionSize]="total" [rotate]="true" (pageChange)="pageChanged($event)"
                            [pageSize]="databaseHelper.itemPerPage" [(page)]="databaseHelper.currentPage" [maxSize]="4"
                            [boundaryLinks]="true"></ngb-pagination>
                        </div>
                      </div>
                    </div>

                    <div id="back-and-submit" *ngIf="rbacService.hasWriteAccess(Routes.ATTENDANCESETTING)">
                      <div class="modal-footer d-flex align-items-center justify-content-end">
                        <button type="button" class="btn btn-outline-primary" (click)="ruleActiveTabMethod()">
                          Back
                        </button>
                      </div>
                      <div class="modal-footer d-flex align-items-center justify-content-end">
                        <button type="button" class="btn btn-primary" [disabled]="saveAttendanceRuleDefinitionLoading"
                          (click)="registerAttendanceRuleDefinitionMethodCall()">

                          <div class="dot-opacity-loader-new" *ngIf="saveAttendanceRuleDefinitionLoading">
                            <span></span>
                            <span></span>
                            <span></span>
                          </div>

                          <span *ngIf="!saveAttendanceRuleDefinitionLoading">Submit</span>

                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="rule-section">
                <div class="tracking-body">
                  <ul class="tracking-steps">
                    <li class="tracking-item tracking-itemActive newline">
                      <div class="d-flex new-stap">
                        <div class="tracing-icon active">
                          <i class="bi bi-check2"></i>
                        </div>
                        <div class="tracking-data">
                          <p>Create your first rule</p>
                          <div>
                            <span> Automate Late fine for employee </span>
                          </div>
                        </div>
                      </div>
                    </li>
                    <li class="tracking-item" [ngClass]="{ 'tracking-itemActive newline': activeModel }">
                      <div class="d-flex align-items-center new-stap">
                        <div class="tracing-icon" [ngClass]="{ active: activeModel }">
                          <span *ngIf="activeModel">
                            <i class="bi bi-check2"></i>
                          </span>
                          <span *ngIf="!activeModel">2</span>
                        </div>
                        <div class="tracking-data">
                          <p>Set a rule value</p>
                          <div>
                            <span>Set a value for your rule type.</span>
                          </div>
                        </div>
                      </div>
                    </li>
                    <li class="tracking-item">
                      <div class="d-flex new-stap">
                        <div class="tracing-icon" [ngClass]="{ active: activeModel2 }">
                          <span *ngIf="activeModel2">
                            <i class="bi bi-check2"></i>
                          </span>
                          <span *ngIf="!activeModel2">3</span>
                        </div>
                        <div class="tracking-data">
                          <p>Assign Staff</p>
                          <div>
                            <span> Automate Late fine for employee </span>
                          </div>
                        </div>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="create-rule" tabindex="-1" role="dialog" aria-labelledby="exampleModalDefaultLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-md" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h6 class="modal-title m-0" id="exampleModalDefaultLabel">
            Late Entry Rules
          </h6>
          <button type="button" class="btn-close" data-bs-dismiss="modal" (click)="clearPage()"
            aria-label="Close"></button>
        </div>
        <!--end modal-header-->
        <div class="modal-body"></div>
        <div class="modal-footer d-flex align-items-center justify-content-end">
          <button type="button" class="btn btn-primary">Submit</button>
        </div>
      </div>
    </div>
  </div>
  <button type="button" style="display: none" data-bs-toggle="modal" data-bs-target="#attendancewithlocationss"
    #attendancewithlocationssButton id="attendancewithlocationssButton"></button>
  <div class="modal fade" id="attendancewithlocationss" tabindex="-1" role="dialog"
    aria-labelledby="attendancewithlocation" aria-hidden="true">
    <div class="modal-dialog modal-lg " role="document">
      <form #organizationAddressForm="ngForm" ngNativeValidate (ngSubmit)="saveFlexibleModes()">

        <div class="modal-content">
          <div class="modal-header ">
            <!-- <div class="d-flex align-items-center justify-content-between" style="width:95%"> -->
            <h6 class="modal-title m-0" id="exampleModalDefaultLabel">
              Staff Attendance With Location
            </h6>
            <!-- <button class="btn manage-location-btn p-0 text-primary">Manage Location</button> -->
            <!-- </div> -->
            <button type="button" class="btn-close" data-bs-dismiss="modal" #closeAddressModal
              aria-label="Close"></button>
          </div>
          <!--end modal-header-->


          <div class="modal-body">
            <div class="d-flex align-items-center justify-content-end">
              <button class="btn manage-location-btn p-0 text-primary" (click)="redirectToCompanySetting()">Manage
                Location</button>
            </div>


            <div class="form-group">


              <!-- neeww -->

              <div class="shift-time p-3 mt-3" *ngFor="let item of allAddresses; let i = index">
                <div class="">
                  <div class="d-flex align-items-start justify-content-between">
                    <div class="d-flex align-items-start gap-3">
                      <div class="">
                        <span class="automation-rules-icon d-flex align-items-center justify-content-center">
                          <img src="assets/images/rule-icon.svg" />
                        </span>
                      </div>
                      <div class="">
                        <h6 class="text-truncate mb-0" *ngIf="
                            item.organizationAddress.addressStatus ==
                            'Default address'
                          ">
                          {{ item.organizationAddress.addressStatus }}
                        </h6>
                        <h6 class="text-truncate mb-0" *ngIf="
                            item.organizationAddress.addressStatus !=
                            'Default address'
                          ">
                          {{ item.organizationAddress.branch || 'N/A'}}
                        </h6>
                        <small class="text-muted">{{ item.organizationAddress.addressLine1 }}</small>



                        <div class="d-flex align-items-center mb-1 mt-2">
                          <!-- Radio Buttons for Location Type -->
                          <label class="form-check me-3 flexible-location d-flex align-items-center gap-2">
                            <input class="form-check-input" type="radio" [name]="'locationType_' + i"
                              id="flexibleLocation_{{ i }}" [value]="'flexible'"
                              [checked]="item.organizationAddress.isFlexible === true"
                              (change)="onLocationTypeChange(item.organizationAddress.id, true)" />
                            <p class="mb-0">Flexible Location</p>
                          </label>
                          <label class="form-check flexible-location d-flex align-items-center gap-2">
                            <input class="form-check-input" type="radio" [name]="'locationType_' + i"
                              id="fixedLocation_{{ i }}" [value]="'fixed'"
                              [checked]="item.organizationAddress.isFlexible === false"
                              (change)="onLocationTypeChange(item.organizationAddress.id, false)" />
                            <p class=" mb-0">Fixed Location</p>
                          </label>
                        </div>
                      </div>

                    </div>
                  </div>

                  <!-- {{item.organizationAddress.isFlexible}} -->

                </div>
              </div>

            </div>

          </div>

          <div class="modal-footer d-flex align-items-center justify-content-end">
            <button class="btn btn-primary" type="submit" [disabled]="toggle" aria-label="Next Step">
              <div *ngIf="modesLoader" class="dot-opacity-loader">
                <span></span>
                <span></span>
                <span></span>
              </div>
              <span *ngIf="!modesLoader">
                Save <i class="bi bi-arrow-right" style="padding-left: 8px"></i>
              </span>
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <!-- old default address edit code with map -->
  <div class="modal fade" id="attendancewithlocationss22" tabindex="-1" role="dialog"
    aria-labelledby="attendancewithlocation22" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <form #organizationAddressForm="ngForm" ngNativeValidate>
        <!-- (ngSubmit)="saveLocationInfo()" -->
        <!-- (ngSubmit)="setOrganizationAddressDetailMethodCall()" -->
        <div class="modal-content">
          <div class="modal-header">
            <h6 class="modal-title m-0" id="exampleModalDefaultLabel">
              Staff Attendance With Location
            </h6>
            <button type="button" class="btn-close" data-bs-dismiss="modal" #closeAddressModal
              aria-label="Close"></button>
          </div>
          <!--end modal-header-->

          <!-- Radio buttons for Flexible and Fixed location -->
          <div class="modal-body">
            <div class="form-group">
              <div class="d-flex align-items-center mb-3">
                <label class="me-3">Location Type:</label>
               
              </div>

              <!-- Conditional display based on location type -->
              <div *ngIf="locationType === 'fixed'">
                <div class="row">
                  <div class="col-md-12">
                    <div class="mb-3">
                      <label for="addressLine1" class="pb-2">Address</label>
                      <!-- {{organizationAddressDetail.addressLine1}} -->
                      <input type="text" id="addressLine1" placeholder="Address line 1" ngx-google-places-autocomplete
                        #placesRef="ngx-places" (onAddressChange)="handleAddressChange($event)" required
                        name="addressLine1" class="form-control" [(ngModel)]="organizationAddressDetail.addressLine1" />
                      <a class="fetch-location" (click)="currentLocation()">
                        <span *ngIf="!fetchCurrentLocationLoader">
                          <i class="ti ti-current-location" style="padding-right: 8px"></i>
                          Fetch Current Location
                        </span>
                        <div class="loader-fetching-location" *ngIf="fetchCurrentLocationLoader">
                          <i class="ti ti-current-location" style="padding-right: 8px"></i>
                          Fetching
                          <span></span>
                          <span></span>
                          <span></span>
                        </div>
                      </a>
                    </div>
                  </div>
                  <div class="col-md-4">
                    
                    <div class="mb-3">
                      <label for="radius" class="pb-2">
                        Employee location Must be in
                        <i class="bi bi-exclamation-circle tolltip-icon"
                          ngbTooltip="Please enter the location range (in meters) within which your employees are allowed to mark their attendance. This ensures that attendance can only be marked when they are within the specified location range."
                          placement="top">
                        </i>
                      </label>
                      <input maxlength="5" class="form-control profile-input" id="radiusDropdown" name="radiusDropdown"
                        placeholder="Enter radius in meters" nz-input [(ngModel)]="organizationAddressDetail.radius"
                        (ngModelChange)="onChange($event)" [nzAutocomplete]="radiusAuto" required #radius="ngModel"
                        (keydown)="preventLeadingWhitespace($event)" (keypress)="allowOnlyNumbers($event)"
                        (focus)="onFocus()" />
                      <!-- <nz-autocomplete [nzDataSource]="radiusFilteredOptions" #radiusAuto></nz-autocomplete> -->
                      <nz-autocomplete #radiusAuto (select)="onSelect($event)">
                        <nz-auto-option *ngFor="let option of radiusFilteredOptions" [nzValue]="option.value"
                          [nzLabel]="option.label">
                          {{ option.label }}
                        </nz-auto-option>
                      </nz-autocomplete>
                      <div *ngIf="radius?.touched">
                        <p class="errortxt mt-2 mb-0" style="color:red" *ngIf="radius.errors?.required ">
                          <i class="bi bi-exclamation-circle"></i> Radius selection is required.
                        </p>
                        <p class="errortxt mt-2 mb-0" style="color:red" *ngIf="radius.errors?.maxlength">
                          <i class="bi bi-exclamation-circle"></i> Maximum 5 characters allowed.
                        </p>
                        <p class="errortxt mt-2 mb-0" style="color:red"
                          *ngIf="minRadius && organizationAddressDetail.radius != ''">
                          <i class="bi bi-exclamation-circle"></i> Radius must be at least 50 meters.
                        </p>
                        <p class="errortxt mt-2 mb-0" style="color:red" *ngIf="radius.value > 99000">
                          <i class="bi bi-exclamation-circle"></i> Maximum radius is 99,000 meters.
                        </p>
                      </div>


                    </div>
                  </div>
                </div>

                <div class="mb-10" *ngIf="isShowMap">
                  <section>
                    <div class="el-card-item">
                      <div class="el-card-avatar el-overlay-1">
                        <div class="map">
                          <agm-map style="height: 350px" [latitude]="lat" [longitude]="lng" [zoom]="zoom" [maxZoom]="20"
                            [zoomControl]="true" (mapClick)="onMapClick($event)" [disableDefaultUI]="true"
                            [keyboardShortcuts]="false">
                            <agm-marker *ngIf="
                              (organizationAddressDetail.latitude &&
                                organizationAddressDetail.longitude) ||
                              (lat && lng)
                            " [latitude]="lat" [longitude]="lng" draggable="true"
                              (dragEnd)="onMarkerDragEnd($event)"></agm-marker>
                          </agm-map>
                          <div class="map-locate-me">
                            <button type="button" class="locate-btn btn btn-sm text-white"
                              (click)="getCurrentLocation()">
                              <i class="fa fa-crosshairs"></i> Locate Me
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </section>
                </div>
              </div>
            </div>
          </div>

          <div class="modal-footer d-flex align-items-center justify-content-end">
            <button class="btn btn-primary" type="submit" [disabled]="toggle" aria-label="Next Step">
              <div *ngIf="toggle" class="dot-opacity-loader">
                <span></span>
                <span></span>
                <span></span>
              </div>
              <span *ngIf="!toggle">
                Save <i class="bi bi-arrow-right" style="padding-left: 8px"></i>
              </span>
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
  
</div>

<div *ngIf="POST_HOUR_TOGGLE" class="modal show d-block" id="post-hour" data-bs-backdrop="static" tabindex="-1"
  role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Define Post Hrs.</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
          (click)="postHourModalClose()"></button>
      </div>
      <div class="modal-body">
        <form nz-form #postHourOvertimeSettingForm="ngForm">
          <nz-form-item>
            <nz-form-label [nzFor]="'postHour'">Enter the number of hours before shift start to be counted as
              overtime</nz-form-label>
            <nz-form-control nzErrorTip="Please enter a valid hour.">
              <nz-time-picker id="postHour" nzFormat="HH:mm" [(ngModel)]="overtimeSettingRequest.hour"
                (ngModelChange)="updatePostHourOvertimeSetting($event)" nzPlaceHolder="Enter duration here"
                [nzDisabledHours]="disabledHours" required name="postHour" #postHour="ngModel"></nz-time-picker>
            </nz-form-control>
          </nz-form-item>
          <div class="d-flex justify-content-end modal-footer">
            <button type="submit" class="btn btn-outline-primary btn-round"
              [disabled]="postHourOvertimeSettingForm.invalid"
              (click)="enableOrDisablePostHourOvertimeSettingMethodCall()">
              Submit
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>


<button class="d-none" data-bs-toggle="modal" data-bs-target="#usersAlreadyAssigned"></button>
<div class="modal fade" id="usersAlreadyAssigned" tabindex="-1" role="dialog" aria-hidden="true"
  data-bs-backdrop="static">
  <div class="modal-dialog modal-dialog-centered" style="max-width: 500px" role="document">
    <div class="modal-content">
      <div class="modal-body manualUpload p-0" style="background-image: url(../assets/images/user-alredy-img.svg)">
        <div class="d-flex align-items-center justify-content-end pt-2 close-icon-btn" style="padding-right: 10px">
          <button type="button" class="close-btn" data-bs-dismiss="modal" aria-label="Close" #closeButton3
            (click)="closeModal()" data-bs-toggle="modal" data-bs-target="#shiftTime">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="31" viewBox="0 0 32 31" fill="none">
              <mask id="mask0_3479_11687" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="32"
                height="31">
                <rect x="0.972656" y="0.505066" width="30.0938" height="30.075" fill="#D9D9D9" />
              </mask>
              <g mask="url(#mask0_3479_11687)">
                <path
                  d="M8.99766 24.3144L7.24219 22.5601L14.2641 15.5426L7.24219 8.52507L8.99766 6.77069L16.0195 13.7882L23.0414 6.77069L24.7969 8.52507L17.775 15.5426L24.7969 22.5601L23.0414 24.3144L16.0195 17.2969L8.99766 24.3144Z"
                  fill="#181818" />
              </g>
            </svg>
          </button>
        </div>

        <!-- data-bs-toggle="modal"
        data-bs-target="#shiftTime" -->
        <div class="row p-3 pb-4 pt-4 align-items-center">
          <div class="col-md-8">
            <div class="manualUploadDetail persnol-details p-0 quickGuideHeading">
              <h5 class="alert-heading text-warning font-16 mb-2">
                Users Already Assigned to Another Shift
              </h5>
              <p class="mb-0 text-black">
                Do you want to add them to the new shift? Doing so <br />will
                remove them from the current shift.
              </p>
            </div>
          </div>
          <div class="col-md-4">
            <div class="side-img" style="background-image: url(../assets/images/user-img.svg)"></div>
          </div>
        </div>

        <div class="p-3 employee-list bg-white">
          <h4 class="mb-1">Employee List</h4>
          <div class="manualemployList" *ngIf="userNameWithShiftName?.length > 0">
            <div class="d-flex align-items-center justify-content-between persnol-details userList p-0 pt-2 pb-2"
              *ngFor="let list of userNameWithShiftName">
              <div class="d-flex align-items-center gap-3 w-100">
                <span class="userName">{{
                  list.userName.charAt(0).toUpperCase()
                  }}</span>

                <div class="w-100">
                  <h5 class="alert-heading font-13 mb-1">
                    {{ list.userName }}
                  </h5>
                  <div class="d-flex align-items-center justify-content-between">
                    <p class="mb-0 font-12">{{ list.userEmail || "N/A" }}</p>
                    <!-- <span class="spreter-line"></span> -->
                    <span class="font-12 fw-semibold text-primary pointer"
                      (click)="removeUser(list.userUuid)"><span>{{constant.REMOVE_SHIFT_STRING}} </span> {{
                      list.shiftName }} </span>
                  </div>
                </div>
              </div>
        
            </div>
          </div>
        </div>
      </div>
      <div class="border-top p-3">
        <div class="form-check" style="padding-left: 0px !important">
          <input type="checkbox" id="validationCheck" style="height: auto !important; position: relative; top: 2px"
            class="ng-dirty ng-touched" [(ngModel)]="isValidated" (change)="checkValidation()" /><label
            for="validationCheck" class="form-check-label iHaveRead" style="cursor: pointer;">
            I have validated the information and will proceed to add users to
            the new shift.
          </label>
        </div>
        <div class="d-flex align-items-center justify-content-end gap-3 mt-3">
          <button class="btn submit-add-more d-none" data-bs-dismiss="modal" aria-label="Close" #closeButton2>
            Cancel
          </button>

          <button class="btn mannualSubmit" [disabled]="!isValidated" [ngClass]="{'btn-border':isValidated}"
            (click)="registerShift()">
            <span *ngIf="!isRegisterLoad">Add all</span>
            <div class="dot-opacity-loader" *ngIf="isRegisterLoad">
              <span></span>
              <span></span>
              <span></span>
            </div>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>


<!--  delete shift -->

<button class="d-none" data-bs-toggle="modal" data-bs-target="#delete-shift"></button>
<div class="modal fade" id="delete-shift" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" style="max-width: 500px" role="document">
    <div class="modal-content">
      <div class="modal-body p-0 delete-text">
        <div class="delete-image d-flex align-items-center justify-content-center pt-4 pb-4">
          <div class="delete-close-btn">
            <button type="button" class="close-btn" data-bs-dismiss="modal" aria-label="Close" #closeButtonDeleteShift>
              <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" fill="none">
                <mask id="mask0_2031_1331" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="30"
                  height="30">
                  <rect width="30" height="30" fill="#D9D9D9" />
                </mask>
                <g mask="url(#mask0_2031_1331)">
                  <path
                    d="M8 23.75L6.25 22L13.25 15L6.25 8L8 6.25L15 13.25L22 6.25L23.75 8L16.75 15L23.75 22L22 23.75L15 16.75L8 23.75Z"
                    fill="black" />
                </g>
              </svg>
            </button>
          </div>
          <img src="/assets/images/delete-img.svg" style="width: 70px" />
        </div>
        <div class="bg-white p-4 text-center">

          <div>
            <h5 class="alert-heading font-18 mb-2">
              Are you sure you want to delete <br />
              this Shift?
            </h5>
            <p class="font-11">You will not be able to recover this</p>
          </div>

          <div class="mt-4 d-flex align-items-center flex-column">
            <button [disabled]="deleteToggle" class="btn continue-btn" *ngIf="deleteShiftTimingId > 0"
              (click)="deleteOrganizationShiftTimingMethodCall(deleteShiftTimingId)">
              Continue
              <i class="fa fa-spinner fa-spin" *ngIf="deleteToggle"></i>
            </button>
            <button class="btn cancel-btn pt-2" type="button" data-bs-dismiss="modal" aria-label="Close">
              Cancel
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<!--  delete automation -->

<button class="d-none" data-bs-toggle="modal" data-bs-target="#delete-automation"></button>
<div class="modal fade" id="delete-automation" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" style="max-width: 500px" role="document">
    <div class="modal-content">
      <div class="modal-body p-0 delete-text">
        <div class="delete-image d-flex align-items-center justify-content-center pt-4 pb-4">
          <div class="delete-close-btn">
            <button type="button" class="close-btn" data-bs-dismiss="modal" aria-label="Close" #closeButtonDeleteAutomation>
              <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" fill="none">
                <mask id="mask0_2031_1331" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="30"
                  height="30">
                  <rect width="30" height="30" fill="#D9D9D9" />
                </mask>
                <g mask="url(#mask0_2031_1331)">
                  <path
                    d="M8 23.75L6.25 22L13.25 15L6.25 8L8 6.25L15 13.25L22 6.25L23.75 8L16.75 15L23.75 22L22 23.75L15 16.75L8 23.75Z"
                    fill="black" />
                </g>
              </svg>
            </button>
          </div>
          <img src="/assets/images/delete-img.svg" style="width: 70px" />
        </div>
        <div class="bg-white p-4 text-center">

          <div>
            <h5 class="alert-heading font-18 mb-2">
              Are you sure you want to delete <br />
              this automation rule?
            </h5>
            <p class="font-11">You will not be able to recover this</p>
          </div>

          <div class="mt-4 d-flex align-items-center flex-column">
            <button [disabled]="deleteToggle2" class="btn continue-btn" *ngIf="deleteAutomationTimingId > 0"
              (click)="deleteAttendanceRuleDefinitionMethodCall(deleteAutomationTimingId, deleteAutomationAttendanceRuleTypeId)">
              Continue
              <i class="fa fa-spinner fa-spin" *ngIf="deleteToggle2"></i>
            </button>
            <button class="btn cancel-btn pt-2" type="button" data-bs-dismiss="modal" aria-label="Close">
              Cancel
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
