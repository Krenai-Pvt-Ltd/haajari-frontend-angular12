<div class="page-wrapper">
      <div class="container-fluid pl-1">
        <div class="col-md-12 mb-3">
          <div class="row">
            <div class="col-md-4 mb-3">
              <div *ngIf="!isLoading" class="form-roe-data pt-1">
                <h5 class="text-black mb-2 font-16">Exit Policy</h5>
                <p class="font-13">This will be displayed on your profile.</p>
              </div>
            </div>
            <div class="col-md-8">
              <!-- <div class="mb-3" > -->
                <!--  -->
               
                <div class="mt-3 mb-3 border p-2" *ngIf="isLoading">
                  <div class="row border-bottom pb-2 pt-2">
                    <div class="col-md-6">
                      <div class="">
                        <ngx-shimmer-loading [width]="'60%'" [height]="'20px'"
                          style="border-radius: 50%"></ngx-shimmer-loading>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="text-end">
                        <ngx-shimmer-loading [width]="'60%'" [height]="'20px'"
                          style="border-radius: 50%"></ngx-shimmer-loading>
                      </div>
                    </div>
                  </div>
                  <div class="row mt-3">
                    <div class="col-md-3">
                      <div class="">
                        <ngx-shimmer-loading [width]="'100%'" [height]="'15px'"
                          style="border-radius: 50%"></ngx-shimmer-loading>
                      </div>
                    </div>
                  </div>
                  <div class="row mt-2 border-bottom pb-2 pt-2">
                    <div class="col-md-4">
                      <div class="">
                        <ngx-shimmer-loading [width]="'100%'" [height]="'20px'"
                          style="border-radius: 50%"></ngx-shimmer-loading>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="">
                        <ngx-shimmer-loading [width]="'100%'" [height]="'20px'"
                          style="border-radius: 50%"></ngx-shimmer-loading>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="">
                        <ngx-shimmer-loading [width]="'100%'" [height]="'20px'"
                          style="border-radius: 50%"></ngx-shimmer-loading>
                      </div>
                    </div>
                  </div>
                  <div class="row mt-3">
                    <div class="col-md-3">
                      <div class="">
                        <ngx-shimmer-loading [width]="'100%'" [height]="'15px'"
                          style="border-radius: 50%"></ngx-shimmer-loading>
                      </div>
                    </div>
                  </div>
                  <div class="row mt-2 border-bottom pb-2 pt-2">
                    <div class="col-md-4">
                      <div class="">
                        <ngx-shimmer-loading [width]="'100%'" [height]="'20px'"
                          style="border-radius: 50%"></ngx-shimmer-loading>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="">
                        <ngx-shimmer-loading [width]="'100%'" [height]="'20px'"
                          style="border-radius: 50%"></ngx-shimmer-loading>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="">
                        <ngx-shimmer-loading [width]="'100%'" [height]="'20px'"
                          style="border-radius: 50%"></ngx-shimmer-loading>
                      </div>
                    </div>
                  </div>
                  <div class="row mt-3">
                    <div class="col-md-3">
                      <div class="">
                        <ngx-shimmer-loading [width]="'100%'" [height]="'15px'"
                          style="border-radius: 50%"></ngx-shimmer-loading>
                      </div>
                    </div>
                  </div>
                  <div class="row mt-2 border-bottom pb-2 pt-2">
                    <div class="col-md-4">
                      <div class="">
                        <ngx-shimmer-loading [width]="'100%'" [height]="'20px'"
                          style="border-radius: 50%"></ngx-shimmer-loading>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="">
                        <ngx-shimmer-loading [width]="'100%'" [height]="'20px'"
                          style="border-radius: 50%"></ngx-shimmer-loading>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="">
                        <ngx-shimmer-loading [width]="'100%'" [height]="'20px'"
                          style="border-radius: 50%"></ngx-shimmer-loading>
                      </div>
                    </div>
                  </div>
                  <div class="row mt-3">
                    <div class="col-md-3">
                      <div class="">
                        <ngx-shimmer-loading [width]="'100%'" [height]="'15px'"
                          style="border-radius: 50%"></ngx-shimmer-loading>
                      </div>
                    </div>
                  </div>
                  <div class="row mt-2 border-bottom pb-2 pt-2">
                    <div class="col-md-4">
                      <div class="">
                        <ngx-shimmer-loading [width]="'100%'" [height]="'20px'"
                          style="border-radius: 50%"></ngx-shimmer-loading>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="">
                        <ngx-shimmer-loading [width]="'100%'" [height]="'20px'"
                          style="border-radius: 50%"></ngx-shimmer-loading>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="">
                        <ngx-shimmer-loading [width]="'100%'" [height]="'20px'"
                          style="border-radius: 50%"></ngx-shimmer-loading>
                      </div>
                    </div>
                  </div>
                  <div class="row mt-3">
                    <div class="col-md-3">
                      <div class="">
                        <ngx-shimmer-loading [width]="'100%'" [height]="'15px'"
                          style="border-radius: 50%"></ngx-shimmer-loading>
                      </div>
                    </div>
                  </div>
                  <div class="row mt-2">
                    <div class="col-md-4">
                      <div class="">
                        <ngx-shimmer-loading [width]="'100%'" [height]="'20px'"
                          style="border-radius: 50%"></ngx-shimmer-loading>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="">
                        <ngx-shimmer-loading [width]="'100%'" [height]="'20px'"
                          style="border-radius: 50%"></ngx-shimmer-loading>
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="">
                        <ngx-shimmer-loading [width]="'100%'" [height]="'20px'"
                          style="border-radius: 50%"></ngx-shimmer-loading>
                      </div>
                    </div>
                  </div>
                <!-- </div> -->
              </div>
  
             
              <div class="add-shift-main-box" *ngIf="!isLoading">
                <div class="add-shift-box d-flex align-items-center justify-content-between p-3 pt-2 pb-2">
                    <h6 class="mb-0 lh-lgg">Exit Policy</h6>
                  <div  *ngIf="rbacService.hasWriteAccess(Routes.COMPANYSETTING)">
                    <a class="add-shift-time-btn" data-bs-toggle="modal" data-bs-target="#create-exit-policy">
                      <i class="bi bi-plus"></i> Create exit policy
                    </a>
                  </div>
                </div>
  
                <div *ngIf="exitPolicyList.length == 0" class="col-md-12">
                  <div class="d-flex justify-content-center p-4">
                    <img src="assets/images/no-data-found-img.svg" alt="" height="20%" width="10%">
                  </div>
                  <div class="d-flex justify-content-center"
                    style="margin-top: -1%; margin-left: 4%; margin-bottom: 5px;">
                    <h6>No Policy Created Yet!!</h6>
                  </div>
                </div>
  
                <!-- View company expense policy list -->
                <div *ngIf="exitPolicyList.length > 0">
                  <div class="shift-time p-3 m-3  d-flex align-items-center justify-content-between" *ngFor="let exitPolicy of exitPolicyList; let i = index">
                        <div class="d-flex align-items-center gap-3">
                          <div class="">
                            <span class="automation-rules-icon d-flex align-items-center justify-content-center">
                              <img src="assets/images/rule-icon.svg" />
                            </span>
                          </div>
                          <div>
                            <div class="d-flex align-items-center gap-3">
                            <h6 class="text-truncate mb-0 fonnt-13 text-capitalize">
                              {{ exitPolicy?.policyName }}
                            </h6>
                            
                            <p class="text-truncate mb-0 font-12 text-optional">( Notice Period Duration: {{exitPolicy.noticePeriodDuration}} )</p>
                          </div>

                            <small class="text-muted">Define the exit policy rules for the employees</small>
                          </div>
                        </div>
                        <div class="d-flex align-items-center gap-3 svg-width ">
                          <span class="staff-leave-setting bg-white font-12 fw-semibold border-rounded-2 lh-sm pointer d-flex align-items-center justify-content-center">Staff - {{ exitPolicy.totalEmployees }}</span>

                            <ng-container *ngIf="rbacService.hasWriteAccess(Routes.COMPANYSETTING)">
                            <a href="" data-bs-toggle="modal" data-bs-target="#create-exit-policy" (click)="getExitPolicyInformationById(exitPolicy)">
                              <!-- <i class="bi bi-pencil pointer" style="color: #6666f3" ></i> -->

                              <svg xmlns="http://www.w3.org/2000/svg" width="23" height="22" viewBox="0 0 23 22" fill="none">
                                <mask id="mask0_10613_125" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="23" height="22">
                                <rect width="22.0262" height="22" fill="#444444"/>
                                </mask>
                                <g mask="url(#mask0_10613_125)">
                                <path d="M4.58904 17.4173H5.74679L15.1414 8.03386L13.9837 6.87748L4.58904 16.2609V17.4173ZM3.2124 18.7923V15.6899L15.3181 3.60384C15.4568 3.47795 15.61 3.38071 15.7777 3.31211C15.9455 3.24336 16.1214 3.20898 16.3054 3.20898C16.4894 3.20898 16.6676 3.2416 16.84 3.30684C17.0125 3.37208 17.1652 3.47581 17.2982 3.61805L18.419 4.75151C18.5614 4.88427 18.6629 5.03705 18.7234 5.20984C18.784 5.38263 18.8143 5.55542 18.8143 5.72821C18.8143 5.91262 18.7828 6.08854 18.7198 6.25598C18.6567 6.42358 18.5565 6.57666 18.419 6.71523L6.31855 18.7923H3.2124ZM14.5524 7.46575L13.9837 6.87748L15.1414 8.03386L14.5524 7.46575Z" fill="#444444"/>
                                </g>
                              </svg>
                            
                            </a>
                            <a class="delete-rule" data-bs-toggle="modal" data-bs-target="#delete-policy" (click)="
                                      getExitPolicyId(exitPolicy.id)">
                               <svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" viewBox="0 0 23 23" fill="none">
                                <mask id="mask0_10613_119" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="23" height="23">
                                <rect x="0.0527344" y="0.164062" width="22.0262" height="22" fill="#D9D9D9"/>
                                </mask>
                                <g mask="url(#mask0_10613_119)">
                                <path d="M6.75945 18.956C6.3018 18.956 5.91083 18.7941 5.58656 18.4704C5.26244 18.1465 5.10038 17.756 5.10038 17.2989V5.66431H4.18262V4.28931H8.31253V3.47852H13.8191V4.28931H17.949V5.66431H17.0312V17.2989C17.0312 17.7619 16.8706 18.1539 16.5494 18.4747C16.2282 18.7956 15.8358 18.956 15.3722 18.956H6.75945ZM15.6546 5.66431H6.47701V17.2989C6.47701 17.3812 6.50347 17.4488 6.5564 17.5017C6.60932 17.5545 6.67701 17.581 6.75945 17.581H15.3722C15.4428 17.581 15.5075 17.5516 15.5663 17.4927C15.6251 17.4341 15.6546 17.3695 15.6546 17.2989V5.66431ZM8.6833 15.7476H10.0597V7.49764H8.6833V15.7476ZM12.0719 15.7476H13.4483V7.49764H12.0719V15.7476Z" fill="#FF0000"/>
                                </g>
                                </svg>
                            </a>
                          </ng-container>
                          <ng-container *ngIf="!rbacService.hasWriteAccess(Routes.COMPANYSETTING)">
                            <a href="" class="pointer" data-bs-toggle="modal" data-bs-target="#create-exit-policy" (click)="getExitPolicyInformationById(exitPolicy)">
                              <!-- <i class="bi bi-eye pointer" style="color: #6666f3" ></i> -->
                              <svg *ngIf="!rbacService.hasWriteAccess(Routes.LEAVESETTING)" xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 17 17" fill="none">
                                <mask id="mask0_9177_4533" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="17" height="17">
                                  <rect width="17" height="17" fill="#D9D9D9"/>
                                </mask>
                                <g mask="url(#mask0_9177_4533)">
                                  <path d="M8.50016 11.334C9.38558 11.334 10.1382 11.0241 10.758 10.4043C11.3778 9.7845 11.6877 9.0319 11.6877 8.14648C11.6877 7.26107 11.3778 6.50846 10.758 5.88867C10.1382 5.26888 9.38558 4.95898 8.50016 4.95898C7.61475 4.95898 6.86214 5.26888 6.24235 5.88867C5.62256 6.50846 5.31266 7.26107 5.31266 8.14648C5.31266 9.0319 5.62256 9.7845 6.24235 10.4043C6.86214 11.0241 7.61475 11.334 8.50016 11.334ZM8.50016 10.059C7.96891 10.059 7.51735 9.87305 7.14548 9.50117C6.7736 9.1293 6.58766 8.67773 6.58766 8.14648C6.58766 7.61523 6.7736 7.16367 7.14548 6.7918C7.51735 6.41992 7.96891 6.23398 8.50016 6.23398C9.03141 6.23398 9.48298 6.41992 9.85485 6.7918C10.2267 7.16367 10.4127 7.61523 10.4127 8.14648C10.4127 8.67773 10.2267 9.1293 9.85485 9.50117C9.48298 9.87305 9.03141 10.059 8.50016 10.059ZM8.50016 13.459C6.77655 13.459 5.20641 12.9779 3.78975 12.0158C2.37308 11.0536 1.346 9.76385 0.708496 8.14648C1.346 6.52912 2.37308 5.23937 3.78975 4.27721C5.20641 3.31506 6.77655 2.83398 8.50016 2.83398C10.2238 2.83398 11.7939 3.31506 13.2106 4.27721C14.6272 5.23937 15.6543 6.52912 16.2918 8.14648C15.6543 9.76385 14.6272 11.0536 13.2106 12.0158C11.7939 12.9779 10.2238 13.459 8.50016 13.459ZM8.50016 12.0423C9.83419 12.0423 11.059 11.6911 12.1746 10.9887C13.2903 10.2862 14.1432 9.33885 14.7335 8.14648C14.1432 6.95412 13.2903 6.00673 12.1746 5.3043C11.059 4.60187 9.83419 4.25065 8.50016 4.25065C7.16613 4.25065 5.94131 4.60187 4.82568 5.3043C3.71006 6.00673 2.85711 6.95412 2.26683 8.14648C2.85711 9.33885 3.71006 10.2862 4.82568 10.9887C5.94131 11.6911 7.16613 12.0423 8.50016 12.0423Z" fill="#444444"/>
                                </g>
                              </svg>
                            </a>
                          </ng-container>

                        </div>
                  </div>
                </div>
                <!-- View company expense policy list end -->
  
              </div>
              <!-- Create Leave Template End -->
  
              <div class="col-md-1"></div>
            </div>
          </div>
  
  
        </div>
         <!-- Create and View Company Expense start -->
      </div>
  </div>
  




<button type="button" class="btn btn-primary d-none" data-bs-toggle="modal" data-bs-target="#create-exit-policy">
  Create exit policy
</button>

<!-- Modal -->
<div class="modal fade" id="create-exit-policy" tabindex="-1" role="dialog" #assetRequestModal aria-hidden="true"
  aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl modal-dialog-centered"  role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Create another template</h5>
        <button type="button" class="close-btn" data-bs-dismiss="modal" aria-label="Close" (click)="clearForm(exitForm)" #closeExitPolicyModal>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
            <mask id="mask0_5037_2014" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="24"
              height="24">
              <rect width="24" height="24" fill="#D9D9D9" />
            </mask>
            <g mask="url(#mask0_5037_2014)">
              <path d="M6.4 19L5 17.6L10.6 12L5 6.4L6.4 5L12 10.6L17.6 5L19 6.4L13.4 12L19 17.6L17.6 19L12 13.4L6.4 19Z"
                fill="black" />
            </g>
          </svg>
        </button>
      </div>

      <div class="modal-body p-0">
        <div class="exit-policy-modal">
          <div class="row h-100 p-0 m-0">
            <div class="col-md-3 p-0 m-0">
              <div class="exit-policy-sidebar-menu">
                <div class="nav flex-column nav-pills pt-3" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                
                  <button class="nav-link active" id="home-tab" data-bs-toggle="pill" data-bs-target="#shiftime" type="button"
                    role="tab" aria-controls="policy-creatio" aria-selected="false" 
                    [class.active]="activeTab === 'exitPolicy'" (click)="exitPolicySelectionTab()" #exitPolicyTab>
                    Policy Creation
                  </button>
                  <button class="nav-link" id="v-pills-messages-tab" data-bs-toggle="pill" data-bs-target="#staffselection"
                  [attr.tabindex]="exitForm.invalid ? -1 : null" [attr.aria-selected]="!exitForm.invalid"
                    type="button" role="tab" aria-controls="staffselection" aria-selected="false" 
                    #staffActiveTabInShiftTiming [class.active]="activeTab === 'staffselection'"
                    (click)="staffActiveTabInShiftTimingMethod()" [disabled]="policyName == '' || noticePeriodDuration == ''">
                    Staff selection
                  </button>

                </div>
              </div>
            </div>
            <div class="col-md-9 p-0 m-0">
              <div class="policy-templete p-3 bg-white">
                <div class="tab-content" id="v-pills-tabContent">
                  <div class="tab-pane fade show active" id="shiftime" role="tabpanel"
                  [class.show]="activeTab === 'exitPolicy'" [class.active]="activeTab === 'exitPolicy'"  aria-labelledby="v-pills-home-tab">
                    
                  <form #exitForm="ngForm" ngNativeValidate [ngClass]="{'disable-action-item':!rbacService.hasWriteAccess(Routes.COMPANYSETTING)}">

                    <div class="row register-form-box">
                      <div class="col-md-12 mb-3">
                        <label for="templateName" class="pb-2">
                          Policy Name
                        </label>
                        <input [disabled]="tempPolicyName !== ''" type="text" class="form-control whatapp-login-input"
                        id="policyNameInput" placeholder="Enter policy name" required [(ngModel)]="policyName"
                        name="policyNameInput" #policyNameInput="ngModel" />
                      <div *ngIf="policyNameInput.invalid && policyNameInput.touched" class="text-danger">
                        Policy name is required.
                      </div>

                      </div>
                      <div class="col-md-6 mb-3">
                        <label for="templateName" class="pb-2">
                          Notice Duration
                        </label>
                        <input type="number" class="form-control whatapp-login-input" min="1" 
                        id="noticePeriod" placeholder="Enter notice period" required [(ngModel)]="noticePeriodDuration" 
                        name="noticePeriodInput" #noticePeriodInput="ngModel" />
                      <div *ngIf="noticePeriodInput.invalid && noticePeriodInput.touched" class="text-danger">
                          Notice Period is required.
                      </div>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label for="templateName" class="pb-2">
                          FNF Duration
                        </label>
                        <input type="number" class="form-control whatapp-login-input" min="1" 
                        id="fnfPeriod" placeholder="Enter FNF duration" required [(ngModel)]="fnfPeriodDuration" 
                        name="fnfPeriodInput" #fnfPeriodInput="ngModel" />
                        <div *ngIf="fnfPeriodInput.invalid && fnfPeriodInput.touched" class="text-danger">
                            FNF duration is required.
                        </div>

                      </div>

                      <div class="col-md-12">
                        <label for="templateName" class="pb-2">
                          Can leave be taken during the notice period?
                        </label>
                        <div class="row">
                          <div class="col-md-6">
                            <label class="form-check assets-req d-flex align-items-center justify-content-start">
                              <input type="radio" id="yes" name="leaveType" value="yes" class="form-check-input"
                              [(ngModel)]="exitLeaveType" (change)="onExitLeaveChange(1)">
                              <p class="form-check-label mb-0">Certainly, Yes</p>
                            </label>

                          </div>
                          <div class="col-md-6">
                            <label class="form-check assets-req d-flex align-items-center justify-content-start">
                              <input type="radio" id="no" name="leaveType" value="no" class="form-check-input"
                              [(ngModel)]="exitLeaveType" (change)="onExitLeaveChange(0)">
                              <p class="form-check-label mb-0">Not in this case</p>
                            </label>
                          
                          </div>
                        </div>
                      </div>
                    </div>

                  </form>
                    <div class="leave-footer">
                      <div class="p-3 information-box">
                      <h5 class="font-14 mb-1 text-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                          <mask id="mask0_6327_3508" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20">
                            <rect width="20" height="20" fill="#D9D9D9" />
                          </mask>
                          <g mask="url(#mask0_6327_3508)">
                            <path
                              d="M9.16602 14.1641H10.8327V9.16406H9.16602V14.1641ZM9.99935 7.4974C10.2355 7.4974 10.4334 7.41753 10.5931 7.25781C10.7528 7.09809 10.8327 6.90017 10.8327 6.66406C10.8327 6.42795 10.7528 6.23003 10.5931 6.07031C10.4334 5.91059 10.2355 5.83073 9.99935 5.83073C9.76324 5.83073 9.56532 5.91059 9.4056 6.07031C9.24588 6.23003 9.16602 6.42795 9.16602 6.66406C9.16602 6.90017 9.24588 7.09809 9.4056 7.25781C9.56532 7.41753 9.76324 7.4974 9.99935 7.4974ZM9.99935 18.3307C8.84657 18.3307 7.76324 18.112 6.74935 17.6745C5.73546 17.237 4.85352 16.6432 4.10352 15.8932C3.35352 15.1432 2.75977 14.2613 2.32227 13.2474C1.88477 12.2335 1.66602 11.1502 1.66602 9.9974C1.66602 8.84462 1.88477 7.76128 2.32227 6.7474C2.75977 5.73351 3.35352 4.85156 4.10352 4.10156C4.85352 3.35156 5.73546 2.75781 6.74935 2.32031C7.76324 1.88281 8.84657 1.66406 9.99935 1.66406C11.1521 1.66406 12.2355 1.88281 13.2493 2.32031C14.2632 2.75781 15.1452 3.35156 15.8952 4.10156C16.6452 4.85156 17.2389 5.73351 17.6764 6.7474C18.1139 7.76128 18.3327 8.84462 18.3327 9.9974C18.3327 11.1502 18.1139 12.2335 17.6764 13.2474C17.2389 14.2613 16.6452 15.1432 15.8952 15.8932C15.1452 16.6432 14.2632 17.237 13.2493 17.6745C12.2355 18.112 11.1521 18.3307 9.99935 18.3307ZM9.99935 16.6641C11.8605 16.6641 13.4368 16.0182 14.7285 14.7266C16.0202 13.4349 16.666 11.8585 16.666 9.9974C16.666 8.13628 16.0202 6.5599 14.7285 5.26823C13.4368 3.97656 11.8605 3.33073 9.99935 3.33073C8.13824 3.33073 6.56185 3.97656 5.27018 5.26823C3.97852 6.5599 3.33268 8.13628 3.33268 9.9974C3.33268 11.8585 3.97852 13.4349 5.27018 14.7266C6.56185 16.0182 8.13824 16.6641 9.99935 16.6641Z"
                              fill="#6666F2" />
                          </g>
                        </svg>
                        Information</h5>
                      <p class="mb-0 font-12">A notice period template outlines the required working days, leave utilization policy, and schedule for final settlements during an employee's notice period.</p>
                      </div>
                      <div class="modal-footer d-flex align-items-center justify-content-end bg-white" *ngIf="rbacService.hasWriteAccess(Routes.COMPANYSETTING)">
                        <button type="submit" class="btn p-0 next-btn" (click)="staffActiveTabInShiftTimingMethod()"
                        [disabled]="policyName == '' || noticePeriodDuration == '' || fnfPeriodDuration == '' || exitLeaveType == '' || exitForm.invalid">
                          Next 
                          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none">
                            <path d="M1.95801 11.0005C1.95801 10.8131 2.01656 10.6609 2.13366 10.5438C2.25076 10.4267 2.40299 10.3681 2.59035 10.3681H18.1179L13.9725 6.22276C13.832 6.08224 13.7618 5.9183 13.7618 5.73094C13.7618 5.54358 13.832 5.39135 13.9725 5.27424C14.1131 5.15714 14.277 5.09859 14.4644 5.09859C14.6517 5.09859 14.8157 5.14543 14.9562 5.23911L20.2257 10.5086C20.3194 10.6492 20.3662 10.8131 20.3662 11.0005C20.3662 11.1878 20.3194 11.3518 20.2257 11.4923L14.9562 16.7618C14.8157 16.8555 14.6517 16.9023 14.4644 16.9023C14.277 16.9023 14.1131 16.8438 13.9725 16.7267C13.832 16.6096 13.7618 16.4574 13.7618 16.27C13.7618 16.0826 13.832 15.9187 13.9725 15.7782L18.1179 11.6328H2.59035C2.40299 11.6328 2.25076 11.5743 2.13366 11.4572C2.01656 11.3401 1.95801 11.1878 1.95801 11.0005Z"
                              fill="#6666F2">
                            </path>
                          </svg>
                        </button>
                      </div>
                    </div>

                  </div>

                   <!-- Staff selection start -->
                  <div class="tab-pane fade" id="staffselection" role="tabpanel" [class.show]="activeTab === 'staffselection'"
                  [class.active]="activeTab === 'staffselection'">

                    <div class="staff-selection-box">
                      <div class="obboard-employee-list">
                        <div class="onboard-add row align-items-center mx-0">
                          <div class="col-md-12 p-0">
                            <div class="row justify-content-between align-items-center mx-0">
                              <div class="col-lg-12 col-md-12 col-sm-12 ps-0">
                                <div class="d-flex justify-content-start align-items-center">
                      
                                  <!-- Status Filter -->
                                  <div class="dropdown empFilerDropfilter">
                                    <button type="button" id="statusDropdown" data-bs-toggle="dropdown" aria-expanded="false"
                                      class="btn btn-secondary dropdown-toggle new-deopdown">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="25" viewBox="0 0 24 25" fill="none">
                                      <mask id="mask0_6268_7208" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="24" height="25">
                                        <rect y="0.5" width="24" height="24" fill="#D9D9D9" />
                                      </mask>
                                      <g mask="url(#mask0_6268_7208)">
                                        <path d="M10 18.5V16.5H14V18.5H10ZM6 13.5V11.5H18V13.5H6ZM3 8.5V6.5H21V8.5H3Z" fill="#1C1B1F" />
                                      </g>
                                    </svg>&nbsp;
                                      {{ selectedTeamName }} <i class="bi bi-caret-down-fill"></i>
                                    </button>
                                    <ul class="dropdown-menu" aria-labelledby="statusDropdown">
                                      <li (click)="selectTeam(0)">
                                        <a class="dropdown-item" >
                                          All
                                        </a>
                                      </li>
                                      <li *ngFor="let tn of teamNameList" (click)="selectTeam(tn.teamId)">
                                        <a class="dropdown-item">
                                          {{ tn.teamName }}
                                        </a>
                                      </li>
                                    </ul>
                                  </div>
                      
                                  <!-- Search -->
                                  <div class="onboarding-date d-flex align-items-center justify-content-between position-relative w-100">
                                    <form novalidate class="searching d-flex align-items-center justify-content-between" style="width: 100%;">
                                      <div class="form-group" style="width: 100%; position: relative;">
                                        <input type="text"id="searchText" placeholder="Search by name and role"
                                        (keyup)="searchUsers()" [(ngModel)]="searchText" [ngModelOptions]="{ standalone: true }"
                                          class="form-control me-2" style="padding: 10px 45px;" />
                      
                                        <i class="bi bi-search search-icon" *ngIf="searchText.length == 0"></i>
                      
                                        <i *ngIf="searchText.length !== 0" class="bi bi-x pointer search-icon" style="font-size: 20px !important; color:#6666f3 !important;"  (click)="clearSearchText()"></i>
                                      </div>

                                      <div class="d-flex align-items-center gap-3 w-100 justify-content-end">
                                         <a class="text-primary all-select">{{ selectedStaffIdsUser.length }} selected of
                                          {{ totalUserCount }}</a>
                                         <a *ngIf="selectedStaffIdsUser.length > 0 && rbacService.hasWriteAccess(Routes.COMPANYSETTING)" class="text-danger close-all-select" (click)="clearIds()">Clear all users</a>
                                      </div>
                                    </form>
                      
                                  </div>

                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="staff-table">
                      <div class="table-responsive bg-white mt-3">
                        <table class="table empOnnoardtable">
                          <thead class="thead-light">
                            <tr>
                              <th class="text-left font-13" style="width: 10%">
                                <div class="form-check policy-checkbox">
                                  <!-- <input class="form-check-input" type="checkbox" value="" id="defaultCheck1"> -->
                                  <input class="form-check-input" type="checkBox" (click)="selectAllEmployee()" [checked]="allselected" />
                                </div>
                              </th>
                              <th class="text-left font-13" style="width: 30%">Name</th>
                              <th class="text-left font-13" style="width: 30%">Email Address</th>
                              <th class="text-left font-13" style="width: 30%">Phone Number</th>
                            </tr>
                          </thead>

                          <tbody *ngIf="staffLoading">
                            <tr>
                              <td colspan="9" class="text-center" style="height: 40vh;">
                                <img src="assets/images/load-8.gif" style="width: 50px;">
                              </td>
                            </tr>
                          </tbody>

                          <tbody *ngIf="!staffLoading">
                            <tr *ngFor="let staff of staffs; let i = index">
                              <td>
                                <div class="form-check policy-checkbox">
                                  <input class="form-check-input" type="checkBox" name="checkBox{{ i }}" id="checkBoxid{{ i }}" 
                                  [ngClass]="{'disable-action-item':!rbacService.hasWriteAccess(Routes.COMPANYSETTING)}"
                                  (click)="selectSingle(staff, i)" [checked]="staff.checked" />
                                </div>
                              </td>
                              <td>
                                <span class="table-font-weight">{{ staff.name }}</span>
                              </td>
                              <td>
                                <span class="table-font-weight">{{ staff.email ? staff.email : "N/A" }}</span>
                              </td>
                              <td>
                                <span class="table-font-weight">{{ staff.phoneNumber || "N/A" }}</span>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      </div>
                    </div>
                    <div class="leave-footer">
                      <div class="p-3 d-flex align-items-center justify-content-between bg-white">

                        <p class="mb-0 font-13">Showing {{ staffs.length }} of {{ total }} members</p>

                        <ngb-pagination lass="pagination-ul" [collectionSize]="total" [rotate]="true" (pageChange)="pageChanged($event)"
                        [pageSize]="databaseHelper.itemPerPage" [(page)]="databaseHelper.currentPage" [maxSize]="4"
                        [boundaryLinks]="true"></ngb-pagination>



                      </div>
                      <div class="modal-footer d-flex align-items-center justify-content-end bg-white" *ngIf="rbacService.hasWriteAccess(Routes.COMPANYSETTING)">
                        <button *ngIf="!userMappedLoading" type="button" (click)="getUserMappedWithPolicy(exitForm)"
                        [disabled]="selectedStaffIdsUser.length == 0 || userMappedLoading" class="btn p-0 next-btn">
                        {{this.exitPolicyReq.id == 0 ? 'Submit' : 'Update'}}
                          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none">
                            <path
                              d="M1.95801 11.0005C1.95801 10.8131 2.01656 10.6609 2.13366 10.5438C2.25076 10.4267 2.40299 10.3681 2.59035 10.3681H18.1179L13.9725 6.22276C13.832 6.08224 13.7618 5.9183 13.7618 5.73094C13.7618 5.54358 13.832 5.39135 13.9725 5.27424C14.1131 5.15714 14.277 5.09859 14.4644 5.09859C14.6517 5.09859 14.8157 5.14543 14.9562 5.23911L20.2257 10.5086C20.3194 10.6492 20.3662 10.8131 20.3662 11.0005C20.3662 11.1878 20.3194 11.3518 20.2257 11.4923L14.9562 16.7618C14.8157 16.8555 14.6517 16.9023 14.4644 16.9023C14.277 16.9023 14.1131 16.8438 13.9725 16.7267C13.832 16.6096 13.7618 16.4574 13.7618 16.27C13.7618 16.0826 13.832 15.9187 13.9725 15.7782L18.1179 11.6328H2.59035C2.40299 11.6328 2.25076 11.5743 2.13366 11.4572C2.01656 11.3401 1.95801 11.1878 1.95801 11.0005Z"
                              fill="#6666F2">
                            </path>
                          </svg>
                        </button>

                        <div class="dot-opacity-loader" *ngIf="userMappedLoading">
                          <span></span>
                          <span></span>
                          <span></span>
                        </div>

                      </div>
                    </div>

                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
    


<!-- delete policy modal -->
<div class="modal fade" id="delete-policy" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" style="max-width: 500px" role="document">
    <div class="modal-content">
      <div class="modal-body p-0 delete-text">
        <div class="delete-image d-flex align-items-center justify-content-center pt-4 pb-4">
          <div class="delete-close-btn">
            <button type="button" class="close-btn" data-bs-dismiss="modal" aria-label="Close"
              #closeButtonDeleteExpensePolicy>
              <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" fill="none">
                <mask id="mask0_2031_1331" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="30"
                  height="30">
                  <rect width="30" height="30" fill="#D9D9D9" />
                </mask>
                <g mask="url(#mask0_2031_1331)">
                  <path
                    d="M8 23.75L6.25 22L13.25 15L6.25 8L8 6.25L15 13.25L22 6.25L23.75 8L16.75 15L23.75 22L22 23.75L15 16.75L8 23.75Z"
                    fill="black" />
                </g>
              </svg>
            </button>
          </div>
          <img src="/assets/images/delete-img.svg" style="width: 70px" />
        </div>
        <div class="bg-white p-4 text-center">

          <!-- <div *ngIf="expenseAppliedCount == 0"> -->
          <div >
            <h5 class="alert-heading font-18 mb-2 lh-base">
              Are you sure you want to delete <br />
              Exit Policy ?
            </h5>
            <p class="font-11">You will not be able to recover this</p>
          </div>

          <div class="mt-4 d-flex align-items-center flex-column">

            <button [disabled]="deletePolicyToggle" class="btn continue-btn" 
              (click)="deleteExitPolicy()">
              Continue
              <i class="fa fa-spinner fa-spin" *ngIf="deletePolicyToggle"></i>
            </button>
            <button class="btn cancel-btn pt-2" type="button" data-bs-dismiss="modal" aria-label="Close">
              Cancel
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- delete policy modal end-->



<!-- Alread mapped users with policy -->
<button class="d-none" data-bs-toggle="modal" data-bs-target="#usersAlreadyAssigned" #usersAlreadyAssigned class="d-none"></button>

<div class="modal fade" id="usersAlreadyAssigned" tabindex="-1" role="dialog" aria-hidden="true"
  data-bs-backdrop="static" #usersAlreadyAssigned>
  <div class="modal-dialog modal-dialog-centered" style="max-width: 500px" role="document">
    <div class="modal-content">
      <div class="modal-body manualUpload p-0" style="background-image: url(../assets/images/user-alredy-img.svg)">
        <div class="d-flex align-items-center justify-content-end pt-2 close-icon-btn" style="padding-right: 10px">
          <button type="button" class="close-btn" data-bs-dismiss="modal" aria-label="Close" #closeButton
            (click)="closeModal()" data-bs-toggle="modal" data-bs-target="#shiftTime">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="31" viewBox="0 0 32 31" fill="none">
              <mask id="mask0_3479_11687" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="32"
                height="31">
                <rect x="0.972656" y="0.505066" width="30.0938" height="30.075" fill="#D9D9D9" />
              </mask>
              <g mask="url(#mask0_3479_11687)">
                <path
                  d="M8.99766 24.3144L7.24219 22.5601L14.2641 15.5426L7.24219 8.52507L8.99766 6.77069L16.0195 13.7882L23.0414 6.77069L24.7969 8.52507L17.775 15.5426L24.7969 22.5601L23.0414 24.3144L16.0195 17.2969L8.99766 24.3144Z"
                  fill="#181818" />
              </g>
            </svg>
          </button>
        </div>

        <div class="row p-3 pb-4 pt-4 align-items-center">
          <div class="col-md-8">
            <div class="manualUploadDetail persnol-details p-0 quickGuideHeading">
              <h5 class="alert-heading text-warning font-16 mb-2">
                Users Already Assigned to Another Location
              </h5>
              <p class="mb-0 text-black">
                Do you want to add them to the new location? Doing so will
                remove them from the current location.
              </p>
            </div>
          </div>
          <div class="col-md-4">
            <div class="side-img" style="background-image: url(../assets/images/user-img.svg)"></div>
          </div>
        </div>

        <div class="p-3 employee-list bg-white">
          <h4 class="mb-1">Employee List</h4>
          <div class="manualemployList" *ngIf="userNameWithBranchName.length > 0">
            <div class="d-flex align-items-center justify-content-between persnol-details userList p-0 pt-2 pb-2"
              *ngFor="let list of userNameWithBranchName">
              <div class="d-flex align-items-center gap-3">
                <span class="userName">{{
                  list.userName.charAt(0).toUpperCase()
                  }}</span>

                <div>
                  <h5 class="alert-heading font-13 mb-1">
                    {{ list.userName }}
                  </h5>
                  <div class="d-flex align-items-center gap-2">
                    <p class="mb-0 font-11">{{ list.userEmail || "N/A" }}</p>
                    <span class="spreter-line"></span>
                    <span class="shift-tag">{{ list.branchName || "N/A"}}</span>
                  </div>
                </div>
              </div>
              <div>
                <button class="btn p-0 addUserRemvo" (click)="removeUser(list.id)">
                  <svg xmlns="http://www.w3.org/2000/svg" width="22" height="23" viewBox="0 0 22 23" fill="none">
                    <mask id="mask0_3479_11708" style="mask-type: alpha" maskUnits="userSpaceOnUse" x="0" y="0"
                      width="22" height="23">
                      <rect x="0.015625" y="0.57843" width="21.8948" height="21.8948" fill="white" />
                    </mask>
                    <g mask="url(#mask0_3479_11708)">
                      <path
                        d="M6.40482 19.7378C5.90306 19.7378 5.47353 19.5592 5.11622 19.2019C4.75891 18.8446 4.58025 18.415 4.58025 17.9133V6.05359H3.66797V4.22903H8.22939V3.31674H13.7031V4.22903H18.2645V6.05359H17.3522V17.9133C17.3522 18.415 17.1736 18.8446 16.8163 19.2019C16.4589 19.5592 16.0294 19.7378 15.5277 19.7378H6.40482ZM15.5277 6.05359H6.40482V17.9133H15.5277V6.05359ZM8.22939 16.0887H10.054V7.87816H8.22939V16.0887ZM11.8785 16.0887H13.7031V7.87816H11.8785V16.0887Z"
                        fill="#FF0404" />
                    </g>
                  </svg>
                  Remove
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="border-top p-3">
        <div class="form-check d-flex align-items-start" style="padding-left: 0px !important">
          <input type="checkbox" id="validationCheck" style="height: auto !important; position: relative; top: 2px"
            class="ng-dirty ng-touched" [(ngModel)]="isValidated" (change)="checkValidation()" /><label
            for="termsAndConditions" class="form-check-label iHaveRead">
            I have validated the information and will proceed to add users to
            the new location.
          </label>
        </div>
        <div class="d-flex align-items-center justify-content-end gap-3 mt-3">

          <button class="btn submit-add-more d-none" data-bs-dismiss="modal" aria-label="Close" #closeButton2>
            Cancel
          </button>

          <div>
            <button *ngIf="!registerToggle" type="button" class="btn mannualSubmit"
            [disabled]="!isValidated" (click)="registerExitPolicy(exitForm)">
              Add all
            </button>

            <div class="dot-opacity-loader" *ngIf="registerToggle">
              <span></span>
              <span></span>
              <span></span>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>
<!-- Alread mapped users with policy end-->